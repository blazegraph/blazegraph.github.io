<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Wed Jan 20 23:39:14 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>VerifyAggregates (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-20">
<link rel="stylesheet" type="text/css" href="../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="VerifyAggregates (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VerifyAggregates.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/bigdata/rdf/sail/sparql/ValueExprBuilder.html" title="class in com.bigdata.rdf.sail.sparql"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/bigdata/rdf/sail/sparql/VerifyAggregates.html" target="_top">Frames</a></li>
<li><a href="VerifyAggregates.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rdf.sail.sparql</div>
<h2 title="Class VerifyAggregates" class="title">Class VerifyAggregates</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.rdf.sail.sparql.VerifyAggregates</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">VerifyAggregates</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">An object which encapsulates the validation and state of an aggregation
 operation with an optional GROUP BY clause, SELECT expressions, and an
 optional HAVING clause. The SELECT expressions MUST be aggregates (if the
 SELECT expressions do not involve aggregates then you should not be using an
 aggregation operator to compute the select expressions).
 <p>
 Note: This is a port of <a href="../../../../../com/bigdata/bop/solutions/GroupByState.html" title="class in com.bigdata.bop.solutions"><code>GroupByState</code></a> that
 does not depend on the blazegraph operator model. It was developed as part of
 BLZG-1176 to decouple the SPARQL parser from the database.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd><code>https://jira.blazegraph.com/browse/BLZG-1176</code></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../com/bigdata/rdf/sail/sparql/VerifyAggregates.html#VerifyAggregates(com.bigdata.rdf.sparql.ast.ProjectionNode,%20com.bigdata.rdf.sparql.ast.GroupByNode,%20com.bigdata.rdf.sparql.ast.HavingNode)">VerifyAggregates</a></strong>(<a href="../../../../../com/bigdata/rdf/sparql/ast/ProjectionNode.html" title="class in com.bigdata.rdf.sparql.ast">ProjectionNode</a>&nbsp;projection,
                <a href="../../../../../com/bigdata/rdf/sparql/ast/GroupByNode.html" title="class in com.bigdata.rdf.sparql.ast">GroupByNode</a>&nbsp;groupBy,
                <a href="../../../../../com/bigdata/rdf/sparql/ast/HavingNode.html" title="class in com.bigdata.rdf.sparql.ast">HavingNode</a>&nbsp;having)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/bigdata/rdf/sail/sparql/VerifyAggregates.html#isAggregate(com.bigdata.bop.BOp,%20boolean,%20java.util.concurrent.atomic.AtomicBoolean,%20java.util.concurrent.atomic.AtomicBoolean,%20java.util.concurrent.atomic.AtomicBoolean)">isAggregate</a></strong>(<a href="../../../../../com/bigdata/bop/BOp.html" title="interface in com.bigdata.bop">BOp</a>&nbsp;op,
           boolean&nbsp;isSelectClause,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicBoolean</a>&nbsp;isSelectDependency,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicBoolean</a>&nbsp;isNestedAggregates,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicBoolean</a>&nbsp;isAnyDistinct)</code>
<div class="block">Return <code>true</code> iff the expression is an aggregate.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../com/bigdata/rdf/sail/sparql/VerifyAggregates.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../../../com/bigdata/rdf/sail/sparql/VerifyAggregates.html#verifyAggregate(com.bigdata.rdf.sparql.ast.QueryBase)">verifyAggregate</a></strong>(<a href="../../../../../com/bigdata/rdf/sparql/ast/QueryBase.html" title="class in com.bigdata.rdf.sparql.ast">QueryBase</a>&nbsp;queryBase)</code>
<div class="block">Verify the various conditions that must be met when a query uses GROUP BY
 or when a query uses aggregates in a PROJECTION.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="VerifyAggregates(com.bigdata.rdf.sparql.ast.ProjectionNode, com.bigdata.rdf.sparql.ast.GroupByNode, com.bigdata.rdf.sparql.ast.HavingNode)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>VerifyAggregates</h4>
<pre>public&nbsp;VerifyAggregates(<a href="../../../../../com/bigdata/rdf/sparql/ast/ProjectionNode.html" title="class in com.bigdata.rdf.sparql.ast">ProjectionNode</a>&nbsp;projection,
                <a href="../../../../../com/bigdata/rdf/sparql/ast/GroupByNode.html" title="class in com.bigdata.rdf.sparql.ast">GroupByNode</a>&nbsp;groupBy,
                <a href="../../../../../com/bigdata/rdf/sparql/ast/HavingNode.html" title="class in com.bigdata.rdf.sparql.ast">HavingNode</a>&nbsp;having)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="isAggregate(com.bigdata.bop.BOp, boolean, java.util.concurrent.atomic.AtomicBoolean, java.util.concurrent.atomic.AtomicBoolean, java.util.concurrent.atomic.AtomicBoolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAggregate</h4>
<pre>protected&nbsp;boolean&nbsp;isAggregate(<a href="../../../../../com/bigdata/bop/BOp.html" title="interface in com.bigdata.bop">BOp</a>&nbsp;op,
                  boolean&nbsp;isSelectClause,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicBoolean</a>&nbsp;isSelectDependency,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicBoolean</a>&nbsp;isNestedAggregates,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicBoolean.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicBoolean</a>&nbsp;isAnyDistinct)</pre>
<div class="block">Return <code>true</code> iff the expression is an aggregate.
 <p>
 Aggregates may be built out of constants, references to <a href="../../../../../com/bigdata/bop/IVariable.html" title="interface in com.bigdata.bop"><code>IVariable</code></a>
 s which are already defined and which are themselves aggregates, and
 <a href="../../../../../com/bigdata/bop/aggregate/IAggregate.html" title="interface in com.bigdata.bop.aggregate"><code>IAggregate</code></a> functions. An <a href="../../../../../com/bigdata/bop/IVariable.html" title="interface in com.bigdata.bop"><code>IVariable</code></a> will be an aggregate
 if it appears as a bare variable in a GROUP_BY clause or if it declared
 by a prior value expression in a GROUP_BY or SELECT clause. Testing
 whether or not an <a href="../../../../../com/bigdata/bop/IValueExpression.html" title="interface in com.bigdata.bop"><code>IValueExpression</code></a> is an aggregate therefore
 depends on access to the set of known aggregates. The value expressions
 in the GROUP_BY clause must be processed first (in order) followed by the
 value expressions in the SELECT clause (in order).
 <p>
 An aggregate may use a non-aggregate variable only allowed within an
 <a href="../../../../../com/bigdata/bop/aggregate/IAggregate.html" title="interface in com.bigdata.bop.aggregate"><code>IAggregate</code></a> function. For example, given:
 <code>SUM(?x) as ?y</code>, <code>?x</code> must be a non-aggregate
 variable and <code>?y</code> will be an aggregate variable.
 <p>
 Aggregate variables may be used both inside and outside of an
 <a href="../../../../../com/bigdata/bop/aggregate/IAggregate.html" title="interface in com.bigdata.bop.aggregate"><code>IAggregate</code></a> function as long as the variable was declared before
 it was used. For example, the following are legal:
 
 <pre>
 SELECT SUM(?x) as ?y, SUM(?x + ?y) as ?z, SUM(?x)+AVG(?x) as ?z2
 
 SELECT SUM(?x) as ?y, SUM(?x + COUNT(?y)) as ?z
 </pre>
 
 Patterns where an aggregate depends on a prior aggregate prevent certain
 optimizations, notably you have to evaluate each aggregate in turn rather
 than evaluating them in parallel over the solutions is a group. If any
 such patterns are observed in the SELECT clause then this method will set
 <code>isSelectDependency := true</code> as a side-effect.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>op</code> - An <a href="../../../../../com/bigdata/bop/IValueExpression.html" title="interface in com.bigdata.bop"><code>IValueExpression</code></a> or <a href="../../../../../com/bigdata/bop/IConstraint.html" title="interface in com.bigdata.bop"><code>IConstraint</code></a>.</dd><dd><code>isSelectClause</code> - <code>true</code> if the <i>op</i> appears a SELECT clause.</dd><dd><code>isSelectDependency</code> - Set as a side-effect when an <a href="../../../../../com/bigdata/bop/IValueExpression.html" title="interface in com.bigdata.bop"><code>IValueExpression</code></a>
            appearing in a SELECT clause has a dependency on an
            <a href="../../../../../com/bigdata/bop/IVariable.html" title="interface in com.bigdata.bop"><code>IVariable</code></a> declared in the GROUP_BY clause or earlier
            in the SELECT clause. This argument is optional unless
            <i>isSelectClause</i> is <code>true</code>.</dd><dd><code>isNestedAggregates</code> - Set as a side-effect when an <a href="../../../../../com/bigdata/bop/IValueExpression.html" title="interface in com.bigdata.bop"><code>IValueExpression</code></a>
            containing an <a href="../../../../../com/bigdata/bop/aggregate/IAggregate.html" title="interface in com.bigdata.bop.aggregate"><code>IAggregate</code></a> nests another
            <a href="../../../../../com/bigdata/bop/aggregate/IAggregate.html" title="interface in com.bigdata.bop.aggregate"><code>IAggregate</code></a> within it.</dd><dd><code>isAnyDistinct</code> - Set as a side-effect if an <a href="../../../../../com/bigdata/bop/aggregate/IAggregate.html" title="interface in com.bigdata.bop.aggregate"><code>IAggregate</code></a> function is
            encountered which reports <code>true</code> for
            <a href="../../../../../com/bigdata/bop/aggregate/IAggregate.html#isDistinct()"><code>IAggregate.isDistinct()</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the operator is an aggregate.</dd></dl>
</li>
</ul>
<a name="verifyAggregate(com.bigdata.rdf.sparql.ast.QueryBase)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>verifyAggregate</h4>
<pre>public static&nbsp;void&nbsp;verifyAggregate(<a href="../../../../../com/bigdata/rdf/sparql/ast/QueryBase.html" title="class in com.bigdata.rdf.sparql.ast">QueryBase</a>&nbsp;queryBase)
                            throws <a href="../../../../../com/bigdata/rdf/sail/sparql/ast/VisitorException.html" title="class in com.bigdata.rdf.sail.sparql.ast">VisitorException</a></pre>
<div class="block">Verify the various conditions that must be met when a query uses GROUP BY
 or when a query uses aggregates in a PROJECTION.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>queryBase</code> - The query.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../com/bigdata/rdf/sail/sparql/ast/VisitorException.html" title="class in com.bigdata.rdf.sail.sparql.ast">VisitorException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/VerifyAggregates.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../com/bigdata/rdf/sail/sparql/ValueExprBuilder.html" title="class in com.bigdata.rdf.sail.sparql"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../../../index.html?com/bigdata/rdf/sail/sparql/VerifyAggregates.html" target="_top">Frames</a></li>
<li><a href="VerifyAggregates.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
