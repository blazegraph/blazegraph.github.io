<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Tue Jan 26 02:02:01 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>IndexSegmentBuilder (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)</title>
<meta name="date" content="2016-01-26">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IndexSegmentBuilder (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IndexSegmentBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/IndexSegmentAddressManager.html" title="class in com.bigdata.btree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/IndexSegmentBuilder.html" target="_top">Frames</a></li>
<li><a href="IndexSegmentBuilder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.btree</div>
<h2 title="Class IndexSegmentBuilder" class="title">Class IndexSegmentBuilder</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.btree.IndexSegmentBuilder</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;<a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">IndexSegmentBuilder</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;<a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a>&gt;</pre>
<div class="block">Builds an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> given a source btree and a target branching
 factor. There are two main use cases:
 <ol>
 
 <li>Evicting a key range of an index into an optimized on-disk index. In this
 case, the input is a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> that is ideally backed by a fully buffered
 <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> so that no random reads are required.</li>
 
 <li>Merging index segments. In this case, the input is typically records
 emerging from a merge-sort. There are two distinct cases here. In one, we
 simply have raw records that are being merged into an index. This might occur
 when merging two key ranges or when external data are being loaded. In the
 other case we are processing two time-stamped versions of an overlapping key
 range. In this case, the more recent version may have "delete" markers
 indicating that a key present in an older version has been deleted in the
 newer version. Also, key-value entries in the newer version replaced (rather
 than are merged with) key-value entries in the older version. If an entry
 history policy is defined, then it must be applied here to cause key-value
 whose retention is no longer required by that policy to be dropped.</li>
 
 </ol>
 
 <h3>One pass vs. Two Pass Design Alternatives</h3>
 
 There are at least three design alternatives for index segment builds: (A) do
 an exact range count instead and generate a perfect plan; (B) fully buffer
 the source iterator into byte[][] keys, byte[][] vals, boolean[]
 deleteMarkers, and long[] versionTimestamps and generate an exact plan,
 consuming the buffered byte[]s directly from RAM; and (C) use the fast range
 count to generate a plan based on an overestimate of the tuple count and then
 apply a variety of hacks when the source iterator is exhausted to make the
 output B+Tree usable, but not well formed.
 <p>
 The disadvantage of (A) is that it requires two passes over the source view,
 which substantially increases the run time of the algorithm. In addition, the
 passes can drive evictions in the global LRU and could defeat caching for a
 view approaching the nominal size for a split. However, with (A) we can do
 builds for very large source B+Trees. Therefore, (A) is implemented for such
 use cases.
 <p>
 The disadvantage of (B) is that it requires more memory. However, it is much
 faster than (A). To compensate for the increased memory demand, we can single
 thread builds, merges, and splits and fall back to (A) if memory is very
 tight or the source view is very large.
 <p>
 The disadvantage of (C) is that the "hacks" break encapsulation and leak into
 the API where operations such as retrieving the right sibling of a node could
 return an empty leaf (since we ran out of tuples for the plan). Since these
 "hacks" would break encapsulation, it would be difficult to have confidence
 that the B+Tree API was fully insulated against the effects of ill-formed
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s. Therefore, I have discarded this approach and backed
 out changes designed to support it from the code base.
 
 <h3>Design alternatives for totally ordered nodes and leaves</h3>
 
 In order for the nodes to be written in a contiguous block we either have to
 buffer them in memory or have to write them onto a temporary file and then
 copy them into place after the last leaf has been processed. This concern was
 not present in West's algorithm because it did not attempt to place the nodes
 and/or leaves contiguously onto the generated B+Tree file.
 <p>
 For the two pass design described above as option (A), the code buffers the
 nodes and leaves onto <a href="../../../com/bigdata/journal/TemporaryRawStore.html" title="class in com.bigdata.journal"><code>TemporaryRawStore</code></a>s. This approach is scalable,
 which is the concern of (A), but requires at least twice the IO when compared
 to directly writing the nodes and leaves onto the output file.
 <p>
 When sufficient memory is available, as cases where (B) would apply, we can
 write the leaves directly on the backing file (using double-buffering to
 update the prior/next addrs). Since there are far fewer nodes than leaves, we
 can buffer the nodes in memory, writing them once the leaves are finished.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id: IndexSegmentBuilder.java 2265 2009-10-26 12:51:06Z thompsonbry
          $</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd>"Post-order B-Tree Construction" by Lawerence West, ACM 1992. Note that
      West's algorithm is for a b-tree (values are stored on internal stack as
      well as leaves), not a b+-tree (values are stored only on the leaves).
      Our implementation is therefore an adaptation., 
"Batch-Construction of B+-Trees" by Kim and Won, ACM 2001. The approach
      outlined by Kim and Won is designed for B+-Trees, but it appears to be
      less efficient on first glance., 
<a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>, 
<code>IndexSegmentFile</code>, 
<a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a></strong></code>
<div class="block">Abstract base class for classes used to construct and serialize nodes and
 leaves written onto the index segment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.NOPNodeFactory.html" title="class in com.bigdata.btree">IndexSegmentBuilder.NOPNodeFactory</a></strong></code>
<div class="block">Factory does not support node or leaf creation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleLeafData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleLeafData</a></strong></code>
<div class="block">A class that can be used to (de-)serialize the data for a leaf without
 any of the logic for operations on the leaf.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a></strong></code>
<div class="block">A class that can be used to (de-)serialize the data for a node without
 any of the logic for operations on the node.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#bufferNodes">bufferNodes</a></strong></code>
<div class="block">When <code>true</code> the generated nodes will be fully buffered in RAM.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#commitTime">commitTime</a></strong></code>
<div class="block">The commit time associated with the view from which the
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is being generated (from the ctor).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#compactingMerge">compactingMerge</a></strong></code>
<div class="block"><code>true</code> iff the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> will
 incorporate all state for the source index (partition) as of the
 specified <i>commitTime</i>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#elapsed">elapsed</a></strong></code>
<div class="block">The process runtime in milliseconds.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#elapsed_build">elapsed_build</a></strong></code>
<div class="block">The time to write the nodes and leaves into their respective buffers, not
 including the time to transfer those buffered onto the output file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#elapsed_setup">elapsed_setup</a></strong></code>
<div class="block">The time to setup the index build, including the generation of the index
 plan and the initialization of some helper objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#elapsed_write">elapsed_write</a></strong></code>
<div class="block">The time to write the nodes and leaves from their respective buffers
 onto the output file and synch and close that output file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#entryCount">entryCount</a></strong></code>
<div class="block">The value specified to the ctor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#ERR_NO_TUPLES">ERR_NO_TUPLES</a></strong></code>
<div class="block">Message when the index segment will be empty.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#ERR_TOO_MANY_TUPLES">ERR_TOO_MANY_TUPLES</a></strong></code>
<div class="block">Error message when the #of tuples in the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> would
 exceed <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>float</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#mbPerSec">mbPerSec</a></strong></code>
<div class="block">The data throughput rate in megabytes per second.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#metadata">metadata</a></strong></code>
<div class="block">A copy of the metadata object provided to the ctor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#out">out</a></strong></code>
<div class="block">The file on which the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is written.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#outFile">outFile</a></strong></code>
<div class="block">The file specified by the caller on which the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is
 written.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IndexSegmentPlan.html" title="class in com.bigdata.btree">IndexSegmentPlan</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#plan">plan</a></strong></code>
<div class="block">The plan for building the B+-Tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#segmentUUID">segmentUUID</a></strong></code>
<div class="block">The unique identifier for the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> resource.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#IndexSegmentBuilder(java.io.File,%20java.io.File,%20long,%20com.bigdata.btree.ITupleIterator,%20int,%20com.bigdata.btree.IndexMetadata,%20long,%20boolean,%20boolean)">IndexSegmentBuilder</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                   <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                   long&nbsp;entryCount,
                   <a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&lt;?&gt;&nbsp;entryIterator,
                   int&nbsp;m,
                   <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
                   long&nbsp;commitTime,
                   boolean&nbsp;compactingMerge,
                   boolean&nbsp;bufferNodes)</code>
<div class="block">
 Designated constructor sets up a build of an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> for
 some caller defined read-only view.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#addChild(com.bigdata.btree.IndexSegmentBuilder.SimpleNodeData,%20long,%20com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">addChild</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a>&nbsp;parent,
        long&nbsp;childAddr,
        <a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;child)</code>
<div class="block">Record the persistent address of a child on its parent and the #of
 entries spanned by that child.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#addSeparatorKey(com.bigdata.btree.IndexSegmentBuilder.SimpleLeafData)">addSeparatorKey</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleLeafData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleLeafData</a>&nbsp;leaf)</code>
<div class="block">Copies the first key of a new leaf as a separatorKey for the appropriate
 parent (if any) of that leaf.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#buildBTree()">buildBTree</a></strong>()</code>
<div class="block">Scan the source tuple iterator in key order writing output leaves onto
 the index segment file with the new branching factor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#call()">call</a></strong>()</code>
<div class="block">Build the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> given the parameters specified to the
 constructor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#flushNodeOrLeaf(com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">flushNodeOrLeaf</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;node)</code>
<div class="block">
 Flush a node or leaf that has been closed (no more data will be added).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#getCheckpoint()">getCheckpoint</a></strong>()</code>
<div class="block">The <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> record written on the
 <a href="../../../com/bigdata/btree/IndexSegmentStore.html" title="class in com.bigdata.btree"><code>IndexSegmentStore</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#getParent(com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">getParent</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;node)</code>
<div class="block">Return the parent of a node or leaf in the <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#stack"><code>stack</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/mdi/IResourceMetadata.html" title="interface in com.bigdata.mdi">IResourceMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#getSegmentMetadata()">getSegmentMetadata</a></strong>()</code>
<div class="block">The description of the constructed <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> resource.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#getStartTime()">getStartTime</a></strong>()</code>
<div class="block">The timestamp in milliseconds when <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#call()"><code>call()</code></a> was invoked -or-
 ZERO (0L) if <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#call()"><code>call()</code></a> has not been invoked.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#main(java.lang.String[])">main</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</code>
<div class="block">Driver for index segment build against a named index on a local journal.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#newInstance(java.io.File,%20java.io.File,%20long,%20com.bigdata.btree.ITupleIterator,%20int,%20com.bigdata.btree.IndexMetadata,%20long,%20boolean,%20boolean)">newInstance</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
           long&nbsp;entryCount,
           <a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&lt;?&gt;&nbsp;entryIterator,
           int&nbsp;m,
           <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
           long&nbsp;commitTime,
           boolean&nbsp;compactingMerge,
           boolean&nbsp;bufferNodes)</code>
<div class="block">
 A more flexible factory for an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> build which permits
 override of the index segment branching factor, replacement of the
 <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a>, and the use of the caller's iterator.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#newInstance(com.bigdata.btree.ILocalBTreeView,%20java.io.File,%20java.io.File,%20boolean,%20long,%20byte[],%20byte[])">newInstance</a></strong>(<a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>&nbsp;src,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
           boolean&nbsp;compactingMerge,
           long&nbsp;createTime,
           byte[]&nbsp;fromKey,
           byte[]&nbsp;toKey)</code>
<div class="block">Builder factory will build an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> from an index
 (partition).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#newInstance(java.lang.Object[],%20int,%20com.bigdata.btree.IndexMetadata,%20java.io.File,%20java.io.File,%20int,%20boolean,%20long,%20boolean)">newInstance</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;a,
           int&nbsp;alen,
           <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;indexMetadata,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
           int&nbsp;m,
           boolean&nbsp;compactingMerge,
           long&nbsp;createTime,
           boolean&nbsp;bufferNodes)</code>
<div class="block">Variant using an array of objects in the desired order.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#newInstanceFullyBuffered(com.bigdata.btree.ILocalBTreeView,%20java.io.File,%20java.io.File,%20int,%20boolean,%20long,%20byte[],%20byte[],%20boolean)">newInstanceFullyBuffered</a></strong>(<a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>&nbsp;src,
                        <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                        <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                        int&nbsp;m,
                        boolean&nbsp;compactingMerge,
                        long&nbsp;createTime,
                        byte[]&nbsp;fromKey,
                        byte[]&nbsp;toKey,
                        boolean&nbsp;bufferNodes)</code>
<div class="block">A one pass algorithm which materializes the tuples in RAM, computing the
 exact tuple count as it goes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#newInstanceTwoPass(com.bigdata.btree.ILocalBTreeView,%20java.io.File,%20java.io.File,%20int,%20boolean,%20long,%20byte[],%20byte[],%20boolean)">newInstanceTwoPass</a></strong>(<a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>&nbsp;src,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                  int&nbsp;m,
                  boolean&nbsp;compactingMerge,
                  long&nbsp;createTime,
                  byte[]&nbsp;fromKey,
                  byte[]&nbsp;toKey,
                  boolean&nbsp;bufferNodes)</code>
<div class="block">A two pass build algorithm.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#resetNode(com.bigdata.btree.IndexSegmentBuilder.SimpleNodeData)">resetNode</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a>&nbsp;parent)</code>
<div class="block">The <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#stack"><code>stack</code></a> contains nodes which are reused for each node or leaf
 at a given level in the generated B+Tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#usage(java.lang.String[],%20java.lang.String,%20int)">usage</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args,
     <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;msg,
     int&nbsp;exitCode)</code>
<div class="block">Prints the usage and then exits.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#writeIndexSegment(java.nio.channels.FileChannel,%20long)">writeIndexSegment</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a>&nbsp;outChannel,
                 long&nbsp;commitTime)</code>
<div class="block">
 Writes the complete file format for the index segment.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#writeLeaf(com.bigdata.btree.IndexSegmentBuilder.SimpleLeafData)">writeLeaf</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleLeafData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleLeafData</a>&nbsp;leaf)</code>
<div class="block">Code the leaf, obtaining its address, update the prior/next addr of the
 previous leaf, and write that previous leaf onto the output file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#writeNode(com.bigdata.btree.IndexSegmentBuilder.SimpleNodeData)">writeNode</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a>&nbsp;node)</code>
<div class="block">Code and write the node onto the <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#nodeBuffer"><code>nodeBuffer</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#writeNodeOrLeaf(com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">writeNodeOrLeaf</a></strong>(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;node)</code>
<div class="block">Write the node or leaf onto the appropriate output channel.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ERR_TOO_MANY_TUPLES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERR_TOO_MANY_TUPLES</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERR_TOO_MANY_TUPLES</pre>
<div class="block">Error message when the #of tuples in the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> would
 exceed <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a>.
 <p>
 Note: This is not an inherent limit in the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> but
 rather a limit in the <a href="../../../com/bigdata/btree/IndexSegmentPlan.html" title="class in com.bigdata.btree"><code>IndexSegmentPlan</code></a> (and perhaps the
 <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree"><code>IndexSegmentBuilder</code></a>) which presumes that the entry count is an
 <code>int</code> rather than a <code>long</code>.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.btree.IndexSegmentBuilder.ERR_TOO_MANY_TUPLES">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERR_NO_TUPLES">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERR_NO_TUPLES</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERR_NO_TUPLES</pre>
<div class="block">Message when the index segment will be empty.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.btree.IndexSegmentBuilder.ERR_NO_TUPLES">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="outFile">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outFile</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a> outFile</pre>
<div class="block">The file specified by the caller on which the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is
 written.</div>
</li>
</ul>
<a name="entryCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>entryCount</h4>
<pre>public final&nbsp;long entryCount</pre>
<div class="block">The value specified to the ctor.</div>
</li>
</ul>
<a name="commitTime">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commitTime</h4>
<pre>public final&nbsp;long commitTime</pre>
<div class="block">The commit time associated with the view from which the
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is being generated (from the ctor). This value is
 written into <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html#commitTime"><code>IndexSegmentCheckpoint.commitTime</code></a>.</div>
</li>
</ul>
<a name="compactingMerge">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compactingMerge</h4>
<pre>public final&nbsp;boolean compactingMerge</pre>
<div class="block"><code>true</code> iff the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> will
 incorporate all state for the source index (partition) as of the
 specified <i>commitTime</i>.
 <p>
 Note: This flag is written into the <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> but it
 has no other effect on the build process.</div>
</li>
</ul>
<a name="metadata">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>metadata</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a> metadata</pre>
<div class="block">A copy of the metadata object provided to the ctor. This object is
 further modified before being written on the
 <a href="../../../com/bigdata/btree/IndexSegmentStore.html" title="class in com.bigdata.btree"><code>IndexSegmentStore</code></a>.</div>
</li>
</ul>
<a name="segmentUUID">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>segmentUUID</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a> segmentUUID</pre>
<div class="block">The unique identifier for the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> resource.</div>
</li>
</ul>
<a name="out">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>out</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a> out</pre>
<div class="block">The file on which the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is written. The file is closed
 regardless of the outcome of the operation.</div>
</li>
</ul>
<a name="bufferNodes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bufferNodes</h4>
<pre>protected final&nbsp;boolean bufferNodes</pre>
<div class="block">When <code>true</code> the generated nodes will be fully buffered in RAM.
 Otherwise they will be buffered on the <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#nodeBuffer"><code>nodeBuffer</code></a> and then
 transferred to the output file en mass.</div>
</li>
</ul>
<a name="plan">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>plan</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentPlan.html" title="class in com.bigdata.btree">IndexSegmentPlan</a> plan</pre>
<div class="block">The plan for building the B+-Tree.</div>
</li>
</ul>
<a name="elapsed_setup">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>elapsed_setup</h4>
<pre>public final&nbsp;long elapsed_setup</pre>
<div class="block">The time to setup the index build, including the generation of the index
 plan and the initialization of some helper objects.</div>
</li>
</ul>
<a name="elapsed_build">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>elapsed_build</h4>
<pre>public&nbsp;long elapsed_build</pre>
<div class="block">The time to write the nodes and leaves into their respective buffers, not
 including the time to transfer those buffered onto the output file.</div>
</li>
</ul>
<a name="elapsed_write">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>elapsed_write</h4>
<pre>public&nbsp;long elapsed_write</pre>
<div class="block">The time to write the nodes and leaves from their respective buffers
 onto the output file and synch and close that output file.</div>
</li>
</ul>
<a name="elapsed">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>elapsed</h4>
<pre>public&nbsp;long elapsed</pre>
<div class="block">The process runtime in milliseconds.</div>
</li>
</ul>
<a name="mbPerSec">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>mbPerSec</h4>
<pre>public&nbsp;float mbPerSec</pre>
<div class="block">The data throughput rate in megabytes per second.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="IndexSegmentBuilder(java.io.File, java.io.File, long, com.bigdata.btree.ITupleIterator, int, com.bigdata.btree.IndexMetadata, long, boolean, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>IndexSegmentBuilder</h4>
<pre>protected&nbsp;IndexSegmentBuilder(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                   <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                   long&nbsp;entryCount,
                   <a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&lt;?&gt;&nbsp;entryIterator,
                   int&nbsp;m,
                   <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
                   long&nbsp;commitTime,
                   boolean&nbsp;compactingMerge,
                   boolean&nbsp;bufferNodes)
                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><p>
 Designated constructor sets up a build of an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> for
 some caller defined read-only view.
 </p>
 <p>
 Note: The caller must determine whether or not deleted index entries are
 present in the view. The <i>entryCount</i> MUST be the exact #of index
 entries that are visited by the given iterator. In general, this is not
 difficult. However, if a compacting merge is desired (that is, if you are
 trying to generate a view containing only the non-deleted entries) then
 you MUST explicitly count the #of entries that will be visited by the
 iterator, e.g., it will require two passes over the iterator to setup the
 index build operation.
 </p>
 <p>
 Note: With a branching factor of 4096 a tree of height 2 (three levels)
 could address 68,719,476,736 entries - well beyond what we want in a
 given index segment! Well before that the index segment should be split
 into multiple files. The split point should be determined by the size of
 the serialized leaves and nodes, e.g., the amount of data on disk
 required by the index segment and the amount of memory required to fully
 buffer the index nodes. While the size of a serialized node can be
 estimated easily, the size of a serialized leaf depends on the kinds of
 values stored in that index. The actual sizes are recorded in the
 <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> record in the header of the
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>outFile</code> - The file on which the index segment is written. The file MAY
            exist but MUST have zero length if it does exist (this permits
            you to use the temporary file facility to create the output
            file).</dd><dd><code>tmpDir</code> - The temporary directory in data are buffered during the build
            (optional - the default temporary directory is used if this is
            <code>null</code>).</dd><dd><code>entryCount</code> - The #of entries that will be visited by the iterator. This
            MUST be an exact range count.</dd><dd><code>entryIterator</code> - Visits the index entries in key order that will be written
            onto the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</dd><dd><code>m</code> - The branching factor for the generated tree. This can be
            chosen with an eye to minimizing the height of the generated
            tree. (Small branching factors are permitted for testing, but
            generally you want something relatively large.)</dd><dd><code>metadata</code> - The metadata record for the source index. A copy will be made
            of this object. The branching factor in the generated tree
            will be overridden to <i>m</i>.</dd><dd><code>commitTime</code> - The commit time associated with the view from which the
            <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is being generated. This value is written
            into <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html#commitTime"><code>IndexSegmentCheckpoint.commitTime</code></a>.</dd><dd><code>compactingMerge</code> - <code>true</code> iff the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> will
            incorporate all state for the source index (partition) as of
            the specified <i>commitTime</i>. This flag is written into the
            <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> but does not otherwise effect
            the build process.</dd><dd><code>bufferNodes</code> - When <code>true</code> the generated nodes will be fully
            buffered in RAM (faster, but imposes a memory constraint).
            Otherwise they will be written onto a temporary file and then
            transferred to the output file en mass.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpoint</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a>&nbsp;getCheckpoint()</pre>
<div class="block">The <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> record written on the
 <a href="../../../com/bigdata/btree/IndexSegmentStore.html" title="class in com.bigdata.btree"><code>IndexSegmentStore</code></a>.</div>
</li>
</ul>
<a name="getStartTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStartTime</h4>
<pre>public&nbsp;long&nbsp;getStartTime()</pre>
<div class="block">The timestamp in milliseconds when <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#call()"><code>call()</code></a> was invoked -or-
 ZERO (0L) if <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#call()"><code>call()</code></a> has not been invoked.</div>
</li>
</ul>
<a name="newInstance(com.bigdata.btree.ILocalBTreeView, java.io.File, java.io.File, boolean, long, byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newInstance</h4>
<pre>public static&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a>&nbsp;newInstance(<a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>&nbsp;src,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                              boolean&nbsp;compactingMerge,
                              long&nbsp;createTime,
                              byte[]&nbsp;fromKey,
                              byte[]&nbsp;toKey)
                                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Builder factory will build an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> from an index
 (partition). Delete markers are propagated to the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>
 unless <i>compactingMerge</i> is <code>true</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>src</code> - A view of the index partition as of the <i>createTime</i>.
            When <i>compactingMerge</i> is <code>false</code> then this
            MUST be a single <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> since incremental builds are
            only support for a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> source while compacting
            merges are defined for any <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree"><code>IIndex</code></a>.</dd><dd><code>outFile</code> - The file on which the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> will be written.
            The file MAY exist, but if it exists then it MUST be empty.</dd><dd><code>compactingMerge</code> - When <code>true</code> the caller asserts that <i>src</i> is a
            <a href="../../../com/bigdata/btree/view/FusedView.html" title="class in com.bigdata.btree.view"><code>FusedView</code></a> and deleted index entries WILL NOT be
            included in the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>. Otherwise, it
            is assumed that the only select component(s) of the index
            partition view are being exported onto an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>
            and deleted index entries will therefore be propagated to the
            new <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> (aka an incremental build).</dd><dd><code>createTime</code> - The commit time associated with the view from which the
            <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is being generated. This value is written
            into <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html#commitTime"><code>IndexSegmentCheckpoint.commitTime</code></a>.</dd><dd><code>fromKey</code> - The lowest key that will be included (inclusive). When
            <code>null</code> there is no lower bound.</dd><dd><code>toKey</code> - The first key that will be included (exclusive). When
            <code>null</code> there is no upper bound.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An object which can be used to construct the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>
         .</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="newInstanceTwoPass(com.bigdata.btree.ILocalBTreeView, java.io.File, java.io.File, int, boolean, long, byte[], byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newInstanceTwoPass</h4>
<pre>protected static&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a>&nbsp;newInstanceTwoPass(<a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>&nbsp;src,
                                     <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                                     <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                                     int&nbsp;m,
                                     boolean&nbsp;compactingMerge,
                                     long&nbsp;createTime,
                                     byte[]&nbsp;fromKey,
                                     byte[]&nbsp;toKey,
                                     boolean&nbsp;bufferNodes)
                                                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">A two pass build algorithm. The first pass is used to obtain an exact
 entry count for the view. Based on that exact range count we can compute
 a plan for a balanced B+Tree. A second pass over the view is required to
 populate the output B+Tree. This flavor also buffers the leaves and nodes
 on temporary stores, which means that it does more IO. However, this
 version is capable of processing very large source views.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="newInstanceFullyBuffered(com.bigdata.btree.ILocalBTreeView, java.io.File, java.io.File, int, boolean, long, byte[], byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newInstanceFullyBuffered</h4>
<pre>protected static&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a>&nbsp;newInstanceFullyBuffered(<a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>&nbsp;src,
                                           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                                           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                                           int&nbsp;m,
                                           boolean&nbsp;compactingMerge,
                                           long&nbsp;createTime,
                                           byte[]&nbsp;fromKey,
                                           byte[]&nbsp;toKey,
                                           boolean&nbsp;bufferNodes)
                                                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">A one pass algorithm which materializes the tuples in RAM, computing the
 exact tuple count as it goes. This is faster than the two-pass algorithm
 and is a better choice when the source view and the output index segment
 are within the normal ranges for an index partition, e.g., an output
 index segment file of ~200M on the disk.
 
 FIXME The unit tests need to run against both builds based on the
 materialized tuples and builds based on two passes in order to obtain the
 exact range count. They already do for
 <a href="../../../com/bigdata/btree/TestIndexSegmentBuilderWithLargeTrees.html" title="class in com.bigdata.btree"><code>TestIndexSegmentBuilderWithLargeTrees</code></a> but not yet for the other
 test suite variants.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="newInstance(java.lang.Object[], int, com.bigdata.btree.IndexMetadata, java.io.File, java.io.File, int, boolean, long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newInstance</h4>
<pre>public static&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a>&nbsp;newInstance(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;a,
                              int&nbsp;alen,
                              <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;indexMetadata,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                              int&nbsp;m,
                              boolean&nbsp;compactingMerge,
                              long&nbsp;createTime,
                              boolean&nbsp;bufferNodes)
                                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Variant using an array of objects in the desired order. A single root
 leaf is generated from those objects. The root leaf is then fed into the
 algorithm to efficient construct the corresponding read-only
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>a</code> - The array of objects to be written onto the index. The index
            must know how to generate tuples from these objects. The
            objects must already be in the natural order of the keys that
            will be generated for those tuples.</dd><dd><code>alen</code> - The #of elements in that array.</dd><dd><code>indexMetadata</code> - The <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> that will serve as the template for
            the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</dd><dd><code>outFile</code> - The file on which the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> will be written.
            The file MAY exist, but if it exists then it MUST be empty.</dd><dd><code>tmpDir</code> - The temporary directory in data are buffered during the build
            (optional - the default temporary directory is used if this is
            <code>null</code>).</dd><dd><code>m</code> - The branching factor for the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</dd><dd><code>compactingMerge</code> - When <code>true</code> the caller asserts that <i>src</i> is a
            <a href="../../../com/bigdata/btree/view/FusedView.html" title="class in com.bigdata.btree.view"><code>FusedView</code></a> and deleted index entries WILL NOT be
            included in the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>. Otherwise, it
            is assumed that the only select component(s) of the index
            partition view are being exported onto an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>
            and deleted index entries will therefore be propagated to the
            new <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> (aka an incremental build).</dd><dd><code>createTime</code> - The commit time associated with the view from which the
            <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is being generated. This value is written
            into <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html#commitTime"><code>IndexSegmentCheckpoint.commitTime</code></a>.</dd><dd><code>bufferNodes</code> - When <code>true</code> the generated nodes will be fully
            buffered in RAM (faster, but imposes a memory constraint).
            Otherwise they will be written onto a temporary file and then
            transferred to the output file en mass.</dd>
<dt><span class="strong">Returns:</span></dt><dd></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - TODO We could pass a flag indicating whether the leaf needs
             to be sorted after it is generated, but the caller would
             still be responsible for ensuring that there are no
             duplicates in the array.</dd></dl>
</li>
</ul>
<a name="newInstance(java.io.File, java.io.File, long, com.bigdata.btree.ITupleIterator, int, com.bigdata.btree.IndexMetadata, long, boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newInstance</h4>
<pre>public static&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree">IndexSegmentBuilder</a>&nbsp;newInstance(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;outFile,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;tmpDir,
                              long&nbsp;entryCount,
                              <a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&lt;?&gt;&nbsp;entryIterator,
                              int&nbsp;m,
                              <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
                              long&nbsp;commitTime,
                              boolean&nbsp;compactingMerge,
                              boolean&nbsp;bufferNodes)
                                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><p>
 A more flexible factory for an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> build which permits
 override of the index segment branching factor, replacement of the
 <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a>, and the use of the caller's iterator.
 </p>
 <p>
 Note: The caller must determine whether or not deleted index entries are
 present in the view. The <i>entryCount</i> MUST be the exact #of index
 entries that are visited by the given iterator. In general, this is not
 difficult. However, if a compacting merge is desired (that is, if you are
 trying to generate a view containing only the non-deleted entries) then
 you MUST explicitly count the #of entries that will be visited by the
 iterator, e.g., it will require two passes over the iterator to setup the
 index build operation.
 </p>
 <p>
 Note: With a branching factor of 4096 a tree of height 2 (three levels)
 could address 68,719,476,736 entries - well beyond what we want in a
 given index segment! Well before that the index segment should be split
 into multiple files. The split point should be determined by the size of
 the serialized leaves and nodes, e.g., the amount of data on disk
 required by the index segment and the amount of memory required to fully
 buffer the index nodes. While the size of a serialized node can be
 estimated easily, the size of a serialized leaf depends on the kinds of
 values stored in that index. The actual sizes are recorded in the
 <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> record in the header of the
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>outFile</code> - The file on which the index segment is written. The file MAY
            exist but MUST have zero length if it does exist (this permits
            you to use the temporary file facility to create the output
            file).</dd><dd><code>tmpDir</code> - The temporary directory in data are buffered during the build
            (optional - the default temporary directory is used if this is
            <code>null</code>).</dd><dd><code>entryCount</code> - The #of entries that will be visited by the iterator. This
            MUST be an exact range count.</dd><dd><code>entryIterator</code> - Visits the index entries in key order that will be written
            onto the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</dd><dd><code>m</code> - The branching factor for the generated tree. This can be
            chosen with an eye to minimizing the height of the generated
            tree. (Small branching factors are permitted for testing, but
            generally you want something relatively large.)</dd><dd><code>metadata</code> - The metadata record for the source index. A copy will be made
            of this object. The branching factor in the generated tree
            will be overridden to <i>m</i>.</dd><dd><code>commitTime</code> - The commit time associated with the view from which the
            <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is being generated. This value is written
            into <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html#commitTime"><code>IndexSegmentCheckpoint.commitTime</code></a>.</dd><dd><code>compactingMerge</code> - <code>true</code> iff the generated <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> will
            incorporate all state for the source index (partition) as of
            the specified <i>commitTime</i>. This flag is written into the
            <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> but does not otherwise effect
            the build process.</dd><dd><code>bufferNodes</code> - When <code>true</code> the generated nodes will be fully
            buffered in RAM (faster, but imposes a memory constraint).
            Otherwise they will be written onto a temporary file and then
            transferred to the output file en mass.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="call()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>call</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a>&nbsp;call()
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Build the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> given the parameters specified to the
 constructor.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true#call()" title="class or interface in java.util.concurrent">call</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;<a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="buildBTree()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>buildBTree</h4>
<pre>protected&nbsp;void&nbsp;buildBTree()</pre>
<div class="block">Scan the source tuple iterator in key order writing output leaves onto
 the index segment file with the new branching factor. We also track a
 stack of nodes that are being written out concurrently on a temporary
 channel.
 <p>
 The plan tells us the #of values to insert into each leaf and the #of
 children to insert into each node. Each time a leaf becomes full
 (according to the plan), we "close" the leaf, writing it out onto the
 store and obtaining its "address". The "close" logic also takes care of
 setting the address on the leaf's parent node (if any). If the parent
 node becomes filled (according to the plan) then it is also "closed".
 <p>
 Each time (except the first) that we start a new leaf we record its first
 key as a separatorKey in the appropriate parent node.
 <p>
 Note: The root may be a leaf as a degenerate case.</div>
</li>
</ul>
<a name="flushNodeOrLeaf(com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flushNodeOrLeaf</h4>
<pre>protected&nbsp;void&nbsp;flushNodeOrLeaf(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;node)</pre>
<div class="block"><p>
 Flush a node or leaf that has been closed (no more data will be added).
 </p>
 <p>
 Note: When a node or leaf is flushed we write it out to obtain its
 address and set that address on its direct parent using
 <code>#addChild(SimpleNodeData, long, AbstractSimpleNodeData, boolean)</code>.
 This also updates the per-child counters of the #of entries spanned by a
 node.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The node to be flushed.</dd></dl>
</li>
</ul>
<a name="addChild(com.bigdata.btree.IndexSegmentBuilder.SimpleNodeData, long, com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addChild</h4>
<pre>protected&nbsp;void&nbsp;addChild(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a>&nbsp;parent,
            long&nbsp;childAddr,
            <a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;child)</pre>
<div class="block">Record the persistent address of a child on its parent and the #of
 entries spanned by that child. If all children on the parent become
 assigned then the parent is closed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>parent</code> - The parent.</dd><dd><code>childAddr</code> - The address of the child (node or leaf).</dd><dd><code>child</code> - The child reference.</dd></dl>
</li>
</ul>
<a name="resetNode(com.bigdata.btree.IndexSegmentBuilder.SimpleNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetNode</h4>
<pre>protected&nbsp;void&nbsp;resetNode(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a>&nbsp;parent)</pre>
<div class="block">The <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#stack"><code>stack</code></a> contains nodes which are reused for each node or leaf
 at a given level in the generated B+Tree. This method prepares a node in
 the stack for reuse.</div>
</li>
</ul>
<a name="addSeparatorKey(com.bigdata.btree.IndexSegmentBuilder.SimpleLeafData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addSeparatorKey</h4>
<pre>protected&nbsp;void&nbsp;addSeparatorKey(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleLeafData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleLeafData</a>&nbsp;leaf)</pre>
<div class="block">Copies the first key of a new leaf as a separatorKey for the appropriate
 parent (if any) of that leaf. This must be invoked when the first key is
 set on that leaf. However, it must not be invoked on the first leaf.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>leaf</code> - The current leaf. The first key on that leaf must be defined.</dd></dl>
</li>
</ul>
<a name="getParent(com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getParent</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a>&nbsp;getParent(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;node)</pre>
<div class="block">Return the parent of a node or leaf in the <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#stack"><code>stack</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The node or leaf.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The parent or <code>null</code> iff <i>node</i> is the root node
         or leaf.</dd></dl>
</li>
</ul>
<a name="writeNodeOrLeaf(com.bigdata.btree.IndexSegmentBuilder.AbstractSimpleNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeNodeOrLeaf</h4>
<pre>protected&nbsp;long&nbsp;writeNodeOrLeaf(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.AbstractSimpleNodeData</a>&nbsp;node)</pre>
<div class="block">Write the node or leaf onto the appropriate output channel.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The address that may be used to read the node or leaf from the
         file. Note that the address of a node is relative to the start of
         the node channel and therefore must be adjusted before reading
         the node from the final index segment file.</dd></dl>
</li>
</ul>
<a name="writeLeaf(com.bigdata.btree.IndexSegmentBuilder.SimpleLeafData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeLeaf</h4>
<pre>protected&nbsp;long&nbsp;writeLeaf(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleLeafData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleLeafData</a>&nbsp;leaf)</pre>
<div class="block">Code the leaf, obtaining its address, update the prior/next addr of the
 previous leaf, and write that previous leaf onto the output file.
 <p>
 Note: For leaf addresses we know the absolute offset into the
 <a href="../../../com/bigdata/btree/IndexSegmentStore.html" title="class in com.bigdata.btree"><code>IndexSegmentStore</code></a> where the leaf will wind up so we encode the
 address of the leaf using the <a href="../../../com/bigdata/btree/IndexSegmentRegion.html#BASE"><code>IndexSegmentRegion.BASE</code></a> region.
 <p>
 Note: In order to write out the leaves using a double-linked list with
 prior-/next-leaf addresses we have to use a "write behind" strategy.
 Instead of writing out the leaf as soon as it is serialized, we save the
 uncoded address and a copy of the coded data record on private member
 fields. When we code the next leaf (or if we learn that we have no more
 leaves to code because <a href="../../../com/bigdata/btree/IndexSegmentPlan.html#nleaves"><code>IndexSegmentPlan.nleaves</code></a> EQ
 <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#nleavesWritten"><code>nleavesWritten</code></a>) then we patch the coded representation of the
 prior leaf and write it on the store at the previously obtained address,
 thereby linking the leaves together in both directions. It is definitely
 confusing.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The address that may be used to read the leaf from the file
         backing the <a href="../../../com/bigdata/btree/IndexSegmentStore.html" title="class in com.bigdata.btree"><code>IndexSegmentStore</code></a>.</dd></dl>
</li>
</ul>
<a name="writeNode(com.bigdata.btree.IndexSegmentBuilder.SimpleNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeNode</h4>
<pre>protected&nbsp;long&nbsp;writeNode(<a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree">IndexSegmentBuilder.SimpleNodeData</a>&nbsp;node)</pre>
<div class="block">Code and write the node onto the <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html#nodeBuffer"><code>nodeBuffer</code></a>.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>An <em>relative</em> address that must be correctly decoded
         before you can read the compressed node from the file. This value
         is also set on <a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html#addr"><code>IndexSegmentBuilder.SimpleNodeData.addr</code></a>.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/IndexSegmentBuilder.SimpleNodeData.html" title="class in com.bigdata.btree"><code>IndexSegmentBuilder.SimpleNodeData</code></a>, 
<a href="../../../com/bigdata/btree/IndexSegmentRegion.html" title="enum in com.bigdata.btree"><code>IndexSegmentRegion</code></a>, 
<a href="../../../com/bigdata/btree/IndexSegmentAddressManager.html" title="class in com.bigdata.btree"><code>IndexSegmentAddressManager</code></a></dd></dl>
</li>
</ul>
<a name="writeIndexSegment(java.nio.channels.FileChannel, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeIndexSegment</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree">IndexSegmentCheckpoint</a>&nbsp;writeIndexSegment(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a>&nbsp;outChannel,
                                       long&nbsp;commitTime)
                                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                                   <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><p>
 Writes the complete file format for the index segment. The file is
 divided up as follows:
 <ol>
 
 <li>fixed length <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> record (required)</li>
 <li>leaves (required)</li>
 <li>nodes (may be empty)</li>
 <li>the bloom filter (optional)</li>
 <li>the <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record (required, but extensible)</li>
 </ol>
 </p>
 <p>
 The index segment metadata is divided into a base
 <a href="../../../com/bigdata/btree/IndexSegmentCheckpoint.html" title="class in com.bigdata.btree"><code>IndexSegmentCheckpoint</code></a> record with a fixed format containing only
 essential data and additional metadata records written at the end of the
 file including the optional bloom filter and the required
 <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record. The latter is where we write variable
 length metadata including the _name_ of the index, or additional metadata
 defined by a specific class of index.
 </p>
 <p>
 Once all nodes and leaves have been buffered we are ready to start
 writing the data. We skip over a fixed size metadata record since
 otherwise we are unable to pre-compute the offset to the leaves and hence
 the addresses of the leaves. The node addresses are written in an
 encoding that requires active translation by the receiver who must be
 aware of the offset to the start of the node region. We can not write the
 metadata record until we know the size and length of each of these
 regions (leaves, nodes, and the bloom filter, or other metadata records)
 since that information is required in order to be able to form their
 addresses for insertion in the metadata record.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>outChannel</code> - </dd><dd><code>commitTime</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - FIXME There is no sense of an atomic commit when building a
             new index segment. We should write ZEROs into the checkpoint
             record initially and then seek back to the head of the file
             once we are done and write out the correct checkpoint record.
             <p>
             Note: There are similar issues involved when we replicate
             index segment or journal files to verify that they are good.</dd></dl>
</li>
</ul>
<a name="getSegmentMetadata()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSegmentMetadata</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/mdi/IResourceMetadata.html" title="interface in com.bigdata.mdi">IResourceMetadata</a>&nbsp;getSegmentMetadata()</pre>
<div class="block">The description of the constructed <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> resource.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if requested before the build operation is complete.</dd></dl>
</li>
</ul>
<a name="usage(java.lang.String[], java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>usage</h4>
<pre>protected static&nbsp;void&nbsp;usage(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;msg,
         int&nbsp;exitCode)</pre>
<div class="block">Prints the usage and then exits.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>args</code> - The command line args.</dd></dl>
</li>
</ul>
<a name="main(java.lang.String[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)
                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Driver for index segment build against a named index on a local journal.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>args</code> - <code>[opts] journal [name]*</code>, where <i>journal</i> is
            the name of the journal file, where <i>name</i> is the name of
            a B+Tree registered on that journal, and where <i>opts</i> are
            any of:
            <dl>
            <dt>-m #</dt>
            <dd>Override the default branching factor for the index
            segment.</dd>
            <dt>-alg <i>algorithm</i></dt>
            <dd>Specify which build algorithm to use. See
            <code>BuildEnum</code>.</dd>
            <dt>-merge or -build</dt>
            <dd>Specifies whether to do a compacting merge (deleted tuples
            are purged from the generated index segment) or an incremental
            build (deleted tuples are preserved). The default is
            <i>merge</i>.</dd>
            <dt>-O outDir</dt>
            <dd>Specify the name of the directory on which the generated
            index segment file(s) will be written. This defaults to the
            current working directory. Each index segment file will be
            named based on the name of the source index with the
            <code>.seg</code> extension). .</dd>
            </dl>
            . If no <i>name</i>s are specified, then an index segment will
            be generated for each named B+Tree registered on the source
            journal.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IndexSegmentBuilder.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/IndexSegmentAddressManager.html" title="class in com.bigdata.btree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/btree/IndexSegmentBuilder.AbstractSimpleNodeData.html" title="class in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/IndexSegmentBuilder.html" target="_top">Frames</a></li>
<li><a href="IndexSegmentBuilder.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
