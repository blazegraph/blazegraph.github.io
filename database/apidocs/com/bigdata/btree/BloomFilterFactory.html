<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Jan 21 00:30:50 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BloomFilterFactory (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="BloomFilterFactory (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BloomFilterFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/BloomFilter.BloomFilterCounters.html" title="class in com.bigdata.btree"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/BloomFilterFactory.html" target="_top">Frames</a></li>
<li><a href="BloomFilterFactory.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.btree</div>
<h2 title="Class BloomFilterFactory" class="title">Class BloomFilterFactory</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.btree.BloomFilterFactory</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">BloomFilterFactory</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></pre>
<div class="block">An interface that is used to generate a bloom filter for an
 <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> and which allows the caller to specify the expected
 number of index entries, the desired error rate for the filter at that #of
 index entries, and the maximum error rate before the bloom filter will be
 disabled.
 <p>
 While the bloom filter is always a "perfect" fit for an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>
 since the #of index entries is known before we build the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>,
 that is not true of a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>. For a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>, the performance
 of the bloom filter will degrade as you exceed the #of index entries for
 which it was provisioned (at a desired error rate). Therefore the factory
 also specifies the error rate above which the bloom filter will be disabled
 for a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>. The factory works backwards from the actual bit length
 of the bloom filter and the maximum allowed error rate to derive the #of
 index entries which would achieve that error rate. The bloom filter is
 disabled when inserts into the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> reach that threshold #of index
 entries.
 <p>
 Once a bloom filter has been disabled for a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> it will not be
 re-enabled for that <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>. However, in the scale-out architecture
 the a new mutable <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is created each time the journal overflows
 and the data from the historical view is migrated into <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s.
 Both the new mutable <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> and <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s will have bloom
 filters configured according to this factory. The bloom filter on the new
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> will operate until the #of index entries in that <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>
 (not in the index or the index partition) exceeds the threashold at which the
 bloom filter would be expected to operate with the specified maximum error
 rate, at which point it will be disabled.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../serialized-form.html#com.bigdata.btree.BloomFilterFactory">Serialized Form</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/BloomFilterFactory.html" title="class in com.bigdata.btree">BloomFilterFactory</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT">DEFAULT</a></span></code>
<div class="block">The recommenced default factory configuration.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT_ERROR_RATE">DEFAULT_ERROR_RATE</a></span></code>
<div class="block">The default target error rate 0.02.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT_MAX_ERROR_RATE">DEFAULT_MAX_ERROR_RATE</a></span></code>
<div class="block">The default maximum error rate 0.15.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT_N">DEFAULT_N</a></span></code>
<div class="block">The default expected #of index entries 1000000.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#maxN">maxN</a></span></code>
<div class="block">The maximum #of index entries before the expected performance will be
 worse than the specified maximum error rate.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#maxP">maxP</a></span></code>
<div class="block">The maximum error rate for the bloom filter (it will be disabled for a
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> once the bloom filter can be expected to realize this error
 rate).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#n">n</a></span></code>
<div class="block">The expected #of index entries.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#p">p</a></span></code>
<div class="block">The desired error rate for the bloom filter at that #of index entries.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#BloomFilterFactory-int-">BloomFilterFactory</a></span>(int&nbsp;n)</code>
<div class="block">Configuration with the caller specified #of index entries and having a
 target error rate of <a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT_ERROR_RATE">0.02</a> and a maximum error
 rate of <a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT_MAX_ERROR_RATE">0.15</a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#BloomFilterFactory-int-double-double-">BloomFilterFactory</a></span>(int&nbsp;n,
                  double&nbsp;p,
                  double&nbsp;maxP)</code>
<div class="block">Core impl.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#newBloomFilter--">newBloomFilter</a></span>()</code>
<div class="block">Create and return a new (empty) bloom filter for a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/btree/BloomFilterFactory.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="n">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>n</h4>
<pre>public final&nbsp;int n</pre>
<div class="block">The expected #of index entries.</div>
</li>
</ul>
<a name="p">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>p</h4>
<pre>public final&nbsp;double p</pre>
<div class="block">The desired error rate for the bloom filter at that #of index entries.</div>
</li>
</ul>
<a name="maxP">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxP</h4>
<pre>public final&nbsp;double maxP</pre>
<div class="block">The maximum error rate for the bloom filter (it will be disabled for a
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> once the bloom filter can be expected to realize this error
 rate).</div>
</li>
</ul>
<a name="maxN">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>maxN</h4>
<pre>public final&nbsp;int maxN</pre>
<div class="block">The maximum #of index entries before the expected performance will be
 worse than the specified maximum error rate. A <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> will
 automatically disable its bloom filter once this many elements have been
 inserted. In practice, this is only a constraint on scale-up indices. For
 scale-out indices the maximum applies only the mutable <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>
 absorbing writes destined for a specific index partition and the
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s will have "perfect fit" bloom filters.</div>
</li>
</ul>
<a name="DEFAULT_N">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_N</h4>
<pre>public static final transient&nbsp;int DEFAULT_N</pre>
<div class="block">The default expected #of index entries 1000000.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.btree.BloomFilterFactory.DEFAULT_N">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_ERROR_RATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_ERROR_RATE</h4>
<pre>public static final transient&nbsp;double DEFAULT_ERROR_RATE</pre>
<div class="block">The default target error rate 0.02.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.btree.BloomFilterFactory.DEFAULT_ERROR_RATE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT_MAX_ERROR_RATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEFAULT_MAX_ERROR_RATE</h4>
<pre>public static final transient&nbsp;double DEFAULT_MAX_ERROR_RATE</pre>
<div class="block">The default maximum error rate 0.15.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.btree.BloomFilterFactory.DEFAULT_MAX_ERROR_RATE">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="DEFAULT">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT</h4>
<pre>public static final transient&nbsp;<a href="../../../com/bigdata/btree/BloomFilterFactory.html" title="class in com.bigdata.btree">BloomFilterFactory</a> DEFAULT</pre>
<div class="block">The recommenced default factory configuration. This configuration is
 designed to provide a bloom filter with good performance up to ~2M index
 entries and then shut off automatically. This works for both the scale-up
 case (good for small indices and turns off for large indices) and for
 scale-out (just about right sized for scale-out, depending on the split
 handler).
 <p>
 The space requirements of a <a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree"><code>BloomFilter</code></a> are approximately one
 byte per index entry for a reasonable false positive rate (aka error
 rate). Use <a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT"><code>DEFAULT</code></a> for reasonable defaults.
 With these values, the bloom filter will be limited to an index with no
 more than ~2M entries. After than the bloom filter begins to have
 diminishing results due to an increasing false positive rate and will be
 automatically disabled. If you increase the expected #of index entries,
 then you can handle larger indices with the same error rate, but this
 swiftly gets into diminishing returns again because the latency required
 to materialize and persist the bloom filter becomes noticeable. Therefore
 the default configuration for the bloom filter is highly accurate up to
 1M index entries (0.02 error rate) and then begins to loose precision. If
 the index grows large enough then the expected error rate of the bloom
 filter will degrade to the point where it will be automatically disabled.
 <p>
 While this places an effective upper bound on the size of a
 <em>scale-up</em> index that can make effective use of a bloom filter,
 scale-out indices DO NOT share the same limitation. Each time a scale-out
 index is partitioned, it is broken into a mutable <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> for
 absorbing writes for an index partition and zero or more
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s. Each time an overflow occurs, index entries are
 migrated to the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s, so the #of index entries in the
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is never that large. Finally, #of index entries in an
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is always known when the <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is
 built, so the <a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree"><code>BloomFilter</code></a> for an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a> is always a
 perfect fit.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BloomFilterFactory-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BloomFilterFactory</h4>
<pre>public&nbsp;BloomFilterFactory(int&nbsp;n)</pre>
<div class="block">Configuration with the caller specified #of index entries and having a
 target error rate of <a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT_ERROR_RATE">0.02</a> and a maximum error
 rate of <a href="../../../com/bigdata/btree/BloomFilterFactory.html#DEFAULT_MAX_ERROR_RATE">0.15</a>.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - The expected #of index entries for a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> (this
            value is ignored for <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>n</i> is non-positive.</dd>
</dl>
</li>
</ul>
<a name="BloomFilterFactory-int-double-double-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BloomFilterFactory</h4>
<pre>public&nbsp;BloomFilterFactory(int&nbsp;n,
                          double&nbsp;p,
                          double&nbsp;maxP)</pre>
<div class="block">Core impl.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - The expected #of index entries (this value is ignored for
            <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>s).</dd>
<dd><code>p</code> - The desired error rate for the bloom filter at that #of index
            entries (or at the actual #of index entries for an
            <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>).</dd>
<dd><code>maxP</code> - The maximum error rate for the bloom filter for a
            <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> (it will be disabled for a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> once
            the bloom filter can be expected to realize this error rate).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>n</i> is non-positive.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - unless <i>p</i> lies in (0:1].</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - unless <i>maxP</i> lies in (<i>p</i>:1].</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newBloomFilter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newBloomFilter</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a>&nbsp;newBloomFilter()</pre>
<div class="block">Create and return a new (empty) bloom filter for a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or
 <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.
 <p>
 The bloom filter can be provisioned with reference to <code>/architecture/bloomfilter.xls</code>. Let <code>p</code> be the probability of
 a false positive (aka the error rate) and <code>n</code> be the #of index
 entries. The values p=.02 and n=1M result in a space requirement of
 8656171 bits or approximately 1mb and uses ~ 8.6 bits per element. In
 order to achieve the same error rate with n=10M, the size requirements of
 the bloom filter will be approximately 10mb since the filter will still
 use ~ 8.6 bits per element for that error rate, or roughly one byte per
 index entry.
 <p>
 The maximum record length for the backing store can easily be exceeded by
 a large bloom filter, large bloom filters will require significant time
 to read/write during checkpoints, and large bloom filters will be written
 each time a dirty index is involved in a commit.
 <p>
 While the scale-out architecture uses group commits and hence can be
 expected to perform more commits during a bulk data load, it also uses
 one bloom filter per <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> so the #of index entries is
 bounded by the configured <a href="../../../com/bigdata/btree/ISimpleSplitHandler.html" title="interface in com.bigdata.btree"><code>ISimpleSplitHandler</code></a> in an application
 dependent manner. On the other hand, the bloom filter performance will
 degrade as a scale-up index grows in size since the bloom filter can not
 be made very large for a scale-up store (the maximum record size is
 reduced in order to permit more records) and large indices will therefore
 experience increasing false positive rates as they grow.
 <p>
 Whether or not a bloom filter is useful depends on the application. The
 bloom filter will ONLY be used for point tests such as contains(),
 lookup(), or an <a href="../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> that is fully bound and therefore can
 benefit from testing a bloom filter.</div>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BloomFilterFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/BloomFilter.BloomFilterCounters.html" title="class in com.bigdata.btree"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/BloomFilterFactory.html" target="_top">Frames</a></li>
<li><a href="BloomFilterFactory.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
