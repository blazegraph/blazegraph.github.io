<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Mon Mar 18 18:55:22 UTC 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BloomFilter (Blazegraph Database Platform 2.1.5 API)</title>
<meta name="date" content="2019-03-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BloomFilter (Blazegraph Database Platform 2.1.5 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BloomFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/BigdataSet.html" title="class in com.bigdata.btree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/btree/BloomFilter.BloomFilterCounters.html" title="class in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/BloomFilter.html" target="_top">Frames</a></li>
<li><a href="BloomFilter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.btree</div>
<h2 title="Class BloomFilter" class="title">Class BloomFilter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.btree.BloomFilter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree">IBloomFilter</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html?is-external=true" title="class or interface in java.io">Externalizable</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">BloomFilter</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree">IBloomFilter</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html?is-external=true" title="class or interface in java.io">Externalizable</a></pre>
<div class="block">Encapsulates the actual implementation class and provides the protocol for
 (de-)serialization.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../serialized-form.html#com.bigdata.btree.BloomFilter">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.BloomFilterCounters.html" title="class in com.bigdata.btree">BloomFilter.BloomFilterCounters</a></strong></code>
<div class="block">Counters for bloom filter access and notification of false positives.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BloomFilter.BloomFilterCounters.html" title="class in com.bigdata.btree">BloomFilter.BloomFilterCounters</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#counters">counters</a></strong></code>
<div class="block">Counters are not persistent.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#BloomFilter()">BloomFilter</a></strong>()</code>
<div class="block">De-serialization ctor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#BloomFilter(int,%20double)">BloomFilter</a></strong>(int&nbsp;n,
           double&nbsp;p)</code>
<div class="block">Ctor specifies <code>maxN := n * 2</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#BloomFilter(int,%20double,%20int)">BloomFilter</a></strong>(int&nbsp;n,
           double&nbsp;p,
           int&nbsp;maxN)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#add(byte[])">add</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Adds the key to the filter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#contains(byte[])">contains</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Test the filter for the key <strong>a <code>true</code> return DOES NOT
 guarantee that the key has been added to the filter while a
 <code>false</code> return guarantees that the key HAS NOT been added to
 the filter</strong>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#disable()">disable</a></strong>()</code>
<div class="block">Disables the bloom filter associated with the index.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#falsePos()">falsePos</a></strong>()</code>
<div class="block">Notify the bloom filter that a false positive was observed for a key that
 for which <a href="../../../com/bigdata/btree/IBloomFilter.html#add(byte[])"><code>IBloomFilter.add(byte[])</code></a> reported <code>true</code> (the key was
 in fact not in the index).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getAddr()">getAddr</a></strong>()</code>
<div class="block">Address that can be used to read this object from the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getBitLength()">getBitLength</a></strong>()</code>
<div class="block">The bit length of the filter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getBitLength(int,%20int)">getBitLength</a></strong>(int&nbsp;hashFunctionCount,
            int&nbsp;nentries)</code>
<div class="block">Return the bit length required to provision a filter having the specified
 #of hash functions and the target capacity.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getEntryCountForErrorRate(int,%20long,%20double)">getEntryCountForErrorRate</a></strong>(int&nbsp;k,
                         long&nbsp;m,
                         double&nbsp;p)</code>
<div class="block">This returns the #of index entries at which the bloom filter will have
 the specified <em>expected</em> error rate.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getErrorRate()">getErrorRate</a></strong>()</code>
<div class="block">The false positive error rate estimated as <code>2^-d</code>, where
 <i>d</i> is the #of hash functions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getHashFunctionCount()">getHashFunctionCount</a></strong>()</code>
<div class="block">The #of hash functions used by the filter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getHashFunctionCount(double)">getHashFunctionCount</a></strong>(double&nbsp;errorRate)</code>
<div class="block">Return the #of hash functions required to achieve the specified error
 rate.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getMaxN()">getMaxN</a></strong>()</code>
<div class="block">The #of index entries at which the filter will have reached its maximum
 error rate (from the ctor).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getN()">getN</a></strong>()</code>
<div class="block">The expected #of index entries (from the ctor).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>double</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#getP()">getP</a></strong>()</code>
<div class="block">The target error rate when there are <a href="../../../com/bigdata/btree/BloomFilter.html#getN()"><code>getN()</code></a> index entries (from
 the ctor).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#isDirty()">isDirty</a></strong>()</code>
<div class="block">Return <code>true</code> iff the state of the filter has been modified
 but not yet written onto the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#isEnabled()">isEnabled</a></strong>()</code>
<div class="block">Return <code>true</code> unless the bloom filter has been disabled.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#read(com.bigdata.rawstore.IRawStore,%20long)">read</a></strong>(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
    long&nbsp;addr)</code>
<div class="block">Read a bloom filter record from the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#readExternal(java.io.ObjectInput)">readExternal</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInput.html?is-external=true" title="class or interface in java.io">ObjectInput</a>&nbsp;in)</code>
<div class="block">Note: On read, the <a href="../../../com/bigdata/btree/BloomFilter.html#addr"><code>addr</code></a> is set to <code>0L</code>, the
 <a href="../../../com/bigdata/btree/BloomFilter.html#dirty"><code>dirty</code></a> flag is cleared, and <a href="../../../com/bigdata/btree/BloomFilter.html#enabled"><code>enabled</code></a> flag is set.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#write(com.bigdata.rawstore.IRawStore)">write</a></strong>(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store)</code>
<div class="block">Writes the bloom filter on the store and clears the <a href="../../../com/bigdata/btree/BloomFilter.html#isDirty()"><code>isDirty()</code></a>
 flag.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BloomFilter.html#writeExternal(java.io.ObjectOutput)">writeExternal</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutput.html?is-external=true" title="class or interface in java.io">ObjectOutput</a>&nbsp;out)</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="counters">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>counters</h4>
<pre>public transient&nbsp;<a href="../../../com/bigdata/btree/BloomFilter.BloomFilterCounters.html" title="class in com.bigdata.btree">BloomFilter.BloomFilterCounters</a> counters</pre>
<div class="block">Counters are not persistent.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BloomFilter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BloomFilter</h4>
<pre>public&nbsp;BloomFilter()</pre>
<div class="block">De-serialization ctor.</div>
</li>
</ul>
<a name="BloomFilter(int, double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BloomFilter</h4>
<pre>public&nbsp;BloomFilter(int&nbsp;n,
           double&nbsp;p)</pre>
<div class="block">Ctor specifies <code>maxN := n * 2</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>n</code> - The expected #of index entries.</dd><dd><code>p</code> - The target error rate.</dd></dl>
</li>
</ul>
<a name="BloomFilter(int, double, int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BloomFilter</h4>
<pre>public&nbsp;BloomFilter(int&nbsp;n,
           double&nbsp;p,
           int&nbsp;maxN)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>n</code> - The expected #of index entries.</dd><dd><code>p</code> - The target error rate.</dd><dd><code>maxN</code> - The #of index entries at which the filter will have reached
            its maximum error rate. (The value is normally calculated by
            the <a href="../../../com/bigdata/btree/BloomFilterFactory.html" title="class in com.bigdata.btree"><code>BloomFilterFactory</code></a>.)</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>n</i> is non-positive.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - unless <i>p</i> lies in (0:1).</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>maxN</i> is LT <i>n</i>.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getN()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getN</h4>
<pre>public final&nbsp;int&nbsp;getN()</pre>
<div class="block">The expected #of index entries (from the ctor).</div>
</li>
</ul>
<a name="getP()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getP</h4>
<pre>public final&nbsp;double&nbsp;getP()</pre>
<div class="block">The target error rate when there are <a href="../../../com/bigdata/btree/BloomFilter.html#getN()"><code>getN()</code></a> index entries (from
 the ctor).
 <p>
 Note: This class does not know the actual false positive error rate.
 However, that is tracked by the <a href="../../../com/bigdata/btree/AbstractBTree.html#btreeCounters"><code>AbstractBTree.btreeCounters</code></a>.</div>
</li>
</ul>
<a name="getErrorRate()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getErrorRate</h4>
<pre>public&nbsp;double&nbsp;getErrorRate()</pre>
<div class="block">The false positive error rate estimated as <code>2^-d</code>, where
 <i>d</i> is the #of hash functions. This will be close to but typically
 not exactly the same as the value of <a href="../../../com/bigdata/btree/BloomFilter.html#getP()"><code>getP()</code></a> specified to the
 ctor.
 <p>
 Note: This class does not know the actual false positive error rate.
 However, that is tracked by the <a href="../../../com/bigdata/btree/AbstractBTree.html#btreeCounters"><code>AbstractBTree.btreeCounters</code></a>.</div>
</li>
</ul>
<a name="getMaxN()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxN</h4>
<pre>public final&nbsp;int&nbsp;getMaxN()</pre>
<div class="block">The #of index entries at which the filter will have reached its maximum
 error rate (from the ctor).</div>
</li>
</ul>
<a name="getHashFunctionCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHashFunctionCount</h4>
<pre>public final&nbsp;int&nbsp;getHashFunctionCount()</pre>
<div class="block">The #of hash functions used by the filter.</div>
</li>
</ul>
<a name="getBitLength()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBitLength</h4>
<pre>public final&nbsp;long&nbsp;getBitLength()</pre>
<div class="block">The bit length of the filter.</div>
</li>
</ul>
<a name="getHashFunctionCount(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHashFunctionCount</h4>
<pre>public static&nbsp;int&nbsp;getHashFunctionCount(double&nbsp;errorRate)</pre>
<div class="block">Return the #of hash functions required to achieve the specified error
 rate. If <code>p</code> is the probability of a false positive and
 <code>d</code> is the #of hash functions, then
 
 <pre>
 p = pow(2, -d)
 </pre>
 
 and
 
 <pre>
 d = ceil(-ln(p) / ln(2))
 </pre></div>
</li>
</ul>
<a name="getBitLength(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBitLength</h4>
<pre>public static&nbsp;long&nbsp;getBitLength(int&nbsp;hashFunctionCount,
                int&nbsp;nentries)</pre>
<div class="block">Return the bit length required to provision a filter having the specified
 #of hash functions and the target capacity. This is
 
 <pre>
 
 bitLength = ceil(nentries * (hashFunctionCount / ln(2)))
 
 </pre></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>hashFunctionCount</code> - The #of hash functions.</dd><dd><code>nentries</code> - The target capacity.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The required bit length.</dd></dl>
</li>
</ul>
<a name="getEntryCountForErrorRate(int, long, double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryCountForErrorRate</h4>
<pre>public static&nbsp;int&nbsp;getEntryCountForErrorRate(int&nbsp;k,
                            long&nbsp;m,
                            double&nbsp;p)</pre>
<div class="block">This returns the #of index entries at which the bloom filter will have
 the specified <em>expected</em> error rate. The probability of a false
 positive is
 
 <pre>
 p = (1 - (1 - 1 / m) &circ; kn) &circ; k
 </pre>
 
 where m is the bit length of the filter, k is the #of hash functions, and
 n is the #of items that have been inserted into the filter.
 
 or approximately
 
 <pre>
 p = (1 - e &circ; -kn / m) &circ; k
 </pre>
 
 solving for <code>n</code> we obtain
 
 <pre>
 n = -m ln( 1 - p&circ;(1/k) ) / k
 </pre></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>k</code> - The #of hash functions.</dd><dd><code>m</code> - The bit length of the filter.</dd><dd><code>p</code> - The expected error rate.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of index entries at which the expected bloom filter error
         rate will be the specified value.</dd><dt><span class="strong">See Also:</span></dt><dd><code>http://en.wikipedia.org/wiki/Bloom_filter</code></dd></dl>
</li>
</ul>
<a name="add(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;boolean&nbsp;add(byte[]&nbsp;key)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBloomFilter.html#add(byte[])">IBloomFilter</a></code></strong></div>
<div class="block">Adds the key to the filter.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBloomFilter.html#add(byte[])">add</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree">IBloomFilter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the filter state was unchanged by the
         incorporation of this key into the filter.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the filter has been <a href="../../../com/bigdata/btree/BloomFilter.html#disable()"><code>disable()</code></a>d</dd></dl>
</li>
</ul>
<a name="contains(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contains</h4>
<pre>public&nbsp;boolean&nbsp;contains(byte[]&nbsp;key)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBloomFilter.html#contains(byte[])">IBloomFilter</a></code></strong></div>
<div class="block">Test the filter for the key <strong>a <code>true</code> return DOES NOT
 guarantee that the key has been added to the filter while a
 <code>false</code> return guarantees that the key HAS NOT been added to
 the filter</strong>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBloomFilter.html#contains(byte[])">contains</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree">IBloomFilter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the filter has either that key or some key
         that is hash equivalent to that key using the hashing function
         imposed by the filter; <code>false</code> iff the filter can
         guarantee that the key has not been added to the filter.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the filter has been <a href="../../../com/bigdata/btree/BloomFilter.html#disable()"><code>disable()</code></a>d</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="getAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddr</h4>
<pre>public final&nbsp;long&nbsp;getAddr()</pre>
<div class="block">Address that can be used to read this object from the store.
 <p>
 Note: This is not a persistent property. However the value is set when
 the record is read from, or written on, the store.</div>
</li>
</ul>
<a name="read(com.bigdata.rawstore.IRawStore, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public static&nbsp;<a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a>&nbsp;read(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
               long&nbsp;addr)</pre>
<div class="block">Read a bloom filter record from the store.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>store</code> - the store.</dd><dd><code>addr</code> - the address of the bloom filter record.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the de-serialized bloom filter record. The address from which it
         was loaded is set on the bloom filter as a side-effect.</dd></dl>
</li>
</ul>
<a name="isDirty()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDirty</h4>
<pre>public final&nbsp;boolean&nbsp;isDirty()</pre>
<div class="block">Return <code>true</code> iff the state of the filter has been modified
 but not yet written onto the store. The filter is presumed clean when
 created or when it is read from the store. The filter will remain clean
 until <a href="../../../com/bigdata/btree/BloomFilter.html#add(byte[])"><code>add(byte[])</code></a> returns <code>true</code>, indicating that
 the state of the filter has been changed.</div>
</li>
</ul>
<a name="write(com.bigdata.rawstore.IRawStore)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;long&nbsp;write(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store)</pre>
<div class="block">Writes the bloom filter on the store and clears the <a href="../../../com/bigdata/btree/BloomFilter.html#isDirty()"><code>isDirty()</code></a>
 flag.
 <p>
 Note: This also sets the address on <a href="../../../com/bigdata/btree/BloomFilter.html#addr"><code>addr</code></a> as a side-effect, but
 the address is NOT written into the store since it is not available until
 after the record has been serialized.
 <p>
 Note: This method DOES NOT test <a href="../../../com/bigdata/btree/BloomFilter.html#isDirty()"><code>isDirty()</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>store</code> - The store.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address on which it was written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the filter is not dirty.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the filter is not enabled.</dd></dl>
</li>
</ul>
<a name="disable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disable</h4>
<pre>public final&nbsp;long&nbsp;disable()</pre>
<div class="block">Disables the bloom filter associated with the index. A disabled bloom
 filter can not be persisted and will not respond to queries or permit
 mutations.
 <p>
 Note: This method is invoked by <a href="../../../com/bigdata/btree/AbstractBTree.html#insert(byte[],%20byte[])"><code>AbstractBTree.insert(byte[], byte[])</code></a> when
 the #of index entries exceeds the maximum allowed for the bloom filter.
 At that point the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is dirty. <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> will notice
 that the bloom filter is disabled will write its address as 0L so the
 bloom filter is no longer reachable from the post-checkpoint record.
 <p></div>
<dl><dt><span class="strong">Returns:</span></dt><dd>the current address for recycling</dd></dl>
</li>
</ul>
<a name="isEnabled()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isEnabled</h4>
<pre>public final&nbsp;boolean&nbsp;isEnabled()</pre>
<div class="block">Return <code>true</code> unless the bloom filter has been disabled.
 <p>
 Note: A bloom filter may be disabled is the #of index entries has
 exceeded the maximum desired error rate for the bloom filter.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>iff the bloom filter is enabled.</dd></dl>
</li>
</ul>
<a name="readExternal(java.io.ObjectInput)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readExternal</h4>
<pre>public&nbsp;void&nbsp;readExternal(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/ObjectInput.html?is-external=true" title="class or interface in java.io">ObjectInput</a>&nbsp;in)
                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ClassNotFoundException.html?is-external=true" title="class or interface in java.lang">ClassNotFoundException</a></pre>
<div class="block">Note: On read, the <a href="../../../com/bigdata/btree/BloomFilter.html#addr"><code>addr</code></a> is set to <code>0L</code>, the
 <a href="../../../com/bigdata/btree/BloomFilter.html#dirty"><code>dirty</code></a> flag is cleared, and <a href="../../../com/bigdata/btree/BloomFilter.html#enabled"><code>enabled</code></a> flag is set. It's
 necessary to override serialization otherwise java will default the
 <a href="../../../com/bigdata/btree/BloomFilter.html#enabled"><code>enabled</code></a> flag to <code>false</code> when an object is
 de-serialized - whoops!</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html?is-external=true#readExternal(java.io.ObjectInput)" title="class or interface in java.io">readExternal</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html?is-external=true" title="class or interface in java.io">Externalizable</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>in</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ClassNotFoundException.html?is-external=true" title="class or interface in java.lang">ClassNotFoundException</a></code></dd></dl>
</li>
</ul>
<a name="writeExternal(java.io.ObjectOutput)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeExternal</h4>
<pre>public&nbsp;void&nbsp;writeExternal(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/ObjectOutput.html?is-external=true" title="class or interface in java.io">ObjectOutput</a>&nbsp;out)
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html?is-external=true#writeExternal(java.io.ObjectOutput)" title="class or interface in java.io">writeExternal</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Externalizable.html?is-external=true" title="class or interface in java.io">Externalizable</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - </dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="falsePos()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>falsePos</h4>
<pre>public&nbsp;void&nbsp;falsePos()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBloomFilter.html#falsePos()">IBloomFilter</a></code></strong></div>
<div class="block">Notify the bloom filter that a false positive was observed for a key that
 for which <a href="../../../com/bigdata/btree/IBloomFilter.html#add(byte[])"><code>IBloomFilter.add(byte[])</code></a> reported <code>true</code> (the key was
 in fact not in the index). This method exists solely for reporting and
 tracking the actual error rate of the bloom filter.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBloomFilter.html#falsePos()">falsePos</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree">IBloomFilter</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BloomFilter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/BigdataSet.html" title="class in com.bigdata.btree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/btree/BloomFilter.BloomFilterCounters.html" title="class in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/BloomFilter.html" target="_top">Frames</a></li>
<li><a href="BloomFilter.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2019 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
