<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Thu Jan 21 00:33:19 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>AbstractBTree (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractBTree (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractBTree.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/bigdata/btree/AbstractBTree.IBTreeCounters.html" title="interface in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/AbstractBTree.html" target="_top">Frames</a></li>
<li><a href="AbstractBTree.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.btree</div>
<h2 title="Class AbstractBTree" class="title">Class AbstractBTree</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.btree.AbstractBTree</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/btree/IAutoboxBTree.html" title="interface in com.bigdata.btree">IAutoboxBTree</a>, <a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a>, <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a>, <a href="../../../com/bigdata/btree/IIndexLocalCounter.html" title="interface in com.bigdata.btree">IIndexLocalCounter</a>, <a href="../../../com/bigdata/btree/ILinearList.html" title="interface in com.bigdata.btree">ILinearList</a>, <a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a>, <a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a>, <a href="../../../com/bigdata/btree/ISimpleBTree.html" title="interface in com.bigdata.btree">ISimpleBTree</a>, <a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a>, <a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a>, <a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a>, <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree">IndexSegment</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">AbstractBTree</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a>, <a href="../../../com/bigdata/btree/IAutoboxBTree.html" title="interface in com.bigdata.btree">IAutoboxBTree</a>, <a href="../../../com/bigdata/btree/ILinearList.html" title="interface in com.bigdata.btree">ILinearList</a>, <a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a>, <a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>, <a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></pre>
<div class="block"><p>
 Base class for mutable and immutable B+-Tree implementations.
 </p>
 <p>
 The B+-Tree implementation supports variable length unsigned byte[] keys and
 provides a <a href="../../../com/bigdata/btree/keys/IKeyBuilder.html" title="interface in com.bigdata.btree.keys"><code>IKeyBuilder</code></a> utilities designed to make it possible to
 generate keys from any combination of primitive data types and Unicode
 strings. The total ordering imposed by the index is that of a bit-wise
 comparison of the variable length unsigned byte[] keys. Encoding Unicode keys
 is support by an integration with ICU4J and applications may choose the
 locale, strength, and other properties that govern the sort order of sort
 keys generated from Unicode strings. Sort keys produces by different collator
 objects are NOT compatible and applications that use Unicode data in their keys
 MUST make sure that they use a collator that imposes the same sort order each
 time they provision a <a href="../../../com/bigdata/btree/keys/KeyBuilder.html" title="class in com.bigdata.btree.keys"><code>KeyBuilder</code></a>.
 </p>
 <p>
 The use of variable length unsigned byte[] keys makes it possible for the
 B+-Tree to perform very fast comparison of a search key with keys in the
 nodes and leaves of the tree. To support fast search, the leading prefix is
 factored out each time a node or leaf is made immutable, e.g., directly
 proceeding serialization. Further, the separator keys are chosen to be the
 shortest separator key in order to further shorten the keys in the nodes of
 the tree.
 </p>
 <p>
 The B+Tree can optionally maintain version metadata (a version timestamp and
 deletion marker). Version metadata MUST be enabled (a) if the index will be
 used with transactional isolation; or (b) if the index is part of a scale-out
 index. In both cases the version timestamps and deletion markers play a
 critical role when reading from a fused view of an ordered set of indices
 describing an index or an index partition. Note that the existence of
 deletion markers means that <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount(byte[],%20byte[])"><code>rangeCount(byte[], byte[])</code></a> and
 <a href="../../../com/bigdata/btree/AbstractBTree.html#getEntryCount()"><code>getEntryCount()</code></a> are upper bounds as deleted entries will be reported
 until they are purged from the index by a compacting merge of the view.
 </p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/keys/KeyBuilder.html" title="class in com.bigdata.btree.keys"><code>KeyBuilder</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.IBTreeCounters.html" title="interface in com.bigdata.btree">AbstractBTree.IBTreeCounters</a></strong></code>
<div class="block">Interface declaring namespaces for performance counters collected for a
 B+Tree.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#branchingFactor">branchingFactor</a></strong></code>
<div class="block">The branching factor for the btree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#debug">debug</a></strong></code>
<div class="block">Flag turns on the use of <a href="../../../com/bigdata/btree/AbstractNode.html#assertInvariants()"><code>AbstractNode.assertInvariants()</code></a> and is
 automatically enabled when the <a href="../../../com/bigdata/btree/AbstractBTree.html#log"><code>logger</code></a> is set to
 <code>Level.DEBUG</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#DEBUG">DEBUG</a></strong></code>
<div class="block">True iff the <a href="../../../com/bigdata/btree/AbstractBTree.html#log"><code>log</code></a> level is DEBUG or less.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#dumpLog">dumpLog</a></strong></code>
<div class="block">Log for <a href="../../../com/bigdata/btree/AbstractBTree.html#dump(java.io.PrintStream)"><code>dump(PrintStream)</code></a> and friends.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#error">error</a></strong></code>
<div class="block">This field is set if an error is encountered that renders an unisolated
 index object unusable.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_CLOSED">ERROR_CLOSED</a></strong></code>
<div class="block">The index is already closed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_ERROR_STATE">ERROR_ERROR_STATE</a></strong></code>
<div class="block">An unisolated index view is in an error state.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_LESS_THAN_ZERO">ERROR_LESS_THAN_ZERO</a></strong></code>
<div class="block">A parameter was less than zero.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_READ_ONLY">ERROR_READ_ONLY</a></strong></code>
<div class="block">The index is read-only but a mutation operation was requested.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_TOO_LARGE">ERROR_TOO_LARGE</a></strong></code>
<div class="block">A parameter was too large.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_TRANSIENT">ERROR_TRANSIENT</a></strong></code>
<div class="block">The index is transient (not backed by persistent storage) but an
 operation that requires persistence was requested.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#INFO">INFO</a></strong></code>
<div class="block">True iff the <a href="../../../com/bigdata/btree/AbstractBTree.html#log"><code>log</code></a> level is INFO or less.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#log">log</a></strong></code>
<div class="block">Log for btree opeations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#metadata">metadata</a></strong></code>
<div class="block">The metadata record for the index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#ndistinctOnWriteRetentionQueue">ndistinctOnWriteRetentionQueue</a></strong></code>
<div class="block">The #of distinct nodes and leaves on the <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/NodeSerializer.html" title="class in com.bigdata.btree">NodeSerializer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#nodeSer">nodeSer</a></strong></code>
<div class="block">Used to serialize and de-serialize the nodes and leaves of the tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#readOnly">readOnly</a></strong></code>
<div class="block">When <code>true</code> the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> does not permit
 mutation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#root">root</a></strong></code>
<div class="block">The root of the btree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#store">store</a></strong></code>
<div class="block">The persistence store -or- <code>null</code> iff the B+Tree is transient.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentMap</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#storeCache">storeCache</a></strong></code>
<div class="block"><strong>Deprecated.</strong>&nbsp;</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/cache/IHardReferenceQueue.html" title="interface in com.bigdata.cache">IHardReferenceQueue</a>&lt;<a href="../../../com/bigdata/btree/PO.html" title="class in com.bigdata.btree">PO</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue">writeRetentionQueue</a></strong></code>
<div class="block">Nodes (that is nodes or leaves) are added to a hard reference queue when
 they are created or read from the store.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.btree.IRangeQuery">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></h3>
<code><a href="../../../com/bigdata/btree/IRangeQuery.html#ALL">ALL</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#CURSOR">CURSOR</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#DEFAULT">DEFAULT</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#DELETED">DELETED</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#FIXED_LENGTH_SUCCESSOR">FIXED_LENGTH_SUCCESSOR</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#KEYS">KEYS</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#NONE">NONE</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#PARALLEL">PARALLEL</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#READONLY">READONLY</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#REMOVEALL">REMOVEALL</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#REVERSE">REVERSE</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#VALS">VALS</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#AbstractBTree(com.bigdata.rawstore.IRawStore,%20com.bigdata.btree.INodeFactory,%20boolean,%20com.bigdata.btree.IndexMetadata,%20com.bigdata.io.compression.IRecordCompressorFactory)">AbstractBTree</a></strong>(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
             <a href="../../../com/bigdata/btree/INodeFactory.html" title="interface in com.bigdata.btree">INodeFactory</a>&nbsp;nodeFactory,
             boolean&nbsp;readOnly,
             <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
             <a href="../../../com/bigdata/io/compression/IRecordCompressorFactory.html" title="interface in com.bigdata.io.compression">IRecordCompressorFactory</a>&lt;?&gt;&nbsp;recordCompressorFactory)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#_reopen()">_reopen</a></strong>()</code>
<div class="block">This method is responsible for setting up the root leaf (either new or
 read from the store), the bloom filter, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#assertNotReadOnly()">assertNotReadOnly</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#assertNotTransient()">assertNotTransient</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#close()">close</a></strong>()</code>
<div class="block">The contract for <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> is to reduce the resource burden of the
 index while not rendering the index inoperative.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#contains(byte[])">contains</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Core method to decide whether the index has a (non-deleted) entry under a
 key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#contains(java.lang.Object)">contains</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</code>
<div class="block">Return true iff there is an entry for the key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#decodeRecordAddr(byte[])">decodeRecordAddr</a></strong>(byte[]&nbsp;buf)</code>
<div class="block">Decodes a signed long value as encoded by <code>#appendSigned(long)</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#dump(org.apache.log4j.Level,%20java.io.PrintStream)">dump</a></strong>(org.apache.log4j.Level&nbsp;level,
    <a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#dump(java.io.PrintStream)">dump</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out)</code>
<div class="block">Recursive dump of the tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BaseIndexStats.html" title="class in com.bigdata.btree">BaseIndexStats</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#dumpPages(boolean,%20boolean)">dumpPages</a></strong>(boolean&nbsp;recursive,
         boolean&nbsp;visitLeaves)</code>
<div class="block">Reports statistics for the index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#encodeRecordAddr(com.bigdata.io.ByteArrayBuffer,%20long)">encodeRecordAddr</a></strong>(<a href="../../../com/bigdata/io/ByteArrayBuffer.html" title="class in com.bigdata.io">ByteArrayBuffer</a>&nbsp;recordAddrBuf,
                long&nbsp;addr)</code>
<div class="block">Encode a raw record address into a byte[] suitable for storing in the
 value associated with a tuple and decoding using
 <a href="../../../com/bigdata/btree/AbstractBTree.html#decodeRecordAddr(byte[])"><code>decodeRecordAddr(byte[])</code></a></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract <a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getBloomFilter()">getBloomFilter</a></strong>()</code>
<div class="block">Return the optional <a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree"><code>IBloomFilter</code></a>, transparently
 <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>reopen()</code></a>ing the index if necessary.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getBranchingFactor()">getBranchingFactor</a></strong>()</code>
<div class="block">The branching factor for the btree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getBtreeCounters()">getBtreeCounters</a></strong>()</code>
<div class="block">Counters tracking various aspects of the btree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getContainsTuple()">getContainsTuple</a></strong>()</code>
<div class="block">Return a <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree"><code>Tuple</code></a> that may be used to test for the existence of
 tuples having a given key within the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getCounters()">getCounters</a></strong>()</code>
<div class="block">Return performance counters.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getEntryCount()">getEntryCount</a></strong>()</code>
<div class="block">The #of entries (aka tuples) in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getIndexMetadata()">getIndexMetadata</a></strong>()</code>
<div class="block">The metadata for the index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getLastCommitTime()">getLastCommitTime</a></strong>()</code>
<div class="block">The timestamp associated with the last <a href="../../../com/bigdata/journal/IAtomicStore.html#commit()"><code>IAtomicStore.commit()</code></a> in
 which writes buffered by this index were made restart-safe on the backing
 store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getLookupTuple()">getLookupTuple</a></strong>()</code>
<div class="block">Return a <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree"><code>Tuple</code></a> that may be used to copy the value associated with
 a key out of the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/NodeSerializer.html" title="class in com.bigdata.btree">NodeSerializer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getNodeSerializer()">getNodeSerializer</a></strong>()</code>
<div class="block">The object responsible for (de-)serializing the nodes and leaves of the
 <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree"><code>IIndex</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getReadLockCount()">getReadLockCount</a></strong>()</code>
<div class="block">Return the #of read-locks held by the current thread for a mutable index
 view.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/mdi/IResourceMetadata.html" title="interface in com.bigdata.mdi">IResourceMetadata</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getResourceMetadata()">getResourceMetadata</a></strong>()</code>
<div class="block">The description of the resources comprising the index view.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getRevisionTimestamp()">getRevisionTimestamp</a></strong>()</code>
<div class="block">The timestamp associated with unisolated writes on this index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getRightMostNode(boolean)">getRightMostNode</a></strong>(boolean&nbsp;nodesOnly)</code>
<div class="block">Utility method returns the right-most node in the B+Tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getRoot()">getRoot</a></strong>()</code>
<div class="block">The root of the btree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getRootOrFinger(byte[])">getRootOrFinger</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Returns the node or leaf to be used for search.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getStatistics()">getStatistics</a></strong>()</code>
<div class="block">Return a statistics snapshot of the B+Tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IBTreeUtilizationReport.html" title="interface in com.bigdata.btree">IBTreeUtilizationReport</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getUtilization()">getUtilization</a></strong>()</code>
<div class="block">Computes and returns the utilization of the tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#getWriteTuple()">getWriteTuple</a></strong>()</code>
<div class="block">Private instance used for mutation operations (insert, remove) which are
 single threaded.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#indexOf(byte[])">indexOf</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Lookup the index position of the key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#insert(byte[],%20byte[])">insert</a></strong>(byte[]&nbsp;key,
      byte[]&nbsp;value)</code>
<div class="block">Insert or update a value under the key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#insert(byte[],%20byte[],%20boolean,%20boolean,%20long,%20com.bigdata.btree.Tuple)">insert</a></strong>(byte[]&nbsp;key,
      byte[]&nbsp;value,
      boolean&nbsp;delete,
      boolean&nbsp;putIfAbsent,
      long&nbsp;timestamp,
      <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</code>
<div class="block">Core method for inserting or updating a value under a key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#insert(java.lang.Object,%20java.lang.Object)">insert</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key,
      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;value)</code>
<div class="block">Insert with auto-magic handling of keys and value objects.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#isBalanced()">isBalanced</a></strong>()</code>
<div class="block">Return <code>true</code> iff the tree is balanced.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#isOpen()">isOpen</a></strong>()</code>
<div class="block">An "open" index has may have some buffered data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#isReadOnly()">isReadOnly</a></strong>()</code>
<div class="block">Return <code>true</code> iff this B+Tree is read-only.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#isTransient()">isTransient</a></strong>()</code>
<div class="block">Return <code>true</code> iff this is a transient data structure (no
 backing store).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#keyAt(long)">keyAt</a></strong>(long&nbsp;index)</code>
<div class="block">Return the key for the identified entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#lookup(byte[])">lookup</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Lookup a value for a key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#lookup(byte[],%20com.bigdata.btree.Tuple)">lookup</a></strong>(byte[]&nbsp;key,
      <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</code>
<div class="block">Core method for retrieving a value under a key.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#lookup(java.lang.Object)">lookup</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</code>
<div class="block">Lookup a value for a key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract <a href="../../../com/bigdata/btree/ILeafCursor.html" title="interface in com.bigdata.btree">ILeafCursor</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#newLeafCursor(byte[])">newLeafCursor</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract <a href="../../../com/bigdata/btree/ILeafCursor.html" title="interface in com.bigdata.btree">ILeafCursor</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#newLeafCursor(com.bigdata.btree.SeekEnum)">newLeafCursor</a></strong>(<a href="../../../com/bigdata/btree/SeekEnum.html" title="enum in com.bigdata.btree">SeekEnum</a>&nbsp;where)</code>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#putIfAbsent(byte[],%20byte[])">putIfAbsent</a></strong>(byte[]&nbsp;key,
           byte[]&nbsp;value)</code>
<div class="block">Insert or update a value under the key iff there is no entry for that key
 in the index.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCheck(byte[],%20boolean)">rangeCheck</a></strong>(byte[]&nbsp;key,
          boolean&nbsp;allowUpperBound)</code>
<div class="block"><strong>Deprecated.</strong>&nbsp;
<div class="block"><i>This method has been disabled. It always returns true.
             <p>
             The method is disabled because it forces the caller to ensure
             that the query lies within the specified range. While that is
             all well and good, this places an undue burden on
             <a href="../../../com/bigdata/btree/view/FusedView.html" title="class in com.bigdata.btree.view"><code>FusedView</code></a> which must substitute the actual key range
             of a shard view for the caller's key range. This makes the
             test effectively into a self-check of whether
             <a href="../../../com/bigdata/btree/view/FusedView.html" title="class in com.bigdata.btree.view"><code>FusedView</code></a> has correctly done this substitution rather
             than a check of whether a request was mapped onto the correct
             shard, which was the original purpose of this test. The logic
             for performing such range checks was moved into
             <a href="../../../com/bigdata/btree/RangeCheckUtil.html" title="class in com.bigdata.btree"><code>RangeCheckUtil</code></a>.</i></div>
</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCopy(com.bigdata.btree.IIndex,%20byte[],%20byte[],%20boolean)">rangeCopy</a></strong>(<a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a>&nbsp;src,
         byte[]&nbsp;fromKey,
         byte[]&nbsp;toKey,
         boolean&nbsp;overflow)</code>
<div class="block">Copy all data, including deleted index entry markers and timestamps iff
 supported by the source and target.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount()">rangeCount</a></strong>()</code>
<div class="block">Return the #of tuples in the index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount(byte[],%20byte[])">rangeCount</a></strong>(byte[]&nbsp;fromKey,
          byte[]&nbsp;toKey)</code>
<div class="block">Return the #of tuples in a half-open key range.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount(java.lang.Object,%20java.lang.Object)">rangeCount</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;fromKey,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;toKey)</code>
<div class="block">Variant implicitly converts the optional application keys into unsigned
 byte[]s.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCountExact(byte[],%20byte[])">rangeCountExact</a></strong>(byte[]&nbsp;fromKey,
               byte[]&nbsp;toKey)</code>
<div class="block">Return the exact #of tuples in a half-open key range.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCountExactWithDeleted(byte[],%20byte[])">rangeCountExactWithDeleted</a></strong>(byte[]&nbsp;fromKey,
                          byte[]&nbsp;toKey)</code>
<div class="block">Note: <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount(byte[],%20byte[])"><code>rangeCount(byte[], byte[])</code></a> already reports deleted tuples
 for an <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> so this method is just delegated to that
 one.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator()">rangeIterator</a></strong>()</code>
<div class="block">Visits all tuples in key order.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(byte[],%20byte[])">rangeIterator</a></strong>(byte[]&nbsp;fromKey,
             byte[]&nbsp;toKey)</code>
<div class="block">Return an iterator that visits the entries in a half-open key range.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(byte[],%20byte[],%20int,%20int,%20cutthecrap.utils.striterators.IFilter)">rangeIterator</a></strong>(byte[]&nbsp;fromKey,
             byte[]&nbsp;toKey,
             int&nbsp;capacityIsIgnored,
             int&nbsp;flags,
             <a href="../../../cutthecrap/utils/striterators/IFilter.html" title="interface in cutthecrap.utils.striterators">IFilter</a>&nbsp;filter)</code>
<div class="block">Designated variant (the one that gets overridden) for an iterator that
 visits the entries in a half-open key range.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(java.lang.Object,%20java.lang.Object)">rangeIterator</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;fromKey,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;toKey)</code>
<div class="block">Variant implicitly converts the optional application keys into unsigned
 byte[]s.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(java.lang.Object,%20java.lang.Object,%20int,%20int,%20cutthecrap.utils.striterators.IFilter)">rangeIterator</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;fromKey,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;toKey,
             int&nbsp;capacity,
             int&nbsp;flags,
             <a href="../../../cutthecrap/utils/striterators/IFilter.html" title="interface in cutthecrap.utils.striterators">IFilter</a>&nbsp;filter)</code>
<div class="block">Variant implicitly converts the optional application keys into unsigned
 byte[]s.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#readLock()">readLock</a></strong>()</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain a shared read lock which
 is used (in the absence of other concurrency control mechanisms) to
 permit concurrent readers on an unisolated index while serializing access
 to that index when a writer must run.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#readNodeOrLeaf(long)">readNodeOrLeaf</a></strong>(long&nbsp;addr)</code>
<div class="block">Read a node or leaf from the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#recycle(long)">recycle</a></strong>(long&nbsp;addr)</code>
<div class="block">Recycle (aka delete) the allocation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#remove(byte[])">remove</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Remove the tuple under that key (will write a delete marker if delete
 markers are enabled).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#remove(byte[],%20com.bigdata.btree.Tuple)">remove</a></strong>(byte[]&nbsp;key,
      <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</code>
<div class="block">Core method for deleting a value under a key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#remove(java.lang.Object)">remove</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</code>
<div class="block">Remove the key and its associated value.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#removeAll()">removeAll</a></strong>()</code>
<div class="block">Remove all entries in the B+Tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()">reopen</a></strong>()</code>
<div class="block">(Re-) open the index.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../cutthecrap/utils/striterators/ICloseableIterator.html" title="interface in cutthecrap.utils.striterators">ICloseableIterator</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#scan()">scan</a></strong>()</code>
<div class="block">Visit all entries in the index in the natural order of the index
 (dereferencing visited tuples to the application objects stored within
 those tuples).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#setBTreeCounters(com.bigdata.btree.BTreeCounters)">setBTreeCounters</a></strong>(<a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a>&nbsp;btreeCounters)</code>
<div class="block">Replace the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#submit(byte[],%20byte[],%20com.bigdata.btree.proc.IKeyRangeIndexProcedure,%20com.bigdata.btree.proc.IResultHandler)">submit</a></strong>(byte[]&nbsp;fromKey,
      byte[]&nbsp;toKey,
      <a href="../../../com/bigdata/btree/proc/IKeyRangeIndexProcedure.html" title="interface in com.bigdata.btree.proc">IKeyRangeIndexProcedure</a>&nbsp;proc,
      <a href="../../../com/bigdata/btree/proc/IResultHandler.html" title="interface in com.bigdata.btree.proc">IResultHandler</a>&nbsp;handler)</code>
<div class="block">The procedure will be transparently applied against each index partition
 spanned by the given key range.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;T</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#submit(byte[],%20com.bigdata.btree.proc.ISimpleIndexProcedure)">submit</a></strong>(byte[]&nbsp;key,
      <a href="../../../com/bigdata/btree/proc/ISimpleIndexProcedure.html" title="interface in com.bigdata.btree.proc">ISimpleIndexProcedure</a>&lt;T&gt;&nbsp;proc)</code>
<div class="block">Submits an index procedure that operations on a single key to the
 appropriate index partition returning the result of that procedure.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#submit(int,%20int,%20byte[][],%20byte[][],%20com.bigdata.btree.proc.AbstractKeyArrayIndexProcedureConstructor,%20com.bigdata.btree.proc.IResultHandler)">submit</a></strong>(int&nbsp;fromIndex,
      int&nbsp;toIndex,
      byte[][]&nbsp;keys,
      byte[][]&nbsp;vals,
      <a href="../../../com/bigdata/btree/proc/AbstractKeyArrayIndexProcedureConstructor.html" title="class in com.bigdata.btree.proc">AbstractKeyArrayIndexProcedureConstructor</a>&nbsp;ctor,
      <a href="../../../com/bigdata/btree/proc/IResultHandler.html" title="interface in com.bigdata.btree.proc">IResultHandler</a>&nbsp;aggregator)</code>
<div class="block">Runs a procedure against an index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#toString()">toString</a></strong>()</code>
<div class="block">Fast summary information about the B+Tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#touch(com.bigdata.btree.AbstractNode)">touch</a></strong>(<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;node)</code>
<div class="block">
 This method is responsible for putting the node or leaf onto the ring
 buffer which controls (a) how long we retain a hard reference to the node
 or leaf; and (b) for writes, when the node or leaf is evicted with a zero
 reference count and made persistent (along with all dirty children).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#valueAt(long)">valueAt</a></strong>(long&nbsp;index)</code>
<div class="block">Return the value for the identified entry.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#valueAt(long,%20com.bigdata.btree.Tuple)">valueAt</a></strong>(long&nbsp;index,
       <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#writeLock()">writeLock</a></strong>()</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain an exclusive write lock
 which is used (in the absence of other concurrency control mechanisms) to
 serialize all processes accessing an unisolated index when a writer must
 run.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#writeNodeOrLeaf(com.bigdata.btree.AbstractNode)">writeNodeOrLeaf</a></strong>(<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;node)</code>
<div class="block">Codes the node and writes the coded record on the store (non-recursive).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/AbstractBTree.html#writeNodeRecursive(com.bigdata.btree.AbstractNode)">writeNodeRecursive</a></strong>(<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;node)</code>
<div class="block">Write a dirty node and its children using a post-order traversal that
 first writes any dirty leaves and then (recursively) their parent nodes.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.IBTreeStatistics">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></h3>
<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getHeight()">getHeight</a>, <a href="../../../com/bigdata/btree/IBTreeStatistics.html#getLeafCount()">getLeafCount</a>, <a href="../../../com/bigdata/btree/IBTreeStatistics.html#getNodeCount()">getNodeCount</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ILocalBTreeView">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a></h3>
<code><a href="../../../com/bigdata/btree/ILocalBTreeView.html#getMutableBTree()">getMutableBTree</a>, <a href="../../../com/bigdata/btree/ILocalBTreeView.html#getSourceCount()">getSourceCount</a>, <a href="../../../com/bigdata/btree/ILocalBTreeView.html#getSources()">getSources</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.IIndexLocalCounter">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/IIndexLocalCounter.html" title="interface in com.bigdata.btree">IIndexLocalCounter</a></h3>
<code><a href="../../../com/bigdata/btree/IIndexLocalCounter.html#getCounter()">getCounter</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ISimpleTreeIndexAccess">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></h3>
<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getHeight()">getHeight</a>, <a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getLeafCount()">getLeafCount</a>, <a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getNodeCount()">getNodeCount</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ICheckpointProtocol">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></h3>
<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getCheckpoint()">getCheckpoint</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getDirtyListener()">getDirtyListener</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getMetadataAddr()">getMetadataAddr</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRecordVersion()">getRecordVersion</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRootAddr()">getRootAddr</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#setDirtyListener(com.bigdata.btree.IDirtyListener)">setDirtyListener</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#setLastCommitTime(long)">setLastCommitTime</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#writeCheckpoint()">writeCheckpoint</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#writeCheckpoint2()">writeCheckpoint2</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.journal.ICommitter">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.journal.<a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a></h3>
<code><a href="../../../com/bigdata/journal/ICommitter.html#handleCommit(long)">handleCommit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ISimpleIndexAccess">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></h3>
<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#getStore()">getStore</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ERROR_CLOSED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_CLOSED</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_CLOSED</pre>
<div class="block">The index is already closed.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.btree.AbstractBTree.ERROR_CLOSED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_LESS_THAN_ZERO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_LESS_THAN_ZERO</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_LESS_THAN_ZERO</pre>
<div class="block">A parameter was less than zero.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.btree.AbstractBTree.ERROR_LESS_THAN_ZERO">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_TOO_LARGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_TOO_LARGE</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_TOO_LARGE</pre>
<div class="block">A parameter was too large.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.btree.AbstractBTree.ERROR_TOO_LARGE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_READ_ONLY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_READ_ONLY</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_READ_ONLY</pre>
<div class="block">The index is read-only but a mutation operation was requested.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.btree.AbstractBTree.ERROR_READ_ONLY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_TRANSIENT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_TRANSIENT</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_TRANSIENT</pre>
<div class="block">The index is transient (not backed by persistent storage) but an
 operation that requires persistence was requested.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.btree.AbstractBTree.ERROR_TRANSIENT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_ERROR_STATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_ERROR_STATE</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_ERROR_STATE</pre>
<div class="block">An unisolated index view is in an error state. It must be discarded and
 reloaded from the current checkpoint record.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="http://trac.blazegraph.com/ticket/1005"> Invalidate BTree
      objects if error occurs during eviction </a>, 
<a href="../../../constant-values.html#com.bigdata.btree.AbstractBTree.ERROR_ERROR_STATE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>protected static final&nbsp;org.apache.log4j.Logger log</pre>
<div class="block">Log for btree opeations.</div>
</li>
</ul>
<a name="INFO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INFO</h4>
<pre>protected static final&nbsp;boolean INFO</pre>
<div class="block">True iff the <a href="../../../com/bigdata/btree/AbstractBTree.html#log"><code>log</code></a> level is INFO or less.</div>
</li>
</ul>
<a name="DEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEBUG</h4>
<pre>protected static final&nbsp;boolean DEBUG</pre>
<div class="block">True iff the <a href="../../../com/bigdata/btree/AbstractBTree.html#log"><code>log</code></a> level is DEBUG or less.</div>
</li>
</ul>
<a name="dumpLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpLog</h4>
<pre>public static final&nbsp;org.apache.log4j.Logger dumpLog</pre>
<div class="block">Log for <a href="../../../com/bigdata/btree/AbstractBTree.html#dump(java.io.PrintStream)"><code>dump(PrintStream)</code></a> and friends.</div>
</li>
</ul>
<a name="debug">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>debug</h4>
<pre>protected final&nbsp;boolean debug</pre>
<div class="block">Flag turns on the use of <a href="../../../com/bigdata/btree/AbstractNode.html#assertInvariants()"><code>AbstractNode.assertInvariants()</code></a> and is
 automatically enabled when the <a href="../../../com/bigdata/btree/AbstractBTree.html#log"><code>logger</code></a> is set to
 <code>Level.DEBUG</code>.</div>
</li>
</ul>
<a name="store">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>store</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a> store</pre>
<div class="block">The persistence store -or- <code>null</code> iff the B+Tree is transient.</div>
</li>
</ul>
<a name="readOnly">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readOnly</h4>
<pre>protected final&nbsp;boolean readOnly</pre>
<div class="block">When <code>true</code> the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> does not permit
 mutation.</div>
</li>
</ul>
<a name="storeCache">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>storeCache</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Deprecated.html?is-external=true" title="class or interface in java.lang">@Deprecated</a>
protected final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ConcurrentMap.html?is-external=true" title="class or interface in java.util.concurrent">ConcurrentMap</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt; storeCache</pre>
<div class="block"><span class="strong">Deprecated.</span>&nbsp;</div>
<div class="block">Optional cache for <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a> and <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a> instances and
 always <code>null</code> if the B+Tree is transient.</div>
</li>
</ul>
<a name="branchingFactor">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>branchingFactor</h4>
<pre>protected final&nbsp;int branchingFactor</pre>
<div class="block">The branching factor for the btree.</div>
</li>
</ul>
<a name="root">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>root</h4>
<pre>protected volatile&nbsp;<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt; root</pre>
<div class="block">The root of the btree. This is initially a leaf until the leaf is split,
 at which point it is replaced by a node. The root is also replaced each
 time copy-on-write triggers a cascade of updates.
 <p>
 This hard reference is cleared to <code>null</code> if an index is
 <a href="../../../com/bigdata/btree/AbstractBTree.html#close()"><code>closed</code></a>. <a href="../../../com/bigdata/btree/AbstractBTree.html#getRoot()"><code>getRoot()</code></a> automatically uses
 <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>reopen()</code></a> to reload the root so that closed indices may be
 transparently made ready for further use (indices are closed to reduce
 their resource burden, not to make their references invalid). The
 <a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree"><code>AbstractNode</code></a> and derived classes <em>assume</em> that the root
 is non-null. This assumption is valid if <a href="../../../com/bigdata/btree/AbstractBTree.html#close()"><code>close()</code></a> is invoked by
 the application in a manner consistent with the single-threaded contract
 for the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.
 <p>
 Note: This field MUST be marked as [volatile] in order to guarantee
 correct semantics for double-checked locking in <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>reopen()</code></a>
 and <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>reopen()</code></a>.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><code>http://en.wikipedia.org/wiki/Double-checked_locking</code></dd></dl>
</li>
</ul>
<a name="error">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>error</h4>
<pre>protected volatile&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a> error</pre>
<div class="block">This field is set if an error is encountered that renders an unisolated
 index object unusable. For example, this can occur if an error was
 detected during incremental eviction of dirty nodes for a mutable index
 view since that means that there are partly serialized (and possibly
 inconsistenly serialized) evicted pages. Once this becomes non-
 <code>null</code> the index MUST be reloaded from the most recent
 checkpoint before it can be used (that is, you need to obtain a new view
 of the unisolated index since this field is sticky once set).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="http://trac.blazegraph.com/ticket/1005"> Invalidate BTree
      objects if error occurs during eviction </a></dd></dl>
</li>
</ul>
<a name="nodeSer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nodeSer</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/btree/NodeSerializer.html" title="class in com.bigdata.btree">NodeSerializer</a> nodeSer</pre>
<div class="block">Used to serialize and de-serialize the nodes and leaves of the tree.</div>
</li>
</ul>
<a name="writeRetentionQueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRetentionQueue</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/cache/IHardReferenceQueue.html" title="interface in com.bigdata.cache">IHardReferenceQueue</a>&lt;<a href="../../../com/bigdata/btree/PO.html" title="class in com.bigdata.btree">PO</a>&gt; writeRetentionQueue</pre>
<div class="block">Nodes (that is nodes or leaves) are added to a hard reference queue when
 they are created or read from the store. On eviction from the queue a
 dirty node is serialized by a listener against the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>. The
 nodes and leaves refer to their parent with a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a>s.
 Likewise, nodes refer to their children with a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a>. The
 hard reference queue in combination with <a href="../../../com/bigdata/btree/AbstractBTree.html#touch(com.bigdata.btree.AbstractNode)"><code>touch(AbstractNode)</code></a> and
 with hard references held on the stack ensures that the parent and/or
 children remain reachable during operations. Once the node is no longer
 strongly reachable weak references to that node may be cleared by the VM
 - in this manner the node will become unreachable by navigation from its
 ancestors in the btree. The special role of the hard reference queue is
 to further ensure that dirty nodes remain dirty by defering persistence
 until the reference count for the node is zero during an eviction from
 the queue.
 <p>
 Note that nodes are evicted as new nodes are added to the hard reference
 queue. This occurs in two situations: (1) when a new node is created
 during a split of an existing node; and (2) when a node is read in from
 the store. Inserts on this hard reference queue always drive evictions.
 Incremental writes basically make it impossible for the commit set to get
 "too large" - the maximum #of nodes to be written is bounded by the size
 of the hard reference queue. This helps to ensure fast commit operations
 on the store.
 <p>
 The minimum capacity for the hard reference queue is two (2) so that a
 split may occur without forcing eviction of either node participating in
 the split.
 <p>
 Note: The code in <a href="../../../com/bigdata/btree/Node.html#postOrderNodeIterator(boolean,%20boolean)"><code>Node.postOrderNodeIterator(boolean, boolean)</code></a>
 and <code>DirtyChildIterator</code> MUST NOT touch the hard reference queue
 since those iterators are used when persisting a node using a post-order
 traversal. If a hard reference queue eviction drives the serialization of
 a node and we touch the hard reference queue during the post-order
 traversal then we break down the semantics of
 <a href="../../../com/bigdata/cache/HardReferenceQueue.html#add(T)"><code>HardReferenceQueue.add(Object)</code></a> as the eviction does not
 necessarily cause the queue to reduce in length. Another way to handle
 this is to have <a href="../../../com/bigdata/cache/HardReferenceQueue.html#add(T)"><code>HardReferenceQueue.add(Object)</code></a> begin to evict
 objects before is is actually at capacity, but that is also a bit
 fragile.
 <p>
 Note: The <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a> uses a <a href="../../../com/bigdata/cache/HardReferenceQueue.html" title="class in com.bigdata.cache"><code>HardReferenceQueue</code></a>.
 This is based on a <a href="../../../com/bigdata/cache/RingBuffer.html" title="class in com.bigdata.cache"><code>RingBuffer</code></a> and is very fast. It does not use a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util"><code>HashMap</code></a> because we can resolve the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a> to the
 child <a href="../../../com/bigdata/btree/Node.html" title="class in com.bigdata.btree"><code>Node</code></a> or <a href="../../../com/bigdata/btree/Leaf.html" title="class in com.bigdata.btree"><code>Leaf</code></a> using top-down navigation as long as
 the <a href="../../../com/bigdata/btree/Node.html" title="class in com.bigdata.btree"><code>Node</code></a> or <a href="../../../com/bigdata/btree/Leaf.html" title="class in com.bigdata.btree"><code>Leaf</code></a> remains strongly reachable (that is, as
 long as it is on the <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a> or otherwise strongly
 held). This means that lookup in a map is not required for top-down
 navigation.
 <p></div>
</li>
</ul>
<a name="ndistinctOnWriteRetentionQueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ndistinctOnWriteRetentionQueue</h4>
<pre>protected&nbsp;int ndistinctOnWriteRetentionQueue</pre>
<div class="block">The #of distinct nodes and leaves on the <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>.</div>
</li>
</ul>
<a name="metadata">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>metadata</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a> metadata</pre>
<div class="block">The metadata record for the index. This data rarely changes during the
 life of the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> object, but it CAN be changed.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractBTree(com.bigdata.rawstore.IRawStore, com.bigdata.btree.INodeFactory, boolean, com.bigdata.btree.IndexMetadata, com.bigdata.io.compression.IRecordCompressorFactory)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractBTree</h4>
<pre>protected&nbsp;AbstractBTree(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
             <a href="../../../com/bigdata/btree/INodeFactory.html" title="interface in com.bigdata.btree">INodeFactory</a>&nbsp;nodeFactory,
             boolean&nbsp;readOnly,
             <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
             <a href="../../../com/bigdata/io/compression/IRecordCompressorFactory.html" title="interface in com.bigdata.io.compression">IRecordCompressorFactory</a>&lt;?&gt;&nbsp;recordCompressorFactory)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>store</code> - The persistence store.</dd><dd><code>nodeFactory</code> - Object that provides a factory for node and leaf objects.</dd><dd><code>readOnly</code> - <code>true</code> IFF it is <em>known</em> that the
            <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> is read-only.</dd><dd><code>metadata</code> - The <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> object for this B+Tree.</dd><dd><code>recordCompressorFactory</code> - Object that knows how to (de-)compress the serialized data
            records.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBtreeCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBtreeCounters</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a>&nbsp;getBtreeCounters()</pre>
<div class="block">Counters tracking various aspects of the btree.</div>
</li>
</ul>
<a name="setBTreeCounters(com.bigdata.btree.BTreeCounters)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBTreeCounters</h4>
<pre>public final&nbsp;void&nbsp;setBTreeCounters(<a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a>&nbsp;btreeCounters)</pre>
<div class="block">Replace the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a>.
 <p>
 Note: This is used by the <a href="../../../com/bigdata/resources/IndexManager.html" title="class in com.bigdata.resources"><code>IndexManager</code></a> to ensure that an index
 loaded from its backing store uses the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a> associated
 with that index since the <a href="../../../com/bigdata/service/DataService.html" title="class in com.bigdata.service"><code>DataService</code></a> was last (re-)started.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>btreeCounters</code> - The counters to be used.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the argument is <code>null</code>.</dd></dl>
</li>
</ul>
<a name="getBloomFilter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBloomFilter</h4>
<pre>public abstract&nbsp;<a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a>&nbsp;getBloomFilter()</pre>
<div class="block">Return the optional <a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree"><code>IBloomFilter</code></a>, transparently
 <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>reopen()</code></a>ing the index if necessary.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILocalBTreeView.html#getBloomFilter()">getBloomFilter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The bloom filter -or- <code>null</code> if there is no bloom
         filter (including the case where there is a bloom filter but it
         has been disabled since the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> has grown too large and
         the expected error rate of the bloom filter would be too high).</dd></dl>
</li>
</ul>
<a name="getCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounters</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a>&nbsp;getCounters()</pre>
<div class="block">Return performance counters.
 <p>
 Interesting performance counters and other statistics about the index.
 <p>
 Return some "statistics" about the btree including both the static
 <a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters"><code>CounterSet</code></a> and the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a>s.
 <p>
 Note: counters reporting directly on the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> use a
 snapshot mechanism which prevents a hard reference to the
 <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> from being attached to the return
 <a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters"><code>CounterSet</code></a> object. One consequence is that these counters will
 not update until the next time you invoke <a href="../../../com/bigdata/btree/AbstractBTree.html#getCounters()"><code>getCounters()</code></a>.
 <p>
 Note: In order to snapshot the counters use <a href="../../../com/bigdata/counters/OneShotInstrument.html" title="class in com.bigdata.counters"><code>OneShotInstrument</code></a> to
 prevent the inclusion of an inner class with a reference to the outer
 <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> instance.
 <p>
 Note: This method reports information that is NOT available from
 <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a>s. Some of this information is either static or
 relatively static (e.g., the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> for this index or its
 implementation class). Other information is dynamic (such as the #of
 nodes and leaves or the current size of the writeRetentionQueue). The
 dynamic information is valid for the specific index view as of the moment
 that it is sampled.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IIndex.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/BTreeCounters.html#getCounters()"><code>BTreeCounters.getCounters()</code></a>, 
<a href="http://sourceforge.net/apps/trac/bigdata/ticket/626">
      Expose performance counters for read-only indices </a></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">The contract for <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> is to reduce the resource burden of the
 index while not rendering the index inoperative. An index that has been
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>closed</code></a> MAY be <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>reopened</code></a> at any time
 (conditional on the continued availability of the backing store). Such an
 index reference remains valid after a <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a>. A closed index is
 transparently <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>reopened</code></a> by any access to the index data
 (scanning the index, probing the index, etc).
 <p>
 Note: A <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> on a dirty index MUST discard writes rather than
 flushing them to the store and MUST NOT update its <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>
 record - (<a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> is used to discard indices with partial writes
 when an <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal"><code>AbstractTask</code></a> fails). If you are seeking to
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> a mutable index view that state can be recovered by
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>ICheckpointProtocol.reopen()</code></a> then you MUST write a new <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record
 before closing the index.
 <p>
 Note: CLOSING A TRANSIENT INDEX WILL DISCARD ALL DATA!
 <p>
 This implementation clears the hard reference queue (releasing all node
 references), releases the hard reference to the root node, and releases
 the buffers on the <a href="../../../com/bigdata/btree/NodeSerializer.html" title="class in com.bigdata.btree"><code>NodeSerializer</code></a> (they will be naturally
 reallocated on reuse).
 <p>
 Note: <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> is NOT thread-safe and <a href="../../../com/bigdata/btree/AbstractBTree.html#close()"><code>close()</code></a> MUST
 be invoked in a context in which there will not be concurrent threads --
 the natural choice being the single-threaded commit service on the
 journal.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the root is <code>null</code>, indicating that the
                index is already closed.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the root is dirty (this implies that this is a mutable
                btree and there are mutations that have not been written
                through to the store)</dd></dl>
</li>
</ul>
<a name="reopen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reopen</h4>
<pre>public final&nbsp;void&nbsp;reopen()</pre>
<div class="block">(Re-) open the index. This method is part of a <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> /
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>ICheckpointProtocol.reopen()</code></a> protocol. That protocol may be used to reduce the
 resource burden of an index. This method is automatically invoked by a
 variety of methods that need to ensure that the index is available for
 use..
 <p>
 This method delegates to <a href="../../../com/bigdata/btree/AbstractBTree.html#_reopen()"><code>_reopen()</code></a> if double-checked locking
 demonstrates that the <a href="../../../com/bigdata/btree/AbstractBTree.html#root"><code>root</code></a> is <code>null</code> (indicating that
 the index has been closed). This method is automatically invoked by a
 variety of methods that need to ensure that the index is available for
 use.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()">reopen</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a>, 
<a href="../../../com/bigdata/btree/ICheckpointProtocol.html#isOpen()"><code>ICheckpointProtocol.isOpen()</code></a>, 
<code>#getRoot()</code></dd></dl>
</li>
</ul>
<a name="_reopen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_reopen</h4>
<pre>protected abstract&nbsp;void&nbsp;_reopen()</pre>
<div class="block">This method is responsible for setting up the root leaf (either new or
 read from the store), the bloom filter, etc. It is invoked by
 <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>reopen()</code></a> once <a href="../../../com/bigdata/btree/AbstractBTree.html#root"><code>root</code></a> has been show to be
 <code>null</code> with double-checked locking. When invoked in this
 context, the caller is guaranteed to hold a lock on <i>this</i>. This is
 done to ensure that at most one thread gets to re-open the index from the
 backing store.</div>
</li>
</ul>
<a name="isOpen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOpen</h4>
<pre>public final&nbsp;boolean&nbsp;isOpen()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#isOpen()">ICheckpointProtocol</a></code></strong></div>
<div class="block">An "open" index has may have some buffered data. A closed index will have
 to re-read any backing data from the backing store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#isOpen()">isOpen</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>If the index is "open".</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a>, 
<a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>ICheckpointProtocol.reopen()</code></a></dd></dl>
</li>
</ul>
<a name="isTransient()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTransient</h4>
<pre>public final&nbsp;boolean&nbsp;isTransient()</pre>
<div class="block">Return <code>true</code> iff this is a transient data structure (no
 backing store).</div>
</li>
</ul>
<a name="assertNotTransient()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertNotTransient</h4>
<pre>protected final&nbsp;void&nbsp;assertNotTransient()</pre>
</li>
</ul>
<a name="isReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReadOnly</h4>
<pre>public final&nbsp;boolean&nbsp;isReadOnly()</pre>
<div class="block">Return <code>true</code> iff this B+Tree is read-only.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#isReadOnly()">isReadOnly</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
</dl>
</li>
</ul>
<a name="assertNotReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertNotReadOnly</h4>
<pre>protected final&nbsp;void&nbsp;assertNotReadOnly()</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the B+Tree is read-only.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/AbstractBTree.html#isReadOnly()"><code>isReadOnly()</code></a></dd></dl>
</li>
</ul>
<a name="getLastCommitTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitTime</h4>
<pre>public abstract&nbsp;long&nbsp;getLastCommitTime()</pre>
<div class="block">The timestamp associated with the last <a href="../../../com/bigdata/journal/IAtomicStore.html#commit()"><code>IAtomicStore.commit()</code></a> in
 which writes buffered by this index were made restart-safe on the backing
 store. The lastCommitTime is set when the index is loaded from the
 backing store and updated after each commit. It is ZERO (0L) when
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is first created and will remain ZERO (0L) until the
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is committed.  If the backing store does not support atomic
 commits, then this value will always be ZERO (0L).
 <p>
 Note: This is fixed for an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getLastCommitTime()">getLastCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getLastCommitTime()"><code>ICheckpointProtocol.getLastCommitTime()</code></a></dd></dl>
</li>
</ul>
<a name="getRevisionTimestamp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRevisionTimestamp</h4>
<pre>public abstract&nbsp;long&nbsp;getRevisionTimestamp()</pre>
<div class="block">The timestamp associated with unisolated writes on this index. This
 timestamp is designed to allow the interleaving of full transactions
 (whose revision timestamp is assigned by the transaction service) with
 unisolated operations on the same indices.
 <p>
 The revision timestamp assigned by this method is
 <code>lastCommitTime+1</code>. The reasoning is as follows. Revision
 timestamps are assigned by the transaction manager when the transaction
 is validated as part of its commit protocol. Therefore, revision
 timestamps are assigned after the transaction write set is complete.
 Further, the assigned revisionTimestamp will be strictly LT the
 commitTime for that transaction. By using <code>lastCommitTime+1</code>
 we are guaranteed that the revisionTimestamp for new writes (which will
 be part of some future commit point) will always be strictly GT the
 revisionTimestamp of historical writes (which were part of some prior
 commit point).
 <p>
 Note: Unisolated operations using this timestamp ARE NOT validated. The
 timestamp is simply applied to the tuple when it is inserted or updated
 and will become part of the restart safe state of the B+Tree once the
 unisolated operation participates in a commit.
 <p>
 Note: If an unisolated operation were to execute concurrent with a
 transaction commit for the same index then that could produce
 inconsistent results in the index and could trigger concurrent
 modification errors. In order to avoid such concurrent modification
 errors, unisolated operations which are to be mixed with full
 transactions MUST ensure that they have exclusive access to the
 unisolated index before proceeding. There are two ways to do this: (1)
 take the application off line for transactions; (2) submit your unisolated
 operations to the <a href="../../../com/bigdata/journal/IConcurrencyManager.html" title="interface in com.bigdata.journal"><code>IConcurrencyManager</code></a> which will automatically
 impose the necessary constraints on concurrent access to the unisolated
 indices.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The revision timestamp to be assigned to an unisolated write.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the index is read-only.</dd></dl>
</li>
</ul>
<a name="getResourceMetadata()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResourceMetadata</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/mdi/IResourceMetadata.html" title="interface in com.bigdata.mdi">IResourceMetadata</a>[]&nbsp;getResourceMetadata()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html#getResourceMetadata()">IIndex</a></code></strong></div>
<div class="block">The description of the resources comprising the index view.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IIndex.html#getResourceMetadata()">getResourceMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a></code></dd>
</dl>
</li>
</ul>
<a name="getIndexMetadata()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexMetadata</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;getIndexMetadata()</pre>
<div class="block">The metadata for the index. This is full of good stuff about the index.
 <p>
 Note: The same method is exposed by <a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree"><code>ICheckpointProtocol</code></a>. It is
 also exposed here in order to provide access to the <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a>
 to remote clients in the scale-out architecture.
 <p>
 Note: If the B+Tree is read-only then the metadata object will be cloned
 to avoid potential modification. However, only a single cloned copy of
 the metadata record will be shared between all callers for a given
 instance of this class.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getIndexMetadata()">getIndexMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IIndex.html#getIndexMetadata()">getIndexMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The metadata record for this btree and never <code>null</code>.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getIndexMetadata()"><code>ICheckpointProtocol.getIndexMetadata()</code></a></dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<div class="block">Fast summary information about the B+Tree.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="dumpPages(boolean, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpPages</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/BaseIndexStats.html" title="class in com.bigdata.btree">BaseIndexStats</a>&nbsp;dumpPages(boolean&nbsp;recursive,
                       boolean&nbsp;visitLeaves)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#dumpPages(boolean,%20boolean)">ICheckpointProtocol</a></code></strong></div>
<div class="block">Reports statistics for the index.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#dumpPages(boolean,%20boolean)">dumpPages</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>recursive</code> - When <code>true</code>, also collects statistics on the pages
           (nodes and leaves) using a low-level approach.</dd><dd><code>visitLeaves</code> - When <code>true</code> and <code>recursive:=true</code> then the
           leaves of the index are also visited.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Some interesting statistics about the index (and optionally the
         pages in that index) which the caller can print out.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="http://trac.bigdata.com/ticket/1050" > pre-heat the journal
      on startup </a></dd></dl>
</li>
</ul>
<a name="rangeCheck(byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCheck</h4>
<pre>protected final&nbsp;boolean&nbsp;rangeCheck(byte[]&nbsp;key,
                 boolean&nbsp;allowUpperBound)</pre>
<div class="block"><span class="strong">Deprecated.</span>&nbsp;<i>This method has been disabled. It always returns true.
             <p>
             The method is disabled because it forces the caller to ensure
             that the query lies within the specified range. While that is
             all well and good, this places an undue burden on
             <a href="../../../com/bigdata/btree/view/FusedView.html" title="class in com.bigdata.btree.view"><code>FusedView</code></a> which must substitute the actual key range
             of a shard view for the caller's key range. This makes the
             test effectively into a self-check of whether
             <a href="../../../com/bigdata/btree/view/FusedView.html" title="class in com.bigdata.btree.view"><code>FusedView</code></a> has correctly done this substitution rather
             than a check of whether a request was mapped onto the correct
             shard, which was the original purpose of this test. The logic
             for performing such range checks was moved into
             <a href="../../../com/bigdata/btree/RangeCheckUtil.html" title="class in com.bigdata.btree"><code>RangeCheckUtil</code></a>.</i></div>
<div class="block">Iff the B+Tree is an index partition then verify that the key lies within
 the key range of an index partition.
 <p>
 Note: An index partition is identified by
 <a href="../../../com/bigdata/btree/IndexMetadata.html#getPartitionMetadata()"><code>IndexMetadata.getPartitionMetadata()</code></a> returning non-
 <code>null</code>.
 <p>
 Note: This method is used liberally in <code>assert</code>s to detect
 errors that can arise is client code when an index partition is split,
 joined, or moved.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd><dd><code>allowUpperBound</code> - <code>true</code> iff the <i>key</i> represents an inclusive
            upper bound and thus must be allowed to be LTE to the right
            separator key for the index partition. For example, this would
            be <code>true</code> for the <i>toKey</i> parameter on
            rangeCount or rangeIterator methods.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> always.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the key is <code>null</code></dd>
<dd><code><a href="../../../com/bigdata/btree/KeyOutOfRangeException.html" title="class in com.bigdata.btree">KeyOutOfRangeException</a></code> - if the key does not lie within the index partition.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/461">
      KeyAfterPartitionException </a></dd></dl>
</li>
</ul>
<a name="getBranchingFactor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBranchingFactor</h4>
<pre>public final&nbsp;int&nbsp;getBranchingFactor()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getBranchingFactor()">IBTreeStatistics</a></code></strong></div>
<div class="block">The branching factor for the btree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getBranchingFactor()">getBranchingFactor</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></dd>
</dl>
</li>
</ul>
<a name="isBalanced()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBalanced</h4>
<pre>public final&nbsp;boolean&nbsp;isBalanced()</pre>
<div class="block">Return <code>true</code> iff the tree is balanced.
 <p>
 Note: Not all tree-structured indices are balanced. For example, the
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is balanced, but the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> is not balanced. The
 height of an unbalanced tree must be discovered through a traversal of
 the tree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#isBalanced()">isBalanced</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> since a B+Tree is a balanced tree.</dd></dl>
</li>
</ul>
<a name="getEntryCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryCount</h4>
<pre>public abstract&nbsp;long&nbsp;getEntryCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getEntryCount()">IBTreeStatistics</a></code></strong></div>
<div class="block">The #of entries (aka tuples) in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>. This is zero
 (0) for a new B+Tree. When the B+Tree supports delete markers, this value
 also includes tuples which have been marked as deleted.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getEntryCount()">getEntryCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getEntryCount()">getEntryCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getStatistics()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatistics</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a>&nbsp;getStatistics()</pre>
<div class="block">Return a statistics snapshot of the B+Tree.</div>
</li>
</ul>
<a name="getUtilization()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUtilization</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/IBTreeUtilizationReport.html" title="interface in com.bigdata.btree">IBTreeUtilizationReport</a>&nbsp;getUtilization()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getUtilization()">IBTreeStatistics</a></code></strong></div>
<div class="block">Computes and returns the utilization of the tree. The utilization figures
 do not factor in the space requirements of nodes and leaves.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getUtilization()">getUtilization</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></dd>
</dl>
</li>
</ul>
<a name="getNodeSerializer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeSerializer</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/NodeSerializer.html" title="class in com.bigdata.btree">NodeSerializer</a>&nbsp;getNodeSerializer()</pre>
<div class="block">The object responsible for (de-)serializing the nodes and leaves of the
 <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree"><code>IIndex</code></a>.</div>
</li>
</ul>
<a name="getRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRoot</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;getRoot()</pre>
<div class="block">The root of the btree. This is initially a leaf until the leaf is split,
 at which point it is replaced by a node. The root is also replaced each
 time copy-on-write triggers a cascade of updates.
 <p>
 The hard reference to the root node is cleared if the index is
 <a href="../../../com/bigdata/btree/AbstractBTree.html#close()"><code>closed</code></a>. This method automatically <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>reopen()</code></a>s
 the index if it is closed, making it available for use.</div>
</li>
</ul>
<a name="getRootOrFinger(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRootOrFinger</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;getRootOrFinger(byte[]&nbsp;key)</pre>
<div class="block">Returns the node or leaf to be used for search. This implementation is
 aware of the <code>#finger</code> and will return it if the key lies within
 the finger.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd>
<dt><span class="strong">Returns:</span></dt><dd>Either the root node of the tree or a recently touched leaf that
         is known to span the key.</dd></dl>
</li>
</ul>
<a name="getWriteTuple()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWriteTuple</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;getWriteTuple()</pre>
<div class="block">Private instance used for mutation operations (insert, remove) which are
 single threaded. Both <a href="../../../com/bigdata/btree/IRangeQuery.html#KEYS"><code>IRangeQuery.KEYS</code></a> and
 <a href="../../../com/bigdata/btree/IRangeQuery.html#VALS"><code>IRangeQuery.VALS</code></a> are requested so that indices which encode part
 of the application object within the key can recover the application
 object in <a href="../../../com/bigdata/btree/AbstractBTree.html#insert(java.lang.Object,%20java.lang.Object)"><code>insert(Object, Object)</code></a> and <a href="../../../com/bigdata/btree/AbstractBTree.html#remove(java.lang.Object)"><code>remove(Object)</code></a>.
 <p>
 While the <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree"><code>Tuple</code></a> is not safe for use by concurrent threads, the
 mutation API is not safe for concurrent threads either.</div>
</li>
</ul>
<a name="getLookupTuple()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLookupTuple</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;getLookupTuple()</pre>
<div class="block">Return a <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree"><code>Tuple</code></a> that may be used to copy the value associated with
 a key out of the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.
 <p>
 While the returned <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree"><code>Tuple</code></a> is not safe for use by concurrent
 threads, each instance returned by this method is safe for use by the
 thread in which it was obtained.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/AbstractBTree.html#lookup(byte[],%20com.bigdata.btree.Tuple)"><code>lookup(byte[], Tuple)</code></a></dd></dl>
</li>
</ul>
<a name="getContainsTuple()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getContainsTuple</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;getContainsTuple()</pre>
<div class="block">Return a <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree"><code>Tuple</code></a> that may be used to test for the existence of
 tuples having a given key within the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.
 <p>
 The tuple does not copy either the keys or the values. Contains is
 implemented as a lookup operation that either return this tuple or
 <code>null</code>. When isolation is supported, the version metadata is
 examined to determine if the matching entry is flagged as deleted in
 which case contains() will report "false".
 <p>
 While the returned <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree"><code>Tuple</code></a> is not safe for use by concurrent
 threads, each instance returned by this method is safe for use by the
 thread in which it was obtained.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/AbstractBTree.html#contains(byte[])"><code>contains(byte[])</code></a></dd></dl>
</li>
</ul>
<a name="insert(java.lang.Object, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insert</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;insert(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;value)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#insert(java.lang.Object,%20java.lang.Object)">IAutoboxBTree</a></code></strong></div>
<div class="block">Insert with auto-magic handling of keys and value objects.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#insert(java.lang.Object,%20java.lang.Object)">insert</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html" title="interface in com.bigdata.btree">IAutoboxBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key is implicitly converted to an <strong>unsigned</strong>
            <code>byte[]</code>.</dd><dd><code>value</code> - The value is implicitly converted to a <code>byte[]</code>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The de-serialized old value -or- <code>null</code> if there was
         no value stored under that key.</dd></dl>
</li>
</ul>
<a name="insert(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insert</h4>
<pre>public final&nbsp;byte[]&nbsp;insert(byte[]&nbsp;key,
            byte[]&nbsp;value)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html#insert(byte[],%20byte[])">ISimpleBTree</a></code></strong></div>
<div class="block">Insert or update a value under the key.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleBTree.html#insert(byte[],%20byte[])">insert</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html" title="interface in com.bigdata.btree">ISimpleBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd><dd><code>value</code> - The value (may be null).</dd>
<dt><span class="strong">Returns:</span></dt><dd>The previous value under that key or <code>null</code> if the
         key was not found or if the previous entry for that key was
         marked as deleted.</dd></dl>
</li>
</ul>
<a name="putIfAbsent(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>putIfAbsent</h4>
<pre>public final&nbsp;byte[]&nbsp;putIfAbsent(byte[]&nbsp;key,
                 byte[]&nbsp;value)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html#putIfAbsent(byte[],%20byte[])">ISimpleBTree</a></code></strong></div>
<div class="block">Insert or update a value under the key iff there is no entry for that key
 in the index. This is equivalent to
 
 <pre>
 if (!contains(key))
        insert(key, value);
 </pre>
 
 However, if the index allows <code>null</code> values to be stored under
 a key and the application in fact stores <code>null</code> values for
 some tuples, then caller is not able to decide using this method whether
 or not the mutation was applied based on the return value. For these
 cases if the caller needs to know whether or not the conditional mutation
 actually took place, the caller CAN use the pattern
 <code>if(!contains()) insert(key,value);</code> to obtain that
 information.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleBTree.html#putIfAbsent(byte[],%20byte[])">putIfAbsent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html" title="interface in com.bigdata.btree">ISimpleBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd><dd><code>value</code> - The value (may be null).</dd>
<dt><span class="strong">Returns:</span></dt><dd>The previous value under that key or <code>null</code> if the key
         was not found or if the previous entry for that key was marked as
         deleted. Note that the return value MAY be <code>null</code> even
         if there was an entry under the key. This is because the index is
         capable of storing a <code>null</code> value. In such cases the
         conditional mutation WAS NOT applied.</dd><dt><span class="strong">See Also:</span></dt><dd><code>(putIfAbsent)</code></dd></dl>
</li>
</ul>
<a name="insert(byte[], byte[], boolean, boolean, long, com.bigdata.btree.Tuple)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>insert</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;insert(byte[]&nbsp;key,
           byte[]&nbsp;value,
           boolean&nbsp;delete,
           boolean&nbsp;putIfAbsent,
           long&nbsp;timestamp,
           <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</pre>
<div class="block">Core method for inserting or updating a value under a key.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The variable length unsigned byte[] key.</dd><dd><code>value</code> - The variable length byte[] value (MAY be <code>null</code>).</dd><dd><code>delete</code> - <code>true</code> iff the index entry should be marked as
            deleted (this behavior is supported iff the btree supports
            delete markers).</dd><dd><code>putIfAbsent</code> - When <code>true</code>, a pre-existing entry for the key will
            NOT be replaced (unless it is a deleted tuple, which is the
            same as if there was no entry under the key). This should ONLY
            be true when the top-level method is <code>putIfAbsent</code>.
            Historical code paths should specify false for an unconditional
            mutation. See BLZG-1539.</dd><dd><code>timestamp</code> - The timestamp to be associated with the new or updated index
            entry (required iff the btree supports transactional isolation
            and otherwise 0L).</dd><dd><code>tuple</code> - Data and metadata for the old value under the key will be
            copied onto this object (optional).</dd>
<dt><span class="strong">Returns:</span></dt><dd><i>tuple</i> -or- <code>null</code> if there was no entry under
         that key. See <a href="../../../com/bigdata/btree/ITuple.html#isDeletedVersion()"><code>ITuple.isDeletedVersion()</code></a> to determine
         whether or not the entry is marked as deleted.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the index is read-only.</dd></dl>
</li>
</ul>
<a name="remove(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;remove(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#remove(java.lang.Object)">IAutoboxBTree</a></code></strong></div>
<div class="block">Remove the key and its associated value.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#remove(java.lang.Object)">remove</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html" title="interface in com.bigdata.btree">IAutoboxBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key is implicitly converted to an <strong>unsigned</strong>
            <code>byte[]</code>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The de-serialized value stored under that key or
         <code>null</code> if the key was not found.</dd></dl>
</li>
</ul>
<a name="remove(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public final&nbsp;byte[]&nbsp;remove(byte[]&nbsp;key)</pre>
<div class="block">Remove the tuple under that key (will write a delete marker if delete
 markers are enabled).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleBTree.html#remove(byte[])">remove</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html" title="interface in com.bigdata.btree">ISimpleBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The value stored under that key or <code>null</code> if the key
         was not found or if the previous entry under that key was marked
         as deleted.</dd></dl>
</li>
</ul>
<a name="remove(byte[], com.bigdata.btree.Tuple)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>remove</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;remove(byte[]&nbsp;key,
           <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</pre>
<div class="block">Core method for deleting a value under a key. If there is an entry under
 the key then it is removed from the index. It is an error to use this
 method if delete markers are being maintained. <a href="../../../com/bigdata/btree/AbstractBTree.html#remove(byte[])"><code>remove(byte[])</code></a>
 uses <code>#insert(byte[], byte[], boolean, long, Tuple)</code> instead of
 this method to mark the index entry as deleted when delete markers are
 being maintained.
 <p>
 Note: removing a key has no effect on the optional bloom filter. If a key
 is removed from the index by this method then the bloom filter will
 report a <em>false positive</em> for that key, which will be detected
 when we test the index itself. This works out fine in the scale-out
 design since the bloom filter is per <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> instance and
 split/join/move operations all result in new mutable <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>s with
 new bloom filters to absorb new writes. For a non-scale-out deployment,
 this can cause the performance of the bloom filter to degrade if you are
 removing a lot of keys. However, in the special case of a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>
 that does NOT use delete markers, <a href="../../../com/bigdata/btree/BTree.html#removeAll()"><code>BTree.removeAll()</code></a> will create a
 new root leaf and a new (empty) bloom filter as well.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The search key.</dd><dd><code>tuple</code> - An object that will be used to report data and metadata for
            the pre-existing version (optional).</dd>
<dt><span class="strong">Returns:</span></dt><dd><i>tuple</i> or <code>null</code> if there was no version
         under that key.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if delete markers are being maintained.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the index is read-only.</dd></dl>
</li>
</ul>
<a name="removeAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAll</h4>
<pre>public abstract&nbsp;void&nbsp;removeAll()</pre>
<div class="block">Remove all entries in the B+Tree.
 <p>
 Note: The <a href="../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal"><code>IIndexManager</code></a> defines methods for registering (adding)
 and dropping indices vs removing the entries in an individual
 <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#removeAll()">removeAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="lookup(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookup</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;lookup(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#lookup(java.lang.Object)">IAutoboxBTree</a></code></strong></div>
<div class="block">Lookup a value for a key.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#lookup(java.lang.Object)">lookup</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html" title="interface in com.bigdata.btree">IAutoboxBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key is implicitly converted to an <strong>unsigned</strong>
            <code>byte[]</code>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The de-serialized value or <code>null</code> if there is no
         entry for that key.</dd></dl>
</li>
</ul>
<a name="lookup(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookup</h4>
<pre>public&nbsp;byte[]&nbsp;lookup(byte[]&nbsp;key)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html#lookup(byte[])">ISimpleBTree</a></code></strong></div>
<div class="block">Lookup a value for a key.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleBTree.html#lookup(byte[])">lookup</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html" title="interface in com.bigdata.btree">ISimpleBTree</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The value stored under that key or <code>null</code> if there
         is no entry for that key or if the entry under that key is marked
         as deleted.</dd></dl>
</li>
</ul>
<a name="lookup(byte[], com.bigdata.btree.Tuple)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lookup</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;lookup(byte[]&nbsp;key,
           <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</pre>
<div class="block">Core method for retrieving a value under a key. This method allows you to
 differentiate an index entry whose value is <code>null</code> from a
 missing index entry or (when delete markers are enabled) from a deleted
 index entry. Applies the optional bloom filter if it exists. If the bloom
 filter exists and reports <code>true</code>, then looks up the value
 for the key in the index (note that the key might not exist in the index
 since a bloom filter allows false positives, further the key might exist
 for a deleted entry).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The search key.</dd><dd><code>tuple</code> - An object that will be used to report data and metadata for
            the pre-existing version (required).</dd>
<dt><span class="strong">Returns:</span></dt><dd><i>tuple</i> or <code>null</code> if there is no entry in the
         index under the key.</dd></dl>
</li>
</ul>
<a name="contains(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contains</h4>
<pre>public&nbsp;boolean&nbsp;contains(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;key)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#contains(java.lang.Object)">IAutoboxBTree</a></code></strong></div>
<div class="block">Return true iff there is an entry for the key.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IAutoboxBTree.html#contains(java.lang.Object)">contains</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IAutoboxBTree.html" title="interface in com.bigdata.btree">IAutoboxBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key is implicitly converted to an <strong>unsigned</strong>
            <code>byte[]</code>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>True if the btree contains an entry for that key.</dd></dl>
</li>
</ul>
<a name="contains(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>contains</h4>
<pre>public&nbsp;boolean&nbsp;contains(byte[]&nbsp;key)</pre>
<div class="block">Core method to decide whether the index has a (non-deleted) entry under a
 key. Applies the optional bloom filter if it exists. If the bloom filter
 reports <code>true</code>, then verifies that the key does in fact
 exist in the index.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleBTree.html#contains(byte[])">contains</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleBTree.html" title="interface in com.bigdata.btree">ISimpleBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the key does not exist. Or, if the btree
         supports isolation, if the key exists but it is marked as
         "deleted".</dd></dl>
</li>
</ul>
<a name="indexOf(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>indexOf</h4>
<pre>public&nbsp;long&nbsp;indexOf(byte[]&nbsp;key)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ILinearList.html#indexOf(byte[])">ILinearList</a></code></strong></div>
<div class="block">Lookup the index position of the key.
 <p>
 Note that <a href="../../../com/bigdata/btree/ILinearList.html#indexOf(byte[])"><code>ILinearList.indexOf(byte[])</code></a> is the basis for implementing the
 <a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree"><code>IRangeQuery</code></a> interface.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILinearList.html#indexOf(byte[])">indexOf</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILinearList.html" title="interface in com.bigdata.btree">ILinearList</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The index of the search key, if found; otherwise,
         <code>(-(insertion point) - 1)</code>. The insertion point is
         defined as the point at which the key would be found it it were
         inserted into the btree without intervening mutations. Note that
         this guarantees that the return value will be >= 0 if and only if
         the key is found. When found the index will be in [0:nentries).
         Adding or removing entries in the tree may invalidate the index.
         <P>
         <code>pos = -(pos+1)</code> will convert an insertion point to
         the index at which the <i>key</i> would be found if it were
         inserted - this is also the index of the predecessor of <i>key</i>
         in the index.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ILinearList.html#keyAt(long)"><code>ILinearList.keyAt(long)</code></a>, 
<a href="../../../com/bigdata/btree/ILinearList.html#valueAt(long)"><code>ILinearList.valueAt(long)</code></a></dd></dl>
</li>
</ul>
<a name="keyAt(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>keyAt</h4>
<pre>public&nbsp;byte[]&nbsp;keyAt(long&nbsp;index)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ILinearList.html#keyAt(long)">ILinearList</a></code></strong></div>
<div class="block">Return the key for the identified entry. This performs an efficient
 search whose cost is essentially the same as
 <a href="../../../com/bigdata/btree/ISimpleBTree.html#lookup(byte[])"><code>ISimpleBTree.lookup(byte[])</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILinearList.html#keyAt(long)">keyAt</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILinearList.html" title="interface in com.bigdata.btree">ILinearList</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>index</code> - The index position of the entry (origin zero).</dd>
<dt><span class="strong">Returns:</span></dt><dd>The key at that index position.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ILinearList.html#indexOf(byte[])"><code>ILinearList.indexOf(byte[])</code></a>, 
<a href="../../../com/bigdata/btree/ILinearList.html#valueAt(long)"><code>ILinearList.valueAt(long)</code></a></dd></dl>
</li>
</ul>
<a name="valueAt(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>valueAt</h4>
<pre>public&nbsp;byte[]&nbsp;valueAt(long&nbsp;index)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ILinearList.html#valueAt(long)">ILinearList</a></code></strong></div>
<div class="block">Return the value for the identified entry. This performs an efficient
 search whose cost is essentially the same as
 <a href="../../../com/bigdata/btree/ISimpleBTree.html#lookup(byte[])"><code>ISimpleBTree.lookup(byte[])</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILinearList.html#valueAt(long)">valueAt</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILinearList.html" title="interface in com.bigdata.btree">ILinearList</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>index</code> - The index position of the entry (origin zero).</dd>
<dt><span class="strong">Returns:</span></dt><dd>The value at that index position -or- <code>null</code> if
         there is a deleted entry at that index position then</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ILinearList.html#indexOf(byte[])"><code>ILinearList.indexOf(byte[])</code></a>, 
<a href="../../../com/bigdata/btree/ILinearList.html#keyAt(long)"><code>ILinearList.keyAt(long)</code></a></dd></dl>
</li>
</ul>
<a name="valueAt(long, com.bigdata.btree.Tuple)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>valueAt</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;valueAt(long&nbsp;index,
            <a href="../../../com/bigdata/btree/Tuple.html" title="class in com.bigdata.btree">Tuple</a>&nbsp;tuple)</pre>
</li>
</ul>
<a name="rangeCountExact(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCountExact</h4>
<pre>public final&nbsp;long&nbsp;rangeCountExact(byte[]&nbsp;fromKey,
                   byte[]&nbsp;toKey)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCountExact(byte[],%20byte[])">IRangeQuery</a></code></strong></div>
<div class="block">Return the exact #of tuples in a half-open key range. The fromKey and
 toKey need not exist in the B+Tree.
 <p>
 Note: If the index supports deletion markers then this operation will
 require a key-range scan.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCountExact(byte[],%20byte[])">rangeCountExact</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - The lowest key that will be counted (inclusive). When
            <code>null</code> there is no lower bound.</dd><dd><code>toKey</code> - The first key that will not be counted (exclusive). When
            <code>null</code> there is no upper bound.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The exact #of tuples in the half-open key range.</dd></dl>
</li>
</ul>
<a name="rangeCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCount</h4>
<pre>public final&nbsp;long&nbsp;rangeCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCount()">IRangeQuery</a></code></strong></div>
<div class="block">Return the #of tuples in the index.
 <p>
 Note: If the index supports deletion markers then the range count will be
 an upper bound and may double count tuples which have been overwritten,
 including the special case where the overwrite is a delete.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCount()">rangeCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#rangeCount()">rangeCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of tuples in the index.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#rangeCount()"><code>ISimpleIndexAccess.rangeCount()</code></a></dd></dl>
</li>
</ul>
<a name="rangeCount(java.lang.Object, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCount</h4>
<pre>public final&nbsp;long&nbsp;rangeCount(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;fromKey,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;toKey)</pre>
<div class="block">Variant implicitly converts the optional application keys into unsigned
 byte[]s.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - </dd><dd><code>toKey</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="rangeCount(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCount</h4>
<pre>public final&nbsp;long&nbsp;rangeCount(byte[]&nbsp;fromKey,
              byte[]&nbsp;toKey)</pre>
<div class="block">Return the #of tuples in a half-open key range. The fromKey and toKey
 need not exist in the B+Tree.
 <p>
 Note: If the index supports deletion markers then the range count will be
 an upper bound and may double count tuples which have been overwritten,
 including the special case where the overwrite is a delete.
 <p>
 This method computes the #of entries in the half-open range using
 <code>AbstractNode#indexOf(Object)</code>. Since it does not scan the tuples
 it can not differentiate between deleted and undeleted tuples for an
 index that supports delete markers, but the result will be exact if
 delete markers are not being used. The cost is equal to the cost of
 lookup of the both keys. If both keys are <code>null</code>, then the
 cost is zero (no IOs).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCount(byte[],%20byte[])">rangeCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - The lowest key that will be counted (inclusive). When
            <code>null</code> there is no lower bound.</dd><dd><code>toKey</code> - The first key that will not be counted (exclusive). When
            <code>null</code> there is no upper bound.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of tuples in the half-open key range.</dd></dl>
</li>
</ul>
<a name="rangeCountExactWithDeleted(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCountExactWithDeleted</h4>
<pre>public&nbsp;long&nbsp;rangeCountExactWithDeleted(byte[]&nbsp;fromKey,
                              byte[]&nbsp;toKey)</pre>
<div class="block">Note: <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount(byte[],%20byte[])"><code>rangeCount(byte[], byte[])</code></a> already reports deleted tuples
 for an <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> so this method is just delegated to that
 one. However,
 <a href="../../../com/bigdata/btree/view/FusedView.html#rangeCountExactWithDeleted(byte[],%20byte[])"><code>FusedView.rangeCountExactWithDeleted(byte[], byte[])</code></a> treats this
 case differently since it must report the exact range count when
 considering all sources at once. It uses a range iterator scan visiting
 both deleted and undeleted tuples for that.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCountExactWithDeleted(byte[],%20byte[])">rangeCountExactWithDeleted</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - The lowest key that will be counted (inclusive). When
            <code>null</code> there is no lower bound.</dd><dd><code>toKey</code> - The first key that will not be counted (exclusive). When
            <code>null</code> there is no upper bound.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The exact #of deleted and undeleted tuples in the half-open key
         range.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCountExact(byte[],%20byte[])"><code>IRangeQuery.rangeCountExact(byte[], byte[])</code></a></dd></dl>
</li>
</ul>
<a name="scan()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scan</h4>
<pre>public final&nbsp;<a href="../../../cutthecrap/utils/striterators/ICloseableIterator.html" title="interface in cutthecrap.utils.striterators">ICloseableIterator</a>&lt;?&gt;&nbsp;scan()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#scan()">ISimpleIndexAccess</a></code></strong></div>
<div class="block">Visit all entries in the index in the natural order of the index
 (dereferencing visited tuples to the application objects stored within
 those tuples).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#scan()">scan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="rangeIterator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeIterator</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&nbsp;rangeIterator()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeIterator()">IRangeQuery</a></code></strong></div>
<div class="block">Visits all tuples in key order. This is identical to
 
 <pre>
 rangeIterator(null, null)
 </pre></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeIterator()">rangeIterator</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>An iterator that will visit all entries in key order.</dd></dl>
</li>
</ul>
<a name="rangeIterator(java.lang.Object, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeIterator</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&nbsp;rangeIterator(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;fromKey,
                           <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;toKey)</pre>
<div class="block">Variant implicitly converts the optional application keys into unsigned
 byte[]s.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - </dd><dd><code>toKey</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="rangeIterator(byte[], byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeIterator</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&nbsp;rangeIterator(byte[]&nbsp;fromKey,
                           byte[]&nbsp;toKey)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeIterator(byte[],%20byte[])">IRangeQuery</a></code></strong></div>
<div class="block">Return an iterator that visits the entries in a half-open key range. When
 <i>toKey</i> <em>EQ</em> <i>fromKey</i> nothing will be visited. It
 is an error if <i>toKey</i> <em>LT</em> <i>fromKey</i>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeIterator(byte[],%20byte[])">rangeIterator</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - The first key that will be visited (inclusive lower bound).
            When <code>null</code> there is no lower bound.</dd><dd><code>toKey</code> - The first key that will NOT be visited (exclusive upper
            bound). When <code>null</code> there is no upper bound.</dd><dt><span class="strong">See Also:</span></dt><dd><code>SuccessorUtil, which may be used to compute the successor of a value
      before encoding it as a component of a key.</code>, 
<code>BytesUtil#successor(byte[]), which may be used to compute the
      successor of an encoded key.</code>, 
<code>EntryFilter, which may be used to filter the entries visited by the
      iterator.</code></dd></dl>
</li>
</ul>
<a name="rangeIterator(java.lang.Object, java.lang.Object, int, int, cutthecrap.utils.striterators.IFilter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeIterator</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&nbsp;rangeIterator(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;fromKey,
                           <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;toKey,
                           int&nbsp;capacity,
                           int&nbsp;flags,
                           <a href="../../../cutthecrap/utils/striterators/IFilter.html" title="interface in cutthecrap.utils.striterators">IFilter</a>&nbsp;filter)</pre>
<div class="block">Variant implicitly converts the optional application keys into unsigned
 byte[]s.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - </dd><dd><code>toKey</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="rangeIterator(byte[], byte[], int, int, cutthecrap.utils.striterators.IFilter)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeIterator</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&nbsp;rangeIterator(byte[]&nbsp;fromKey,
                           byte[]&nbsp;toKey,
                           int&nbsp;capacityIsIgnored,
                           int&nbsp;flags,
                           <a href="../../../cutthecrap/utils/striterators/IFilter.html" title="interface in cutthecrap.utils.striterators">IFilter</a>&nbsp;filter)</pre>
<div class="block">Designated variant (the one that gets overridden) for an iterator that
 visits the entries in a half-open key range. When <i>toKey</i>
 <em>EQ</em> <i>fromKey</i> nothing will be visited. It is an error if
 <i>toKey</i> <em>LT</em> <i>fromKey</i>.
 <p>
 Core implementation.
 <p>
 Note: If <a href="../../../com/bigdata/btree/IRangeQuery.html#CURSOR"><code>IRangeQuery.CURSOR</code></a> is specified the returned iterator
 supports traversal with concurrent modification by a single-threaded
 process (the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is NOT thread-safe for writers). Write are
 permitted iff <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a> allows writes.
 <p>
 Note: <a href="../../../com/bigdata/btree/IRangeQuery.html#REVERSE"><code>IRangeQuery.REVERSE</code></a> is handled here by wrapping the
 underlying <a href="../../../com/bigdata/btree/ITupleCursor.html" title="interface in com.bigdata.btree"><code>ITupleCursor</code></a>.
 <p>
 Note: <a href="../../../com/bigdata/btree/IRangeQuery.html#REMOVEALL"><code>IRangeQuery.REMOVEALL</code></a> is handled here by wrapping the
 iterator.
 <p>
 Note: <a href="../../../com/bigdata/btree/view/FusedView.html#rangeIterator(byte[],%20byte[],%20int,%20int,%20cutthecrap.utils.striterators.IFilter)"><code>FusedView.rangeIterator(byte[], byte[], int, int, IFilter)</code></a>
 is also responsible for constructing an <a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree"><code>ITupleIterator</code></a> in a
 manner similar to this method. If you are updating the logic here, then
 check the logic in that method as well!</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeIterator(byte[],%20byte[],%20int,%20int,%20cutthecrap.utils.striterators.IFilter)">rangeIterator</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - The first key that will be visited (inclusive lower bound).
            When <code>null</code> there is no lower bound.</dd><dd><code>toKey</code> - The first key that will NOT be visited (exclusive upper
            bound). When <code>null</code> there is no upper bound.</dd><dd><code>capacityIsIgnored</code> - The #of entries to buffer at a time. This is a hint and MAY be
            zero (0) to use an implementation specific <i>default</i>
            capacity. A non-zero value may be used if you know that you
            want at most N results or if you want to override the default
            #of results to be buffered before sending them across a
            network interface. (Note that you can control the default
            value using
            <code>IBigdataClient.Options#DEFAULT_CLIENT_RANGE_QUERY_CAPACITY</code>).</dd><dd><code>flags</code> - A bitwise OR of <a href="../../../com/bigdata/btree/IRangeQuery.html#KEYS"><code>IRangeQuery.KEYS</code></a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#VALS"><code>IRangeQuery.VALS</code></a>, etc.</dd><dd><code>filter</code> - An optional object used to construct a stacked iterator. When
            <a href="../../../com/bigdata/btree/IRangeQuery.html#CURSOR"><code>IRangeQuery.CURSOR</code></a> is specified in <i>flags</i>, the base
            iterator will implement <a href="../../../com/bigdata/btree/ITupleCursor.html" title="interface in com.bigdata.btree"><code>ITupleCursor</code></a> and the first
            filter in the stack can safely cast the source iterator to an
            <a href="../../../com/bigdata/btree/ITupleCursor.html" title="interface in com.bigdata.btree"><code>ITupleCursor</code></a>. If the outermost filter in the stack
            does not implement <a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree"><code>ITupleIterator</code></a>, then it will be
            wrapped an <a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree"><code>ITupleIterator</code></a>.</dd><dt><span class="strong">See Also:</span></dt><dd><code>SuccessorUtil, which may be used to compute the successor of a value
      before encoding it as a component of a key.</code>, 
<code>BytesUtil#successor(byte[]), which may be used to compute the
      successor of an encoded key.</code>, 
<code>IFilterConstructor, which may be used to construct an iterator stack
      performing filtering or other operations.</code></dd></dl>
</li>
</ul>
<a name="rangeCopy(com.bigdata.btree.IIndex, byte[], byte[], boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCopy</h4>
<pre>public&nbsp;long&nbsp;rangeCopy(<a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a>&nbsp;src,
             byte[]&nbsp;fromKey,
             byte[]&nbsp;toKey,
             boolean&nbsp;overflow)</pre>
<div class="block">Copy all data, including deleted index entry markers and timestamps iff
 supported by the source and target. The goal is an exact copy of the data
 in the source btree.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>src</code> - The source index.</dd><dd><code>fromKey</code> - The first key that will be copied (inclusive). When
            <code>null</code> there is no lower bound.</dd><dd><code>toKey</code> - The first key that will NOT be copied (exclusive). When
            <code>null</code> there is no upper bound.</dd><dd><code>overflow</code> - When <code>true</code> the <a href="../../../com/bigdata/btree/IOverflowHandler.html" title="interface in com.bigdata.btree"><code>IOverflowHandler</code></a> defined
            for the source index (if any) will be applied to copy raw
            records onto the backing store for this index. This value
            SHOULD be <code>false</code> if the two indices have the
            same backing store and <code>true</code> otherwise.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of index entries that were copied.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the <i>src</i> and <i>this</i> do not have the same
             setting for <a href="../../../com/bigdata/btree/IndexMetadata.html#getDeleteMarkers()"><code>IndexMetadata.getDeleteMarkers()</code></a></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the <i>src</i> and <i>this</i> do not have the same
             setting for <a href="../../../com/bigdata/btree/IndexMetadata.html#getVersionTimestamps()"><code>IndexMetadata.getVersionTimestamps()</code></a></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/CompactTask.html" title="class in com.bigdata.journal"><code>CompactTask</code></a>, 
<a href="../../../com/bigdata/resources/OverflowManager.html" title="class in com.bigdata.resources"><code>OverflowManager</code></a></dd></dl>
</li>
</ul>
<a name="submit(byte[], com.bigdata.btree.proc.ISimpleIndexProcedure)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;T&nbsp;submit(byte[]&nbsp;key,
           <a href="../../../com/bigdata/btree/proc/ISimpleIndexProcedure.html" title="interface in com.bigdata.btree.proc">ISimpleIndexProcedure</a>&lt;T&gt;&nbsp;proc)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html#submit(byte[],%20com.bigdata.btree.proc.ISimpleIndexProcedure)">IIndex</a></code></strong></div>
<div class="block">Submits an index procedure that operations on a single key to the
 appropriate index partition returning the result of that procedure.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IIndex.html#submit(byte[],%20com.bigdata.btree.proc.ISimpleIndexProcedure)">submit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd><dd><code>proc</code> - The procedure.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The value returned by <a href="../../../com/bigdata/btree/proc/IIndexProcedure.html#apply(com.bigdata.btree.IIndex)"><code>IIndexProcedure.apply(IIndex)</code></a></dd></dl>
</li>
</ul>
<a name="submit(byte[], byte[], com.bigdata.btree.proc.IKeyRangeIndexProcedure, com.bigdata.btree.proc.IResultHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;void&nbsp;submit(byte[]&nbsp;fromKey,
          byte[]&nbsp;toKey,
          <a href="../../../com/bigdata/btree/proc/IKeyRangeIndexProcedure.html" title="interface in com.bigdata.btree.proc">IKeyRangeIndexProcedure</a>&nbsp;proc,
          <a href="../../../com/bigdata/btree/proc/IResultHandler.html" title="interface in com.bigdata.btree.proc">IResultHandler</a>&nbsp;handler)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html#submit(byte[],%20byte[],%20com.bigdata.btree.proc.IKeyRangeIndexProcedure,%20com.bigdata.btree.proc.IResultHandler)">IIndex</a></code></strong></div>
<div class="block">The procedure will be transparently applied against each index partition
 spanned by the given key range.
 <p>
 Note: Since this variant of <i>submit()</i> does not split keys the
 <i>fromIndex</i> and <i>toIndex</i> in the <a href="../../../com/bigdata/service/Split.html" title="class in com.bigdata.service"><code>Split</code></a>s reported to
 the <a href="../../../com/bigdata/btree/proc/IResultHandler.html" title="interface in com.bigdata.btree.proc"><code>IResultHandler</code></a> will be zero (0).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IIndex.html#submit(byte[],%20byte[],%20com.bigdata.btree.proc.IKeyRangeIndexProcedure,%20com.bigdata.btree.proc.IResultHandler)">submit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromKey</code> - The lower bound (inclusive) -or- <code>null</code> if there
            is no lower bound.</dd><dd><code>toKey</code> - The upper bound (exclusive) -or- <code>null</code> if there
            is no upper bound.</dd><dd><code>proc</code> - The procedure. If the procedure implements the
            <a href="../../../com/bigdata/btree/proc/IParallelizableIndexProcedure.html" title="interface in com.bigdata.btree.proc"><code>IParallelizableIndexProcedure</code></a> marker interface then it
            MAY be executed in parallel against the relevant index
            partition(s).</dd></dl>
</li>
</ul>
<a name="submit(int, int, byte[][], byte[][], com.bigdata.btree.proc.AbstractKeyArrayIndexProcedureConstructor, com.bigdata.btree.proc.IResultHandler)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;void&nbsp;submit(int&nbsp;fromIndex,
          int&nbsp;toIndex,
          byte[][]&nbsp;keys,
          byte[][]&nbsp;vals,
          <a href="../../../com/bigdata/btree/proc/AbstractKeyArrayIndexProcedureConstructor.html" title="class in com.bigdata.btree.proc">AbstractKeyArrayIndexProcedureConstructor</a>&nbsp;ctor,
          <a href="../../../com/bigdata/btree/proc/IResultHandler.html" title="interface in com.bigdata.btree.proc">IResultHandler</a>&nbsp;aggregator)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html#submit(int,%20int,%20byte[][],%20byte[][],%20com.bigdata.btree.proc.AbstractKeyArrayIndexProcedureConstructor,%20com.bigdata.btree.proc.IResultHandler)">IIndex</a></code></strong></div>
<div class="block">Runs a procedure against an index.
 <p>
 Note: This may be used to send custom logic together with the data to a
 remote index or index partition. When the index is remote both the
 procedure and the return value MUST be <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io"><code>Serializable</code></a>.
 <p>
 Note: The scale-out indices add support for auto-split of the procedure
 such that it runs locally against each relevant index partition.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IIndex.html#submit(int,%20int,%20byte[][],%20byte[][],%20com.bigdata.btree.proc.AbstractKeyArrayIndexProcedureConstructor,%20com.bigdata.btree.proc.IResultHandler)">submit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromIndex</code> - The index of the first key to be used (inclusive).</dd><dd><code>toIndex</code> - The index of the last key to be used (exclusive).</dd><dd><code>keys</code> - The keys (required).</dd><dd><code>vals</code> - The values (optional depending on the procedure).</dd><dd><code>ctor</code> - An object that can create instances of the procedure.</dd><dd><code>aggregator</code> - When defined, results from each procedure application will be
            reported to this object.
 
 TODO In order to allow parallelization within a shard, we need to modify
 this method signature to pass in an <a href="../../../com/bigdata/btree/proc/IResultHandler.html" title="interface in com.bigdata.btree.proc"><code>IResultHandler</code></a> constructor
 object. That might be something which could be pushed down onto the ctor
 argument. It would be used in scale-out to create a DS local result handler
 so we can locally aggregate when parallelizing against each shard and then
 return that aggregated result to the client which would extract the aggregate
 result across the shards from the client's result handler. See BLZG-1537.</dd><dt><span class="strong">See Also:</span></dt><dd><code>(Schedule more IOs when loading data)</code></dd></dl>
</li>
</ul>
<a name="getRightMostNode(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRightMostNode</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&nbsp;getRightMostNode(boolean&nbsp;nodesOnly)</pre>
<div class="block">Utility method returns the right-most node in the B+Tree.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>nodesOnly</code> - when <code>true</code> the search will halt at the
            right-most non-leaf. Otherwise it will return the right-most
            leaf.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The right-most child in the B+Tree -or- <code>null</code> if
         the root of the B+Tree is a leaf and
         <code>nodesOnly == true</code>.</dd></dl>
</li>
</ul>
<a name="newLeafCursor(com.bigdata.btree.SeekEnum)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newLeafCursor</h4>
<pre>public abstract&nbsp;<a href="../../../com/bigdata/btree/ILeafCursor.html" title="interface in com.bigdata.btree">ILeafCursor</a>&nbsp;newLeafCursor(<a href="../../../com/bigdata/btree/SeekEnum.html" title="enum in com.bigdata.btree">SeekEnum</a>&nbsp;where)</pre>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree. The cursor will be initially positioned on the leaf
 identified by the symbolic constant.</div>
</li>
</ul>
<a name="newLeafCursor(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newLeafCursor</h4>
<pre>public abstract&nbsp;<a href="../../../com/bigdata/btree/ILeafCursor.html" title="interface in com.bigdata.btree">ILeafCursor</a>&nbsp;newLeafCursor(byte[]&nbsp;key)</pre>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree. The cursor will be initially positioned on the leaf
 that spans the given <i>key</i>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key (required).</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>key</i> is <code>null</code>.</dd></dl>
</li>
</ul>
<a name="dump(java.io.PrintStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dump</h4>
<pre>public&nbsp;boolean&nbsp;dump(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out)</pre>
<div class="block">Recursive dump of the tree.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - The dump is written on this stream.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true unless an inconsistency is detected.</dd></dl>
</li>
</ul>
<a name="dump(org.apache.log4j.Level, java.io.PrintStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dump</h4>
<pre>public&nbsp;boolean&nbsp;dump(org.apache.log4j.Level&nbsp;level,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out)</pre>
</li>
</ul>
<a name="touch(com.bigdata.btree.AbstractNode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>touch</h4>
<pre>protected&nbsp;void&nbsp;touch(<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;node)</pre>
<div class="block"><p>
 This method is responsible for putting the node or leaf onto the ring
 buffer which controls (a) how long we retain a hard reference to the node
 or leaf; and (b) for writes, when the node or leaf is evicted with a zero
 reference count and made persistent (along with all dirty children). The
 concurrency requirements and the implementation behavior and guarentees
 differ depending on whether the B+Tree is read-only or mutable for two
 reasons: For writers, the B+Tree is single-threaded so there is no
 contention. For readers, every touch on the B+Tree goes through this
 point, so it is vital to make this method non-blocking.
 </p>
 <h3>Writers</h3>
 <p>
 This method guarantees that the specified node will NOT be synchronously
 persisted as a side effect and thereby made immutable. (Of course, the
 node may be already immutable.)
 </p>
 <p>
 In conjunction with <a href="../../../com/bigdata/btree/DefaultEvictionListener.html" title="class in com.bigdata.btree"><code>DefaultEvictionListener</code></a>, this method
 guarentees that the reference counter for the node will reflect the #of
 times that the node is actually present on the
 <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>.
 </p>
 <p>
 If the node is not found on a scan of the head of the queue, then it is
 appended to the queue and its <a href="../../../com/bigdata/btree/AbstractNode.html#referenceCount"><code>AbstractNode.referenceCount</code></a> is
 incremented. If a node is being appended to the queue and the queue is at
 capacity, then this will cause a reference to be evicted from the queue.
 If the reference counter for the evicted node or leaf is zero and the
 evicted node or leaf is dirty, then a data record will be coded for the
 evicted node or leaf and written onto the backing store. A subsequent
 attempt to modify the node or leaf will force copy-on-write for that node
 or leaf.
 </p>
 <p>
 For the mutable B+Tree we also track the #of references to the node/leaf
 on the ring buffer. When that reference count reaches zero we do an
 eviction and the node/leaf is written onto the backing store if it is
 dirty. Those reference counting games DO NOT matter for read-only views
 so we can take a code path which does not update the per-node/leaf
 reference count and we do not need to use either synchronization or
 atomic counters to track the reference counts.
 </p>
 <h3>Readers</h3>
 <p>
 In order to reduce contention for the lock required to update the backing
 queue, the <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a> is configured to collect
 references for touched nodes or leaves in a thread-local queue and then
 batch those references through to the backing hard reference queue while
 holding the lock.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The node or leaf.</dd></dl>
</li>
</ul>
<a name="writeNodeRecursive(com.bigdata.btree.AbstractNode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeNodeRecursive</h4>
<pre>protected final&nbsp;void&nbsp;writeNodeRecursive(<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;node)</pre>
<div class="block">Write a dirty node and its children using a post-order traversal that
 first writes any dirty leaves and then (recursively) their parent nodes.
 The parent nodes are guarenteed to be dirty if there is a dirty child so
 this never triggers copy-on-write. This is used as part of the commit
 protocol where it is invoked with the root of the tree, but it may also
 be used to incrementally flush dirty non-root <a href="../../../com/bigdata/btree/Node.html" title="class in com.bigdata.btree"><code>Node</code></a>s.
 
 Note: This will throw an exception if the backing store is read-only.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The root of the hierarchy of nodes to be written. The node
            MUST be dirty. The node this does NOT have to be the root of
            the tree and it does NOT have to be a <a href="../../../com/bigdata/btree/Node.html" title="class in com.bigdata.btree"><code>Node</code></a>.</dd></dl>
</li>
</ul>
<a name="writeNodeOrLeaf(com.bigdata.btree.AbstractNode)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeNodeOrLeaf</h4>
<pre>protected&nbsp;long&nbsp;writeNodeOrLeaf(<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;node)</pre>
<div class="block">Codes the node and writes the coded record on the store (non-recursive).
 The node MUST be dirty. If the node has a parent, then the parent is
 notified of the persistent identity assigned to the node by the store.
 This method is NOT recursive and dirty children of a node will NOT be
 visited. By coding the nodes and leaves as they are evicted from the
 <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>, the B+Tree continuously converts nodes and
 leaves to their more compact coded record forms which results in a
 smaller in memory footprint.
 <p>
 Note: For a transient B+Tree, this merely codes the node but does not
 write the node on the store (there is none).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The persistent identity assigned by the store.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the B+Tree (or the backing store) is read-only.</dd></dl>
</li>
</ul>
<a name="readNodeOrLeaf(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readNodeOrLeaf</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/btree/AbstractNode.html" title="class in com.bigdata.btree">AbstractNode</a>&lt;?&gt;&nbsp;readNodeOrLeaf(long&nbsp;addr)</pre>
<div class="block">Read a node or leaf from the store.
 <p>
 Note: Callers SHOULD be synchronized in order to ensure that only one
 thread will read the desired node or leaf in from the store and attach
 the reference to the newly read node or leaf as appropriate into the
 existing data structures (e.g., as the root reference or as a child of a
 node or leaf already live in memory).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address in the store.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The node or leaf.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the address is <a href="../../../com/bigdata/rawstore/IAddressManager.html#NULL"><code>IAddressManager.NULL</code></a>.</dd></dl>
</li>
</ul>
<a name="encodeRecordAddr(com.bigdata.io.ByteArrayBuffer, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encodeRecordAddr</h4>
<pre>public static&nbsp;byte[]&nbsp;encodeRecordAddr(<a href="../../../com/bigdata/io/ByteArrayBuffer.html" title="class in com.bigdata.io">ByteArrayBuffer</a>&nbsp;recordAddrBuf,
                      long&nbsp;addr)</pre>
<div class="block">Encode a raw record address into a byte[] suitable for storing in the
 value associated with a tuple and decoding using
 <a href="../../../com/bigdata/btree/AbstractBTree.html#decodeRecordAddr(byte[])"><code>decodeRecordAddr(byte[])</code></a></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recordAddrBuf</code> - The buffer that will be used to format the record address.</dd><dd><code>addr</code> - The raw record address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A newly allocated byte[] which encodes that address.</dd></dl>
</li>
</ul>
<a name="decodeRecordAddr(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decodeRecordAddr</h4>
<pre>public static&nbsp;long&nbsp;decodeRecordAddr(byte[]&nbsp;buf)</pre>
<div class="block">Decodes a signed long value as encoded by <code>#appendSigned(long)</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - The buffer containing the encoded record address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The signed long value.</dd></dl>
</li>
</ul>
<a name="recycle(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recycle</h4>
<pre>protected&nbsp;int&nbsp;recycle(long&nbsp;addr)</pre>
<div class="block">Recycle (aka delete) the allocation. This method also adjusts the #of
 bytes released in the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address to be recycled.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of bytes which were recycled and ZERO (0) if the address is
         <a href="../../../com/bigdata/rawstore/IAddressManager.html#NULL"><code>IAddressManager.NULL</code></a>.</dd></dl>
</li>
</ul>
<a name="readLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLock</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;readLock()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#readLock()">IReadWriteLockManager</a></code></strong></div>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain a shared read lock which
 is used (in the absence of other concurrency control mechanisms) to
 permit concurrent readers on an unisolated index while serializing access
 to that index when a writer must run. This is exposed for processes which
 need to obtain the write lock to coordinate external operations.
 <p>
 Note: If the persistence capable data structure is read-only then the
 returned <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> is a singleton that ignores all lock requests. This
 is because our read-only persistence capable data structures are already
 thread-safe for concurrent readers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#readLock()">readLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The lock.</dd></dl>
</li>
</ul>
<a name="writeLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeLock</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;writeLock()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#writeLock()">IReadWriteLockManager</a></code></strong></div>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain an exclusive write lock
 which is used (in the absence of other concurrency control mechanisms) to
 serialize all processes accessing an unisolated index when a writer must
 run. This is exposed for processes which need to obtain the write lock to
 coordinate external operations.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#writeLock()">writeLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The lock.</dd></dl>
</li>
</ul>
<a name="getReadLockCount()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getReadLockCount</h4>
<pre>public final&nbsp;int&nbsp;getReadLockCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#getReadLockCount()">IReadWriteLockManager</a></code></strong></div>
<div class="block">Return the #of read-locks held by the current thread for a mutable index
 view.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#getReadLockCount()">getReadLockCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of reentrant read locks held by the current thread -or- ZERO
         if the index is read-only (read locks are not tracked for a
         read-only index view).</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractBTree.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/bigdata/btree/AbstractBTree.IBTreeCounters.html" title="interface in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/AbstractBTree.html" target="_top">Frames</a></li>
<li><a href="AbstractBTree.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
