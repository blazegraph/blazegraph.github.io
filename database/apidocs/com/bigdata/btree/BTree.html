<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Thu Feb 25 05:02:48 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BTree (Blazegraph Database Platform 2.0.1 API)</title>
<meta name="date" content="2016-02-25">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BTree (Blazegraph Database Platform 2.0.1 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BTree.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/BloomFilterFactory.html" title="class in com.bigdata.btree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/btree/BTree.Counter.html" title="class in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/BTree.html" target="_top">Frames</a></li>
<li><a href="BTree.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.btree</div>
<h2 title="Class BTree" class="title">Class BTree</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">com.bigdata.btree.AbstractBTree</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.btree.BTree</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/btree/IAutoboxBTree.html" title="interface in com.bigdata.btree">IAutoboxBTree</a>, <a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a>, <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a>, <a href="../../../com/bigdata/btree/IIndexLocalCounter.html" title="interface in com.bigdata.btree">IIndexLocalCounter</a>, <a href="../../../com/bigdata/btree/ILinearList.html" title="interface in com.bigdata.btree">ILinearList</a>, <a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a>, <a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a>, <a href="../../../com/bigdata/btree/ISimpleBTree.html" title="interface in com.bigdata.btree">ISimpleBTree</a>, <a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a>, <a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a>, <a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../com/bigdata/journal/CommitRecordIndex.html" title="class in com.bigdata.journal">CommitRecordIndex</a>, <a href="../../../com/bigdata/service/CommitTimeIndex.html" title="class in com.bigdata.service">CommitTimeIndex</a>, <a href="../../../com/bigdata/counters/store/CounterSetBTree.html" title="class in com.bigdata.counters.store">CounterSetBTree</a>, <a href="../../../com/bigdata/service/EventReceiver.EventBTree.html" title="class in com.bigdata.service">EventReceiver.EventBTree</a>, <a href="../../../com/bigdata/resources/IndexSegmentIndex.html" title="class in com.bigdata.resources">IndexSegmentIndex</a>, <a href="../../../com/bigdata/resources/JournalIndex.html" title="class in com.bigdata.resources">JournalIndex</a>, <a href="../../../com/bigdata/mdi/MetadataIndex.html" title="class in com.bigdata.mdi">MetadataIndex</a>, <a href="../../../com/bigdata/journal/Name2Addr.html" title="class in com.bigdata.journal">Name2Addr</a>, <a href="../../../com/bigdata/rdf/sail/TestMROWTransactions.MyBTree.html" title="class in com.bigdata.rdf.sail">TestMROWTransactions.MyBTree</a>, <a href="../../../com/bigdata/journal/TestRestartSafe.MyBTree.html" title="class in com.bigdata.journal">TestRestartSafe.MyBTree</a>, <a href="../../../com/bigdata/service/TxId2CommitTimeIndex.html" title="class in com.bigdata.service">TxId2CommitTimeIndex</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">BTree</span>
extends <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a>
implements <a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></pre>
<div class="block"><p>
 This class implements a variant of a B+Tree in which all values are stored in
 leaves, but the leaves are not connected with prior-next links. This
 constraint arises from the requirement to support a copy-on-write policy.
 </p>
 <p>
 Note: No mechanism is exposed for fetching a node or leaf of the tree other
 than the root by its key. This is because the parent reference on the node
 (or leaf) can only be set when it is read from the store in context by its
 parent node.
 </p>
 <p>
 Note: the leaves can not be stitched together with prior and next references
 without forming cycles that make it impossible to write out the leaves of the
 btree. This restriction arises because each time we write out a node or leaf
 it is assigned a persistent identifier as an unavoidable artifact of
 providing isolation for the object index.
 </p>
 <p>
 Note: This implementation is thread-safe for concurrent readers BUT NOT for
 concurrent writers. If a writer has access to a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> then there MUST
 NOT be any other reader -or- writer operating on the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> at the
 same time.
 </p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.Counter.html" title="class in com.bigdata.btree">BTree.Counter</a></strong></code>
<div class="block">Mutable counter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.LeafCursor.html" title="class in com.bigdata.btree">BTree.LeafCursor</a></strong></code>
<div class="block">A cursor that may be used to traversal <a href="../../../com/bigdata/btree/Leaf.html" title="class in com.bigdata.btree"><code>Leaf</code></a>s.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.NodeFactory.html" title="class in com.bigdata.btree">BTree.NodeFactory</a></strong></code>
<div class="block">Factory for mutable nodes and leaves used by the <a href="../../../com/bigdata/btree/NodeSerializer.html" title="class in com.bigdata.btree"><code>NodeSerializer</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.PartitionedCounter.html" title="class in com.bigdata.btree">BTree.PartitionedCounter</a></strong></code>
<div class="block">Places the counter values into a namespace formed by the partition
 identifier.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.Stack.html" title="class in com.bigdata.btree">BTree.Stack</a></strong></code>
<div class="block">A simple stack based on an array used to maintain hard references for the
 parent <a href="../../../com/bigdata/btree/Node.html" title="class in com.bigdata.btree"><code>Node</code></a>s in the <a href="../../../com/bigdata/btree/BTree.LeafCursor.html" title="class in com.bigdata.btree"><code>BTree.LeafCursor</code></a>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_com.bigdata.btree.AbstractBTree">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></h3>
<code><a href="../../../com/bigdata/btree/AbstractBTree.IBTreeCounters.html" title="interface in com.bigdata.btree">AbstractBTree.IBTreeCounters</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#counter">counter</a></strong></code>
<div class="block">The mutable counter exposed by #getCounter()}.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#height">height</a></strong></code>
<div class="block">The height of the btree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#nentries">nentries</a></strong></code>
<div class="block">The #of entries in the btree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#nleaves">nleaves</a></strong></code>
<div class="block">The #of leaf nodes in the btree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#nnodes">nnodes</a></strong></code>
<div class="block">The #of non-leaf nodes in the btree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#recordVersion">recordVersion</a></strong></code>
<div class="block">The value of the record version number that will be assigned to the next
 node or leaf written onto the backing store.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.btree.AbstractBTree">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></h3>
<code><a href="../../../com/bigdata/btree/AbstractBTree.html#branchingFactor">branchingFactor</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#debug">debug</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#DEBUG">DEBUG</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#dumpLog">dumpLog</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#error">error</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_CLOSED">ERROR_CLOSED</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_ERROR_STATE">ERROR_ERROR_STATE</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_LESS_THAN_ZERO">ERROR_LESS_THAN_ZERO</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_READ_ONLY">ERROR_READ_ONLY</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_TOO_LARGE">ERROR_TOO_LARGE</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#ERROR_TRANSIENT">ERROR_TRANSIENT</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#INFO">INFO</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#log">log</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#metadata">metadata</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#ndistinctOnWriteRetentionQueue">ndistinctOnWriteRetentionQueue</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#nodeSer">nodeSer</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#readOnly">readOnly</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#root">root</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#store">store</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#storeCache">storeCache</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#writeRetentionQueue">writeRetentionQueue</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.btree.IRangeQuery">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/IRangeQuery.html" title="interface in com.bigdata.btree">IRangeQuery</a></h3>
<code><a href="../../../com/bigdata/btree/IRangeQuery.html#ALL">ALL</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#CURSOR">CURSOR</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#DEFAULT">DEFAULT</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#DELETED">DELETED</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#FIXED_LENGTH_SUCCESSOR">FIXED_LENGTH_SUCCESSOR</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#KEYS">KEYS</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#NONE">NONE</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#PARALLEL">PARALLEL</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#READONLY">READONLY</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#REMOVEALL">REMOVEALL</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#REVERSE">REVERSE</a>, <a href="../../../com/bigdata/btree/IRangeQuery.html#VALS">VALS</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/btree/BTree.html#BTree(com.bigdata.rawstore.IRawStore,%20com.bigdata.btree.Checkpoint,%20com.bigdata.btree.IndexMetadata,%20boolean)">BTree</a></strong>(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
     <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree">Checkpoint</a>&nbsp;checkpoint,
     <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
     boolean&nbsp;readOnly)</code>
<div class="block">Required constructor form for <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> and any derived subclasses.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#_reopen()">_reopen</a></strong>()</code>
<div class="block">This method is responsible for setting up the root leaf (either new or
 read from the store), the bloom filter, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#asReadOnly()">asReadOnly</a></strong>()</code>
<div class="block">Returns an immutable view of this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#create(com.bigdata.rawstore.IRawStore,%20com.bigdata.btree.IndexMetadata)">create</a></strong>(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
      <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata)</code>
<div class="block">Create a new <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#createTransient(com.bigdata.btree.IndexMetadata)">createTransient</a></strong>(<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata)</code>
<div class="block">Create a new <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class that is fully transient (NO
 backing <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#createViewCheckpoint()">createViewCheckpoint</a></strong>()</code>
<div class="block">Create a new checkpoint for a mutable <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> in which the view is
 redefined to include the previous view of the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> (the one from
 which this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> instance was loaded) plus the current view of
 the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#fireDirtyEvent()">fireDirtyEvent</a></strong>()</code>
<div class="block">Fire an event to the listener (iff set).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getBloomFilter()">getBloomFilter</a></strong>()</code>
<div class="block">Lazily reads the bloom filter from the backing store if it exists and is
 not already in memory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree">Checkpoint</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getCheckpoint()">getCheckpoint</a></strong>()</code>
<div class="block">Returns the most recent <a href="../../../com/bigdata/btree/ICheckpoint.html" title="interface in com.bigdata.btree"><code>ICheckpoint</code></a> record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/ICounter.html" title="interface in com.bigdata.btree">ICounter</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getCounter()">getCounter</a></strong>()</code>
<div class="block">Returns an <a href="../../../com/bigdata/btree/ICounter.html" title="interface in com.bigdata.btree"><code>ICounter</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IDirtyListener.html" title="interface in com.bigdata.btree">IDirtyListener</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getDirtyListener()">getDirtyListener</a></strong>()</code>
<div class="block">Return the <a href="../../../com/bigdata/btree/IDirtyListener.html" title="interface in com.bigdata.btree"><code>IDirtyListener</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getEntryCount()">getEntryCount</a></strong>()</code>
<div class="block">The #of entries (aka tuples) in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getHeight()">getHeight</a></strong>()</code>
<div class="block">The height of the btree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getLastCommitTime()">getLastCommitTime</a></strong>()</code>
<div class="block">The timestamp associated with the last <a href="../../../com/bigdata/journal/IAtomicStore.html#commit()"><code>IAtomicStore.commit()</code></a> in
 which writes buffered by this index were made restart-safe on the backing
 store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getLeafCount()">getLeafCount</a></strong>()</code>
<div class="block">The #of leaf nodes in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getMetadataAddr()">getMetadataAddr</a></strong>()</code>
<div class="block">The address at which the most recent <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record was
 written.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getMutableBTree()">getMutableBTree</a></strong>()</code>
<div class="block">The <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> that is absorbing writes for the view.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getNodeCount()">getNodeCount</a></strong>()</code>
<div class="block">The #of non-leaf nodes in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getRecordVersion()">getRecordVersion</a></strong>()</code>
<div class="block">The value of the record version number that will be assigned to the next
 node or leaf written onto the backing store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getRevisionTimestamp()">getRevisionTimestamp</a></strong>()</code>
<div class="block">The timestamp associated with unisolated writes on this index.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getRootAddr()">getRootAddr</a></strong>()</code>
<div class="block">The address of the last written root of the persistent data structure
 -or- <code>0L</code> if there is no root.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getSourceCount()">getSourceCount</a></strong>()</code>
<div class="block">Returns ONE (1).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getSources()">getSources</a></strong>()</code>
<div class="block">An array containing this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#getStore()">getStore</a></strong>()</code>
<div class="block">The backing store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#handleCommit(long)">handleCommit</a></strong>(long&nbsp;commitTime)</code>
<div class="block">Handle request for a commit by <a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()"><code>writeCheckpoint()</code></a>ing dirty nodes
 and leaves onto the store, writing a new metadata record, and returning
 the address of that metadata record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#load(com.bigdata.rawstore.IRawStore,%20long,%20boolean)">load</a></strong>(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
    long&nbsp;addrCheckpoint,
    boolean&nbsp;readOnly)</code>
<div class="block">Load an instance of a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class from the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#needsCheckpoint()">needsCheckpoint</a></strong>()</code>
<div class="block">Return true iff changes would be lost unless the B+Tree is flushed to the
 backing store using <a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()"><code>writeCheckpoint()</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BTree.LeafCursor.html" title="class in com.bigdata.btree">BTree.LeafCursor</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#newLeafCursor(byte[])">newLeafCursor</a></strong>(byte[]&nbsp;key)</code>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BTree.LeafCursor.html" title="class in com.bigdata.btree">BTree.LeafCursor</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#newLeafCursor(com.bigdata.btree.SeekEnum)">newLeafCursor</a></strong>(<a href="../../../com/bigdata/btree/SeekEnum.html" title="enum in com.bigdata.btree">SeekEnum</a>&nbsp;where)</code>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#readBloomFilter()">readBloomFilter</a></strong>()</code>
<div class="block">Read the bloom filter from the backing store using the address stored in
 the last <a href="../../../com/bigdata/btree/BTree.html#checkpoint"><code>checkpoint</code></a> record.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#removeAll()">removeAll</a></strong>()</code>
<div class="block">Remove all entries in the B+Tree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#setDirtyListener(com.bigdata.btree.IDirtyListener)">setDirtyListener</a></strong>(<a href="../../../com/bigdata/btree/IDirtyListener.html" title="interface in com.bigdata.btree">IDirtyListener</a>&nbsp;listener)</code>
<div class="block">Set or clear the listener (there can be only one).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#setIndexMetadata(com.bigdata.btree.IndexMetadata)">setIndexMetadata</a></strong>(<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;indexMetadata)</code>
<div class="block">Method updates the index metadata associated with this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#setLastCommitTime(long)">setLastCommitTime</a></strong>(long&nbsp;lastCommitTime)</code>
<div class="block">Sets the lastCommitTime.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()">writeCheckpoint</a></strong>()</code>
<div class="block">Checkpoint operation must <code>#flush()</code> dirty nodes, dirty persistent
 data structures, etc, write a new <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record on the
 backing store, save a reference to the current <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>, and
 return the address of that <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree">Checkpoint</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint2()">writeCheckpoint2</a></strong>()</code>
<div class="block">Checkpoint operation must <code>#flush()</code> dirty nodes, dirty persistent
 data structures, etc, write a new <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record on the
 backing store, save a reference to the current <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>, and
 return the address of that <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.AbstractBTree">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></h3>
<code><a href="../../../com/bigdata/btree/AbstractBTree.html#assertNotReadOnly()">assertNotReadOnly</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#assertNotTransient()">assertNotTransient</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#close()">close</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#contains(byte[])">contains</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#contains(java.lang.Object)">contains</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#decodeRecordAddr(byte[])">decodeRecordAddr</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#dump(org.apache.log4j.Level,%20java.io.PrintStream)">dump</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#dump(java.io.PrintStream)">dump</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#dumpPages(boolean,%20boolean)">dumpPages</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#encodeRecordAddr(com.bigdata.io.ByteArrayBuffer,%20long)">encodeRecordAddr</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getBranchingFactor()">getBranchingFactor</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getBtreeCounters()">getBtreeCounters</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getContainsTuple()">getContainsTuple</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getCounters()">getCounters</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getIndexMetadata()">getIndexMetadata</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getLookupTuple()">getLookupTuple</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getNodeSerializer()">getNodeSerializer</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getReadLockCount()">getReadLockCount</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getResourceMetadata()">getResourceMetadata</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getRightMostNode(boolean)">getRightMostNode</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getRoot()">getRoot</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getRootOrFinger(byte[])">getRootOrFinger</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getStatistics()">getStatistics</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getUtilization()">getUtilization</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#getWriteTuple()">getWriteTuple</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#indexOf(byte[])">indexOf</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#insert(byte[],%20byte[])">insert</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#insert(byte[],%20byte[],%20boolean,%20boolean,%20long,%20com.bigdata.btree.Tuple)">insert</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#insert(java.lang.Object,%20java.lang.Object)">insert</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#isBalanced()">isBalanced</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#isOpen()">isOpen</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#isReadOnly()">isReadOnly</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#isTransient()">isTransient</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#keyAt(long)">keyAt</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#lookup(byte[])">lookup</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#lookup(byte[],%20com.bigdata.btree.Tuple)">lookup</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#lookup(java.lang.Object)">lookup</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#putIfAbsent(byte[],%20byte[])">putIfAbsent</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCheck(byte[],%20boolean)">rangeCheck</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCopy(com.bigdata.btree.IIndex,%20byte[],%20byte[],%20boolean)">rangeCopy</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount()">rangeCount</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount(byte[],%20byte[])">rangeCount</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCount(java.lang.Object,%20java.lang.Object)">rangeCount</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCountExact(byte[],%20byte[])">rangeCountExact</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeCountExactWithDeleted(byte[],%20byte[])">rangeCountExactWithDeleted</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator()">rangeIterator</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(byte[],%20byte[])">rangeIterator</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(byte[],%20byte[],%20int,%20int,%20cutthecrap.utils.striterators.IFilter)">rangeIterator</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(java.lang.Object,%20java.lang.Object)">rangeIterator</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#rangeIterator(java.lang.Object,%20java.lang.Object,%20int,%20int,%20cutthecrap.utils.striterators.IFilter)">rangeIterator</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#readLock()">readLock</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#readNodeOrLeaf(long)">readNodeOrLeaf</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#recycle(long)">recycle</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#remove(byte[])">remove</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#remove(byte[],%20com.bigdata.btree.Tuple)">remove</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#remove(java.lang.Object)">remove</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()">reopen</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#scan()">scan</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#setBTreeCounters(com.bigdata.btree.BTreeCounters)">setBTreeCounters</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#submit(byte[],%20byte[],%20com.bigdata.btree.proc.IKeyRangeIndexProcedure,%20com.bigdata.btree.proc.IResultHandler)">submit</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#submit(byte[],%20com.bigdata.btree.proc.ISimpleIndexProcedure)">submit</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#submit(int,%20int,%20byte[][],%20byte[][],%20com.bigdata.btree.proc.AbstractKeyArrayIndexProcedureConstructor,%20com.bigdata.btree.proc.IResultHandler)">submit</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#toString()">toString</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#touch(com.bigdata.btree.AbstractNode)">touch</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#valueAt(long)">valueAt</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#valueAt(long,%20com.bigdata.btree.Tuple)">valueAt</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#writeLock()">writeLock</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#writeNodeOrLeaf(com.bigdata.btree.AbstractNode)">writeNodeOrLeaf</a>, <a href="../../../com/bigdata/btree/AbstractBTree.html#writeNodeRecursive(com.bigdata.btree.AbstractNode)">writeNodeRecursive</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ICheckpointProtocol">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></h3>
<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()">close</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#dumpPages(boolean,%20boolean)">dumpPages</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getIndexMetadata()">getIndexMetadata</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#isOpen()">isOpen</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()">reopen</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.counters.ICounterSetAccess">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.counters.<a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></h3>
<code><a href="../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ISimpleIndexAccess">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></h3>
<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#rangeCount()">rangeCount</a>, <a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#scan()">scan</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.IReadWriteLockManager">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></h3>
<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#getReadLockCount()">getReadLockCount</a>, <a href="../../../com/bigdata/btree/IReadWriteLockManager.html#isReadOnly()">isReadOnly</a>, <a href="../../../com/bigdata/btree/IReadWriteLockManager.html#readLock()">readLock</a>, <a href="../../../com/bigdata/btree/IReadWriteLockManager.html#writeLock()">writeLock</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="height">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>height</h4>
<pre>protected&nbsp;int height</pre>
<div class="block">The height of the btree. The height is the #of leaves minus one. A btree
 with only a root leaf is said to have <code>height := 0</code>. Note
 that the height only changes when we split the root node.</div>
</li>
</ul>
<a name="nnodes">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nnodes</h4>
<pre>protected&nbsp;long nnodes</pre>
<div class="block">The #of non-leaf nodes in the btree. The is zero (0) for a new btree.</div>
</li>
</ul>
<a name="nleaves">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nleaves</h4>
<pre>protected&nbsp;long nleaves</pre>
<div class="block">The #of leaf nodes in the btree. This is one (1) for a new btree.</div>
</li>
</ul>
<a name="nentries">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nentries</h4>
<pre>protected&nbsp;long nentries</pre>
<div class="block">The #of entries in the btree. This is zero (0) for a new btree.</div>
</li>
</ul>
<a name="recordVersion">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>recordVersion</h4>
<pre>protected&nbsp;long recordVersion</pre>
<div class="block">The value of the record version number that will be assigned to the next
 node or leaf written onto the backing store. This number is incremented
 each time a node or leaf is written onto the backing store. The initial
 value is ZERO (0). The first value assigned to a node or leaf will be
 ZERO (0).</div>
</li>
</ul>
<a name="counter">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>counter</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a> counter</pre>
<div class="block">The mutable counter exposed by #getCounter()}.
 <p>
 Note: This is <code>protected</code> so that it will be visible to
 <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> which needs to write the actual value store in this
 counter into its serialized record (without the partition identifier).</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BTree(com.bigdata.rawstore.IRawStore, com.bigdata.btree.Checkpoint, com.bigdata.btree.IndexMetadata, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BTree</h4>
<pre>public&nbsp;BTree(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
     <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree">Checkpoint</a>&nbsp;checkpoint,
     <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata,
     boolean&nbsp;readOnly)</pre>
<div class="block">Required constructor form for <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> and any derived subclasses.
 This constructor is used both to create a new <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>, and to load
 a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> from the store using a <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>store</code> - The store.</dd><dd><code>checkpoint</code> - A <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record for that <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</dd><dd><code>metadata</code> - The metadata record for that <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</dd><dd><code>readOnly</code> - When <code>true</code> the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> will be immutable.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/BTree.html#create(com.bigdata.rawstore.IRawStore,%20com.bigdata.btree.IndexMetadata)"><code>create(IRawStore, IndexMetadata)</code></a>, 
<a href="../../../com/bigdata/btree/BTree.html#load(com.bigdata.rawstore.IRawStore,%20long,%20boolean)"><code>load(IRawStore, long, boolean)</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getHeight()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeight</h4>
<pre>public final&nbsp;int&nbsp;getHeight()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getHeight()">IBTreeStatistics</a></code></strong></div>
<div class="block">The height of the btree. The height is the #of levels minus one. A btree
 with only a root leaf has <code>height := 0</code>. A btree with a
 root node and one level of leaves under it has <code>height := 1</code>.
 Note that all leaves of a btree are at the same height (this is what is
 means for the btree to be "balanced"). Also note that the height only
 changes when we split or join the root node (a btree maintains balance by
 growing and shrinking in levels from the top rather than the leaves).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getHeight()">getHeight</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getHeight()">getHeight</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#isBalanced()"><code>ISimpleTreeIndexAccess.isBalanced()</code></a></dd></dl>
</li>
</ul>
<a name="getNodeCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeCount</h4>
<pre>public final&nbsp;long&nbsp;getNodeCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getNodeCount()">IBTreeStatistics</a></code></strong></div>
<div class="block">The #of non-leaf nodes in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>. This is zero (0)
 for a new btree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getNodeCount()">getNodeCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getNodeCount()">getNodeCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getLeafCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLeafCount</h4>
<pre>public final&nbsp;long&nbsp;getLeafCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getLeafCount()">IBTreeStatistics</a></code></strong></div>
<div class="block">The #of leaf nodes in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>. This is one (1) for a
 new btree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getLeafCount()">getLeafCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getLeafCount()">getLeafCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getEntryCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryCount</h4>
<pre>public final&nbsp;long&nbsp;getEntryCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getEntryCount()">IBTreeStatistics</a></code></strong></div>
<div class="block">The #of entries (aka tuples) in the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>. This is zero
 (0) for a new B+Tree. When the B+Tree supports delete markers, this value
 also includes tuples which have been marked as deleted.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IBTreeStatistics.html#getEntryCount()">getEntryCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IBTreeStatistics.html" title="interface in com.bigdata.btree">IBTreeStatistics</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getEntryCount()">getEntryCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#getEntryCount()">getEntryCount</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
</dl>
</li>
</ul>
<a name="getStore()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStore</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;getStore()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#getStore()">ISimpleIndexAccess</a></code></strong></div>
<div class="block">The backing store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#getStore()">getStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getCounter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounter</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/ICounter.html" title="interface in com.bigdata.btree">ICounter</a>&nbsp;getCounter()</pre>
<div class="block">Returns an <a href="../../../com/bigdata/btree/ICounter.html" title="interface in com.bigdata.btree"><code>ICounter</code></a>. The <a href="../../../com/bigdata/btree/ICounter.html" title="interface in com.bigdata.btree"><code>ICounter</code></a> is mutable iff the
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is mutable. All <a href="../../../com/bigdata/btree/ICounter.html" title="interface in com.bigdata.btree"><code>ICounter</code></a>s returned by this method
 report and increment the same underlying counter.
 <p>
 Note: When the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is part of a scale-out index then the
 counter will assign values within a namespace defined by the partition
 identifier.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IIndexLocalCounter.html#getCounter()">getCounter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IIndexLocalCounter.html" title="interface in com.bigdata.btree">IIndexLocalCounter</a></code></dd>
</dl>
</li>
</ul>
<a name="_reopen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_reopen</h4>
<pre>protected&nbsp;void&nbsp;_reopen()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html#_reopen()">AbstractBTree</a></code></strong></div>
<div class="block">This method is responsible for setting up the root leaf (either new or
 read from the store), the bloom filter, etc. It is invoked by
 <a href="../../../com/bigdata/btree/AbstractBTree.html#reopen()"><code>AbstractBTree.reopen()</code></a> once <a href="../../../com/bigdata/btree/AbstractBTree.html#root"><code>AbstractBTree.root</code></a> has been show to be
 <code>null</code> with double-checked locking. When invoked in this
 context, the caller is guaranteed to hold a lock on <i>this</i>. This is
 done to ensure that at most one thread gets to re-open the index from the
 backing store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#_reopen()">_reopen</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
</dl>
</li>
</ul>
<a name="getBloomFilter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBloomFilter</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a>&nbsp;getBloomFilter()</pre>
<div class="block">Lazily reads the bloom filter from the backing store if it exists and is
 not already in memory.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILocalBTreeView.html#getBloomFilter()">getBloomFilter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#getBloomFilter()">getBloomFilter</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The bloom filter -or- <code>null</code> if there is no bloom
         filter (including the case where there is a bloom filter but it
         has been disabled since the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> has grown too large and
         the expected error rate of the bloom filter would be too high).</dd></dl>
</li>
</ul>
<a name="readBloomFilter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readBloomFilter</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/btree/BloomFilter.html" title="class in com.bigdata.btree">BloomFilter</a>&nbsp;readBloomFilter()</pre>
<div class="block">Read the bloom filter from the backing store using the address stored in
 the last <a href="../../../com/bigdata/btree/BTree.html#checkpoint"><code>checkpoint</code></a> record. This method will be invoked by
 <a href="../../../com/bigdata/btree/BTree.html#getBloomFilter()"><code>getBloomFilter()</code></a> when the bloom filter reference is
 <code>null</code> but the bloom filter is known to exist and the bloom
 filter object is requested.
 <p>
 Note: A bloom filter can be relatively large. The bit length of a bloom
 filter is approximately one byte per index entry, so a filter for an
 index with 10M index entries will be on the order of 10mb. Therefore this
 method will typically have high latency.
 <p>
 Note: the <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record initially stores <code>0L</code>
 for the bloom filter address. <a href="../../../com/bigdata/btree/BTree.html#newRootLeaf()"><code>newRootLeaf()</code></a> is responsible for
 allocating the bloom filter (if one is to be used) when the root leaf is
 (re-)created. The address then gets stored in the <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>
 record by <a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()"><code>writeCheckpoint()</code></a> (if invoked and once the bloom
 filter is dirty).</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the bloom filter does not exist (the caller should check
             this first to avoid obtaining a lock).</dd></dl>
</li>
</ul>
<a name="getLastCommitTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitTime</h4>
<pre>public final&nbsp;long&nbsp;getLastCommitTime()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html#getLastCommitTime()">AbstractBTree</a></code></strong></div>
<div class="block">The timestamp associated with the last <a href="../../../com/bigdata/journal/IAtomicStore.html#commit()"><code>IAtomicStore.commit()</code></a> in
 which writes buffered by this index were made restart-safe on the backing
 store. The lastCommitTime is set when the index is loaded from the
 backing store and updated after each commit. It is ZERO (0L) when
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is first created and will remain ZERO (0L) until the
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is committed.  If the backing store does not support atomic
 commits, then this value will always be ZERO (0L).
 <p>
 Note: This is fixed for an <a href="../../../com/bigdata/btree/IndexSegment.html" title="class in com.bigdata.btree"><code>IndexSegment</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getLastCommitTime()">getLastCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#getLastCommitTime()">getLastCommitTime</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getLastCommitTime()"><code>ICheckpointProtocol.getLastCommitTime()</code></a></dd></dl>
</li>
</ul>
<a name="getRevisionTimestamp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRevisionTimestamp</h4>
<pre>public final&nbsp;long&nbsp;getRevisionTimestamp()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html#getRevisionTimestamp()">AbstractBTree</a></code></strong></div>
<div class="block">The timestamp associated with unisolated writes on this index. This
 timestamp is designed to allow the interleaving of full transactions
 (whose revision timestamp is assigned by the transaction service) with
 unisolated operations on the same indices.
 <p>
 The revision timestamp assigned by this method is
 <code>lastCommitTime+1</code>. The reasoning is as follows. Revision
 timestamps are assigned by the transaction manager when the transaction
 is validated as part of its commit protocol. Therefore, revision
 timestamps are assigned after the transaction write set is complete.
 Further, the assigned revisionTimestamp will be strictly LT the
 commitTime for that transaction. By using <code>lastCommitTime+1</code>
 we are guaranteed that the revisionTimestamp for new writes (which will
 be part of some future commit point) will always be strictly GT the
 revisionTimestamp of historical writes (which were part of some prior
 commit point).
 <p>
 Note: Unisolated operations using this timestamp ARE NOT validated. The
 timestamp is simply applied to the tuple when it is inserted or updated
 and will become part of the restart safe state of the B+Tree once the
 unisolated operation participates in a commit.
 <p>
 Note: If an unisolated operation were to execute concurrent with a
 transaction commit for the same index then that could produce
 inconsistent results in the index and could trigger concurrent
 modification errors. In order to avoid such concurrent modification
 errors, unisolated operations which are to be mixed with full
 transactions MUST ensure that they have exclusive access to the
 unisolated index before proceeding. There are two ways to do this: (1)
 take the application off line for transactions; (2) submit your unisolated
 operations to the <a href="../../../com/bigdata/journal/IConcurrencyManager.html" title="interface in com.bigdata.journal"><code>IConcurrencyManager</code></a> which will automatically
 impose the necessary constraints on concurrent access to the unisolated
 indices.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#getRevisionTimestamp()">getRevisionTimestamp</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The revision timestamp to be assigned to an unisolated write.</dd></dl>
</li>
</ul>
<a name="setLastCommitTime(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLastCommitTime</h4>
<pre>public final&nbsp;void&nbsp;setLastCommitTime(long&nbsp;lastCommitTime)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#setLastCommitTime(long)">ICheckpointProtocol</a></code></strong></div>
<div class="block">Sets the lastCommitTime.
 <p>
 Note: The lastCommitTime is set by a combination of the
 <a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal"><code>AbstractJournal</code></a> and <a href="../../../com/bigdata/journal/Name2Addr.html" title="class in com.bigdata.journal"><code>Name2Addr</code></a> based on the actual
 commitTime of the commit during which an <a href="../../../com/bigdata/journal/Name2Addr.Entry.html" title="class in com.bigdata.journal"><code>Name2Addr.Entry</code></a> for that index was
 last committed. It is set for both historical index reads and unisolated
 index reads using <a href="../../../com/bigdata/journal/Name2Addr.Entry.html#commitTime"><code>Name2Addr.Entry.commitTime</code></a>. The lastCommitTime for an
 unisolated index will advance as commits are performed with that index.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#setLastCommitTime(long)">setLastCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>lastCommitTime</code> - The timestamp of the last committed state of this index.</dd></dl>
</li>
</ul>
<a name="getDirtyListener()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDirtyListener</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/IDirtyListener.html" title="interface in com.bigdata.btree">IDirtyListener</a>&nbsp;getDirtyListener()</pre>
<div class="block">Return the <a href="../../../com/bigdata/btree/IDirtyListener.html" title="interface in com.bigdata.btree"><code>IDirtyListener</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getDirtyListener()">getDirtyListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
</dl>
</li>
</ul>
<a name="setDirtyListener(com.bigdata.btree.IDirtyListener)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDirtyListener</h4>
<pre>public final&nbsp;void&nbsp;setDirtyListener(<a href="../../../com/bigdata/btree/IDirtyListener.html" title="interface in com.bigdata.btree">IDirtyListener</a>&nbsp;listener)</pre>
<div class="block">Set or clear the listener (there can be only one).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#setDirtyListener(com.bigdata.btree.IDirtyListener)">setDirtyListener</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>listener</code> - The listener.</dd></dl>
</li>
</ul>
<a name="fireDirtyEvent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>fireDirtyEvent</h4>
<pre>protected final&nbsp;void&nbsp;fireDirtyEvent()</pre>
<div class="block">Fire an event to the listener (iff set).</div>
</li>
</ul>
<a name="asReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asReadOnly</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a>&nbsp;asReadOnly()</pre>
<div class="block">Returns an immutable view of this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>. If <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is
 already read-only, then <i>this</i> instance is returned. Otherwise, a
 read-only <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is loaded from the last checkpoint and returned.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is dirty.</dd></dl>
</li>
</ul>
<a name="writeCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeCheckpoint</h4>
<pre>public final&nbsp;long&nbsp;writeCheckpoint()</pre>
<div class="block">Checkpoint operation must <code>#flush()</code> dirty nodes, dirty persistent
 data structures, etc, write a new <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record on the
 backing store, save a reference to the current <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>, and
 return the address of that <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.
 <p>
 Note: A checkpoint by itself is NOT an atomic commit. The commit protocol
 is at the store level and uses <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>s to ensure that the
 state of the persistence capable data structure is current on the backing
 store.
 <p>
 This checkpoint operation <a href="../../../com/bigdata/btree/BTree.html#flush()"><code>flush()</code></a>es dirty nodes, the optional
 <a href="../../../com/bigdata/btree/IBloomFilter.html" title="interface in com.bigdata.btree"><code>IBloomFilter</code></a> (if dirty), the <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> (if dirty),
 and then writes a new <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record on the backing store,
 saves a reference to the current <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> and returns the
 address of that <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#writeCheckpoint()">writeCheckpoint</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The address at which the <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record for the
         persistence capable was written onto the store. The data
         structure can be reloaded from this <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.</dd><dt><span class="strong">See Also:</span></dt><dd><code>#writeCheckpoint2(), which returns the {@link Checkpoint} record
      itself.</code>, 
<a href="../../../com/bigdata/btree/BTree.html#load(com.bigdata.rawstore.IRawStore,%20long,%20boolean)"><code>load(IRawStore, long, boolean)</code></a></dd></dl>
</li>
</ul>
<a name="writeCheckpoint2()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeCheckpoint2</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree">Checkpoint</a>&nbsp;writeCheckpoint2()</pre>
<div class="block">Checkpoint operation must <code>#flush()</code> dirty nodes, dirty persistent
 data structures, etc, write a new <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record on the
 backing store, save a reference to the current <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>, and
 return the address of that <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.
 <p>
 Note: A checkpoint by itself is NOT an atomic commit. The commit protocol
 is at the store level and uses <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>s to ensure that the
 state of the persistence capable data structure is current on the backing
 store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#writeCheckpoint2()">writeCheckpoint2</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record for the persistent data structure
         which was written onto the store. The persistent data structure
         can be reloaded from this <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/BTree.html#load(com.bigdata.rawstore.IRawStore,%20long,%20boolean)"><code>load(IRawStore, long, boolean)</code></a></dd></dl>
</li>
</ul>
<a name="getCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCheckpoint</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree">Checkpoint</a>&nbsp;getCheckpoint()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getCheckpoint()">ICheckpointProtocol</a></code></strong></div>
<div class="block">Returns the most recent <a href="../../../com/bigdata/btree/ICheckpoint.html" title="interface in com.bigdata.btree"><code>ICheckpoint</code></a> record.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getCheckpoint()">getCheckpoint</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The most recent <a href="../../../com/bigdata/btree/ICheckpoint.html" title="interface in com.bigdata.btree"><code>ICheckpoint</code></a> record and never
         <code>null</code>.</dd></dl>
</li>
</ul>
<a name="getRecordVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRecordVersion</h4>
<pre>public final&nbsp;long&nbsp;getRecordVersion()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRecordVersion()">ICheckpointProtocol</a></code></strong></div>
<div class="block">The value of the record version number that will be assigned to the next
 node or leaf written onto the backing store. This number is incremented
 each time a node or leaf is written onto the backing store. The initial
 value is ZERO (0). The first value assigned to a node or leaf will be
 ZERO (0).
 
 TODO Nobody is actually incrementing this value right now.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRecordVersion()">getRecordVersion</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
</dl>
</li>
</ul>
<a name="getMetadataAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetadataAddr</h4>
<pre>public final&nbsp;long&nbsp;getMetadataAddr()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getMetadataAddr()">ICheckpointProtocol</a></code></strong></div>
<div class="block">The address at which the most recent <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record was
 written.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getMetadataAddr()">getMetadataAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
</dl>
</li>
</ul>
<a name="getRootAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRootAddr</h4>
<pre>public final&nbsp;long&nbsp;getRootAddr()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRootAddr()">ICheckpointProtocol</a></code></strong></div>
<div class="block">The address of the last written root of the persistent data structure
 -or- <code>0L</code> if there is no root. A <code>0L</code> return may be
 an indication that an empty data structure will be created on demand.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRootAddr()">getRootAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
</dl>
</li>
</ul>
<a name="needsCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>needsCheckpoint</h4>
<pre>public&nbsp;boolean&nbsp;needsCheckpoint()</pre>
<div class="block">Return true iff changes would be lost unless the B+Tree is flushed to the
 backing store using <a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()"><code>writeCheckpoint()</code></a>.
 <p>
 Note: In order to avoid needless checkpoints this method will return
 <code>false</code> if:
 <ul>
 <li> the metadata record is persistent -AND-
 <ul>
 <li> EITHER the root is <code>null</code>, indicating that the index
 is closed (in which case there are no buffered writes);</li>
 <li> OR the root of the btree is NOT dirty, the persistent address of the
 root of the btree agrees with <a href="../../../com/bigdata/btree/Checkpoint.html#getRootAddr()"><code>Checkpoint.getRootAddr()</code></a>, and the
 <a href="../../../com/bigdata/btree/BTree.html#counter"><code>counter</code></a> value agrees <a href="../../../com/bigdata/btree/Checkpoint.html#getCounter()"><code>Checkpoint.getCounter()</code></a>.</li>
 </ul>
 </li>
 </ul></div>
<dl><dt><span class="strong">Returns:</span></dt><dd><code>true</code> true iff changes would be lost unless the
         B+Tree was flushed to the backing store using
         <a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()"><code>writeCheckpoint()</code></a>.</dd></dl>
</li>
</ul>
<a name="setIndexMetadata(com.bigdata.btree.IndexMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIndexMetadata</h4>
<pre>public final&nbsp;void&nbsp;setIndexMetadata(<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;indexMetadata)</pre>
<div class="block">Method updates the index metadata associated with this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.
 The new metadata record will be written out as part of the next index
 <a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()"><code>writeCheckpoint()</code></a>.
 <p>
 Note: this method should be used with caution.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>indexMetadata</code> - The new metadata description for the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the new value is <code>null</code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the new <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record has already been
             written on the store - see
             <a href="../../../com/bigdata/btree/IndexMetadata.html#getMetadataAddr()"><code>IndexMetadata.getMetadataAddr()</code></a></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the index is read-only.</dd></dl>
</li>
</ul>
<a name="handleCommit(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleCommit</h4>
<pre>public&nbsp;long&nbsp;handleCommit(long&nbsp;commitTime)</pre>
<div class="block">Handle request for a commit by <a href="../../../com/bigdata/btree/BTree.html#writeCheckpoint()"><code>writeCheckpoint()</code></a>ing dirty nodes
 and leaves onto the store, writing a new metadata record, and returning
 the address of that metadata record.
 <p>
 Note: In order to avoid needless writes the existing metadata record is
 always returned if <a href="../../../com/bigdata/btree/BTree.html#needsCheckpoint()"><code>needsCheckpoint()</code></a> is <code>false</code>.
 <p>
 Note: The address of the existing <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record is always
 returned if <code>autoCommit</code> is disabled.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/ICommitter.html#handleCommit(long)">handleCommit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>commitTime</code> - The timestamp assigned to the commit.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address of a <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record from which the btree
         may be reloaded.</dd></dl>
</li>
</ul>
<a name="removeAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeAll</h4>
<pre>public final&nbsp;void&nbsp;removeAll()</pre>
<div class="block">Remove all entries in the B+Tree.
 <p>
 When delete markers are not enabled this simply replaces the root with a
 new root leaf and resets the counters (height, #of nodes, #of leaves,
 etc). to be consistent with that new root. If the btree is then made
 restart-safe by the commit protocol of the backing store then the effect
 is as if all entries had been deleted. Old nodes and leaves will be swept
 from the store eventually when the journal overflows.
 <p>
 When delete markers are enabled all un-deleted entries in the index are
 overwritten with a delete marker.
 <p>
 Note: The <a href="../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal"><code>IIndexManager</code></a> defines methods for registering (adding)
 and dropping indices vs removing the entries in an individual
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#removeAll()">removeAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#removeAll()">removeAll</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
</dl>
</li>
</ul>
<a name="createViewCheckpoint()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createViewCheckpoint</h4>
<pre>public&nbsp;long&nbsp;createViewCheckpoint()</pre>
<div class="block">Create a new checkpoint for a mutable <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> in which the view is
 redefined to include the previous view of the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> (the one from
 which this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> instance was loaded) plus the current view of
 the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>. The root of the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is replaced with an
 empty leaf as part of this operation. The <a href="../../../com/bigdata/mdi/LocalPartitionMetadata.html" title="class in com.bigdata.mdi"><code>LocalPartitionMetadata</code></a>
 is updated to reflect the new view.
 <p>
 Note: This method is used by the scale-out architecture for which it
 performs a very specific function. It should not be used for any other
 purpose and should not be invoked by user code. This encapsulates all of
 the trickery for creating the necessary checkpoint without exposing any
 methods which could be used to replace the root node with an empty root
 leaf.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The timestamp associated with the checkpoint record from which
         this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> was loaded. This is the timestamp that was
         placed on the 2nd element of the view. Any read-only build or
         merge task will read from this timestamp.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is read only.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is dirty.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> has never been committed.</dd></dl>
</li>
</ul>
<a name="create(com.bigdata.rawstore.IRawStore, com.bigdata.btree.IndexMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public static&nbsp;<a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a>&nbsp;create(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
           <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata)</pre>
<div class="block">Create a new <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class. This method works by writing
 the <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record on the store and then loading the
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> from the <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>store</code> - The store.</dd><dd><code>metadata</code> - The metadata record.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The newly created <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If you attempt to create two btree objects from the same
                metadata record since the metadata address will have
                already been noted on the <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> object.
                You can use <a href="../../../com/bigdata/btree/IndexMetadata.html#clone()"><code>IndexMetadata.clone()</code></a> to obtain a new
                copy of the metadata object with the metadata address set
                to <code>0L</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the <a href="../../../com/bigdata/btree/IndexTypeEnum.html" title="enum in com.bigdata.btree"><code>IndexTypeEnum</code></a> in the supplied
                <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> object is not
                <a href="../../../com/bigdata/btree/IndexTypeEnum.html#BTree"><code>IndexTypeEnum.BTree</code></a>.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/BTree.html#load(com.bigdata.rawstore.IRawStore,%20long,%20boolean)"><code>load(IRawStore, long, boolean)</code></a></dd></dl>
</li>
</ul>
<a name="createTransient(com.bigdata.btree.IndexMetadata)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createTransient</h4>
<pre>public static&nbsp;<a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a>&nbsp;createTransient(<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;metadata)</pre>
<div class="block">Create a new <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class that is fully transient (NO
 backing <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>).
 <p>
 Fully transient <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>s provide the functionality of a B+Tree
 without a backing persistence store. Internally, reachable nodes and
 leaves of the transient <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> use hard references to ensure that
 remain strongly reachable. Deleted nodes and leaves simply clear their
 references and will be swept by the garbage collector shortly thereafter.
 <p>
 Operations which attempt to write on the backing store will fail.
 <p>
 While nodes and leaves are never persisted, the keys and values of the
 transient <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> are unsigned byte[]s. This means that application
 keys and values are always converted into unsigned byte[]s before being
 stored in the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>. Hence if an object that is inserted into
 the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> and then looked up using the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> API, you
 WILL NOT get back the same object reference.
 <p>
 Note: CLOSING A TRANSIENT INDEX WILL DISCARD ALL DATA!</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>metadata</code> - The metadata record.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The transient <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</dd></dl>
</li>
</ul>
<a name="load(com.bigdata.rawstore.IRawStore, long, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>load</h4>
<pre>public static&nbsp;<a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a>&nbsp;load(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
         long&nbsp;addrCheckpoint,
         boolean&nbsp;readOnly)</pre>
<div class="block">Load an instance of a <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class from the store. The
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class MUST declare a constructor with the
 following signature: <code>
 
 <i>className</i>(IRawStore store, Checkpoint checkpoint, IndexMetadata metadata, boolean readOnly)
 
 </code></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>store</code> - The store.</dd><dd><code>addrCheckpoint</code> - The address of a <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record for the index.</dd><dd><code>readOnly</code> - When <code>true</code> the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> will be marked as
            read-only. Marking has some advantages relating to the locking
            scheme used by <a href="../../../com/bigdata/btree/Node.html#getChild(int)"><code>Node.getChild(int)</code></a> since the root node
            is known to be read-only at the time that it is allocated as
            per-child locking is therefore in place for all nodes in the
            read-only <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>. It also results in much higher
            concurrency for <a href="../../../com/bigdata/btree/AbstractBTree.html#touch(com.bigdata.btree.AbstractNode)"><code>AbstractBTree.touch(AbstractNode)</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> or derived class loaded from that
         <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if store is <code>null</code>.</dd></dl>
</li>
</ul>
<a name="getSourceCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSourceCount</h4>
<pre>public final&nbsp;int&nbsp;getSourceCount()</pre>
<div class="block">Returns ONE (1).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILocalBTreeView.html#getSourceCount()">getSourceCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a></code></dd>
</dl>
</li>
</ul>
<a name="getSources()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSources</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a>[]&nbsp;getSources()</pre>
<div class="block">An array containing this <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILocalBTreeView.html#getSources()">getSources</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a></code></dd>
</dl>
</li>
</ul>
<a name="getMutableBTree()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMutableBTree</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree">BTree</a>&nbsp;getMutableBTree()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ILocalBTreeView.html#getMutableBTree()">ILocalBTreeView</a></code></strong></div>
<div class="block">The <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> that is absorbing writes for the view.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ILocalBTreeView.html#getMutableBTree()">getMutableBTree</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ILocalBTreeView.html" title="interface in com.bigdata.btree">ILocalBTreeView</a></code></dd>
</dl>
</li>
</ul>
<a name="newLeafCursor(com.bigdata.btree.SeekEnum)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newLeafCursor</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/BTree.LeafCursor.html" title="class in com.bigdata.btree">BTree.LeafCursor</a>&nbsp;newLeafCursor(<a href="../../../com/bigdata/btree/SeekEnum.html" title="enum in com.bigdata.btree">SeekEnum</a>&nbsp;where)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html#newLeafCursor(com.bigdata.btree.SeekEnum)">AbstractBTree</a></code></strong></div>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree. The cursor will be initially positioned on the leaf
 identified by the symbolic constant.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#newLeafCursor(com.bigdata.btree.SeekEnum)">newLeafCursor</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
</dl>
</li>
</ul>
<a name="newLeafCursor(byte[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>newLeafCursor</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/BTree.LeafCursor.html" title="class in com.bigdata.btree">BTree.LeafCursor</a>&nbsp;newLeafCursor(byte[]&nbsp;key)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html#newLeafCursor(byte[])">AbstractBTree</a></code></strong></div>
<div class="block">Return a cursor that may be used to efficiently locate and scan the
 leaves in the B+Tree. The cursor will be initially positioned on the leaf
 that spans the given <i>key</i>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/AbstractBTree.html#newLeafCursor(byte[])">newLeafCursor</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree">AbstractBTree</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key (required).</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BTree.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/btree/BloomFilterFactory.html" title="class in com.bigdata.btree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/btree/BTree.Counter.html" title="class in com.bigdata.btree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/btree/BTree.html" target="_top">Frames</a></li>
<li><a href="BTree.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
