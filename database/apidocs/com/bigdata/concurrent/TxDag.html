<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Thu Feb 25 05:02:56 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TxDag (Blazegraph Database Platform 2.0.1 API)</title>
<meta name="date" content="2016-02-25">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="TxDag (Blazegraph Database Platform 2.0.1 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TxDag.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/concurrent/TimeoutException.html" title="class in com.bigdata.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/concurrent/TxDag.Edge.html" title="class in com.bigdata.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/concurrent/TxDag.html" target="_top">Frames</a></li>
<li><a href="TxDag.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.concurrent</div>
<h2 title="Class TxDag" class="title">Class TxDag</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.concurrent.TxDag</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">TxDag</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>
 Directed Acyclic Graph (DAG) for detecting and preventing deadlocks in a
 concurrent programming system. The algorithm takes advantage of certain
 characteristics of the deadlock detection problem for concurrent transactions
 and provides a reasonable cost solution for that domain. The design uses a
 boolean matrix W to code the edges in the WAITS_FOR graph and an integer
 matrix M to code the the number of different paths between two vertices.
 Operations that insert one or more edges are atomic -- if a deadlock would
 result, then the state of the DAG is NOT changed (a deadlock is detected when
 there is a non-zero path count in the diagonal of W). The cost of the
 algorithm is less than <code>O(n^^2)</code> and is suitable for systems
 with a multi-programming level of 100s of concurrent transactions.
 </p>
 <p>
 This implementation is based on the online algorithm for deadlock detection
 in Section 5, page 86 of:
 <code>Bayer, R. 1976. Integrity, Concurrency, and Recovery in Databases. In
 Proceedings of the Proceedings of the 1st European Cooperation in informatics
 on ECI Conference 1976 (August 09 - 12, 1976). K. Samelson, Ed. Lecture Notes
 In Computer Science, vol. 44. Springer-Verlag, London, 79-106.
 </code>
 See the <a href="http://portal.acm.org/citation.cfm?id=647864.736638">
 citation </a> online.
 </p>
 <p>
 Given that <code>w</code> is the directed acyclic graph of
 <code>WAITS_FOR</code> relation among the concurrent transactions.
 <code>w+</code> is the transitive closure of <code>w</code>. The online
 algorithm solves the problem:
 </p>
 
 <pre>
 Given w, w+,              calculate
       w', w'+             where
       w' := w U {(ti,tj)} iff inserting an edge, or
       w' := w / {(ti,tj)} iff removing an edge.
 </pre>
 
 <p>
 The approach defines a matrix <code>M[ t, u ]</code> whose cells are the
 number of different paths from <code>t</code> to <code>u</code>. A
 deadlock is identified if the update algorithm for <code>M</code> computes
 a non-zero value for the diagonal.
 </p>
 <p>
 The update rules for M are as follows. "+/-" should be interpreted as "+" iff
 an edge is being added and "-" iff an edge is being removed. The "." operator
 is scalar multiplication.
 <ul>
 <li>M[s,v] := M[s,v] +/- M[s,t] . M[u,v]; s!=t; u!=v</li>
 <li>M[s,u] := M[s,u] +/- M[s,t]; s!=t</li>
 <li>M[t,v] := M[t,v] +/- M[u,v]; u!=v</li>
 <li>M[t,u] := M[t,u] +/- 1</li>
 </ul>
 Updates are made tentative using a secondary matrix, M2. The update is
 applied to M2. If a deadlock would result, then the original matrix is not
 modified. Otherwise the original matrix is replaced by M2.
 </p>
 <p>
 The public interface is defined in terms of arbitrary objects designated by
 the application as "transactions". The DAG is provisioned for a maximum
 multi-programming level, which is used to dimension the internal matrices.
 The choosen multi-programming level should correspond to the maximum multi-
 programming level permitted, i.e., to the #of concurrent transactions which
 may execute before subsequent requests for a new transaction are queued.
 Internally the "transaction" objects are mapped using their hash code onto
 pre-defined <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang"><code>Integer</code></a>s corresponding to indices in [0:n-1], where n is
 the provisioned multi-programming level.
 </p>
 <h4>Usage notes</h4>
 <p>
 This class is designed to be used internally by a class modeling a
 <a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent"><code>ResourceQueue</code></a>. Edges are added when a transaction must <em>wait</em>
 for a resource on one or more transactions in the granted group for that
 resource queue. Transactions are implicitly declared as they are referenced
 when adding edges. The general case is that there are N transactions in the
 granted group for some resource, so
 <a href="../../../com/bigdata/concurrent/TxDag.html#addEdges(java.lang.Object,%20java.lang.Object[])"><code>addEdges(Object blocked, Object[] running)</code></a> would be used to indicate
 that a transaction must wait on the granted group.
 </p>
 <p>
 A transaction in a granted group is guarenteed to be running and hence not
 waiting on any other transaction(s). When a transaction releases a lock, the
 <a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent"><code>ResourceQueue</code></a> automatically invokes
 <a href="../../../com/bigdata/concurrent/TxDag.html#removeEdges(java.lang.Object,%20boolean)"><code>removeEdges(Object tx, boolean waiting)</code></a> with
 <code>waiting == false</code> in order to remove all WAITS_FOR
 relationships whose target is that transaction. (The
 <a href="../../../com/bigdata/concurrent/TxDag.html#removeEdges(java.lang.Object,%20boolean)"><code>removeEdges(Object, boolean)</code></a> method is optimized for the case when
 it is known that a transaction is not waiting for any other transaction.)
 </p>
 <p>
 The integration layer MUST explicitly invoke
 <a href="../../../com/bigdata/concurrent/TxDag.html#removeEdges(java.lang.Object,%20boolean)"><code>removeEdges(Object, boolean)</code></a> whenever a transaction commits or
 aborts in order to remove all WAITS_FOR relationships involving that
 transaction. Failure to do this will result in false reporting of deadlocks
 since the transaction is still "on the books". The integration layer should
 specify <code>waiting == false</code> iff it knows that the transaction was
 NOT blocked. For example, a transaction which completes normally is never
 blocked. However, if a decision is made to abort a blocked transaction, e.g.,
 owing to a timeout or external directive, then the caller MUST specify
 <code>waiting == true</code> and a less efficient technique will be used to
 remove all edges involving the specificed transaction.
 </p></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.Edge.html" title="class in com.bigdata.concurrent">TxDag.Edge</a></strong></code>
<div class="block">A representation of an edge in the DAG used for export of information to
 the caller.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#cacheOrder">cacheOrder</a></strong></code>
<div class="block">This field controls whether or not the result of <a href="../../../com/bigdata/concurrent/TxDag.html#getOrder()"><code>getOrder()</code></a> is
 cached.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#DEBUG">DEBUG</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#INFO">INFO</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#log">log</a></strong></code>
<div class="block">Logger for this class.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#sortOrder">sortOrder</a></strong></code>
<div class="block">This field controls whether or not the result of <a href="../../../com/bigdata/concurrent/TxDag.html#getOrder()"><code>getOrder()</code></a> and
 <a href="../../../com/bigdata/concurrent/TxDag.html#getOrder(int,%20int)"><code>getOrder(int, int)</code></a> are sorted.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#sortOrderForDisplay">sortOrderForDisplay</a></strong></code>
<div class="block">This field controls whether or not the order[] is cloned and then sorted
 by <a href="../../../com/bigdata/concurrent/TxDag.html#toString()"><code>toString()</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#UNKNOWN">UNKNOWN</a></strong></code>
<div class="block">The constant used by <a href="../../../com/bigdata/concurrent/TxDag.html#lookup(java.lang.Object,%20boolean)"><code>lookup(Object, boolean)</code></a> to indicate that
 the named vertex was not found in the DAG (<code>-1</code>).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#TxDag(int)">TxDag</a></strong>(int&nbsp;capacity)</code>
<div class="block">Constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#addEdge(java.lang.Object,%20java.lang.Object)">addEdge</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
       <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;running)</code>
<div class="block">Add an edge to the DAG.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#addEdges(java.lang.Object,%20java.lang.Object[])">addEdges</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
        <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;running)</code>
<div class="block">Add a set of edges to the DAG.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#capacity()">capacity</a></strong>()</code>
<div class="block">The maximum multi-programming level supported (from the constructor).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/concurrent/TxDag.Edge.html" title="class in com.bigdata.concurrent">TxDag.Edge</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#getEdges(boolean)">getEdges</a></strong>(boolean&nbsp;closure)</code>
<div class="block">Return an array of the edges asserted for the graph.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#hasEdge(java.lang.Object,%20java.lang.Object)">hasEdge</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
       <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;running)</code>
<div class="block">Return <code>true</code> iff the described edge exists in the graph.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#isFull()">isFull</a></strong>()</code>
<div class="block">Return <code>true</code> iff adding another transaction would exceed
 the configured multi-programming capacity.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#releaseVertex(java.lang.Object)">releaseVertex</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;tx)</code>
<div class="block">Releases the vertex by (a) removing it from the <a href="../../../com/bigdata/concurrent/TxDag.html#mapping"><code>mapping</code></a> and (b)
 updating the list of available <a href="../../../com/bigdata/concurrent/TxDag.html#indices"><code>indices</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#removeEdge(java.lang.Object,%20java.lang.Object)">removeEdge</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;running)</code>
<div class="block">Removes an edge from the DAG.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#removeEdges(java.lang.Object,%20boolean)">removeEdges</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;tx,
           boolean&nbsp;waiting)</code>
<div class="block">Remove all edges whose target is <i>tx</i>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#size()">size</a></strong>()</code>
<div class="block">The current multi-programming level.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/TxDag.html#toString()">toString</a></strong>()</code>
<div class="block">Returns a representation of the state of the graph suitable for debugging
 the algorithm.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>protected static final&nbsp;org.apache.log4j.Logger log</pre>
<div class="block">Logger for this class.</div>
</li>
</ul>
<a name="INFO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INFO</h4>
<pre>protected static final&nbsp;boolean INFO</pre>
</li>
</ul>
<a name="DEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEBUG</h4>
<pre>protected static final&nbsp;boolean DEBUG</pre>
</li>
</ul>
<a name="sortOrder">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sortOrder</h4>
<pre>public static&nbsp;boolean sortOrder</pre>
<div class="block">This field controls whether or not the result of <a href="../../../com/bigdata/concurrent/TxDag.html#getOrder()"><code>getOrder()</code></a> and
 <a href="../../../com/bigdata/concurrent/TxDag.html#getOrder(int,%20int)"><code>getOrder(int, int)</code></a> are sorted. Sorting is not required for
 correctness, but sorting may make it easier to follow the behavior of the
 algorithm. The default is <code>false</code>.</div>
</li>
</ul>
<a name="sortOrderForDisplay">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sortOrderForDisplay</h4>
<pre>public static&nbsp;boolean sortOrderForDisplay</pre>
<div class="block">This field controls whether or not the order[] is cloned and then sorted
 by <a href="../../../com/bigdata/concurrent/TxDag.html#toString()"><code>toString()</code></a>.  The default is <code>true</code>.</div>
</li>
</ul>
<a name="cacheOrder">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cacheOrder</h4>
<pre>public static&nbsp;boolean cacheOrder</pre>
<div class="block">This field controls whether or not the result of <a href="../../../com/bigdata/concurrent/TxDag.html#getOrder()"><code>getOrder()</code></a> is
 cached. Caching is enabled by default but may be disabled for debugging.</div>
</li>
</ul>
<a name="UNKNOWN">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>UNKNOWN</h4>
<pre>public static final&nbsp;int UNKNOWN</pre>
<div class="block">The constant used by <a href="../../../com/bigdata/concurrent/TxDag.html#lookup(java.lang.Object,%20boolean)"><code>lookup(Object, boolean)</code></a> to indicate that
 the named vertex was not found in the DAG (<code>-1</code>).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.concurrent.TxDag.UNKNOWN">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TxDag(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TxDag</h4>
<pre>public&nbsp;TxDag(int&nbsp;capacity)</pre>
<div class="block">Constructor.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>capacity</code> - The multi-programming level. This is the maximum number of
            concurrent transactions permitted by the application.</dd><dd><code>IllegalArgumentException</code> - If <code>n &lt; 2 </code> (the minimum value for
            concurrency).</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="capacity()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>capacity</h4>
<pre>public&nbsp;int&nbsp;capacity()</pre>
<div class="block">The maximum multi-programming level supported (from the constructor).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The maximum vertex count.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/concurrent/TxDag.html#size()"><code>size()</code></a></dd></dl>
</li>
</ul>
<a name="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;int&nbsp;size()</pre>
<div class="block">The current multi-programming level. This is simply the #of distinct
 transactions in the WAITS_FOR relationship or alternatively the #of
 vertices in the DAG.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The vertex count.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/concurrent/TxDag.html#capacity()"><code>capacity()</code></a></dd></dl>
</li>
</ul>
<a name="isFull()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFull</h4>
<pre>public&nbsp;boolean&nbsp;isFull()</pre>
<div class="block">Return <code>true</code> iff adding another transaction would exceed
 the configured multi-programming capacity.</div>
</li>
</ul>
<a name="releaseVertex(java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseVertex</h4>
<pre>public&nbsp;boolean&nbsp;releaseVertex(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;tx)</pre>
<div class="block">Releases the vertex by (a) removing it from the <a href="../../../com/bigdata/concurrent/TxDag.html#mapping"><code>mapping</code></a> and (b)
 updating the list of available <a href="../../../com/bigdata/concurrent/TxDag.html#indices"><code>indices</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>true iff the vertex was known.
 
 FIXME Should it be an error if there is an edge remaining for that
 vertex? if we do not detect this condition then is is possible that
 uncleared edges will remainin in the WAITS_FOR graph and will interfere
 with reuse of the recycled index?</dd></dl>
</li>
</ul>
<a name="addEdge(java.lang.Object, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEdge</h4>
<pre>public&nbsp;void&nbsp;addEdge(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;running)
             throws <a href="../../../com/bigdata/concurrent/DeadlockException.html" title="class in com.bigdata.concurrent">DeadlockException</a></pre>
<div class="block">Add an edge to the DAG. The edge has the semantics
 <code> blocked -&gt; running[ i ]</code>, i.e., the <i>blocked </i>
 transaction <em>WAITS_FOR</em> the <i>running </i> transaction.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blocked</code> - A transaction. If the transaction is not already registered as
            a vertex of the graph, then it is implicitly declared by this
            method.  See <a href="../../../com/bigdata/concurrent/TxDag.html#lookup(java.lang.Object,%20boolean)"><code>lookup(Object, boolean)</code></a>.</dd><dd><code>running</code> - A different transaction. If the transaction is not already
            registered as a vertex of the graph, then it is implicitly
            declared by this method.  See <a href="../../../com/bigdata/concurrent/TxDag.html#lookup(java.lang.Object,%20boolean)"><code>lookup(Object, boolean)</code></a>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If either argument is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If the same transaction is specified for both arguments.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If the described edge already exists.</dd>
<dd><code><a href="../../../com/bigdata/concurrent/DeadlockException.html" title="class in com.bigdata.concurrent">DeadlockException</a></code> - If adding the edge to the DAG would result in a cycle. The
                state of the DAG is unchanged if this exception is thrown.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<div class="block">Returns a representation of the state of the graph suitable for debugging
 the algorithm.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="addEdges(java.lang.Object, java.lang.Object[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addEdges</h4>
<pre>public&nbsp;void&nbsp;addEdges(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>[]&nbsp;running)
              throws <a href="../../../com/bigdata/concurrent/DeadlockException.html" title="class in com.bigdata.concurrent">DeadlockException</a></pre>
<div class="block">Add a set of edges to the DAG. Each edge has the semantics
 <code> blocked -&gt; running[ i ]</code>, i.e., the <i>blocked </i>
 transaction <em>WAITS_FOR</em> the <i>running </i> transaction.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blocked</code> - A transaction that is blocked waiting on one or more
            transactions.</dd><dd><code>running</code> - One or more transactions in the granted group for some
            resource.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If either argument is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If any element of <i>running </i> is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If <code>blocked == running[ i]</code> for any element
                of <i>running </i>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If <code>running.length</code> is greater than the
                capacity of the DAG.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If creating the described edges would cause a duplicate
                edge to be asserted (either the edge already exists or it
                is defined more than once by the parameters).</dd>
<dd><code><a href="../../../com/bigdata/concurrent/DeadlockException.html" title="class in com.bigdata.concurrent">DeadlockException</a></code> - If adding the described edges to the DAG would result in a
                cycle. The state of the DAG is unchanged if this exception
                is thrown.</dd></dl>
</li>
</ul>
<a name="hasEdge(java.lang.Object, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasEdge</h4>
<pre>public&nbsp;boolean&nbsp;hasEdge(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;running)</pre>
<div class="block">Return <code>true</code> iff the described edge exists in the graph.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blocked</code> - A transaction.</dd><dd><code>running</code> - A different transaction.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true iff the edge exists.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If either argument is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If the same transaction is specified for both arguments.</dd></dl>
</li>
</ul>
<a name="getEdges(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEdges</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/concurrent/TxDag.Edge.html" title="class in com.bigdata.concurrent">TxDag.Edge</a>[]&nbsp;getEdges(boolean&nbsp;closure)</pre>
<div class="block">Return an array of the edges asserted for the graph. The length of the
 array is the #of in use transactions in the graph. Each element of the
 array represents a single edge. The state of the returned object is
 current as of the time that this method executes and is not maintained.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>Return the edges of the graph. The edges are not in any
         particular order.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/concurrent/TxDag.Edge.html" title="class in com.bigdata.concurrent"><code>TxDag.Edge</code></a></dd></dl>
</li>
</ul>
<a name="removeEdge(java.lang.Object, java.lang.Object)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeEdge</h4>
<pre>public&nbsp;void&nbsp;removeEdge(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;blocked,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;running)</pre>
<div class="block">Removes an edge from the DAG.
 <p>
 Note: This method does NOT does not recycle the vertex associated with a
 transaction which no longer has any incoming or outgoing edges. See
 <a href="../../../com/bigdata/concurrent/TxDag.html#removeEdges(java.lang.Object,%20boolean)"><code>removeEdges(Object, boolean)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>blocked</code> - A transaction which is currently waiting on <i>running </i>.</dd><dd><code>running</code> - Another transaction.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If either argument is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If the same transaction is specified for both arguments.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - If the described edge does not exist.</dd></dl>
</li>
</ul>
<a name="removeEdges(java.lang.Object, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>removeEdges</h4>
<pre>public&nbsp;void&nbsp;removeEdges(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;tx,
               boolean&nbsp;waiting)</pre>
<div class="block">Remove all edges whose target is <i>tx</i>. This method SHOULD be used
 when a running transaction completes (either aborts or commits). After
 calling this method, the transaction is removed completely from the DAG.
 Failure to use this method will result in the capacity of the DAG being
 consumed as vertices will not be recycled unless you call
 <a href="../../../com/bigdata/concurrent/TxDag.html#releaseVertex(java.lang.Object)"><code>releaseVertex(Object)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tx</code> - A transaction.</dd><dd><code>waiting</code> - When false, caller asserts that this transaction it is NOT
            waiting on any other transaction. This assertion is used to
            optimize the update of the path count matrix by simply
            removing the row and column associated with this transaction.
            When [waiting == true], a less efficient procedure is used to
            update the path count matrix.
            <p>
            Do NOT specify [waiting == false] unless you <em>know</em>
            that the transaction is NOT waiting. In general, this
            knowledge is available to the 2PL locking package.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TxDag.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/concurrent/TimeoutException.html" title="class in com.bigdata.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/concurrent/TxDag.Edge.html" title="class in com.bigdata.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/concurrent/TxDag.html" target="_top">Frames</a></li>
<li><a href="TxDag.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
