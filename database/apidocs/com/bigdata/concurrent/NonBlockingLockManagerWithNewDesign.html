<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Fri Apr 08 18:36:42 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>NonBlockingLockManagerWithNewDesign (Blazegraph Database Platform 2.1.0 API)</title>
<meta name="date" content="2016-04-08">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="NonBlockingLockManagerWithNewDesign (Blazegraph Database Platform 2.1.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NonBlockingLockManagerWithNewDesign.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/concurrent/NonBlockingLockManager.RunState.html" title="enum in com.bigdata.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.Counters.html" title="class in com.bigdata.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" target="_top">Frames</a></li>
<li><a href="NonBlockingLockManagerWithNewDesign.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.concurrent</div>
<h2 title="Class NonBlockingLockManagerWithNewDesign" class="title">Class NonBlockingLockManagerWithNewDesign&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.concurrent.NonBlockingLockManagerWithNewDesign&lt;R&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">NonBlockingLockManagerWithNewDesign&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;&gt;</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></pre>
<div class="block">This class coordinates a schedule among concurrent operations requiring
 exclusive access to shared resources. Whenever possible, the result is a
 concurrent schedule - that is, operations having non-overlapping lock
 requirements run concurrently while operations that have lock contentions are
 queued behind operations that currently have locks on the relevant resources.
 A <a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent"><code>ResourceQueue</code></a> is created for each resource and used to block
 operations that are awaiting a lock. When those locks become available,
 <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#ready(java.lang.Runnable)"><code>ready(Runnable)</code></a> will be invoked with the task.
 <p>
 The class will use an optional <a href="../../../com/bigdata/concurrent/TxDag.html" title="class in com.bigdata.concurrent"><code>WAITS_FOR</code></a> graph to detect
 deadlocks if locks are not being pre-declared (and hence deadlocks are
 possible).</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id: NonBlockingLockManagerWithNewDesign.java 4280 2011-03-08
          15:06:58Z thompsonbry $</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#ready(java.lang.Runnable)"><code>ready(Runnable)</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.Counters.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.Counters</a></strong></code>
<div class="block">Counters for the <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="class in com.bigdata.concurrent"><code>NonBlockingLockManagerWithNewDesign</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.LockFutureTask</a>&lt;<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="type parameter in NonBlockingLockManagerWithNewDesign.LockFutureTask">R</a> extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="type parameter in NonBlockingLockManagerWithNewDesign.LockFutureTask">R</a>&gt;,<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="type parameter in NonBlockingLockManagerWithNewDesign.LockFutureTask">T</a>&gt;</strong></code>
<div class="block"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true" title="class or interface in java.util.concurrent"><code>FutureTask</code></a> which executes once it holds its locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.ResourceQueue.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.ResourceQueue</a>&lt;<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.ResourceQueue.html" title="type parameter in NonBlockingLockManagerWithNewDesign.ResourceQueue">R</a> extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.ResourceQueue.html" title="type parameter in NonBlockingLockManagerWithNewDesign.ResourceQueue">R</a>&gt;,<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.ResourceQueue.html" title="type parameter in NonBlockingLockManagerWithNewDesign.ResourceQueue">T</a> extends <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.LockFutureTask</a>&lt;<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.ResourceQueue.html" title="type parameter in NonBlockingLockManagerWithNewDesign.ResourceQueue">R</a>,? extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&gt;</strong></code>
<div class="block">Unbounded queue of operations waiting to gain an exclusive lock on a
 resource.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.StatisticsTask.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.StatisticsTask</a></strong></code>
<div class="block">Class for tracking the average queue size of each <a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent"><code>ResourceQueue</code></a>
 and various other moving averages for the service as a whole.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#log">log</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.StatisticsTask.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.StatisticsTask</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#statisticsTask">statisticsTask</a></strong></code>
<div class="block">This <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> should be submitted to a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> in order to track the average queue size
 for each active <a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent"><code>ResourceQueue</code></a> and various moving averages
 pertaining to the lock service as a whole.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#NonBlockingLockManagerWithNewDesign(int,%20int,%20boolean)">NonBlockingLockManagerWithNewDesign</a></strong>(int&nbsp;maxConcurrency,
                                   int&nbsp;maxLockTries,
                                   boolean&nbsp;predeclareLocks)</code>
<div class="block">Create a lock manager.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#getCounters()">getCounters</a></strong>()</code>
<div class="block">Note: You MUST submit <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#statisticsTask"><code>statisticsTask</code></a> to a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> in order counter values which report
 moving averages to be maintained.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#getTaskWithLocks(R[])">getTaskWithLocks</a></strong>(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource)</code>
<div class="block">Return the task holding all of the specified locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#isLockHeldByTask(R,%20java.lang.Runnable)">isLockHeldByTask</a></strong>(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>&nbsp;lock,
                <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task)</code>
<div class="block">Return <code>true</code> if the lock is held by the task at the moment
 when it is inspected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#isOpen()">isOpen</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#isShutdown()">isShutdown</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#isTerminated()">isTerminated</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#ready(java.lang.Runnable)">ready</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task)</code>
<div class="block">Method invoked when a task is ready to execute holding any locks which it
 declared to <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#submit(R[],%20java.util.concurrent.Callable)"><code>submit(Comparable[], Callable)</code></a> or
 <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#submit(R[],%20java.lang.Runnable,%20T)"><code>submit(Comparable[], Runnable, Object)</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#releaseLocksForTask(R[])">releaseLocksForTask</a></strong>(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource)</code>
<div class="block">If there is a task holding ALL of the specified locks then its locks are
 released.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#shutdown()">shutdown</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#shutdownNow()">shutdownNow</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true" title="class or interface in java.util.concurrent">FutureTask</a>&lt;T&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#submit(R[],%20java.util.concurrent.Callable)">submit</a></strong>(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource,
      <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;T&gt;&nbsp;task)</code>
<div class="block">Submit a task for execution.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true" title="class or interface in java.util.concurrent">FutureTask</a>&lt;T&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#submit(R[],%20java.lang.Runnable,%20T)">submit</a></strong>(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource,
      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task,
      T&nbsp;val)</code>
<div class="block">Variant for a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> target.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>protected static final&nbsp;org.apache.log4j.Logger log</pre>
</li>
</ul>
<a name="statisticsTask">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>statisticsTask</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.StatisticsTask.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.StatisticsTask</a> statisticsTask</pre>
<div class="block">This <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> should be submitted to a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> in order to track the average queue size
 for each active <a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent"><code>ResourceQueue</code></a> and various moving averages
 pertaining to the lock service as a whole.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NonBlockingLockManagerWithNewDesign(int, int, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NonBlockingLockManagerWithNewDesign</h4>
<pre>public&nbsp;NonBlockingLockManagerWithNewDesign(int&nbsp;maxConcurrency,
                                   int&nbsp;maxLockTries,
                                   boolean&nbsp;predeclareLocks)</pre>
<div class="block">Create a lock manager. No concurrency limit imposed when
 <i>predeclareLocks</i> is <code>true</code> as deadlocks are
 impossible and we do not maintain a WAITS_FOR graph.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>maxConcurrency</code> - The maximum multi-programming level (ignored if
            <i>predeclareLocks</i> is <code>true</code>).</dd><dd><code>maxLockTries</code> - The maximum #of times that a task whose lock requests would
            produce a deadlock will be retried. Deadlock is typically
            transient but the potential for deadlock can vary depending on
            the application. Note that deadlock CAN NOT arise if you are
            predeclaring and sorting the lock requests.</dd><dd><code>predeclareLocks</code> - When <code>true</code>, operations MUST declare all locks
            before they begin to execute. This makes possible several
            efficiencies and by sorting the resources in each lock request
            into a common order we are able to avoid deadlocks entirely.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounters</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a>&nbsp;getCounters()</pre>
<div class="block">Note: You MUST submit <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#statisticsTask"><code>statisticsTask</code></a> to a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ScheduledExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ScheduledExecutorService</code></a> in order counter values which report
 moving averages to be maintained.
 <p>
 Note: A new instance is returned every time. This makes the pattern where
 the counters are "attached" to a hierarchy work since that has the
 side-effect of "detaching" them from the returned object.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="ready(java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ready</h4>
<pre>protected abstract&nbsp;void&nbsp;ready(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task)</pre>
<div class="block">Method invoked when a task is ready to execute holding any locks which it
 declared to <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#submit(R[],%20java.util.concurrent.Callable)"><code>submit(Comparable[], Callable)</code></a> or
 <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html#submit(R[],%20java.lang.Runnable,%20T)"><code>submit(Comparable[], Runnable, Object)</code></a>. The implementation will
 normally submit the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> to an <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executor.html?is-external=true" title="class or interface in java.util.concurrent"><code>Executor</code></a>. The
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> wraps the original task and the task will automatically
 release its locks when it is done executing.
 <p>
 Note: Implementations SHOULD NOT cause the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> to execute in
 the caller's thread. That will cause this service to block while the task
 is executing. The implementation can safely submit the task to a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor</code></a> whose work queue is a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html?is-external=true" title="class or interface in java.util.concurrent"><code>SynchronousQueue</code></a>
 as long as the the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor</code></a> has an unbounded pool size.
 Another option is to submit the task to a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor</code></a>
 whose work queue is unbounded queue, such as <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/LinkedBlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent"><code>LinkedBlockingQueue</code></a>
 when no queue capacity was specified. The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/SynchronousQueue.html?is-external=true" title="class or interface in java.util.concurrent"><code>SynchronousQueue</code></a> may be
 the better choice since the <a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent"><code>ResourceQueue</code></a>s already provide an
 unbounded queue and the actual concurrency of the delegate will be
 bounded by the #of distinct resources for which tasks are actively
 contending for locks. See the discussion on queues at
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>task</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent"><code>Callable</code></a> or <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> wrapped up as a
            <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="class in com.bigdata.concurrent"><code>NonBlockingLockManagerWithNewDesign.LockFutureTask</code></a>.</dd></dl>
</li>
</ul>
<a name="isOpen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOpen</h4>
<pre>public&nbsp;boolean&nbsp;isOpen()</pre>
</li>
</ul>
<a name="isShutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isShutdown</h4>
<pre>public&nbsp;boolean&nbsp;isShutdown()</pre>
</li>
</ul>
<a name="isTerminated()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTerminated</h4>
<pre>public&nbsp;boolean&nbsp;isTerminated()</pre>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
</li>
</ul>
<a name="shutdownNow()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdownNow</h4>
<pre>public&nbsp;void&nbsp;shutdownNow()</pre>
</li>
</ul>
<a name="submit(java.lang.Comparable[],java.util.concurrent.Callable)">
<!--   -->
</a><a name="submit(R[], java.util.concurrent.Callable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true" title="class or interface in java.util.concurrent">FutureTask</a>&lt;T&gt;&nbsp;submit(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;T&gt;&nbsp;task)</pre>
<div class="block">Submit a task for execution. The task will wait until it holds the
 declared locks. It will then execute. This method is non-blocking. The
 caller must use <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true#get()" title="class or interface in java.util.concurrent"><code>FutureTask.get()</code></a> to await the outcome.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - An array of resources whose locks are required to execute the
            <i>task</i>.</dd><dd><code>task</code> - The task to be executed.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>resource</i> is <code>null</code> or if any element
             of that array is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the <i>task</i> is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">RejectedExecutionException</a></code> - if the task can not be queued for execution (including if the
             service is not running or if a blocking queue was used and
             the queue is at capacity).</dd></dl>
</li>
</ul>
<a name="submit(java.lang.Comparable[],java.lang.Runnable,java.lang.Object)">
<!--   -->
</a><a name="submit(R[], java.lang.Runnable, T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true" title="class or interface in java.util.concurrent">FutureTask</a>&lt;T&gt;&nbsp;submit(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task,
                       T&nbsp;val)</pre>
<div class="block">Variant for a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> target.</div>
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>T</code> - The generic type of the value which will be returned by the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.</dd><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The declared locks.</dd><dd><code>task</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> target.</dd><dd><code>val</code> - The value to be returned by the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for that task.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>resource</i> is <code>null</code> or if any element
             of that array is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the <i>task</i> is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">RejectedExecutionException</a></code> - if the task can not be queued for execution (including if the
             service is not running or if a blocking queue was used and
             the queue is at capacity).</dd></dl>
</li>
</ul>
<a name="releaseLocksForTask(java.lang.Comparable[])">
<!--   -->
</a><a name="releaseLocksForTask(R[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseLocksForTask</h4>
<pre>public final&nbsp;void&nbsp;releaseLocksForTask(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource)</pre>
<div class="block">If there is a task holding ALL of the specified locks then its locks are
 released. This is intended to support workflows in which the task can
 release its locks before <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true#run()" title="class or interface in java.lang"><code>Runnable.run()</code></a> is finished.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource[]</code> - The declared locks for the task.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if there is no task which holds all the declared locks.</dd></dl>
</li>
</ul>
<a name="getTaskWithLocks(java.lang.Comparable[])">
<!--   -->
</a><a name="getTaskWithLocks(R[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaskWithLocks</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;getTaskWithLocks(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>[]&nbsp;resource)</pre>
<div class="block">Return the task holding all of the specified locks.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The locks.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The task -or- <code>null</code> iff there is no such task.</dd></dl>
</li>
</ul>
<a name="isLockHeldByTask(java.lang.Comparable,java.lang.Runnable)">
<!--   -->
</a><a name="isLockHeldByTask(R, java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isLockHeldByTask</h4>
<pre>public&nbsp;boolean&nbsp;isLockHeldByTask(<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="type parameter in NonBlockingLockManagerWithNewDesign">R</a>&nbsp;lock,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;task)</pre>
<div class="block">Return <code>true</code> if the lock is held by the task at the moment
 when it is inspected.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>lock</code> - The lock.</dd><dd><code>task</code> - The task.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the lock was held by that task.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NonBlockingLockManagerWithNewDesign.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/concurrent/NonBlockingLockManager.RunState.html" title="enum in com.bigdata.concurrent"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.Counters.html" title="class in com.bigdata.concurrent"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" target="_top">Frames</a></li>
<li><a href="NonBlockingLockManagerWithNewDesign.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
