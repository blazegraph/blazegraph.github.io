<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Thu Jan 21 00:33:55 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>com.bigdata.concurrent (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="com.bigdata.concurrent (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/cache/package-summary.html">Prev Package</a></li>
<li><a href="../../../com/bigdata/config/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/concurrent/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;com.bigdata.concurrent</h1>
<div class="docSummary">
<div class="block">

This package supports concurrency control using exclusive locks on resources.</div>
</div>
<p>See:&nbsp;<a href="#package_description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/LockCallable.html" title="interface in com.bigdata.concurrent">LockCallable</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>,T&gt;</td>
<td class="colLast">
<div class="block">Bundles the resources identifying the required locks with the task to be
 executed once it holds those locks.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/AbstractStressTestNonBlockingLockManager.html" title="class in com.bigdata.concurrent">AbstractStressTestNonBlockingLockManager</a></td>
<td class="colLast">
<div class="block">Suite of stress tests of the concurrency control mechanisms (without the
 database implementation) - See <a href="../../../com/bigdata/concurrent/NonBlockingLockManager.html" title="class in com.bigdata.concurrent"><code>NonBlockingLockManager</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/AbstractStressTestNonBlockingLockManager.Generate.html" title="class in com.bigdata.concurrent">AbstractStressTestNonBlockingLockManager.Generate</a></td>
<td class="colLast">
<div class="block">Generates an XML file that can be used to (re-)run the concurrency
 control tests.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/AbstractStressTestNonBlockingLockManager.TestOptions.html" title="class in com.bigdata.concurrent">AbstractStressTestNonBlockingLockManager.TestOptions</a></td>
<td class="colLast">
<div class="block">Options for
 <a href="../../../com/bigdata/concurrent/AbstractStressTestNonBlockingLockManager.html#doComparisonTest(java.util.Properties)"><code>AbstractStressTestNonBlockingLockManager.doComparisonTest(Properties)</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/AbstractStressTestNonBlockingLockManager.Wait10ResourceTask.html" title="class in com.bigdata.concurrent">AbstractStressTestNonBlockingLockManager.Wait10ResourceTask</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Waits 10ms once it acquires its locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/FutureTaskMon.html" title="class in com.bigdata.concurrent">FutureTaskMon</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">This is a flyweight utility class to be used as a direct replacement for
 FutureTask in code where we may need to be able to discover the root cancel
 request causing an interrupt.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/LockCallableImpl.html" title="class in com.bigdata.concurrent">LockCallableImpl</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>,T&gt;</td>
<td class="colLast">
<div class="block">Bundles the resources identifying the required locks with the task to be
 executed once it holds those locks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/LockManager.html" title="class in com.bigdata.concurrent">LockManager</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;&gt;</td>
<td class="colLast">Deprecated
<div class="block"><i>This implementation manages locks in terms of threads.</i></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/LockManagerTask.html" title="class in com.bigdata.concurrent">LockManagerTask</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;,T&gt;</td>
<td class="colLast">
<div class="block">Class encapsulates handshaking with the <a href="../../../com/bigdata/concurrent/LockManager.html" title="class in com.bigdata.concurrent"><code>LockManager</code></a> for an operation
 requiring exclusive access to one or more resources and that are willing to
 pre-declare their resource requirements.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NamedLock.html" title="class in com.bigdata.concurrent">NamedLock</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">A factory for named <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a>s.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NamedReadWriteLock.html" title="class in com.bigdata.concurrent">NamedReadWriteLock</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">A factory for named <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/ReadWriteLock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>ReadWriteLock</code></a>s.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NonBlockingLockManager.html" title="class in com.bigdata.concurrent">NonBlockingLockManager</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;&gt;</td>
<td class="colLast">
<div class="block">This class coordinates a schedule among concurrent operations requiring
 exclusive access to shared resources.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NonBlockingLockManager.Counters.html" title="class in com.bigdata.concurrent">NonBlockingLockManager.Counters</a></td>
<td class="colLast">
<div class="block">Counters for the <a href="../../../com/bigdata/concurrent/NonBlockingLockManager.html" title="class in com.bigdata.concurrent"><code>NonBlockingLockManager</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;&gt;</td>
<td class="colLast">
<div class="block">This class coordinates a schedule among concurrent operations requiring
 exclusive access to shared resources.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.Counters.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.Counters</a></td>
<td class="colLast">
<div class="block">Counters for the <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="class in com.bigdata.concurrent"><code>NonBlockingLockManagerWithNewDesign</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.LockFutureTask</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;,T&gt;</td>
<td class="colLast">
<div class="block"><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true" title="class or interface in java.util.concurrent"><code>FutureTask</code></a> which executes once it holds its locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.ResourceQueue.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.ResourceQueue</a>&lt;R extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;R&gt;,T extends <a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.LockFutureTask.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign.LockFutureTask</a>&lt;R,? extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&gt;</td>
<td class="colLast">
<div class="block">Unbounded queue of operations waiting to gain an exclusive lock on a
 resource.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/ResourceQueue.html" title="class in com.bigdata.concurrent">ResourceQueue</a>&lt;R,T&gt;</td>
<td class="colLast">
<div class="block">Unbounded queue of operations waiting to gain an exclusive lock on a
 resource.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/StressTestNonBlockingLockManagerWithPredeclaredLocks.html" title="class in com.bigdata.concurrent">StressTestNonBlockingLockManagerWithPredeclaredLocks</a></td>
<td class="colLast">
<div class="block">Stress tests where we predeclare locks and sort the lock requests.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/StressTestNonBlockingLockManagerWithTxDag.html" title="class in com.bigdata.concurrent">StressTestNonBlockingLockManagerWithTxDag</a></td>
<td class="colLast">
<div class="block">Stress tests where a <a href="../../../com/bigdata/concurrent/TxDag.html" title="class in com.bigdata.concurrent"><code>TxDag</code></a> is used to detect deadlock.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestAll.html" title="class in com.bigdata.concurrent">TestAll</a></td>
<td class="colLast">
<div class="block">Aggregates tests in dependency order.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestLockManager.html" title="class in com.bigdata.concurrent">TestLockManager</a></td>
<td class="colLast">
<div class="block">Suite of stress tests of the concurrency control mechanisms (without the
 database implementation) - See <a href="../../../com/bigdata/concurrent/LockManager.html" title="class in com.bigdata.concurrent"><code>LockManager</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestLockManager.Generate.html" title="class in com.bigdata.concurrent">TestLockManager.Generate</a></td>
<td class="colLast">
<div class="block">Generates an XML file that can be used to (re-)run the concurrency
 control tests.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestLockManager.TestOptions.html" title="class in com.bigdata.concurrent">TestLockManager.TestOptions</a></td>
<td class="colLast">
<div class="block">Options for <a href="../../../com/bigdata/concurrent/TestLockManager.html#doComparisonTest(java.util.Properties)"><code>TestLockManager.doComparisonTest(Properties)</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestLockManager.Wait10ResourceTask.html" title="class in com.bigdata.concurrent">TestLockManager.Wait10ResourceTask</a></td>
<td class="colLast">
<div class="block">Waits 10ms once it acquires its locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestNonBlockingLockManager.html" title="class in com.bigdata.concurrent">TestNonBlockingLockManager</a></td>
<td class="colLast">
<div class="block">basic unit tests.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestNonBlockingLockManager.Wait10ResourceTask.html" title="class in com.bigdata.concurrent">TestNonBlockingLockManager.Wait10ResourceTask</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Waits 10ms once it acquires its locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestNonBlockingLockManagerWithNewDesign.html" title="class in com.bigdata.concurrent">TestNonBlockingLockManagerWithNewDesign</a></td>
<td class="colLast">
<div class="block">basic unit tests.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestNonBlockingLockManagerWithNewDesign.Wait10ResourceTask.html" title="class in com.bigdata.concurrent">TestNonBlockingLockManagerWithNewDesign.Wait10ResourceTask</a>&lt;T&gt;</td>
<td class="colLast">
<div class="block">Waits 10ms once it acquires its locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TestTxDag.html" title="class in com.bigdata.concurrent">TestTxDag</a></td>
<td class="colLast">
<div class="block">Test suite for online transaction deadlock algorithm.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TxDag.html" title="class in com.bigdata.concurrent">TxDag</a></td>
<td class="colLast">
<div class="block">
 Directed Acyclic Graph (DAG) for detecting and preventing deadlocks in a
 concurrent programming system.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TxDag.Edge.html" title="class in com.bigdata.concurrent">TxDag.Edge</a></td>
<td class="colLast">
<div class="block">A representation of an edge in the DAG used for export of information to
 the caller.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Enum Summary table, listing enums, and an explanation">
<caption><span>Enum Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Enum</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/NonBlockingLockManager.RunState.html" title="enum in com.bigdata.concurrent">NonBlockingLockManager.RunState</a></td>
<td class="colLast">
<div class="block">Run states for the <a href="../../../com/bigdata/concurrent/NonBlockingLockManager.html" title="class in com.bigdata.concurrent"><code>NonBlockingLockManager</code></a>.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="packageSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/DeadlockException.html" title="class in com.bigdata.concurrent">DeadlockException</a></td>
<td class="colLast">
<div class="block">An instance of this exception is thrown when the lock requests of two or more
 transactions form a deadlock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/HorridTaskDeath.html" title="class in com.bigdata.concurrent">HorridTaskDeath</a></td>
<td class="colLast">
<div class="block">Thrown by some unit tests.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/MultiprogrammingCapacityExceededException.html" title="class in com.bigdata.concurrent">MultiprogrammingCapacityExceededException</a></td>
<td class="colLast">
<div class="block">Thrown if a request would exceed the configured multi-programming capacity of
 the <a href="../../../com/bigdata/concurrent/TxDag.html" title="class in com.bigdata.concurrent"><code>TxDag</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../com/bigdata/concurrent/TimeoutException.html" title="class in com.bigdata.concurrent">TimeoutException</a></td>
<td class="colLast">
<div class="block">An instance of this class is thrown when a lock could not be obtained within
 a specified timeout.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package_description">
<!--   -->
</a>
<h2 title="Package com.bigdata.concurrent Description">Package com.bigdata.concurrent Description</h2>
<div class="block"><p>

This package supports concurrency control using exclusive locks on resources.  The
use case for bigdata is during operations on unisolated named indices on a single
journal.  (Note that index partitions which are just modeled as named indices).
Exclusive locks are required for the unisolated indices since the B+Tree implementation
is NOT thread-safe for concurrent writers.  The concurrency control package provides a
"sufficiently" serialized schedule.  Operations that require access to the same unisolated
index are serialized while operations that require access to non-overlapping sets of
unisolated indices may run in parallel (depending on the #of available worker tasks).

</p>

<p>

bigdata offers two broad classes of operations: unisolated and isolated (transactional).  The 
unisolated API of the data service ensures that operations use only a single named index
(or index partition) at a time.  Coordination of distributed locks is not required making
this the unisolated API suiteable for scale-out "row stores".  Deadlock cycles are not
possible for unisolated tasks since they are required to pre-declare their locks.

</p>

<p>

A transaction may issue multiple requests against the data service API, and each request
MAY touch a different named index (or index partition).  However, due to the underlying
MVCC (multi-version concurrency control) scheme, a transaction never waits to read data
and proceeds without locking until it is "done" with its active phase.  When the "commit"
is requested the transaction MUST obtain an exclusive lock on each index (partition) that
it needs to (a) validate; and (b) make its writes durable.  This puts us in the envyable
position of being able to <strong>pre-declare</strong> the set of exclusive locks required
by the transaction commit.  In this situation we avoid deadlocks by the simple expediency
of sorting the lock requests into a total order by the resource (the index name).

</p>

<h4>Deadlock detection</h4>

<p>

Note: While <a href="../../../com/bigdata/concurrent/TxDag.html" title="class in com.bigdata.concurrent"><code>TxDag</code></a> provides the ability
to detect deadlocks, in the special case where locks are pre-declared,
simply sorting the lock requests made by each task is sufficient to
guarentee that deadlocks can not arise.  Thus, in practice deadlock
detection is NOT used by bigdata.

</p>

<p>

In general, concurrent schedules may result in deadlock. Deadlocks
must be identified and deadlocks must be resolved -- typically by
aborting or restarting one or more processes. 2PL defines a <em>growth
phase</em> in which locks are acquired and a <em>shrinking phase</em>
in which locks are released. The <em>locked point</em> is defined as
the moment after a transaction acquires its last lock and may be
identified retrospectively when a transaction begins to release
locks. A common strategy is for a thread to acquire locks
incrementally and then to release all locks at once when processing
completes (whether in success or failure). A thread
<strong>must</strong> eventually release its locks. 2PL is often used
in a database context in which resources coorrespond to persistent
records. However the technique may be applied to coordinating
concurrent access to arbitrary resources, including those not
associated with a persistence scheme. Other classes of concurrency
control techniques include timestamping (including multi-version
concurrency control or MVCC) and optimistic concurrency
control. Concurrency control can be broken down into read-write
synchronization conflicts and write-write synchronization conflicts,
and different concurrency control techniques can be applied to each
part of the problem. Concurrency control can also be defined in terms
of datatype specific operations with semantics other than read or
write -- this approach is used by some interesting optimistic
concurrency control designs.

</p>

<p>

<em>WAITS_FOR</em> is a binary relation whose source and target are
threads. The source is said to &quot;WAIT FOR&quot; the target.  The
relation is written either <code>source WAITS_FOR target</code> or
<code>WAITS_FOR( source, target )</code>. A <em>deadlock</em> is
defined as a cycle in the WAITS_FOR graph. The WAITS_FOR relationships
are maintained in a directed acyclic graph managed by the
<em>TxDag</em> class. The TxDag class supports atomic changes to the
WAITS_FOR graph and multiple edges may be added (or removed) at
once. When adding multiple edges, either all edges are added and no
cycle results or no edges are added and a deadlock is reported.

</p>

<p>

When a thread <code>t</code> must wait for a lock on a resource
<code>r</code>, <code>WAITS_FOR( t, g )</code> is asserted for each
thread <code>g</code> that is a member of the granted group for
<code>r</code>. If adding those edges would create a cycle then an
<em>DeadlockException</em> is thrown and the state of the WAITS_FOR
graph is not modified.

</p>

<p>

When a thread <code>t</code> releases a lock on a resource
<code>r</code>, the <code>t</code> is removed from the granted group
for that resource and <code>WAITS_FOR( t, p )</code> is retracted,
where <code>p</code> is a thread in the pending request queue for
<code>r</code>. Next the pending lock requests for that resource are
scanned using a fair schedule (which may be modified by a priority
escalation scheme). Pending lock requests which are now consistent
with the granted group are let in one at a time and the WAITS_FOR
graph is updated: (a) to retract <code>WAITS_FOR( t, g )</code>, where
<code>g</code> is a thread in the granted group for <code>r</code>;
and (b) to assert <code>WAIT_FOR( p, t )</code>, where <code>p</code>
is a thread in the pending request queue and <code>t</code> is the
thread whose lock request is being granted.

</p>

<p>

A special case exists when a thread is known to be running, e.g., when
a thread completes its processing (whether in success or
failure). Since a running thread is guarenteed not to be waiting on
any resource there will be no edges in the WAITS_FOR graph whose
<i>source</i> is the running thread. In this situation, an
optimization is used to update the WAITS_FOR graph. The application
signals this situation by specifying <code>waiting == false</code> to
the TxDag#removeEdges( Object tx, boolean waiting) method.

</p></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/cache/package-summary.html">Prev Package</a></li>
<li><a href="../../../com/bigdata/config/package-summary.html">Next Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/concurrent/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
