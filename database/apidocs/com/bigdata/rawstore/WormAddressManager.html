<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Jan 21 00:30:58 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WormAddressManager (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="WormAddressManager (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":9,"i3":10,"i4":10,"i5":9,"i6":10,"i7":10,"i8":10,"i9":10,"i10":9,"i11":10,"i12":10,"i13":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WormAddressManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/rawstore/TransientResourceMetadata.html" title="class in com.bigdata.rawstore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/rawstore/WormAddressManager.html" target="_top">Frames</a></li>
<li><a href="WormAddressManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rawstore</div>
<h2 title="Class WormAddressManager" class="title">Class WormAddressManager</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.rawstore.WormAddressManager</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../com/bigdata/btree/IndexSegmentAddressManager.html" title="class in com.bigdata.btree">IndexSegmentAddressManager</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">WormAddressManager</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></pre>
<div class="block">Encapsulates logic for operations on an opaque long integer comprising an
 byte offset and a byte count suitable for use in a WORM (Write Once, Read
 Many) <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>. Both the byte offset and the byte count of the
 record are stored directly in the opaque identifier. Note that the maximum
 byte offset only indirectly governs the maximum #of records that can be
 written on a store - the maximum #of records also depends on the actual
 lengths of the individual records that are written since the byte offset of
 the next record increases by the size of the last record written.
 <p>
 The constructor defines where the split is between the high and the low bits
 and therefore the maximum byte offset and the maximum byte count. This allows
 an <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> implementation to parameterize its handling of addresses
 to trade off the #of distinct offsets at which it can store records against
 the size of those records.
 <p>
 The offset is stored in the high bits of the long integer while the byte
 count is stored in the low bits. This means that two addresses encoded by an
 <a href="../../../com/bigdata/rawstore/WormAddressManager.html" title="class in com.bigdata.rawstore"><code>WormAddressManager</code></a> with the same split point can be placed into a
 total ordering by their offset without being decoded.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#Z:Z_NULL_">_NULL_</a></span></code>
<div class="block">Used to represent a null reference by <a href="../../../com/bigdata/rawstore/WormAddressManager.html#toString-long-"><code>toString(long)</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#MAX_OFFSET_BITS">MAX_OFFSET_BITS</a></span></code>
<div class="block">The maximum #of bits that may be used to encode an offset (this leaves 4
 bits for the byte count, so the maximum record size is only 16 bytes).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#MIN_OFFSET_BITS">MIN_OFFSET_BITS</a></span></code>
<div class="block">The minimum #of bits that may be used to encode an offset as an unsigned
 integer (31).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#SCALE_OUT_OFFSET_BITS">SCALE_OUT_OFFSET_BITS</a></span></code>
<div class="block">The #of offset bits that must be used in order to support 64M (67,108,864
 bytes) blobs (38).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#SCALE_UP_OFFSET_BITS">SCALE_UP_OFFSET_BITS</a></span></code>
<div class="block">The #of offset bits that allows byte offsets of up to 4,398,046,511,103
 (4 terabytes minus one) and a maximum record size of 4,194,303 (4
 megabytes minus one).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.com.bigdata.rawstore.IAddressManager">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></h3>
<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#NULL">NULL</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#WormAddressManager-int-">WormAddressManager</a></span>(int&nbsp;offsetBits)</code>
<div class="block">Construct an <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a> that will allocate a specified #of
 bits to the offset and use the remaining bits for the byte count
 component.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#assertByteCount-int-">assertByteCount</a></span>(int&nbsp;nbytes)</code>
<div class="block">Range check the byte count.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#assertOffset-long-">assertOffset</a></span>(long&nbsp;offset)</code>
<div class="block">Range check the byte offset.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>static boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#assertOffsetBits-int-">assertOffsetBits</a></span>(int&nbsp;offsetBits)</code>
<div class="block">Range checks the #of offset bits.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#getByteCount-long-">getByteCount</a></span>(long&nbsp;addr)</code>
<div class="block">The length of the datum in bytes.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#getMaxByteCount--">getMaxByteCount</a></span>()</code>
<div class="block">The maximum byte count that may be represented.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#getMaxByteCount-int-">getMaxByteCount</a></span>(int&nbsp;offsetBits)</code>
<div class="block">Compute the maximum byte count (aka record size) allowed for a given #of
 bits dedicated to the byte offset.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#getMaxOffset--">getMaxOffset</a></span>()</code>
<div class="block">The maximum byte offset that may be represented.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#getOffset-long-">getOffset</a></span>(long&nbsp;addr)</code>
<div class="block">Note: overridden by <a href="../../../com/bigdata/btree/IndexSegmentAddressManager.html" title="class in com.bigdata.btree"><code>IndexSegmentAddressManager</code></a>.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#getOffsetBits--">getOffsetBits</a></span>()</code>
<div class="block">Return the #of bits that are allocated to the offset.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#getPhysicalAddress-long-">getPhysicalAddress</a></span>(long&nbsp;addr)</code>
<div class="block">Determine the unencoded physical address</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>static void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#main-java.lang.String:A-">main</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</code>
<div class="block">Displays a table of offset bits and the corresponding maximum byte offset
 and maximum byte count (aka record size) that a store may address for a
 given #of offset bits.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#toAddr-int-long-">toAddr</a></span>(int&nbsp;nbytes,
      long&nbsp;offset)</code>
<div class="block">Converts a byte count and offset into a long integer.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#toString--">toString</a></span>()</code>
<div class="block">A human readable representation of the state of the
 <a href="../../../com/bigdata/rawstore/WormAddressManager.html" title="class in com.bigdata.rawstore"><code>WormAddressManager</code></a>.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rawstore/WormAddressManager.html#toString-long-">toString</a></span>(long&nbsp;addr)</code>
<div class="block">A human readable representation of the address.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="Z:Z_NULL_">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_NULL_</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> _NULL_</pre>
<div class="block">Used to represent a null reference by <a href="../../../com/bigdata/rawstore/WormAddressManager.html#toString-long-"><code>toString(long)</code></a>.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.rawstore.WormAddressManager._NULL_">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MIN_OFFSET_BITS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_OFFSET_BITS</h4>
<pre>public static final&nbsp;int MIN_OFFSET_BITS</pre>
<div class="block">The minimum #of bits that may be used to encode an offset as an unsigned
 integer (31). This value MUST be used when the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>
 implementation is backed by an in-memory array since an array index may
 not have more than 31 unsigned bits (the equivalent of 32 signed bits).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.rawstore.WormAddressManager.MIN_OFFSET_BITS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="MAX_OFFSET_BITS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_OFFSET_BITS</h4>
<pre>public static final&nbsp;int MAX_OFFSET_BITS</pre>
<div class="block">The maximum #of bits that may be used to encode an offset (this leaves 4
 bits for the byte count, so the maximum record size is only 16 bytes).
 This is not a useful record size for BTree data, but it might be useful
 for some custom data structures.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.rawstore.WormAddressManager.MAX_OFFSET_BITS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SCALE_UP_OFFSET_BITS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>SCALE_UP_OFFSET_BITS</h4>
<pre>public static final&nbsp;int SCALE_UP_OFFSET_BITS</pre>
<div class="block">The #of offset bits that allows byte offsets of up to 4,398,046,511,103
 (4 terabytes minus one) and a maximum record size of 4,194,303 (4
 megabytes minus one).
 <p>
 This is a good value when deploying a scale-up solution. For the scale-out
 deployment scenario you will have monolithic indices on a journal,
 providing effectively a WORM or "immortal" database. It is highly
 unlikely to have records as large as 4M with the modest branching factors
 used on a BTree backed by a Journal. At the same time, 4T is as much
 storage as we could reasonable expect to be able to address on a single
 file system.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.rawstore.WormAddressManager.SCALE_UP_OFFSET_BITS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="SCALE_OUT_OFFSET_BITS">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SCALE_OUT_OFFSET_BITS</h4>
<pre>public static final&nbsp;int SCALE_OUT_OFFSET_BITS</pre>
<div class="block">The #of offset bits that must be used in order to support 64M (67,108,864
 bytes) blobs (38).
 <p>
 This is a good value when deploying a scale-out solution. For the
 scale-out deployment scenario you will have key-range partitioned
 indices automatically distributed among data services available on a
 cluster. The journal files are never permitted to grow very large for
 scale-out deployments. Instead, the journal periodically overflows,
 generating index segments which capture historical views. The larger
 record size (64M) also supports the distributed repository and map/reduce
 processing models.</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../constant-values.html#com.bigdata.rawstore.WormAddressManager.SCALE_OUT_OFFSET_BITS">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="WormAddressManager-int-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>WormAddressManager</h4>
<pre>public&nbsp;WormAddressManager(int&nbsp;offsetBits)</pre>
<div class="block">Construct an <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a> that will allocate a specified #of
 bits to the offset and use the remaining bits for the byte count
 component.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offsetBits</code> - An integer defining how many bits will be used for the offset
            component and thereby determines the maximum #of records that
            may be stored. The remaining bits are used for the byte count,
            so this indirectly determines the maximum #of bytes that may
            be stored in a record.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getOffsetBits--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOffsetBits</h4>
<pre>public final&nbsp;int&nbsp;getOffsetBits()</pre>
<div class="block">Return the #of bits that are allocated to the offset.</div>
</li>
</ul>
<a name="getMaxOffset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxOffset</h4>
<pre>public final&nbsp;long&nbsp;getMaxOffset()</pre>
<div class="block">The maximum byte offset that may be represented.</div>
</li>
</ul>
<a name="getMaxByteCount--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxByteCount</h4>
<pre>public final&nbsp;int&nbsp;getMaxByteCount()</pre>
<div class="block">The maximum byte count that may be represented.</div>
</li>
</ul>
<a name="assertOffsetBits-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertOffsetBits</h4>
<pre>public static final&nbsp;boolean&nbsp;assertOffsetBits(int&nbsp;offsetBits)</pre>
<div class="block">Range checks the #of offset bits.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offsetBits</code> - The #of offset bits.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the parameter is out of range.</dd>
</dl>
</li>
</ul>
<a name="getMaxByteCount-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxByteCount</h4>
<pre>public static final&nbsp;int&nbsp;getMaxByteCount(int&nbsp;offsetBits)</pre>
<div class="block">Compute the maximum byte count (aka record size) allowed for a given #of
 bits dedicated to the byte offset.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offsetBits</code> - The #of bits to be used to represent the byte offset.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The maximum byte count that can be represented.</dd>
</dl>
</li>
</ul>
<a name="assertByteCount-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertByteCount</h4>
<pre>public final&nbsp;boolean&nbsp;assertByteCount(int&nbsp;nbytes)</pre>
<div class="block">Range check the byte count.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nbytes</code> - The byte count.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the byte count is out of range.</dd>
</dl>
</li>
</ul>
<a name="assertOffset-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertOffset</h4>
<pre>public final&nbsp;boolean&nbsp;assertOffset(long&nbsp;offset)</pre>
<div class="block">Range check the byte offset.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offset</code> - The byte offset.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>true otherwise.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the offset is out of range.</dd>
</dl>
</li>
</ul>
<a name="toAddr-int-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toAddr</h4>
<pre>public final&nbsp;long&nbsp;toAddr(int&nbsp;nbytes,
                         long&nbsp;offset)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toAddr-int-long-">IAddressManager</a></code></span></div>
<div class="block">Converts a byte count and offset into a long integer.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toAddr-int-long-">toAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>nbytes</code> - The byte count.</dd>
<dd><code>offset</code> - The byte offset.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The long integer.</dd>
</dl>
</li>
</ul>
<a name="getByteCount-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getByteCount</h4>
<pre>public final&nbsp;int&nbsp;getByteCount(long&nbsp;addr)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getByteCount-long-">IAddressManager</a></code></span></div>
<div class="block">The length of the datum in bytes. This must be the actual length of the
 record on the disk, not the length of the caller's byte[]. This is
 necessary in order to support transparent checksums and/or compression
 for records in the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getByteCount-long-">getByteCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addr</code> - The opaque identifier that is the within store locator for
            some datum.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The offset of that datum.</dd>
</dl>
</li>
</ul>
<a name="getOffset-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOffset</h4>
<pre>public&nbsp;long&nbsp;getOffset(long&nbsp;addr)</pre>
<div class="block">Note: overridden by <a href="../../../com/bigdata/btree/IndexSegmentAddressManager.html" title="class in com.bigdata.btree"><code>IndexSegmentAddressManager</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getOffset-long-">getOffset</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addr</code> - The opaque identifier that is the within store locator for
            some datum.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The offset of that datum.</dd>
</dl>
</li>
</ul>
<a name="getPhysicalAddress-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalAddress</h4>
<pre>public&nbsp;long&nbsp;getPhysicalAddress(long&nbsp;addr)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getPhysicalAddress-long-">IAddressManager</a></code></span></div>
<div class="block">Determine the unencoded physical address</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getPhysicalAddress-long-">getPhysicalAddress</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addr</code> - The encoded address</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>an unencoded address offset</dd>
</dl>
</li>
</ul>
<a name="toString-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString(long&nbsp;addr)</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toString-long-">IAddressManager</a></code></span></div>
<div class="block">A human readable representation of the address.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toString-long-">toString</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addr</code> - The opaque identifier that is the within store locator for
            some datum.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>A human readable representation.</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<div class="block">A human readable representation of the state of the
 <a href="../../../com/bigdata/rawstore/WormAddressManager.html" title="class in com.bigdata.rawstore"><code>WormAddressManager</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="main-java.lang.String:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>main</h4>
<pre>public static&nbsp;void&nbsp;main(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>[]&nbsp;args)</pre>
<div class="block">Displays a table of offset bits and the corresponding maximum byte offset
 and maximum byte count (aka record size) that a store may address for a
 given #of offset bits. This table may be used to choose how to
 parameterize the <a href="../../../com/bigdata/rawstore/WormAddressManager.html" title="class in com.bigdata.rawstore"><code>WormAddressManager</code></a> and hence a <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>
 using that <a href="../../../com/bigdata/rawstore/WormAddressManager.html" title="class in com.bigdata.rawstore"><code>WormAddressManager</code></a> so as to best leverage the 64-bit long
 integer as a persistent locator into the store.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>args</code> - unused.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WormAddressManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/rawstore/TransientResourceMetadata.html" title="class in com.bigdata.rawstore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/rawstore/WormAddressManager.html" target="_top">Frames</a></li>
<li><a href="WormAddressManager.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
