<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Jan 21 00:31:00 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TokenBuffer (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TokenBuffer (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TokenBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/search/TextIndexWriteProc.IndexWriteProcConstructor.html" title="class in com.bigdata.search"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/search/TokenBuffer.html" target="_top">Frames</a></li>
<li><a href="TokenBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.search</div>
<h2 title="Class TokenBuffer" class="title">Class TokenBuffer&lt;V extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;V&gt;&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.search.TokenBuffer&lt;V&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt><span class="paramLabel">Type Parameters:</span></dt>
<dd><code>V</code> - The generic type of the document identifier.</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">TokenBuffer&lt;V extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;V&gt;&gt;</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block">A buffer holding tokens extracted from one or more documents / fields.
 Each entry in the buffer corresponds to the <a href="../../../com/bigdata/search/TermFrequencyData.html" title="class in com.bigdata.search"><code>TermFrequencyData</code></a>
 extracted from a field of some document. When the buffer overflows it is
 <a href="../../../com/bigdata/search/TokenBuffer.html#flush--"><code>flush()</code></a>, writing on the indices.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#TokenBuffer-int-com.bigdata.search.FullTextIndex-">TokenBuffer</a></span>(int&nbsp;capacity,
           <a href="../../../com/bigdata/search/FullTextIndex.html" title="class in com.bigdata.search">FullTextIndex</a>&lt;<a href="../../../com/bigdata/search/TokenBuffer.html" title="type parameter in TokenBuffer">V</a>&gt;&nbsp;textIndexer)</code>
<div class="block">Ctor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#add-V-int-java.lang.String-">add</a></span>(<a href="../../../com/bigdata/search/TokenBuffer.html" title="type parameter in TokenBuffer">V</a>&nbsp;docId,
   int&nbsp;fieldId,
   <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;token)</code>
<div class="block">Adds another token to the current field of the current document.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#deleteFromIndex-int-byte:A:A-byte:A:A-">deleteFromIndex</a></span>(int&nbsp;n,
               byte[][]&nbsp;keys,
               byte[][]&nbsp;vals)</code>
<div class="block">Writes on the index.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#flush--">flush</a></span>()</code>
<div class="block">Write any buffered data on the indices.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/search/TermFrequencyData.html" title="class in com.bigdata.search">TermFrequencyData</a>&lt;<a href="../../../com/bigdata/search/TokenBuffer.html" title="type parameter in TokenBuffer">V</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#get-int-">get</a></span>(int&nbsp;index)</code>
<div class="block">Return the <a href="../../../com/bigdata/search/TermFrequencyData.html" title="class in com.bigdata.search"><code>TermFrequencyData</code></a> for the specified index.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#reset--">reset</a></span>()</code>
<div class="block">Discards all data in the buffer and resets it to a clean state.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#size--">size</a></span>()</code>
<div class="block">The #of entries in the buffer.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/search/TokenBuffer.html#writeOnIndex-int-byte:A:A-byte:A:A-">writeOnIndex</a></span>(int&nbsp;n,
            byte[][]&nbsp;keys,
            byte[][]&nbsp;vals)</code>
<div class="block">Writes on the index.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TokenBuffer-int-com.bigdata.search.FullTextIndex-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TokenBuffer</h4>
<pre>public&nbsp;TokenBuffer(int&nbsp;capacity,
                   <a href="../../../com/bigdata/search/FullTextIndex.html" title="class in com.bigdata.search">FullTextIndex</a>&lt;<a href="../../../com/bigdata/search/TokenBuffer.html" title="type parameter in TokenBuffer">V</a>&gt;&nbsp;textIndexer)</pre>
<div class="block">Ctor.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>capacity</code> - The #of distinct {document,field} tuples that can be held in
            the buffer before it will overflow. The buffer will NOT
            overflow until you exceed this capacity.</dd>
<dd><code>textIndexer</code> - The object on which the buffer will write when it overflows or
            is <a href="../../../com/bigdata/search/TokenBuffer.html#flush--"><code>flush()</code></a>ed.</dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="reset--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reset</h4>
<pre>public&nbsp;void&nbsp;reset()</pre>
<div class="block">Discards all data in the buffer and resets it to a clean state.</div>
</li>
</ul>
<a name="size--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;int&nbsp;size()</pre>
<div class="block">The #of entries in the buffer.</div>
</li>
</ul>
<a name="get-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/search/TermFrequencyData.html" title="class in com.bigdata.search">TermFrequencyData</a>&lt;<a href="../../../com/bigdata/search/TokenBuffer.html" title="type parameter in TokenBuffer">V</a>&gt;&nbsp;get(int&nbsp;index)</pre>
<div class="block">Return the <a href="../../../com/bigdata/search/TermFrequencyData.html" title="class in com.bigdata.search"><code>TermFrequencyData</code></a> for the specified index.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>index</code> - The index in [0:<i>count</i>).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The <a href="../../../com/bigdata/search/TermFrequencyData.html" title="class in com.bigdata.search"><code>TermFrequencyData</code></a> at that index.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IndexOutOfBoundsException.html?is-external=true" title="class or interface in java.lang">IndexOutOfBoundsException</a></code></dd>
</dl>
</li>
</ul>
<a name="add-java.lang.Comparable-int-java.lang.String-">
<!--   -->
</a><a name="add-V-int-java.lang.String-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>add</h4>
<pre>public&nbsp;void&nbsp;add(<a href="../../../com/bigdata/search/TokenBuffer.html" title="type parameter in TokenBuffer">V</a>&nbsp;docId,
                int&nbsp;fieldId,
                <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;token)</pre>
<div class="block">Adds another token to the current field of the current document. If
 either the field or the document identifier changes, then begins a
 new field and possibly a new document. If the buffer is full then it
 will be <a href="../../../com/bigdata/search/TokenBuffer.html#flush--"><code>flush()</code></a>ed before beginning a new field.
 <p>
 Note: This method is NOT thread-safe.
 <p>
 Note: There is an assumption that the caller will process all tokens
 for a given field in the same document at once. Failure to do this
 will lead to only part of the term-frequency distribution for the
 field being captured by the indices.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>docId</code> - The document identifier.</dd>
<dd><code>fieldId</code> - The field identifier.</dd>
<dd><code>token</code> - The token.</dd>
</dl>
</li>
</ul>
<a name="flush--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>flush</h4>
<pre>public&nbsp;void&nbsp;flush()</pre>
<div class="block">Write any buffered data on the indices.
 <p>
 Note: The writes on the terms index are scattered since the key for the
 index is {term, docId, fieldId}. This method will batch up and then apply
 a set of updates, but the total operation is not atomic. Therefore search
 results which are concurrent with indexing may not have access to the
 full data for concurrently indexed documents. This issue may be resolved
 by allowing the indexer to write ahead and using a historical commit time
 for the search.
 <p>
 Note: If a document is pre-existing, then the existing data for that
 document MUST be removed unless you know that the fields to be found in
 the will not have changed (they may have different contents, but the same
 fields exist in the old and new versions of the document).</div>
</li>
</ul>
<a name="writeOnIndex-int-byte:A:A-byte:A:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeOnIndex</h4>
<pre>protected&nbsp;long&nbsp;writeOnIndex(int&nbsp;n,
                            byte[][]&nbsp;keys,
                            byte[][]&nbsp;vals)</pre>
<div class="block">Writes on the index.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - </dd>
<dd><code>keys</code> - </dd>
<dd><code>vals</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The #of pre-existing records that were updated.</dd>
</dl>
</li>
</ul>
<a name="deleteFromIndex-int-byte:A:A-byte:A:A-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>deleteFromIndex</h4>
<pre>protected&nbsp;long&nbsp;deleteFromIndex(int&nbsp;n,
                               byte[][]&nbsp;keys,
                               byte[][]&nbsp;vals)</pre>
<div class="block">Writes on the index.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>n</code> - </dd>
<dd><code>keys</code> - </dd>
<dd><code>vals</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The #of pre-existing records that were updated.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TokenBuffer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/search/TextIndexWriteProc.IndexWriteProcConstructor.html" title="class in com.bigdata.search"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li>Next&nbsp;Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/search/TokenBuffer.html" target="_top">Frames</a></li>
<li><a href="TokenBuffer.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
