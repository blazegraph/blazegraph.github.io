<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Mon Mar 18 18:55:28 UTC 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>NodeSerializer (Blazegraph Database Platform 2.1.5 API)</title>
<meta name="date" content="2019-03-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="NodeSerializer (Blazegraph Database Platform 2.1.5 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NodeSerializer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/htree/MutableDirectoryPageData.html" title="class in com.bigdata.htree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/htree/ShowHTreeResourceUsage.html" title="class in com.bigdata.htree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/htree/NodeSerializer.html" target="_top">Frames</a></li>
<li><a href="NodeSerializer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.htree</div>
<h2 title="Class NodeSerializer" class="title">Class NodeSerializer</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.htree.NodeSerializer</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<hr>
<br>
<pre>public class <span class="strong">NodeSerializer</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></pre>
<div class="block"><p>
 An instance of this class is used to serialize and de-serialize the
 <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a>s and <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a>s of an <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>. Leaf
 and non-leaf records have different serialization formats, but their leading
 bytes use the same format so that you can tell by inspection whether a buffer
 contains a leaf or a non-leaf node. The header of the record uses a fixed
 length format so that some fields can be tested without full
 de-serialization, especially whether the record contains a leaf vs a node.
 This fixed record also makes it possible to update some fields in the header
 once the entire record has been serialized, including the checksum, the #of
 bytes in the serialized record, and the prior/next addresses for leaves.
 </p>
 <p>
 The methods defined by this class all work with <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s. On read,
 the buffer must be positioned to the start of the data to be read. After a
 read, the buffer will be positioned to the first byte after the data read. If
 there is insufficient data available in the buffer then an
 <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/BufferUnderflowException.html?is-external=true" title="class or interface in java.nio"><code>BufferUnderflowException</code></a> will be thrown. On write, the data will be
 written on an internal buffer whose size is automatically extended. The write
 buffer is reused for each write and quickly achieves a maximum size for any
 given <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>.
 </p>
 <p>
 Note: while the <a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree"><code>NodeSerializer</code></a> is NOT thread-safe for writers, it is
 thread-safe for readers. This design mirrors the concurrency capabilities of
 the <a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>.
 </p></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id: NodeSerializer.java 3305 2010-07-27 15:08:28Z thompsonbry $</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/AbstractBTree.html" title="class in com.bigdata.btree"><code>AbstractBTree</code></a>, 
<a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a>, 
<a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data"><code>IAbstractNodeData</code></a>, 
<a href="../../../com/bigdata/btree/data/IAbstractNodeDataCoder.html" title="interface in com.bigdata.btree.data"><code>IAbstractNodeDataCoder</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#DEFAULT_BUFFER_CAPACITY_PER_ENTRY">DEFAULT_BUFFER_CAPACITY_PER_ENTRY</a></strong></code>
<div class="block">The default initial capacity multiplier for the (de-)serialization buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/htree/INodeFactory.html" title="interface in com.bigdata.htree">INodeFactory</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#nodeFactory">nodeFactory</a></strong></code>
<div class="block">An object that knows how to construct <code>DirectoryPage</code>s and
 <code>BucketPage</code>s from <a href="../../../com/bigdata/htree/data/IDirectoryData.html" title="interface in com.bigdata.htree.data"><code>IDirectoryData</code></a> and <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a>
 objects.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#NodeSerializer(com.bigdata.rawstore.IAddressManager,%20com.bigdata.htree.INodeFactory,%20int,%20int,%20com.bigdata.btree.IndexMetadata,%20boolean,%20com.bigdata.io.compression.IRecordCompressorFactory)">NodeSerializer</a></strong>(<a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a>&nbsp;addressManager,
              <a href="../../../com/bigdata/htree/INodeFactory.html" title="interface in com.bigdata.htree">INodeFactory</a>&nbsp;nodeFactory,
              int&nbsp;addressBits,
              int&nbsp;initialBufferCapacity,
              <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;indexMetadata,
              boolean&nbsp;readOnly,
              <a href="../../../com/bigdata/io/compression/IRecordCompressorFactory.html" title="interface in com.bigdata.io.compression">IRecordCompressorFactory</a>&lt;?&gt;&nbsp;recordCompressorFactory)</code>
<div class="block">Designated constructor.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#close()">close</a></strong>()</code>
<div class="block">Releases any buffers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#decode(java.nio.ByteBuffer)">decode</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</code>
<div class="block">Decode an <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a> or <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a> record, wrapping the
 underlying data record (thread-safe).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/io/AbstractFixedByteArrayBuffer.html" title="class in com.bigdata.io">AbstractFixedByteArrayBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#encode(com.bigdata.btree.data.IAbstractNodeData)">encode</a></strong>(<a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a>&nbsp;node)</code>
<div class="block"><strong>Deprecated.</strong>&nbsp;
<div class="block"><i>This method is no longer used since I refactored the
             <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree"><code>IndexSegmentBuilder</code></a> to optionally stuff the generated
             nodes and leaves into the cache. It still works but it might
             go away in the future.</i></div>
</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&lt;T extends <a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a>&gt;&nbsp;<br>T</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#encodeLive(T)">encodeLive</a></strong>(T&nbsp;node)</code>
<div class="block">Encode a node or leaf and return a coded instance of the persistent data
 for that node or leaf backed by an exact fit byte[] (NOT thread-safe).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#updateLeaf(java.nio.ByteBuffer,%20long,%20long)">updateLeaf</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b,
          long&nbsp;priorAddr,
          long&nbsp;nextAddr)</code>
<div class="block">Update the serialization of a leaf to set the prior and next leaf
 references and change its serialization type from <code>#TYPE_LEAF</code> to
 <code>#TYPE_LINKED_LEAF</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>com.bigdata.htree.AbstractPage</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/NodeSerializer.html#wrap(com.bigdata.htree.AbstractHTree,%20long,%20com.bigdata.btree.data.IAbstractNodeData)">wrap</a></strong>(<a href="../../../com/bigdata/htree/AbstractHTree.html" title="class in com.bigdata.htree">AbstractHTree</a>&nbsp;btree,
    long&nbsp;addr,
    <a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a>&nbsp;data)</code>
<div class="block">Wrap an <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a> or <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a> instance as a <code>DirectoryPage</code>
 or a <code>BucketPage</code>.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="nodeFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nodeFactory</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/htree/INodeFactory.html" title="interface in com.bigdata.htree">INodeFactory</a> nodeFactory</pre>
<div class="block">An object that knows how to construct <code>DirectoryPage</code>s and
 <code>BucketPage</code>s from <a href="../../../com/bigdata/htree/data/IDirectoryData.html" title="interface in com.bigdata.htree.data"><code>IDirectoryData</code></a> and <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a>
 objects.</div>
</li>
</ul>
<a name="DEFAULT_BUFFER_CAPACITY_PER_ENTRY">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>DEFAULT_BUFFER_CAPACITY_PER_ENTRY</h4>
<pre>public static final transient&nbsp;int DEFAULT_BUFFER_CAPACITY_PER_ENTRY</pre>
<div class="block">The default initial capacity multiplier for the (de-)serialization buffer.
 The total initial buffer capacity is this value times the
 effective branching factor, which is computed from the addressBits
 constructor parameter.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.NodeSerializer.DEFAULT_BUFFER_CAPACITY_PER_ENTRY">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="NodeSerializer(com.bigdata.rawstore.IAddressManager, com.bigdata.htree.INodeFactory, int, int, com.bigdata.btree.IndexMetadata, boolean, com.bigdata.io.compression.IRecordCompressorFactory)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NodeSerializer</h4>
<pre>public&nbsp;NodeSerializer(<a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a>&nbsp;addressManager,
              <a href="../../../com/bigdata/htree/INodeFactory.html" title="interface in com.bigdata.htree">INodeFactory</a>&nbsp;nodeFactory,
              int&nbsp;addressBits,
              int&nbsp;initialBufferCapacity,
              <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree">IndexMetadata</a>&nbsp;indexMetadata,
              boolean&nbsp;readOnly,
              <a href="../../../com/bigdata/io/compression/IRecordCompressorFactory.html" title="interface in com.bigdata.io.compression">IRecordCompressorFactory</a>&lt;?&gt;&nbsp;recordCompressorFactory)</pre>
<div class="block">Designated constructor.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>nodeFactory</code> - An object that knows how to construct <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a>s and
            <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>leaves</code></a>.</dd><dd><code>addressBits</code> - The #of address bits for target <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>.</dd><dd><code>initialBufferCapacity</code> - The initial capacity for internal buffer used to serialize
            nodes and leaves. The buffer will be resized as necessary
            until it is sufficient for the records being serialized for
            the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>. When zero (0), a default is used. A
            non-zero value is worth specifying only when the actual buffer
            size is consistently less than the default for some
            <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>. See <a href="../../../com/bigdata/htree/NodeSerializer.html#DEFAULT_BUFFER_CAPACITY_PER_ENTRY"><code>DEFAULT_BUFFER_CAPACITY_PER_ENTRY</code></a></dd><dd><code>indexMetadata</code> - The <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> record for the index.</dd><dd><code>readOnly</code> - <code>true</code> IFF the caller is asserting that they WILL
            NOT attempt to serialize any nodes or leaves using this
            <a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree"><code>NodeSerializer</code></a> instance.
 
            FIXME <a href="../../../com/bigdata/io/compression/IRecordCompressorFactory.html" title="interface in com.bigdata.io.compression"><code>IRecordCompressorFactory</code></a> should either be used
            here or moved into the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> impl.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Releases any buffers. They will be automatically reallocated if the
 <a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree"><code>NodeSerializer</code></a> is used again.</div>
</li>
</ul>
<a name="decode(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decode</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a>&nbsp;decode(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;buf)</pre>
<div class="block">Decode an <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a> or <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a> record, wrapping the
 underlying data record (thread-safe). The decision to decode as an
 <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a> or <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a> instance is made based on
 inspection of the first byte byte in the supplied buffer, which codes for
 a node, leaf, or linked-leaf.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - The data record.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a> or <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a> instance for that data
         record.
 
         FIXME modify to accept <a href="../../../com/bigdata/io/IDataRecord.html" title="interface in com.bigdata.io"><code>IDataRecord</code></a> rather than
         <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>.</dd></dl>
</li>
</ul>
<a name="wrap(com.bigdata.htree.AbstractHTree, long, com.bigdata.btree.data.IAbstractNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>wrap</h4>
<pre>public&nbsp;com.bigdata.htree.AbstractPage&nbsp;wrap(<a href="../../../com/bigdata/htree/AbstractHTree.html" title="class in com.bigdata.htree">AbstractHTree</a>&nbsp;btree,
                                  long&nbsp;addr,
                                  <a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a>&nbsp;data)</pre>
<div class="block">Wrap an <a href="../../../com/bigdata/btree/data/INodeData.html" title="interface in com.bigdata.btree.data"><code>INodeData</code></a> or <a href="../../../com/bigdata/btree/data/ILeafData.html" title="interface in com.bigdata.btree.data"><code>ILeafData</code></a> instance as a <code>DirectoryPage</code>
 or a <code>BucketPage</code>. This DOES NOT set the parent of the new <code>DirectoryPage</code>
 or <code>BucketPage</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>btree</code> - The owning B+Tree.</dd><dd><code>addr</code> - The address of the data record in the backing store.</dd><dd><code>data</code> - The data record.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The node or leaf.</dd></dl>
</li>
</ul>
<a name="encodeLive(com.bigdata.btree.data.IAbstractNodeData)">
<!--   -->
</a><a name="encodeLive(T)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encodeLive</h4>
<pre>public&nbsp;&lt;T extends <a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a>&gt;&nbsp;T&nbsp;encodeLive(T&nbsp;node)</pre>
<div class="block">Encode a node or leaf and return a coded instance of the persistent data
 for that node or leaf backed by an exact fit byte[] (NOT thread-safe).
 The operation writes on an internal buffer which is automatically
 extended as required.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The node or leaf.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The buffer containing the coded data record for the node or leaf
         in an exact fit byte[] owned by the coded node or leaf.</dd></dl>
</li>
</ul>
<a name="encode(com.bigdata.btree.data.IAbstractNodeData)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encode</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/io/AbstractFixedByteArrayBuffer.html" title="class in com.bigdata.io">AbstractFixedByteArrayBuffer</a>&nbsp;encode(<a href="../../../com/bigdata/btree/data/IAbstractNodeData.html" title="interface in com.bigdata.btree.data">IAbstractNodeData</a>&nbsp;node)</pre>
<div class="block"><span class="strong">Deprecated.</span>&nbsp;<i>This method is no longer used since I refactored the
             <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree"><code>IndexSegmentBuilder</code></a> to optionally stuff the generated
             nodes and leaves into the cache. It still works but it might
             go away in the future.</i></div>
<div class="block">Encode a node or leaf onto an internal buffer and return that buffer (NOT
 thread-safe). This is a slight optimization of
 <a href="../../../com/bigdata/htree/NodeSerializer.html#encodeLive(T)"><code>encodeLive(IAbstractNodeData)</code></a> which is used when the written
 node or leaf will not be reused, e.g., by the <a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree"><code>IndexSegmentBuilder</code></a>
 . The operation writes on an internal buffer which is automatically
 extended as required.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The node or leaf.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The buffer containing the coded data record for the node or leaf
         in a <em>shared buffer</em>. The contents of this buffer may be
         overwritten by the next node or leaf serialized the same instance
         of this class. The position will be zero and the limit will be
         the #of bytes in the coded representation.</dd></dl>
</li>
</ul>
<a name="updateLeaf(java.nio.ByteBuffer, long, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>updateLeaf</h4>
<pre>public&nbsp;void&nbsp;updateLeaf(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b,
              long&nbsp;priorAddr,
              long&nbsp;nextAddr)</pre>
<div class="block">Update the serialization of a leaf to set the prior and next leaf
 references and change its serialization type from <code>#TYPE_LEAF</code> to
 <code>#TYPE_LINKED_LEAF</code>.
 <p>
 Note: In order to use this method to write linked leaves on the store you
 have to either write behind at a pre-determined address on the store or
 settle for writing only the prior or the next leaf address, but not both.
 It is up to the caller to perform these tricks. All this method does is
 to touch up the serialized record.
 <p>
 Note: This method has NO side-effects on the <i>position</i> or
 <i>limit</i> of the caller's <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>b</code> - The serialization leaf.</dd><dd><code>priorAddr</code> - The address of the previous leaf in key order, <code>0L</code>
            if it is known that there is no previous leaf, and
            <code>-1L</code> if either: (a) it is not known whether there
            is a previous leaf; or (b) it is known but the address of that
            leaf is not known to the caller.</dd><dd><code>nextAddr</code> - The address of the next leaf in key order, <code>0L</code> if
            it is known that there is no next leaf, and <code>-1L</code>
            if either: (a) it is not known whether there is a next leaf;
            or (b) it is known but the address of that leaf is not known
            to the caller.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/IndexSegmentBuilder.html" title="class in com.bigdata.btree"><code>IndexSegmentBuilder</code></a>, 
<a href="../../../com/bigdata/btree/data/DefaultLeafCoder.html" title="class in com.bigdata.btree.data"><code>DefaultLeafCoder</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/NodeSerializer.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/htree/MutableDirectoryPageData.html" title="class in com.bigdata.htree"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/htree/ShowHTreeResourceUsage.html" title="class in com.bigdata.htree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/htree/NodeSerializer.html" target="_top">Frames</a></li>
<li><a href="NodeSerializer.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2019 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
