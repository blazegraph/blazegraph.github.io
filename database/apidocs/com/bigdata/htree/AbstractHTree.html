<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Sat Jun 18 19:38:15 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AbstractHTree (Blazegraph Database Platform 2.1.2 API)</title>
<meta name="date" content="2016-06-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractHTree (Blazegraph Database Platform 2.1.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractHTree.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/bigdata/htree/AbstractHTree.HTreePageStateException.html" title="class in com.bigdata.htree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/htree/AbstractHTree.html" target="_top">Frames</a></li>
<li><a href="AbstractHTree.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.htree</div>
<h2 title="Class AbstractHTree" class="title">Class AbstractHTree</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.htree.AbstractHTree</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a>, <a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a>, <a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a>, <a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a>, <a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree">HTree</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">AbstractHTree</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a>, <a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></pre>
<div class="block">Abstract base class for a persistence capable extensible hash tree.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.HTreePageStateException.html" title="class in com.bigdata.htree">AbstractHTree.HTreePageStateException</a></strong></code>
<div class="block">Exception that can be thrown for asserts and testing, retaining the
 source page of the error</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#addressBits">addressBits</a></strong></code>
<div class="block">The #of bits in the address space for a directory page (from the
 constructor).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#bucketSlots">bucketSlots</a></strong></code>
<div class="block">The #of bucket slots in a bucket page.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#DEBUG">DEBUG</a></strong></code>
<div class="block">True iff the <a href="../../../com/bigdata/htree/AbstractHTree.html#log"><code>log</code></a> level is DEBUG or less.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#dumpLog">dumpLog</a></strong></code>
<div class="block">Log for <a href="../../../com/bigdata/htree/AbstractHTree.html#dump(java.io.PrintStream)"><code>dump(PrintStream)</code></a> and friends.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#error">error</a></strong></code>
<div class="block">This field is set if an error is encountered that renders an unisolated
 index object unusable.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ERROR_CLOSED">ERROR_CLOSED</a></strong></code>
<div class="block">The index is already closed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ERROR_ERROR_STATE">ERROR_ERROR_STATE</a></strong></code>
<div class="block">An unisolated index view is in an error state.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ERROR_LESS_THAN_ZERO">ERROR_LESS_THAN_ZERO</a></strong></code>
<div class="block">A parameter was less than zero.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ERROR_READ_ONLY">ERROR_READ_ONLY</a></strong></code>
<div class="block">The index is read-only but a mutation operation was requested.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ERROR_TOO_LARGE">ERROR_TOO_LARGE</a></strong></code>
<div class="block">A parameter was too large.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ERROR_TOO_SMALL">ERROR_TOO_SMALL</a></strong></code>
<div class="block">A parameter was too small</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ERROR_TRANSIENT">ERROR_TRANSIENT</a></strong></code>
<div class="block">The index is transient (not backed by persistent storage) but an
 operation that requires persistence was requested.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#INFO">INFO</a></strong></code>
<div class="block">True iff the <a href="../../../com/bigdata/htree/AbstractHTree.html#log"><code>log</code></a> level is INFO or less.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#log">log</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#MAX_ADDRESS_BITS">MAX_ADDRESS_BITS</a></strong></code>
<div class="block">The maximum value for the <code>addressBits</code> parameter.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/btree/HTreeIndexMetadata.html" title="class in com.bigdata.btree">HTreeIndexMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#metadata">metadata</a></strong></code>
<div class="block">The metadata record for the index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#MIN_ADDRESS_BITS">MIN_ADDRESS_BITS</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#ndistinctOnWriteRetentionQueue">ndistinctOnWriteRetentionQueue</a></strong></code>
<div class="block">The #of distinct nodes and leaves on the <a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree">NodeSerializer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#nodeSer">nodeSer</a></strong></code>
<div class="block">Used to serialize and de-serialize the nodes and leaves of the tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#readOnly">readOnly</a></strong></code>
<div class="block">When <code>true</code> the <a href="../../../com/bigdata/htree/AbstractHTree.html" title="class in com.bigdata.htree"><code>AbstractHTree</code></a> does not permit
 mutation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected com.bigdata.htree.DirectoryPage</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#root">root</a></strong></code>
<div class="block">The root directory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#store">store</a></strong></code>
<div class="block">The backing store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/cache/IHardReferenceQueue.html" title="interface in com.bigdata.cache">IHardReferenceQueue</a>&lt;<a href="../../../com/bigdata/btree/PO.html" title="class in com.bigdata.btree">PO</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue">writeRetentionQueue</a></strong></code>
<div class="block">Nodes (that is nodes or leaves) are added to a hard reference queue when
 they are created or read from the store.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#AbstractHTree(com.bigdata.rawstore.IRawStore,%20com.bigdata.htree.INodeFactory,%20boolean,%20com.bigdata.btree.HTreeIndexMetadata,%20com.bigdata.io.compression.IRecordCompressorFactory)">AbstractHTree</a></strong>(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
             <a href="../../../com/bigdata/htree/INodeFactory.html" title="interface in com.bigdata.htree">INodeFactory</a>&nbsp;nodeFactory,
             boolean&nbsp;readOnly,
             <a href="../../../com/bigdata/btree/HTreeIndexMetadata.html" title="class in com.bigdata.btree">HTreeIndexMetadata</a>&nbsp;metadata,
             <a href="../../../com/bigdata/io/compression/IRecordCompressorFactory.html" title="interface in com.bigdata.io.compression">IRecordCompressorFactory</a>&lt;?&gt;&nbsp;recordCompressorFactory)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#_reopen()">_reopen</a></strong>()</code>
<div class="block">This method is responsible for setting up the root leaf (either new or
 read from the store), the bloom filter, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#assertNotReadOnly()">assertNotReadOnly</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#assertNotTransient()">assertNotTransient</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#checkConsistency(com.bigdata.htree.AbstractPage,%20boolean)">checkConsistency</a></strong>(com.bigdata.htree.AbstractPage&nbsp;pge,
                boolean&nbsp;full)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#checkConsistency(boolean)">checkConsistency</a></strong>(boolean&nbsp;full)</code>
<div class="block">Checks globalDepth of each node and also whether any BucketPages
 are empty.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#close()">close</a></strong>()</code>
<div class="block">The contract for <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> is to reduce the resource burden of the
 index while not rendering the index inoperative.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#decodeRecordAddr(byte[])">decodeRecordAddr</a></strong>(byte[]&nbsp;buf)</code>
<div class="block">Decodes a signed long value as encoded by <code>#appendSigned(long)</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#dump(org.apache.log4j.Level,%20java.io.PrintStream,%20boolean)">dump</a></strong>(org.apache.log4j.Level&nbsp;level,
    <a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out,
    boolean&nbsp;materialize)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#dump(java.io.PrintStream)">dump</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out)</code>
<div class="block">Recursive dump of the tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#encodeRecordAddr(com.bigdata.io.ByteArrayBuffer,%20long)">encodeRecordAddr</a></strong>(<a href="../../../com/bigdata/io/ByteArrayBuffer.html" title="class in com.bigdata.io">ByteArrayBuffer</a>&nbsp;recordAddrBuf,
                long&nbsp;addr)</code>
<div class="block">Encode a raw record address into a byte[] suitable for storing in the
 value associated with a tuple and decoding using
 <a href="../../../com/bigdata/htree/AbstractHTree.html#decodeRecordAddr(byte[])"><code>decodeRecordAddr(byte[])</code></a></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getAddressBits()">getAddressBits</a></strong>()</code>
<div class="block">The #of bits in the address space for a hash directory page.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getBtreeCounters()">getBtreeCounters</a></strong>()</code>
<div class="block">Counters tracking various aspects of the btree.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getCounters()">getCounters</a></strong>()</code>
<div class="block">Return performance counters.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getEntryCount()">getEntryCount</a></strong>()</code>
<div class="block">The #of tuples in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getHeight()">getHeight</a></strong>()</code>
<div class="block">Throws an exception since the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> is not a balanced tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/HTreeIndexMetadata.html" title="class in com.bigdata.btree">HTreeIndexMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getIndexMetadata()">getIndexMetadata</a></strong>()</code>
<div class="block">Returns the metadata record for this index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getLastCommitTime()">getLastCommitTime</a></strong>()</code>
<div class="block">The timestamp associated with the last <a href="../../../com/bigdata/journal/IAtomicStore.html#commit()"><code>IAtomicStore.commit()</code></a> in
 which writes buffered by this index were made restart-safe on the backing
 store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getLeafCount()">getLeafCount</a></strong>()</code>
<div class="block">The #of <code>BucketPage</code>s in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> (not buddy hash buckets,
 but the pages on which they appear).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getNodeCount()">getNodeCount</a></strong>()</code>
<div class="block">The #of <code>DirectoryPage</code>s in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> (not buddy hash
 tables, but the pages on which they appear).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree">NodeSerializer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getNodeSerializer()">getNodeSerializer</a></strong>()</code>
<div class="block">The object responsible for (de-)serializing the nodes and leaves of the
 <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree"><code>IIndex</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getReadLockCount()">getReadLockCount</a></strong>()</code>
<div class="block">Return the #of read-locks held by the current thread for a mutable index
 view.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected com.bigdata.htree.DirectoryPage</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getRoot()">getRoot</a></strong>()</code>
<div class="block">The root of the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#getStore()">getStore</a></strong>()</code>
<div class="block">The backing store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#isBalanced()">isBalanced</a></strong>()</code>
<div class="block">Return <code>true</code> iff the tree is balanced.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#isOpen()">isOpen</a></strong>()</code>
<div class="block">An "open" index has may have some buffered data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#isReadOnly()">isReadOnly</a></strong>()</code>
<div class="block">Return <code>true</code> iff this B+Tree is read-only.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#isTransient()">isTransient</a></strong>()</code>
<div class="block">Return <code>true</code> iff this is a transient data structure (no
 backing store).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#rangeCount()">rangeCount</a></strong>()</code>
<div class="block">The #of index entries.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#rangeIterator()">rangeIterator</a></strong>()</code>
<div class="block">Simple iterator visits all tuples in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> in order by the
 effective prefix of their keys.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#readLock()">readLock</a></strong>()</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain a shared read lock which
 is used (in the absence of other concurrency control mechanisms) to
 permit concurrent readers on an unisolated index while serializing access
 to that index when a writer must run.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected com.bigdata.htree.AbstractPage</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#readNodeOrLeaf(long)">readNodeOrLeaf</a></strong>(long&nbsp;addr)</code>
<div class="block">Read an <code>AbstractPage</code> from the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#reopen()">reopen</a></strong>()</code>
<div class="block">(Re-) open the index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../cutthecrap/utils/striterators/ICloseableIterator.html" title="interface in cutthecrap.utils.striterators">ICloseableIterator</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#scan()">scan</a></strong>()</code>
<div class="block">Visit all entries in the index in the natural order of the index
 (dereferencing visited tuples to the application objects stored within
 those tuples).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#setBTreeCounters(com.bigdata.btree.BTreeCounters)">setBTreeCounters</a></strong>(<a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a>&nbsp;btreeCounters)</code>
<div class="block">Replace the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#toString()">toString</a></strong>()</code>
<div class="block">Fast summary information about the B+Tree.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#touch(com.bigdata.htree.AbstractPage)">touch</a></strong>(com.bigdata.htree.AbstractPage&nbsp;node)</code>
<div class="block">
 This method is responsible for putting the node or leaf onto the ring
 buffer which controls (a) how long we retain a hard reference to the node
 or leaf; and (b) for writes, when the node or leaf is evicted with a zero
 reference count and made persistent (along with all dirty children).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;byte[]&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#values()">values</a></strong>()</code>
<div class="block">Visits the values stored in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> in order by the effective
 prefix of their keys.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#writeLock()">writeLock</a></strong>()</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain an exclusive write lock
 which is used (in the absence of other concurrency control mechanisms) to
 serialize all processes accessing an unisolated index when a writer must
 run.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#writeNodeOrLeaf(com.bigdata.htree.AbstractPage)">writeNodeOrLeaf</a></strong>(com.bigdata.htree.AbstractPage&nbsp;node)</code>
<div class="block">Codes the node and writes the coded record on the store (non-recursive).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/htree/AbstractHTree.html#writeNodeRecursive(com.bigdata.htree.AbstractPage)">writeNodeRecursive</a></strong>(com.bigdata.htree.AbstractPage&nbsp;node)</code>
<div class="block">Write a dirty node and its children using a post-order traversal that
 first writes any dirty leaves and then (recursively) their parent nodes.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ICheckpointProtocol">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></h3>
<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#dumpPages(boolean,%20boolean)">dumpPages</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getCheckpoint()">getCheckpoint</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getDirtyListener()">getDirtyListener</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getMetadataAddr()">getMetadataAddr</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRecordVersion()">getRecordVersion</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getRootAddr()">getRootAddr</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#setDirtyListener(com.bigdata.btree.IDirtyListener)">setDirtyListener</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#setLastCommitTime(long)">setLastCommitTime</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#writeCheckpoint()">writeCheckpoint</a>, <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#writeCheckpoint2()">writeCheckpoint2</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.journal.ICommitter">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.journal.<a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a></h3>
<code><a href="../../../com/bigdata/journal/ICommitter.html#handleCommit(long)">handleCommit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.btree.ISimpleIndexAccess">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.btree.<a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></h3>
<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#removeAll()">removeAll</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="ERROR_CLOSED">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_CLOSED</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_CLOSED</pre>
<div class="block">The index is already closed.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.ERROR_CLOSED">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_LESS_THAN_ZERO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_LESS_THAN_ZERO</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_LESS_THAN_ZERO</pre>
<div class="block">A parameter was less than zero.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.ERROR_LESS_THAN_ZERO">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_TOO_SMALL">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_TOO_SMALL</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_TOO_SMALL</pre>
<div class="block">A parameter was too small</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.ERROR_TOO_SMALL">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_TOO_LARGE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_TOO_LARGE</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_TOO_LARGE</pre>
<div class="block">A parameter was too large.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.ERROR_TOO_LARGE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_READ_ONLY">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_READ_ONLY</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_READ_ONLY</pre>
<div class="block">The index is read-only but a mutation operation was requested.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.ERROR_READ_ONLY">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_TRANSIENT">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_TRANSIENT</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_TRANSIENT</pre>
<div class="block">The index is transient (not backed by persistent storage) but an
 operation that requires persistence was requested.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.ERROR_TRANSIENT">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ERROR_ERROR_STATE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ERROR_ERROR_STATE</h4>
<pre>protected static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> ERROR_ERROR_STATE</pre>
<div class="block">An unisolated index view is in an error state. It must be discarded and
 reloaded from the current checkpoint record.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="http://trac.blazegraph.com/ticket/1005"> Invalidate BTree
      objects if error occurs during eviction </a>, 
<a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.ERROR_ERROR_STATE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MIN_ADDRESS_BITS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MIN_ADDRESS_BITS</h4>
<pre>public final&nbsp;int MIN_ADDRESS_BITS</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.MIN_ADDRESS_BITS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="MAX_ADDRESS_BITS">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_ADDRESS_BITS</h4>
<pre>public final&nbsp;int MAX_ADDRESS_BITS</pre>
<div class="block">The maximum value for the <code>addressBits</code> parameter.
 <p>
 Note: <code>1^32</code> overflows an int32. However, <code>2^16</code> is
 65536 which is a pretty large page. <code>2^20</code> is 1,048,576. It is
 pretty difficult to imagine use cases where the fan out for the
 <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> should be that large.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.htree.AbstractHTree.MAX_ADDRESS_BITS">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>protected static final transient&nbsp;org.apache.log4j.Logger log</pre>
</li>
</ul>
<a name="INFO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INFO</h4>
<pre>protected static final&nbsp;boolean INFO</pre>
<div class="block">True iff the <a href="../../../com/bigdata/htree/AbstractHTree.html#log"><code>log</code></a> level is INFO or less.</div>
</li>
</ul>
<a name="DEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEBUG</h4>
<pre>protected static final&nbsp;boolean DEBUG</pre>
<div class="block">True iff the <a href="../../../com/bigdata/htree/AbstractHTree.html#log"><code>log</code></a> level is DEBUG or less.</div>
</li>
</ul>
<a name="dumpLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dumpLog</h4>
<pre>public static final&nbsp;org.apache.log4j.Logger dumpLog</pre>
<div class="block">Log for <a href="../../../com/bigdata/htree/AbstractHTree.html#dump(java.io.PrintStream)"><code>dump(PrintStream)</code></a> and friends.</div>
</li>
</ul>
<a name="store">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>store</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a> store</pre>
<div class="block">The backing store.</div>
</li>
</ul>
<a name="readOnly">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readOnly</h4>
<pre>protected final&nbsp;boolean readOnly</pre>
<div class="block">When <code>true</code> the <a href="../../../com/bigdata/htree/AbstractHTree.html" title="class in com.bigdata.htree"><code>AbstractHTree</code></a> does not permit
 mutation.</div>
</li>
</ul>
<a name="addressBits">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addressBits</h4>
<pre>protected final&nbsp;int addressBits</pre>
<div class="block">The #of bits in the address space for a directory page (from the
 constructor). This constant is specified when the hash tree is created. A
 directory page has <code>2^addressBits</code> entries. Those entries are
 divided up among one or more buddy hash tables on that page.</div>
</li>
</ul>
<a name="bucketSlots">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bucketSlots</h4>
<pre>protected final&nbsp;int bucketSlots</pre>
<div class="block">The #of bucket slots in a bucket page. There is a case for allowing the number of
 bucket slots to be different than the number of directory page slots (as determined
 by the number of addressBits) since the storage requirements for bucket 
 values/keys is not set.</div>
</li>
</ul>
<a name="root">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>root</h4>
<pre>protected volatile&nbsp;com.bigdata.htree.DirectoryPage root</pre>
<div class="block">The root directory.</div>
</li>
</ul>
<a name="error">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>error</h4>
<pre>protected volatile&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a> error</pre>
<div class="block">This field is set if an error is encountered that renders an unisolated
 index object unusable. For example, this can occur if an error was
 detected during incremental eviction of dirty nodes for a mutable index
 view since that means that there are partly serialized (and possibly
 inconsistenly serialized) evicted pages. Once this becomes non-
 <code>null</code> the index MUST be reloaded from the most recent
 checkpoint before it can be used (that is, you need to obtain a new view
 of the unisolated index since this field is sticky once set).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="http://trac.blazegraph.com/ticket/1005"> Invalidate BTree
      objects if error occurs during eviction </a></dd></dl>
</li>
</ul>
<a name="writeRetentionQueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRetentionQueue</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/cache/IHardReferenceQueue.html" title="interface in com.bigdata.cache">IHardReferenceQueue</a>&lt;<a href="../../../com/bigdata/btree/PO.html" title="class in com.bigdata.btree">PO</a>&gt; writeRetentionQueue</pre>
<div class="block">Nodes (that is nodes or leaves) are added to a hard reference queue when
 they are created or read from the store. On eviction from the queue a
 dirty node is serialized by a listener against the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>. The
 nodes and leaves refer to their parent with a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a>s.
 Likewise, nodes refer to their children with a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a>. The
 hard reference queue in combination with <a href="../../../com/bigdata/htree/AbstractHTree.html#touch(com.bigdata.htree.AbstractPage)"><code>touch(AbstractPage)</code></a> and
 with hard references held on the stack ensures that the parent and/or
 children remain reachable during operations. Once the node is no longer
 strongly reachable weak references to that node may be cleared by the VM
 - in this manner the node will become unreachable by navigation from its
 ancestors in the btree. The special role of the hard reference queue is
 to further ensure that dirty nodes remain dirty by defering persistence
 until the reference count for the node is zero during an eviction from
 the queue.
 <p>
 Note that nodes are evicted as new nodes are added to the hard reference
 queue. This occurs in two situations: (1) when a new node is created
 during a split of an existing node; and (2) when a node is read in from
 the store. Inserts on this hard reference queue always drive evictions.
 Incremental writes basically make it impossible for the commit set to get
 "too large" - the maximum #of nodes to be written is bounded by the size
 of the hard reference queue. This helps to ensure fast commit operations
 on the store.
 <p>
 The minimum capacity for the hard reference queue is two (2) so that a
 split may occur without forcing eviction of either node participating in
 the split.
 <p>
 Note: The code in
 <code>AbstractPage.postOrderNodeIterator(boolean, boolean)</code> and
 <code>DirtyChildIterator</code> MUST NOT touch the hard reference queue since
 those iterators are used when persisting a node using a post-order
 traversal. If a hard reference queue eviction drives the serialization of
 a node and we touch the hard reference queue during the post-order
 traversal then we break down the semantics of
 <a href="../../../com/bigdata/cache/HardReferenceQueue.html#add(T)"><code>HardReferenceQueue.add(Object)</code></a> as the eviction does not
 necessarily cause the queue to reduce in length. Another way to handle
 this is to have <a href="../../../com/bigdata/cache/HardReferenceQueue.html#add(T)"><code>HardReferenceQueue.add(Object)</code></a> begin to evict
 objects before is is actually at capacity, but that is also a bit
 fragile.
 <p>
 Note: The <a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a> uses a <a href="../../../com/bigdata/cache/HardReferenceQueue.html" title="class in com.bigdata.cache"><code>HardReferenceQueue</code></a>.
 This is based on a <a href="../../../com/bigdata/cache/RingBuffer.html" title="class in com.bigdata.cache"><code>RingBuffer</code></a> and is very fast. It does not use a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util"><code>HashMap</code></a> because we can resolve the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/ref/WeakReference.html?is-external=true" title="class or interface in java.lang.ref"><code>WeakReference</code></a> to the
 child <code>DirectoryPage</code> or <code>BucketPage</code> using top-down
 navigation as long as the <code>DirectoryPage</code> or <code>BucketPage</code>
 remains strongly reachable (that is, as long as it is on the
 <a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a> or otherwise strongly held). This means that
 lookup in a map is not required for top-down navigation.</div>
</li>
</ul>
<a name="ndistinctOnWriteRetentionQueue">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ndistinctOnWriteRetentionQueue</h4>
<pre>protected&nbsp;int ndistinctOnWriteRetentionQueue</pre>
<div class="block">The #of distinct nodes and leaves on the <a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>.</div>
</li>
</ul>
<a name="metadata">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>metadata</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/btree/HTreeIndexMetadata.html" title="class in com.bigdata.btree">HTreeIndexMetadata</a> metadata</pre>
<div class="block">The metadata record for the index. This data rarely changes during the
 life of the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> object, but it CAN be changed.</div>
</li>
</ul>
<a name="nodeSer">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>nodeSer</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree">NodeSerializer</a> nodeSer</pre>
<div class="block">Used to serialize and de-serialize the nodes and leaves of the tree.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractHTree(com.bigdata.rawstore.IRawStore, com.bigdata.htree.INodeFactory, boolean, com.bigdata.btree.HTreeIndexMetadata, com.bigdata.io.compression.IRecordCompressorFactory)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractHTree</h4>
<pre>protected&nbsp;AbstractHTree(<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;store,
             <a href="../../../com/bigdata/htree/INodeFactory.html" title="interface in com.bigdata.htree">INodeFactory</a>&nbsp;nodeFactory,
             boolean&nbsp;readOnly,
             <a href="../../../com/bigdata/btree/HTreeIndexMetadata.html" title="class in com.bigdata.btree">HTreeIndexMetadata</a>&nbsp;metadata,
             <a href="../../../com/bigdata/io/compression/IRecordCompressorFactory.html" title="interface in com.bigdata.io.compression">IRecordCompressorFactory</a>&lt;?&gt;&nbsp;recordCompressorFactory)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>store</code> - The persistence store.</dd><dd><code>nodeFactory</code> - Object that provides a factory for node and leaf objects.</dd><dd><code>readOnly</code> - <code>true</code> IFF it is <em>known</em> that the
            <a href="../../../com/bigdata/htree/AbstractHTree.html" title="class in com.bigdata.htree"><code>AbstractHTree</code></a> is read-only.</dd><dd><code>metadata</code> - The <a href="../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> object for this
            <a href="../../../com/bigdata/htree/AbstractHTree.html" title="class in com.bigdata.htree"><code>AbstractHTree</code></a>.</dd><dd><code>recordCompressorFactory</code> - Object that knows how to (de-)compress the serialized data
            records.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if addressBits is LT ONE (1).</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if addressBits is GT (16).</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getBtreeCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBtreeCounters</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a>&nbsp;getBtreeCounters()</pre>
<div class="block">Counters tracking various aspects of the btree.
 
 TODO Refactor / reuse performance counters for HTree and collect counters
 in the code.</div>
</li>
</ul>
<a name="setBTreeCounters(com.bigdata.btree.BTreeCounters)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBTreeCounters</h4>
<pre>public final&nbsp;void&nbsp;setBTreeCounters(<a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree">BTreeCounters</a>&nbsp;btreeCounters)</pre>
<div class="block">Replace the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a>.
 <p>
 Note: This is used by the <a href="../../../com/bigdata/resources/IndexManager.html" title="class in com.bigdata.resources"><code>IndexManager</code></a> to ensure that an index
 loaded from its backing store uses the <a href="../../../com/bigdata/btree/BTreeCounters.html" title="class in com.bigdata.btree"><code>BTreeCounters</code></a> associated
 with that index since the <a href="../../../com/bigdata/service/DataService.html" title="class in com.bigdata.service"><code>DataService</code></a> was last (re-)started.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>btreeCounters</code> - The counters to be used.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the argument is <code>null</code>.</dd></dl>
</li>
</ul>
<a name="getCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounters</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a>&nbsp;getCounters()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">ICounterSetAccess</a></code></strong></div>
<div class="block">Return performance counters.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getIndexMetadata()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexMetadata</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/HTreeIndexMetadata.html" title="class in com.bigdata.btree">HTreeIndexMetadata</a>&nbsp;getIndexMetadata()</pre>
<div class="block">Returns the metadata record for this index.
 <p>
 Note: If the index is read-only then the metadata object will be cloned
 to avoid potential modification. However, only a single cloned copy of
 the metadata record will be shared between all callers for a given
 instance of this class.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getIndexMetadata()">getIndexMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The metadata record for this btree and never <code>null</code>.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/IIndex.html#getIndexMetadata()"><code>IIndex.getIndexMetadata()</code></a></dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">The contract for <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> is to reduce the resource burden of the
 index while not rendering the index inoperative. An index that has been
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>closed</code></a> MAY be <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>reopened</code></a> at any time
 (conditional on the continued availability of the backing store). Such an
 index reference remains valid after a <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a>. A closed index is
 transparently <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>reopened</code></a> by any access to the index data
 (scanning the index, probing the index, etc).
 <p>
 Note: A <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> on a dirty index MUST discard writes rather than
 flushing them to the store and MUST NOT update its <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a>
 record - (<a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> is used to discard indices with partial writes
 when an <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal"><code>AbstractTask</code></a> fails). If you are seeking to
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> a mutable index view that state can be recovered by
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>ICheckpointProtocol.reopen()</code></a> then you MUST write a new <a href="../../../com/bigdata/btree/Checkpoint.html" title="class in com.bigdata.btree"><code>Checkpoint</code></a> record
 before closing the index.
 <p>
 Note: CLOSING A TRANSIENT INDEX WILL DISCARD ALL DATA!
 <p>
 This implementation clears the hard reference queue (releasing all node
 references), releases the hard reference to the root node, and releases
 the buffers on the <a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree"><code>NodeSerializer</code></a> (they will be naturally
 reallocated on reuse).
 <p>
 Note: <a href="../../../com/bigdata/htree/AbstractHTree.html" title="class in com.bigdata.htree"><code>AbstractHTree</code></a> is NOT thread-safe and <a href="../../../com/bigdata/htree/AbstractHTree.html#close()"><code>close()</code></a> MUST
 be invoked in a context in which there will not be concurrent threads --
 the natural choice being the single-threaded commit service on the
 journal.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the root is <code>null</code>, indicating that the
                index is already closed.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the root is dirty (this implies that this is a mutable
                HTree and there are mutations that have not been written
                through to the store)</dd></dl>
</li>
</ul>
<a name="reopen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reopen</h4>
<pre>public final&nbsp;void&nbsp;reopen()</pre>
<div class="block">(Re-) open the index. This method is part of a <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a> /
 <a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>ICheckpointProtocol.reopen()</code></a> protocol. That protocol may be used to reduce the
 resource burden of an index. This method is automatically invoked by a
 variety of methods that need to ensure that the index is available for
 use..
 <p>
 This method delegates to <a href="../../../com/bigdata/htree/AbstractHTree.html#_reopen()"><code>_reopen()</code></a> if double-checked locking
 demonstrates that the <a href="../../../com/bigdata/htree/AbstractHTree.html#root"><code>root</code></a> is <code>null</code> (indicating that
 the index has been closed). This method is automatically invoked by a
 variety of methods that need to ensure that the index is available for
 use.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()">reopen</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a>, 
<a href="../../../com/bigdata/btree/ICheckpointProtocol.html#isOpen()"><code>ICheckpointProtocol.isOpen()</code></a>, 
<code>#getRoot()</code></dd></dl>
</li>
</ul>
<a name="_reopen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>_reopen</h4>
<pre>protected abstract&nbsp;void&nbsp;_reopen()</pre>
<div class="block">This method is responsible for setting up the root leaf (either new or
 read from the store), the bloom filter, etc. It is invoked by
 <a href="../../../com/bigdata/htree/AbstractHTree.html#reopen()"><code>reopen()</code></a> once <a href="../../../com/bigdata/htree/AbstractHTree.html#root"><code>root</code></a> has been show to be
 <code>null</code> with double-checked locking. When invoked in this
 context, the caller is guaranteed to hold a lock on <i>this</i>. This is
 done to ensure that at most one thread gets to re-open the index from the
 backing store.</div>
</li>
</ul>
<a name="isOpen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOpen</h4>
<pre>public final&nbsp;boolean&nbsp;isOpen()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#isOpen()">ICheckpointProtocol</a></code></strong></div>
<div class="block">An "open" index has may have some buffered data. A closed index will have
 to re-read any backing data from the backing store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#isOpen()">isOpen</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>If the index is "open".</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#close()"><code>ICheckpointProtocol.close()</code></a>, 
<a href="../../../com/bigdata/btree/ICheckpointProtocol.html#reopen()"><code>ICheckpointProtocol.reopen()</code></a></dd></dl>
</li>
</ul>
<a name="isTransient()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isTransient</h4>
<pre>public final&nbsp;boolean&nbsp;isTransient()</pre>
<div class="block">Return <code>true</code> iff this is a transient data structure (no
 backing store).</div>
</li>
</ul>
<a name="assertNotTransient()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertNotTransient</h4>
<pre>protected final&nbsp;void&nbsp;assertNotTransient()</pre>
</li>
</ul>
<a name="isReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReadOnly</h4>
<pre>public final&nbsp;boolean&nbsp;isReadOnly()</pre>
<div class="block">Return <code>true</code> iff this B+Tree is read-only.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#isReadOnly()">isReadOnly</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
</dl>
</li>
</ul>
<a name="assertNotReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertNotReadOnly</h4>
<pre>protected final&nbsp;void&nbsp;assertNotReadOnly()</pre>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the B+Tree is read-only.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/htree/AbstractHTree.html#isReadOnly()"><code>isReadOnly()</code></a></dd></dl>
</li>
</ul>
<a name="getLastCommitTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitTime</h4>
<pre>public abstract&nbsp;long&nbsp;getLastCommitTime()</pre>
<div class="block">The timestamp associated with the last <a href="../../../com/bigdata/journal/IAtomicStore.html#commit()"><code>IAtomicStore.commit()</code></a> in
 which writes buffered by this index were made restart-safe on the backing
 store. The lastCommitTime is set when the index is loaded from the
 backing store and updated after each commit. It is ZERO (0L) when
 <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> is first created and will remain ZERO (0L) until the
 <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> is committed.  If the backing store does not support atomic
 commits, then this value will always be ZERO (0L).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html#getLastCommitTime()">getLastCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ICheckpointProtocol.html" title="interface in com.bigdata.btree">ICheckpointProtocol</a></code></dd>
</dl>
</li>
</ul>
<a name="getStore()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStore</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>&nbsp;getStore()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#getStore()">ISimpleIndexAccess</a></code></strong></div>
<div class="block">The backing store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#getStore()">getStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getAddressBits()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddressBits</h4>
<pre>public final&nbsp;int&nbsp;getAddressBits()</pre>
<div class="block">The #of bits in the address space for a hash directory page. This
 constant is specified to the constructor. The #of child pages is
 <code>2^addressBits</code>. When <i>addressBits</i> is <code>10</code> we
 have <code>2^10 := 1024</code>. If the size of a child address is 4
 bytes, then a 10 bit address space implies a 4k page size.</div>
</li>
</ul>
<a name="getNodeCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeCount</h4>
<pre>public abstract&nbsp;long&nbsp;getNodeCount()</pre>
<div class="block">The #of <code>DirectoryPage</code>s in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> (not buddy hash
 tables, but the pages on which they appear).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getNodeCount()">getNodeCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getLeafCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLeafCount</h4>
<pre>public abstract&nbsp;long&nbsp;getLeafCount()</pre>
<div class="block">The #of <code>BucketPage</code>s in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> (not buddy hash buckets,
 but the pages on which they appear).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getLeafCount()">getLeafCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getEntryCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getEntryCount</h4>
<pre>public abstract&nbsp;long&nbsp;getEntryCount()</pre>
<div class="block">The #of tuples in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getEntryCount()">getEntryCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="isBalanced()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isBalanced</h4>
<pre>public final&nbsp;boolean&nbsp;isBalanced()</pre>
<div class="block">Return <code>true</code> iff the tree is balanced.
 <p>
 Note: Not all tree-structured indices are balanced. For example, the
 <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> is balanced, but the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> is not balanced. The
 height of an unbalanced tree must be discovered through a traversal of
 the tree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#isBalanced()">isBalanced</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd><code>false</code> since an <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> is NOT a balanced tree.</dd></dl>
</li>
</ul>
<a name="getHeight()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeight</h4>
<pre>public&nbsp;int&nbsp;getHeight()</pre>
<div class="block">Throws an exception since the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> is not a balanced tree.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#getHeight()">getHeight</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html" title="interface in com.bigdata.btree">ISimpleTreeIndexAccess</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/ISimpleTreeIndexAccess.html#isBalanced()"><code>ISimpleTreeIndexAccess.isBalanced()</code></a></dd></dl>
</li>
</ul>
<a name="getNodeSerializer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNodeSerializer</h4>
<pre>public final&nbsp;<a href="../../../com/bigdata/htree/NodeSerializer.html" title="class in com.bigdata.htree">NodeSerializer</a>&nbsp;getNodeSerializer()</pre>
<div class="block">The object responsible for (de-)serializing the nodes and leaves of the
 <a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree"><code>IIndex</code></a>.</div>
</li>
</ul>
<a name="getRoot()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRoot</h4>
<pre>protected final&nbsp;com.bigdata.htree.DirectoryPage&nbsp;getRoot()</pre>
<div class="block">The root of the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a>. This is always a <code>DirectoryPage</code>.
 <p>
 The hard reference to the root node is cleared if the index is
 <a href="../../../com/bigdata/htree/AbstractHTree.html#close()"><code>closed</code></a>. This method automatically <a href="../../../com/bigdata/htree/AbstractHTree.html#reopen()"><code>reopen()</code></a>s the
 index if it is closed, making it available for use.</div>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<div class="block">Fast summary information about the B+Tree.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="dump(java.io.PrintStream)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dump</h4>
<pre>public&nbsp;boolean&nbsp;dump(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out)</pre>
<div class="block">Recursive dump of the tree.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - The dump is written on this stream.</dd>
<dt><span class="strong">Returns:</span></dt><dd>true unless an inconsistency is detected.</dd></dl>
</li>
</ul>
<a name="dump(org.apache.log4j.Level, java.io.PrintStream, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>dump</h4>
<pre>public&nbsp;boolean&nbsp;dump(org.apache.log4j.Level&nbsp;level,
           <a href="http://docs.oracle.com/javase/7/docs/api/java/io/PrintStream.html?is-external=true" title="class or interface in java.io">PrintStream</a>&nbsp;out,
           boolean&nbsp;materialize)</pre>
</li>
</ul>
<a name="touch(com.bigdata.htree.AbstractPage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>touch</h4>
<pre>protected&nbsp;void&nbsp;touch(com.bigdata.htree.AbstractPage&nbsp;node)</pre>
<div class="block"><p>
 This method is responsible for putting the node or leaf onto the ring
 buffer which controls (a) how long we retain a hard reference to the node
 or leaf; and (b) for writes, when the node or leaf is evicted with a zero
 reference count and made persistent (along with all dirty children). The
 concurrency requirements and the implementation behavior and guarentees
 differ depending on whether the B+Tree is read-only or mutable for two
 reasons: For writers, the B+Tree is single-threaded so there is no
 contention. For readers, every touch on the B+Tree goes through this
 point, so it is vital to make this method non-blocking.
 </p>
 <h3>Writers</h3>
 <p>
 This method guarantees that the specified node will NOT be synchronously
 persisted as a side effect and thereby made immutable. (Of course, the
 node may be already immutable.)
 </p>
 <p>
 In conjunction with <a href="../../../com/bigdata/htree/DefaultEvictionListener.html" title="class in com.bigdata.htree"><code>DefaultEvictionListener</code></a>, this method
 guarantees that the reference counter for the node will reflect the #of
 times that the node is actually present on the
 <a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>.
 </p>
 <p>
 If the node is not found on a scan of the head of the queue, then it is
 appended to the queue and its <code>AbstractPage.referenceCount</code> is
 incremented. If a node is being appended to the queue and the queue is at
 capacity, then this will cause a reference to be evicted from the queue.
 If the reference counter for the evicted node or leaf is zero and the
 evicted node or leaf is dirty, then a data record will be coded for the
 evicted node or leaf and written onto the backing store. A subsequent
 attempt to modify the node or leaf will force copy-on-write for that node
 or leaf. 
 </p>
 <p>
 For the mutable B+Tree we also track the #of references to the node/leaf
 on the ring buffer. When that reference count reaches zero we do an
 eviction and the node/leaf is written onto the backing store if it is
 dirty. Those reference counting games DO NOT matter for read-only views
 so we can take a code path which does not update the per-node/leaf
 reference count and we do not need to use either synchronization or
 atomic counters to track the reference counts.
 </p>
 <h3>Readers</h3>
 <p>
 In order to reduce contention for the lock required to update the backing
 queue, the <a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a> is configured to collect
 references for touched nodes or leaves in a thread-local queue and then
 batch those references through to the backing hard reference queue while
 holding the lock.
 </p></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The node or leaf.</dd></dl>
</li>
</ul>
<a name="writeNodeRecursive(com.bigdata.htree.AbstractPage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeNodeRecursive</h4>
<pre>protected final&nbsp;void&nbsp;writeNodeRecursive(com.bigdata.htree.AbstractPage&nbsp;node)</pre>
<div class="block">Write a dirty node and its children using a post-order traversal that
 first writes any dirty leaves and then (recursively) their parent nodes.
 The parent nodes are guaranteed to be dirty if there is a dirty child so
 this never triggers copy-on-write. This is used as part of the commit
 protocol where it is invoked with the root of the tree, but it may also
 be used to incrementally flush dirty non-root <a href="../../../com/bigdata/btree/Node.html" title="class in com.bigdata.btree"><code>Node</code></a>s.
 
 Note: This will throw an exception if the backing store is read-only.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>node</code> - The root of the hierarchy of nodes to be written. The node
            MUST be dirty. The node this does NOT have to be the root of
            the tree and it does NOT have to be a <a href="../../../com/bigdata/btree/Node.html" title="class in com.bigdata.btree"><code>Node</code></a>.</dd></dl>
</li>
</ul>
<a name="writeNodeOrLeaf(com.bigdata.htree.AbstractPage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeNodeOrLeaf</h4>
<pre>protected&nbsp;long&nbsp;writeNodeOrLeaf(com.bigdata.htree.AbstractPage&nbsp;node)</pre>
<div class="block">Codes the node and writes the coded record on the store (non-recursive).
 The node MUST be dirty. If the node has a parent, then the parent is
 notified of the persistent identity assigned to the node by the store.
 This method is NOT recursive and dirty children of a node will NOT be
 visited. By coding the nodes and leaves as they are evicted from the
 <a href="../../../com/bigdata/htree/AbstractHTree.html#writeRetentionQueue"><code>writeRetentionQueue</code></a>, the B+Tree continuously converts nodes and
 leaves to their more compact coded record forms which results in a
 smaller in memory footprint.
 <p>
 Note: For a transient B+Tree, this merely codes the node but does not
 write the node on the store (there is none).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The persistent identity assigned by the store.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - if the B+Tree (or the backing store) is read-only.</dd></dl>
</li>
</ul>
<a name="readNodeOrLeaf(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readNodeOrLeaf</h4>
<pre>protected&nbsp;com.bigdata.htree.AbstractPage&nbsp;readNodeOrLeaf(long&nbsp;addr)</pre>
<div class="block">Read an <code>AbstractPage</code> from the store.
 <p>
 Note: Callers SHOULD be synchronized in order to ensure that only one
 thread will read the desired node or leaf in from the store and attach
 the reference to the newly read node or leaf as appropriate into the
 existing data structures (e.g., as the root reference or as a child of a
 node or leaf already live in memory).
 <p>
 Note: The caller MUST set the <code>AbstractPage.globalDepth</code> on the
 returned value.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address in the store.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <code>AbstractPage</code>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the address is <a href="../../../com/bigdata/rawstore/IAddressManager.html#NULL"><code>IAddressManager.NULL</code></a>.</dd></dl>
</li>
</ul>
<a name="encodeRecordAddr(com.bigdata.io.ByteArrayBuffer, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>encodeRecordAddr</h4>
<pre>public static&nbsp;byte[]&nbsp;encodeRecordAddr(<a href="../../../com/bigdata/io/ByteArrayBuffer.html" title="class in com.bigdata.io">ByteArrayBuffer</a>&nbsp;recordAddrBuf,
                      long&nbsp;addr)</pre>
<div class="block">Encode a raw record address into a byte[] suitable for storing in the
 value associated with a tuple and decoding using
 <a href="../../../com/bigdata/htree/AbstractHTree.html#decodeRecordAddr(byte[])"><code>decodeRecordAddr(byte[])</code></a></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>recordAddrBuf</code> - The buffer that will be used to format the record address.</dd><dd><code>addr</code> - The raw record address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A newly allocated byte[] which encodes that address.</dd></dl>
</li>
</ul>
<a name="decodeRecordAddr(byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>decodeRecordAddr</h4>
<pre>public static&nbsp;long&nbsp;decodeRecordAddr(byte[]&nbsp;buf)</pre>
<div class="block">Decodes a signed long value as encoded by <code>#appendSigned(long)</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>buf</code> - The buffer containing the encoded record address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The signed long value.</dd></dl>
</li>
</ul>
<a name="rangeCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeCount</h4>
<pre>public abstract&nbsp;long&nbsp;rangeCount()</pre>
<div class="block">The #of index entries.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#rangeCount()">rangeCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of tuples in the index.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/btree/IRangeQuery.html#rangeCount()"><code>IRangeQuery.rangeCount()</code></a></dd></dl>
</li>
</ul>
<a name="scan()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>scan</h4>
<pre>public final&nbsp;<a href="../../../cutthecrap/utils/striterators/ICloseableIterator.html" title="interface in cutthecrap.utils.striterators">ICloseableIterator</a>&lt;?&gt;&nbsp;scan()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#scan()">ISimpleIndexAccess</a></code></strong></div>
<div class="block">Visit all entries in the index in the natural order of the index
 (dereferencing visited tuples to the application objects stored within
 those tuples).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html#scan()">scan</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/ISimpleIndexAccess.html" title="interface in com.bigdata.btree">ISimpleIndexAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="rangeIterator()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rangeIterator</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/ITupleIterator.html" title="interface in com.bigdata.btree">ITupleIterator</a>&nbsp;rangeIterator()</pre>
<div class="block">Simple iterator visits all tuples in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> in order by the
 effective prefix of their keys. Since the key is typically a hash of some
 fields in the associated application data record, this will normally
 visit application data records in what appears to be an arbitrary order.
 Tuples within a buddy hash bucket will be delivered in a random order.
 <p>
 Note: The <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> does not currently maintain metadata about the
 #of spanned tuples in a <code>DirectoryPage</code>. Without that we can not
 provide fast range counts, linear list indexing, etc.</div>
</li>
</ul>
<a name="values()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>values</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;byte[]&gt;&nbsp;values()</pre>
<div class="block">Visits the values stored in the <a href="../../../com/bigdata/htree/HTree.html" title="class in com.bigdata.htree"><code>HTree</code></a> in order by the effective
 prefix of their keys. Since the key is typically a hash of some fields in
 the associated application data record, this will normally visit
 application data records in what appears to be an arbitrary order. Tuples
 within a buddy hash bucket will be delivered in a random order.
 <p>
 Note: This allocates a new byte[] for each visited value. It is more
 efficient to reuse a buffer for each visited <code>Tuple</code>. This can be
 done using <a href="../../../com/bigdata/htree/AbstractHTree.html#rangeIterator()"><code>rangeIterator()</code></a>.</div>
</li>
</ul>
<a name="checkConsistency(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkConsistency</h4>
<pre>public&nbsp;void&nbsp;checkConsistency(boolean&nbsp;full)</pre>
<div class="block">Checks globalDepth of each node and also whether any BucketPages
 are empty.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>full</code> - indicates whether to check consistency on disk</dd></dl>
</li>
</ul>
<a name="checkConsistency(com.bigdata.htree.AbstractPage, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkConsistency</h4>
<pre>public&nbsp;void&nbsp;checkConsistency(com.bigdata.htree.AbstractPage&nbsp;pge,
                    boolean&nbsp;full)</pre>
</li>
</ul>
<a name="readLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readLock</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;readLock()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#readLock()">IReadWriteLockManager</a></code></strong></div>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain a shared read lock which
 is used (in the absence of other concurrency control mechanisms) to
 permit concurrent readers on an unisolated index while serializing access
 to that index when a writer must run. This is exposed for processes which
 need to obtain the write lock to coordinate external operations.
 <p>
 Note: If the persistence capable data structure is read-only then the
 returned <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> is a singleton that ignores all lock requests. This
 is because our read-only persistence capable data structures are already
 thread-safe for concurrent readers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#readLock()">readLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The lock.</dd></dl>
</li>
</ul>
<a name="writeLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeLock</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;writeLock()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#writeLock()">IReadWriteLockManager</a></code></strong></div>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that may be used to obtain an exclusive write lock
 which is used (in the absence of other concurrency control mechanisms) to
 serialize all processes accessing an unisolated index when a writer must
 run. This is exposed for processes which need to obtain the write lock to
 coordinate external operations.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#writeLock()">writeLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The lock.</dd></dl>
</li>
</ul>
<a name="getReadLockCount()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getReadLockCount</h4>
<pre>public final&nbsp;int&nbsp;getReadLockCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#getReadLockCount()">IReadWriteLockManager</a></code></strong></div>
<div class="block">Return the #of read-locks held by the current thread for a mutable index
 view.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html#getReadLockCount()">getReadLockCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/btree/IReadWriteLockManager.html" title="interface in com.bigdata.btree">IReadWriteLockManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of reentrant read locks held by the current thread -or- ZERO
         if the index is read-only (read locks are not tracked for a
         read-only index view).</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractHTree.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../com/bigdata/htree/AbstractHTree.HTreePageStateException.html" title="class in com.bigdata.htree"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/htree/AbstractHTree.html" target="_top">Frames</a></li>
<li><a href="AbstractHTree.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
