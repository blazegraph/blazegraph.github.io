<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Jan 21 00:30:54 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>HALogWriter (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="HALogWriter (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":9,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HALogWriter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/ha/halog/HALogReader.html" title="class in com.bigdata.ha.halog"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/ha/halog/HALogWriter.html" target="_top">Frames</a></li>
<li><a href="HALogWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.ha.halog</div>
<h2 title="Class HALogWriter" class="title">Class HALogWriter</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.ha.halog.HALogWriter</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">HALogWriter</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></pre>
<div class="block">Wrapper class to handle process log creation and output for HA.
 <p>
 The process log stores the <a href="../../../../com/bigdata/ha/msg/HAWriteMessage.html" title="class in com.bigdata.ha.msg"><code>HAWriteMessage</code></a> and buffers to support
 reading and reprocessing as part of the HA synchronization protocol.
 <p>
 The writer encapsulates not only the writing of individual messages but also
 the closing and creation of new files.</div>
<dl>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd>Martyn Cutcher</dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#MAGIC">MAGIC</a></span></code>
<div class="block">Magic value for HA Log (the root blocks have their own magic value).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#VERSION1">VERSION1</a></span></code>
<div class="block">HA log version number (version 1).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#HALogWriter-java.io.File-boolean-">HALogWriter</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;logDir,
           boolean&nbsp;doubleSync)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#closeHALog-com.bigdata.journal.IRootBlockView-">closeHALog</a></span>(<a href="../../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Write the final root block on the HA log and close the file.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#createLog-com.bigdata.journal.IRootBlockView-">createLog</a></span>(<a href="../../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Open an HA log file for the write set starting with the given root block.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#disableHALog--">disableHALog</a></span>()</code>
<div class="block">Disable (and remove) the current log file if one is open (an HALog file
 which has been committed by applying its closing root block is NOT
 removed).</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#getCommitCounter--">getCommitCounter</a></span>()</code>
<div class="block">Return the commit counter that is expected for the writes that will be
 logged (the same commit counter that is on the opening root block).</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#getFile--">getFile</a></span>()</code>
<div class="block">Return the log file (if any).</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#getHALogFileName-java.io.File-long-">getHALogFileName</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dir,
                long&nbsp;commitCounter)</code>
<div class="block">Return the HALog file associated with the commit counter.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog">IHALogReader</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#getReader-long-">getReader</a></span>(long&nbsp;commitCounter)</code>
<div class="block">Return the <a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog"><code>IHALogReader</code></a> for the specified commit counter.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#getSequence--">getSequence</a></span>()</code>
<div class="block">Return the sequence number that is expected for the next write.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#isHALogOpen--">isHALogOpen</a></span>()</code>
<div class="block">Return <code>true</code> iff there is an HALog file that is
 currently open for writing.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#toString--">toString</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../../com/bigdata/ha/halog/HALogWriter.html#writeOnHALog-com.bigdata.ha.msg.IHAWriteMessage-java.nio.ByteBuffer-">writeOnHALog</a></span>(<a href="../../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Write the message and the data on the live HALog.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="MAGIC">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAGIC</h4>
<pre>public static final&nbsp;int MAGIC</pre>
<div class="block">Magic value for HA Log (the root blocks have their own magic value).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.bigdata.ha.halog.HALogWriter.MAGIC">Constant Field Values</a></dd>
</dl>
</li>
</ul>
<a name="VERSION1">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>VERSION1</h4>
<pre>public static final&nbsp;int VERSION1</pre>
<div class="block">HA log version number (version 1).</div>
<dl>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="../../../../constant-values.html#com.bigdata.ha.halog.HALogWriter.VERSION1">Constant Field Values</a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="HALogWriter-java.io.File-boolean-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>HALogWriter</h4>
<pre>public&nbsp;HALogWriter(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;logDir,
                   boolean&nbsp;doubleSync)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>logDir</code> - The directory in which the HALog files reside.</dd>
<dd><code>doubleSync</code> - When <code>true</code>, the HALog is flushed to the disk
            before the closing root block is written and then once again
            after the closing root block is written. When
            <code>false</code>, the HALog is flushed only once, after the
            closing root block is written.</dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a
      href="http://sourceforge.net/apps/trac/bigdata/ticket/738#comment:13"
      >Longevity and stress test protocol for HA QA </a>, 
<a href="http://sourceforge.net/apps/trac/bigdata/ticket/679">
      HAJournalServer can not restart due to logically empty log file </a></dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getCommitCounter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitCounter</h4>
<pre>public&nbsp;long&nbsp;getCommitCounter()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#getCommitCounter--">IHALogWriter</a></code></span></div>
<div class="block">Return the commit counter that is expected for the writes that will be
 logged (the same commit counter that is on the opening root block).
 <p>
 Note: Once the HALog is sealed, the closing root block will have a
 commitCounter that is equal to <code>getCommitCounter() + 1</code>.
 <p>
 Note: The HALog filename contains the closing commit counter - that is,
 the HALog file is named for the commit counter associated with the
 closing root block for a given write set.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#getCommitCounter--">getCommitCounter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></code></dd>
</dl>
</li>
</ul>
<a name="getSequence--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSequence</h4>
<pre>public&nbsp;long&nbsp;getSequence()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#getSequence--">IHALogWriter</a></code></span></div>
<div class="block">Return the sequence number that is expected for the next write.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#getSequence--">getSequence</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></code></dd>
</dl>
</li>
</ul>
<a name="isHALogOpen--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isHALogOpen</h4>
<pre>public&nbsp;boolean&nbsp;isHALogOpen()</pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#isHALogOpen--">IHALogWriter</a></code></span></div>
<div class="block">Return <code>true</code> iff there is an HALog file that is
 currently open for writing.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#isHALogOpen--">isHALogOpen</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></code></dd>
</dl>
</li>
</ul>
<a name="getFile--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFile()</pre>
<div class="block">Return the log file (if any).</div>
</li>
</ul>
<a name="getHALogFileName-java.io.File-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHALogFileName</h4>
<pre>public static&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getHALogFileName(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;dir,
                                    long&nbsp;commitCounter)</pre>
<div class="block">Return the HALog file associated with the commit counter.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>dir</code> - The HALog directory.</dd>
<dd><code>commitCounter</code> - The closing commit counter (the HALog file is named for the
            commit counter that will be associated with the closing root
            block).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The HALog <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io"><code>File</code></a>.</dd>
</dl>
</li>
</ul>
<a name="toString--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="createLog-com.bigdata.journal.IRootBlockView-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createLog</h4>
<pre>public&nbsp;void&nbsp;createLog(<a href="../../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)
               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a>,
                      <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Open an HA log file for the write set starting with the given root block.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rootBlock</code> - The root block.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="closeHALog-com.bigdata.journal.IRootBlockView-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeHALog</h4>
<pre>public&nbsp;void&nbsp;closeHALog(<a href="../../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a>,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Write the final root block on the HA log and close the file. This "seals"
 the file, which now represents the entire write set associated with the
 commit point in the given root block.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#closeHALog-com.bigdata.journal.IRootBlockView-">closeHALog</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rootBlock</code> - The final root block for the write set.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a></code></dd>
</dl>
</li>
</ul>
<a name="writeOnHALog-com.bigdata.ha.msg.IHAWriteMessage-java.nio.ByteBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeOnHALog</h4>
<pre>public&nbsp;void&nbsp;writeOnHALog(<a href="../../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)
                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></pre>
<div class="block">Write the message and the data on the live HALog.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#writeOnHALog-com.bigdata.ha.msg.IHAWriteMessage-java.nio.ByteBuffer-">writeOnHALog</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - The message.</dd>
<dd><code>data</code> - The data.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang">IllegalStateException</a></code> - if the message is not appropriate for the state of the log.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if we can not write on the log.</dd>
</dl>
</li>
</ul>
<a name="disableHALog--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>disableHALog</h4>
<pre>public&nbsp;void&nbsp;disableHALog()
                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><span class="descfrmTypeLabel">Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#disableHALog--">IHALogWriter</a></code></span></div>
<div class="block">Disable (and remove) the current log file if one is open (an HALog file
 which has been committed by applying its closing root block is NOT
 removed).</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html#disableHALog--">disableHALog</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/ha/halog/IHALogWriter.html" title="interface in com.bigdata.ha.halog">IHALogWriter</a></code></dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/695">
      HAJournalServer reports "follower" but is in SeekConsensus and is
      not participating in commits</a></dd>
</dl>
</li>
</ul>
<a name="getReader-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getReader</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog">IHALogReader</a>&nbsp;getReader(long&nbsp;commitCounter)
                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a>,
                              <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return the <a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog"><code>IHALogReader</code></a> for the specified commit counter. If the
 request identifies the HALog that is currently being written, then an
 <a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog"><code>IHALogReader</code></a> will be returned that will "see" newly written
 entries on the HALog. If the request identifies a historical HALog that
 has been closed and which exists, then a reader will be returned for that
 HALog file. Otherwise, an exception is thrown.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>commitCounter</code> - The commit counter associated with the commit point at the
            close of the write set (the commit counter that is in the file
            name).</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The <a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog"><code>IHALogReader</code></a>.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - if the commitCounter identifies an HALog file that does not
             exist or can not be read.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/HALogWriter.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/ha/halog/HALogReader.html" title="class in com.bigdata.ha.halog"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../../com/bigdata/ha/halog/IHALogReader.html" title="interface in com.bigdata.ha.halog"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/ha/halog/HALogWriter.html" target="_top">Frames</a></li>
<li><a href="HALogWriter.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field.summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field.detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
