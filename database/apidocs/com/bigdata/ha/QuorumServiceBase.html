<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Sat Jun 18 19:38:17 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>QuorumServiceBase (Blazegraph Database Platform 2.1.2 API)</title>
<meta name="date" content="2016-06-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="QuorumServiceBase (Blazegraph Database Platform 2.1.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QuorumServiceBase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/ha/RunState.html" title="enum in com.bigdata.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/ha/QuorumServiceBase.html" target="_top">Frames</a></li>
<li><a href="QuorumServiceBase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.ha</div>
<h2 title="Class QuorumServiceBase" class="title">Class QuorumServiceBase&lt;S extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>,L extends <a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a>&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/quorum/AbstractQuorumClient.html" title="class in com.bigdata.quorum">com.bigdata.quorum.AbstractQuorumClient</a>&lt;S&gt;</li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/quorum/AbstractQuorumMember.html" title="class in com.bigdata.quorum">com.bigdata.quorum.AbstractQuorumMember</a>&lt;S&gt;</li>
<li>
<ul class="inheritance">
<li>com.bigdata.ha.QuorumServiceBase&lt;S,L&gt;</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/ha/QuorumCommit.html" title="interface in com.bigdata.ha">QuorumCommit</a>&lt;S&gt;, <a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;S&gt;, <a href="../../../com/bigdata/ha/QuorumRead.html" title="interface in com.bigdata.ha">QuorumRead</a>&lt;S&gt;, <a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;S&gt;, <a href="../../../com/bigdata/quorum/QuorumClient.html" title="interface in com.bigdata.quorum">QuorumClient</a>&lt;S&gt;, <a href="../../../com/bigdata/quorum/QuorumListener.html" title="interface in com.bigdata.quorum">QuorumListener</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum">QuorumMember</a>&lt;S&gt;, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html" title="interface in com.bigdata.quorum">QuorumStateChangeListener</a>, <a href="../../../com/bigdata/quorum/ServiceLookup.html" title="interface in com.bigdata.quorum">ServiceLookup</a>&lt;S&gt;</dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">QuorumServiceBase&lt;S extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>,L extends <a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a>&gt;</span>
extends <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html" title="class in com.bigdata.quorum">AbstractQuorumMember</a>&lt;S&gt;
implements <a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;S&gt;</pre>
<div class="block">Abstract implementation provides the logic for distributing messages for the
 quorum 2-phase commit protocol, failover reads, etc.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#log">log</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#QuorumServiceBase(java.lang.String,%20java.util.UUID,%20S,%20L)">QuorumServiceBase</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;logicalServiceId,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceId,
                 <a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a>&nbsp;service,
                 <a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">L</a>&nbsp;localService)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#abort2Phase(long)">abort2Phase</a></strong>(long&nbsp;token)</code>
<div class="block">Used by the leader to send a message to each service joined with the
 quorum telling it to discard its write set, reloading all state from the
 last root block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static &lt;F extends <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;T&gt;,T&gt;&nbsp;<br>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#cancelFutures(java.util.List)">cancelFutures</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;F&gt;&nbsp;futures)</code>
<div class="block">Cancel the requests on the remote services (RMI).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/CommitResponse.html" title="class in com.bigdata.ha">CommitResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#commit2Phase(com.bigdata.ha.CommitRequest)">commit2Phase</a></strong>(<a href="../../../com/bigdata/ha/CommitRequest.html" title="class in com.bigdata.ha">CommitRequest</a>&nbsp;req)</code>
<div class="block">Used by the leader to send a message to each joined service in the quorum
 telling it to commit using the root block from the corresponding
 <a href="../../../com/bigdata/ha/QuorumCommit.html#prepare2Phase(com.bigdata.ha.PrepareRequest)"><code>prepare</code></a> message.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getExecutor()">getExecutor</a></strong>()</code>
<div class="block">An <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ExecutorService</code></a> which may be used by the <a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum"><code>QuorumMember</code></a>
 to run various asynchronous tasks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getLastCommitCounter()">getLastCommitCounter</a></strong>()</code>
<div class="block">Return the lastCommitCounter for this service (based on its current root
 block).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getLastCommitTime()">getLastCommitTime</a></strong>()</code>
<div class="block">Return the lastCommitTime for this service (based on its current root
 block).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">L</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getLocalService()">getLocalService</a></strong>()</code>
<div class="block">FIXME Return the <a href="../../../com/bigdata/journal/IResourceManager.html" title="interface in com.bigdata.journal"><code>IResourceManager</code></a>, <a href="../../../com/bigdata/journal/Journal.html" title="class in com.bigdata.journal"><code>Journal</code></a>, [@link
 DataService}, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getPrepareTimeout()">getPrepareTimeout</a></strong>()</code>
<div class="block">Return the configured timeout in milliseconds that the leader will await
 the other services to prepare for a 2-phase commit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getRetrySendTimeoutNanos()">getRetrySendTimeoutNanos</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getService()">getService</a></strong>()</code>
<div class="block">Return the local service implementation object (NOT the RMI proxy for
 that object).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>abstract <a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getService(java.util.UUID)">getService</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceId)</code>
<div class="block">Return the remote interface used to perform HA operations on a member of
 quorum.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#getStoreUUID()">getStoreUUID</a></strong>()</code>
<div class="block">The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> of the backing store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#handleReplicatedWrite(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">handleReplicatedWrite</a></strong>(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                     <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Core implementation handles the message and payload when received on a
 service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#incReceive(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20int,%20int,%20int)">incReceive</a></strong>(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
          <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
          int&nbsp;nreads,
          int&nbsp;rdlen,
          int&nbsp;rem)</code>
<div class="block">Core implementation of callback for monitoring progress of replicated
 writes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#logRootBlock(com.bigdata.journal.IRootBlockView)">logRootBlock</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Log the root block for the commit point that closes the current write set
 onto the <a href="../../../com/bigdata/ha/halog/HALogWriter.html" title="class in com.bigdata.ha.halog"><code>HALogWriter</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#logWriteCacheBlock(com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">logWriteCacheBlock</a></strong>(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Log the <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated data (if necessary).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/PrepareResponse.html" title="class in com.bigdata.ha">PrepareResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#prepare2Phase(com.bigdata.ha.PrepareRequest)">prepare2Phase</a></strong>(<a href="../../../com/bigdata/ha/PrepareRequest.html" title="class in com.bigdata.ha">PrepareRequest</a>&nbsp;req)</code>
<div class="block">Used by the leader to send a message to each joined service in the quorum
 instructing it to flush all writes to the backing channel, and
 acknowledge "yes" if ready to commit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#processEvents()">processEvents</a></strong>()</code>
<div class="block">Called from ErrorTask in HAJournalServer to ensure that events are
 processed before entering SeekConsensus.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#purgeHALogs(long)">purgeHALogs</a></strong>(long&nbsp;token)</code>
<div class="block">Purge the local HA log files.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#readFromQuorum(java.util.UUID,%20long)">readFromQuorum</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;storeId,
              long&nbsp;addr)</code>
<div class="block">Used by any service joined with the quorum to read a record from another
 service joined with the quorum in order to work around a "bad read" as
 identified by a checksum error on the local service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHASendState,%20com.bigdata.ha.msg.IHAWriteMessage)">receiveAndReplicate</a></strong>(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                   <a href="../../../com/bigdata/ha/msg/IHASendState.html" title="interface in com.bigdata.ha.msg">IHASendState</a>&nbsp;snd,
                   <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg)</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#replicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">replicate</a></strong>(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
         <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/IHAPipelineResetResponse.html" title="interface in com.bigdata.ha">IHAPipelineResetResponse</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/ha/QuorumServiceBase.html#resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">resetPipeline</a></strong>(<a href="../../../com/bigdata/ha/IHAPipelineResetRequest.html" title="interface in com.bigdata.ha">IHAPipelineResetRequest</a>&nbsp;req)</code>
<div class="block">Reset the pipeline (blocking).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.quorum.AbstractQuorumMember">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.quorum.<a href="../../../com/bigdata/quorum/AbstractQuorumMember.html" title="class in com.bigdata.quorum">AbstractQuorumMember</a></h3>
<code><a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#addListener(com.bigdata.quorum.QuorumStateChangeListener)">addListener</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#assertFollower(long)">assertFollower</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#assertLeader(long)">assertLeader</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#assertQuorum(long)">assertQuorum</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#consensus(long)">consensus</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#getActor()">getActor</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#getDownstreamServiceId()">getDownstreamServiceId</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#getLeader(long)">getLeader</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#getServiceId()">getServiceId</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#isFollower(long)">isFollower</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#isJoinedMember(long)">isJoinedMember</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#isLastInChain(long)">isLastInChain</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#isLeader(long)">isLeader</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#isMember()">isMember</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#isPipelineMember()">isPipelineMember</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#lostConsensus()">lostConsensus</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#memberAdd()">memberAdd</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#memberRemove()">memberRemove</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#pipelineAdd()">pipelineAdd</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#pipelineChange(java.util.UUID,%20java.util.UUID)">pipelineChange</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#pipelineElectedLeader()">pipelineElectedLeader</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#pipelineRemove()">pipelineRemove</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#pipelineUpstreamChange()">pipelineUpstreamChange</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#quorumBreak()">quorumBreak</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#quorumMeet(long,%20java.util.UUID)">quorumMeet</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#removeListener(com.bigdata.quorum.QuorumStateChangeListener)">removeListener</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#serviceJoin()">serviceJoin</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#serviceLeave()">serviceLeave</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.quorum.AbstractQuorumClient">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.quorum.<a href="../../../com/bigdata/quorum/AbstractQuorumClient.html" title="class in com.bigdata.quorum">AbstractQuorumClient</a></h3>
<code><a href="../../../com/bigdata/quorum/AbstractQuorumClient.html#disconnected()">disconnected</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumClient.html#getLogicalServiceZPath()">getLogicalServiceZPath</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumClient.html#getQuorum()">getQuorum</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumClient.html#notify(com.bigdata.quorum.QuorumEvent)">notify</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumClient.html#start(com.bigdata.quorum.Quorum)">start</a>, <a href="../../../com/bigdata/quorum/AbstractQuorumClient.html#terminate()">terminate</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.ha.QuorumService">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.ha.<a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a></h3>
<code><a href="../../../com/bigdata/ha/QuorumService.html#discardWriteSet()">discardWriteSet</a>, <a href="../../../com/bigdata/ha/QuorumService.html#enterErrorState()">enterErrorState</a>, <a href="../../../com/bigdata/ha/QuorumService.html#getPID()">getPID</a>, <a href="../../../com/bigdata/ha/QuorumService.html#getServiceDir()">getServiceDir</a>, <a href="../../../com/bigdata/ha/QuorumService.html#installRootBlocks(com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.IRootBlockView)">installRootBlocks</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.quorum.QuorumMember">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.quorum.<a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum">QuorumMember</a></h3>
<code><a href="../../../com/bigdata/quorum/QuorumMember.html#assertLeader(long)">assertLeader</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#getActor()">getActor</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#getDownstreamServiceId()">getDownstreamServiceId</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#getServiceId()">getServiceId</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#isFollower(long)">isFollower</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#isJoinedMember(long)">isJoinedMember</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#isLastInChain(long)">isLastInChain</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#isLeader(long)">isLeader</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#isMember()">isMember</a>, <a href="../../../com/bigdata/quorum/QuorumMember.html#isPipelineMember()">isPipelineMember</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.quorum.QuorumClient">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.quorum.<a href="../../../com/bigdata/quorum/QuorumClient.html" title="interface in com.bigdata.quorum">QuorumClient</a></h3>
<code><a href="../../../com/bigdata/quorum/QuorumClient.html#disconnected()">disconnected</a>, <a href="../../../com/bigdata/quorum/QuorumClient.html#getLeader(long)">getLeader</a>, <a href="../../../com/bigdata/quorum/QuorumClient.html#getLogicalServiceZPath()">getLogicalServiceZPath</a>, <a href="../../../com/bigdata/quorum/QuorumClient.html#getQuorum()">getQuorum</a>, <a href="../../../com/bigdata/quorum/QuorumClient.html#start(com.bigdata.quorum.Quorum)">start</a>, <a href="../../../com/bigdata/quorum/QuorumClient.html#terminate()">terminate</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.quorum.QuorumListener">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.quorum.<a href="../../../com/bigdata/quorum/QuorumListener.html" title="interface in com.bigdata.quorum">QuorumListener</a></h3>
<code><a href="../../../com/bigdata/quorum/QuorumListener.html#notify(com.bigdata.quorum.QuorumEvent)">notify</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.quorum.QuorumStateChangeListener">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.quorum.<a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html" title="interface in com.bigdata.quorum">QuorumStateChangeListener</a></h3>
<code><a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#consensus(long)">consensus</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#lostConsensus()">lostConsensus</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#memberAdd()">memberAdd</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#memberRemove()">memberRemove</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#pipelineAdd()">pipelineAdd</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#pipelineChange(java.util.UUID,%20java.util.UUID)">pipelineChange</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#pipelineElectedLeader()">pipelineElectedLeader</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#pipelineRemove()">pipelineRemove</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#pipelineUpstreamChange()">pipelineUpstreamChange</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#quorumBreak()">quorumBreak</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#quorumMeet(long,%20java.util.UUID)">quorumMeet</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#serviceJoin()">serviceJoin</a>, <a href="../../../com/bigdata/quorum/QuorumStateChangeListener.html#serviceLeave()">serviceLeave</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>log</h4>
<pre>protected static final transient&nbsp;org.apache.log4j.Logger log</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="QuorumServiceBase(java.lang.String,java.util.UUID,com.bigdata.ha.HAGlue,com.bigdata.journal.AbstractJournal)">
<!--   -->
</a><a name="QuorumServiceBase(java.lang.String, java.util.UUID, S, L)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>QuorumServiceBase</h4>
<pre>protected&nbsp;QuorumServiceBase(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;logicalServiceId,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceId,
                 <a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a>&nbsp;service,
                 <a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">L</a>&nbsp;localService)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>logicalServiceId</code> - The identifier of the logical service.</dd><dd><code>serviceId</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> for this service (a physical instance of the
            logical service).</dd><dd><code>service</code> - The interface for the local service that is exposed to remote
            clients (typically as a smart proxy).</dd><dd><code>localService</code> - The local service implementation.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getRetrySendTimeoutNanos()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRetrySendTimeoutNanos</h4>
<pre>protected abstract&nbsp;long&nbsp;getRetrySendTimeoutNanos()</pre>
</li>
</ul>
<a name="getService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getService</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a>&nbsp;getService()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/quorum/QuorumMember.html#getService()">QuorumMember</a></code></strong></div>
<div class="block">Return the local service implementation object (NOT the RMI proxy for
 that object).
 <p>
 A service operating as a <a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum"><code>QuorumMember</code></a> has both <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi"><code>Remote</code></a>
 interface and a non-remote interface. These interfaces typically define
 similar methods (for example, compare <a href="../../../com/bigdata/ha/HACommitGlue.html" title="interface in com.bigdata.ha"><code>HACommitGlue</code></a>, which is
 <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi"><code>Remote</code></a>, with <code>QuorumCommit</code>, which is non-remote). The
 <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi"><code>Remote</code></a> interface in turn will have a local implementation object
 inside of the JVM and an exported proxy for that <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi"><code>Remote</code></a>
 interface. This method returns the <em>local</em> implementation object
 for the <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi"><code>Remote</code></a> interface and is intended to facilitate operations
 which the <a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum"><code>QuorumMember</code></a> executes against its own <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi"><code>Remote</code></a>
 interface. While the <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi"><code>Remote</code></a> interface will be exposed to other
 services using a proxy, how that happens is outside of the scope of this
 method.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/quorum/QuorumMember.html#getService()">getService</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum">QuorumMember</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getService(java.util.UUID)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getService</h4>
<pre>public abstract&nbsp;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a>&nbsp;getService(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceId)</pre>
<div class="block">Return the remote interface used to perform HA operations on a member of
 quorum.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/quorum/QuorumClient.html#getService(java.util.UUID)">getService</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/quorum/QuorumClient.html" title="interface in com.bigdata.quorum">QuorumClient</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/quorum/ServiceLookup.html#getService(java.util.UUID)">getService</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/quorum/ServiceLookup.html" title="interface in com.bigdata.quorum">ServiceLookup</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/quorum/AbstractQuorumMember.html#getService(java.util.UUID)">getService</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/quorum/AbstractQuorumMember.html" title="class in com.bigdata.quorum">AbstractQuorumMember</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>serviceId</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> associated with the service.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The remote interface for that quorum member.</dd></dl>
</li>
</ul>
<a name="getLocalService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLocalService</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">L</a>&nbsp;getLocalService()</pre>
<div class="block">FIXME Return the <a href="../../../com/bigdata/journal/IResourceManager.html" title="interface in com.bigdata.journal"><code>IResourceManager</code></a>, <a href="../../../com/bigdata/journal/Journal.html" title="class in com.bigdata.journal"><code>Journal</code></a>, [@link
 DataService}, etc. Probably rename to getResourceManager().</div>
</li>
</ul>
<a name="getExecutor()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExecutor</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a>&nbsp;getExecutor()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/quorum/QuorumMember.html#getExecutor()">QuorumMember</a></code></strong></div>
<div class="block">An <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>ExecutorService</code></a> which may be used by the <a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum"><code>QuorumMember</code></a>
 to run various asynchronous tasks.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/quorum/QuorumMember.html#getExecutor()">getExecutor</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum">QuorumMember</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest, com.bigdata.ha.msg.IHASendState, com.bigdata.ha.msg.IHAWriteMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveAndReplicate</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;receiveAndReplicate(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                               <a href="../../../com/bigdata/ha/msg/IHASendState.html" title="interface in com.bigdata.ha.msg">IHASendState</a>&nbsp;snd,
                               <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg)
                                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html#receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHASendState,%20com.bigdata.ha.msg.IHAWriteMessage)">QuorumPipeline</a></code></strong></div>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline. This method is invoked for any node except the
 master, including the last node in the failover chain.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHASendState,%20com.bigdata.ha.msg.IHAWriteMessage)">receiveAndReplicate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - A synchronization request (optional). This is only non-null
            when historical <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks are being replayed
            down the write pipeline in order to synchronize a service.</dd><dd><code>snd</code> - Metadata about the state of the sender and potentially the
            routing of the payload along the write replication pipeline.</dd><dd><code>msg</code> - The RMI metadata about the payload.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="replicate(com.bigdata.ha.msg.IHASyncRequest, com.bigdata.ha.msg.IHAWriteMessage, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicate</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;replicate(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                     <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)
                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html#replicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">QuorumPipeline</a></code></strong></div>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline. This method is only invoked by the quorum
 leader. The payload is replicated to the first follower in the write
 pipeline. That follower will accept the payload (and replicate it if
 necessary) using <code>#receiveAndReplicate(IHAWriteMessage)</code>.
 <p>
 Note: The implementation of this method should be robust to changes in
 the write pipeline. Specifically, if a follower leaves the write
 pipeline, it should attempt to retransmit the message and the payload
 while allowing time for the write pipeline to be reconfigured in response
 to the related <a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum"><code>QuorumMember</code></a> events.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#replicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">replicate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - A synchronization request (optional). This is only non-null
            when historical <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks are being replayed
            down the write pipeline in order to synchronize a service.</dd><dd><code>msg</code> - The RMI metadata about the payload.</dd><dd><code>b</code> - The payload. The bytes from the position to the limit will be
            transmitted (note that the #of bytes remaining in the buffer
            MUST agree with <a href="../../../com/bigdata/ha/msg/IHAWriteMessageBase.html#getSize()"><code>IHAWriteMessageBase.getSize()</code></a>).</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetPipeline</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/IHAPipelineResetResponse.html" title="interface in com.bigdata.ha">IHAPipelineResetResponse</a>&gt;&nbsp;resetPipeline(<a href="../../../com/bigdata/ha/IHAPipelineResetRequest.html" title="interface in com.bigdata.ha">IHAPipelineResetRequest</a>&nbsp;req)
                                               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html#resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">QuorumPipeline</a></code></strong></div>
<div class="block">Reset the pipeline (blocking). This message is used to handle an error in
 pipeline replication. If replication fails, the socket connections both
 upstream and downstream of the point of failure can be left in an
 indeterminate state with partially buffered data. In order to bring the
 pipeline back into a known state (without forcing a quorum break) we
 message each service in the pipeline to reset its
 <a href="../../../com/bigdata/ha/pipeline/HAReceiveService.html" title="class in com.bigdata.ha.pipeline"><code>HAReceiveService</code></a> (including the inner <a href="../../../com/bigdata/ha/pipeline/HASendService.html" title="class in com.bigdata.ha.pipeline"><code>HASendService</code></a>). The
 next message and payload relayed from the leader will cause new socket
 connections to be established.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">resetPipeline</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for the operation on the local service.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="handleReplicatedWrite(com.bigdata.ha.msg.IHASyncRequest, com.bigdata.ha.msg.IHAWriteMessage, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>handleReplicatedWrite</h4>
<pre>protected abstract&nbsp;void&nbsp;handleReplicatedWrite(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                         <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)
                                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Core implementation handles the message and payload when received on a
 service.
 <p>
 Note: Replication of the message and payload is handled by the caller.
 The implementation of this method is NOT responsible for replication.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The synchronization request (optional). When non-
            <code>null</code> the message and payload are historical data.
            When <code>null</code> they are live data.</dd><dd><code>msg</code> - Metadata about a buffer containing data replicated to this
            node.</dd><dd><code>data</code> - The buffer containing the data.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><code>QuorumPipelineImpl#handleReplicatedWrite(IHAWriteMessage,
      ByteBuffer)</code></dd></dl>
</li>
</ul>
<a name="incReceive(com.bigdata.ha.msg.IHASyncRequest, com.bigdata.ha.msg.IHAWriteMessage, int, int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>incReceive</h4>
<pre>protected abstract&nbsp;void&nbsp;incReceive(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
              <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
              int&nbsp;nreads,
              int&nbsp;rdlen,
              int&nbsp;rem)
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Core implementation of callback for monitoring progress of replicated
 writes.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The synchronization request (optional). When non-
            <code>null</code> the message and payload are historical data.
            When <code>null</code> they are live data.</dd><dd><code>msg</code> - Metadata about a buffer containing data replicated to this
            node.</dd><dd><code>rdlen</code> - The number of bytes read from the socket in this read.</dd><dd><code>rem</code> - The number of bytes remaining before the payload has been
            fully read.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="logWriteCacheBlock(com.bigdata.ha.msg.IHAWriteMessage, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logWriteCacheBlock</h4>
<pre>public&nbsp;void&nbsp;logWriteCacheBlock(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                      <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)
                        throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Log the <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated data (if necessary).
 The log file for the current write set will be deleted if the quorum is
 fully met at the next 2-phase commit.
 <p>
 Note: The default implementation is a NOP.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#logWriteCacheBlock(com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">logWriteCacheBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a>.</dd><dd><code>data</code> - The <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> block.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="purgeHALogs(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>purgeHALogs</h4>
<pre>public&nbsp;void&nbsp;purgeHALogs(long&nbsp;token)</pre>
<div class="block">Purge the local HA log files. This should be invoked when the service
 goes through a commit point in which the quorum is fully met. At that
 moment, we no longer require these log files to resynchronize any
 service.
 <p>
 Note: The open HALog file is NOT removed by this method.
 <p>
 Note: The default implementation is a NOP.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#purgeHALogs(long)">purgeHALogs</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>token</code> - The quorum token. The quorum must remain fully met for this
            token across this operation. If that invariant is violated
            then the operation will terminate once this violation is
            noticed.</dd></dl>
</li>
</ul>
<a name="logRootBlock(com.bigdata.journal.IRootBlockView)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRootBlock</h4>
<pre>public&nbsp;void&nbsp;logRootBlock(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)
                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Log the root block for the commit point that closes the current write set
 onto the <a href="../../../com/bigdata/ha/halog/HALogWriter.html" title="class in com.bigdata.ha.halog"><code>HALogWriter</code></a>.
 <p>
 Note: This method is ONLY invoked as part of the 2-phase commit protocol.
 Therefore, this method ONLY applies to the live HALog file. A service is
 atomically either joined with the met quorum at a 2-phase commit point or
 not joined. The PREPARE and COMMIT messages are ONLY generated for
 services that were joined with the met quorum as of that atomic decision
 point in the commit protocol. Therefore, this method is never called for
 a service that was not joined as of that atomic decision point.
 <p>
 Note: The default implementation is a NOP.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#logRootBlock(com.bigdata.journal.IRootBlockView)">logRootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>rootBlock</code> - The root block for the commit point that was just achieved.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="abort2Phase(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abort2Phase</h4>
<pre>public&nbsp;void&nbsp;abort2Phase(long&nbsp;token)
                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                        <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumCommit.html#abort2Phase(long)">QuorumCommit</a></code></strong></div>
<div class="block">Used by the leader to send a message to each service joined with the
 quorum telling it to discard its write set, reloading all state from the
 last root block. If the node has not observed the corresponding "prepare"
 message then it should ignore this message.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumCommit.html#abort2Phase(long)">abort2Phase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumCommit.html" title="interface in com.bigdata.ha">QuorumCommit</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>token</code> - The quorum token.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="commit2Phase(com.bigdata.ha.CommitRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit2Phase</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/CommitResponse.html" title="class in com.bigdata.ha">CommitResponse</a>&nbsp;commit2Phase(<a href="../../../com/bigdata/ha/CommitRequest.html" title="class in com.bigdata.ha">CommitRequest</a>&nbsp;req)
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                   <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumCommit.html#commit2Phase(com.bigdata.ha.CommitRequest)">QuorumCommit</a></code></strong></div>
<div class="block">Used by the leader to send a message to each joined service in the quorum
 telling it to commit using the root block from the corresponding
 <a href="../../../com/bigdata/ha/QuorumCommit.html#prepare2Phase(com.bigdata.ha.PrepareRequest)"><code>prepare</code></a> message. The commit MAY
 NOT go forward unless both the current quorum token and the
 lastCommitTime on this message agree with the quorum token and
 lastCommitTime in the root block from the last "prepare" message.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumCommit.html#commit2Phase(com.bigdata.ha.CommitRequest)">commit2Phase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumCommit.html" title="interface in com.bigdata.ha">QuorumCommit</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="prepare2Phase(com.bigdata.ha.PrepareRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare2Phase</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/PrepareResponse.html" title="class in com.bigdata.ha">PrepareResponse</a>&nbsp;prepare2Phase(<a href="../../../com/bigdata/ha/PrepareRequest.html" title="class in com.bigdata.ha">PrepareRequest</a>&nbsp;req)
                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                     <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a>,
                                     <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumCommit.html#prepare2Phase(com.bigdata.ha.PrepareRequest)">QuorumCommit</a></code></strong></div>
<div class="block">Used by the leader to send a message to each joined service in the quorum
 instructing it to flush all writes to the backing channel, and
 acknowledge "yes" if ready to commit. If the service can not prepare for
 any reason, then it must return "no". The service must save a copy of the
 root block for use with the next <code>commit</code>
 message.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumCommit.html#prepare2Phase(com.bigdata.ha.PrepareRequest)">prepare2Phase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumCommit.html" title="interface in com.bigdata.ha">QuorumCommit</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The outcome of the distributed PREPARE request, indicating
         whether each service is prepared to commit.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getStoreUUID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreUUID</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;getStoreUUID()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html#getStoreUUID()">QuorumPipeline</a></code></strong></div>
<div class="block">The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> of the backing store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#getStoreUUID()">getStoreUUID</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getLastCommitTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitTime</h4>
<pre>public final&nbsp;long&nbsp;getLastCommitTime()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumService.html#getLastCommitTime()">QuorumService</a></code></strong></div>
<div class="block">Return the lastCommitTime for this service (based on its current root
 block).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#getLastCommitTime()">getLastCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumService.html#getLastCommitTime()">getLastCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getLastCommitCounter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitCounter</h4>
<pre>public final&nbsp;long&nbsp;getLastCommitCounter()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumService.html#getLastCommitCounter()">QuorumService</a></code></strong></div>
<div class="block">Return the lastCommitCounter for this service (based on its current root
 block).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumPipeline.html#getLastCommitCounter()">getLastCommitCounter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumPipeline.html" title="interface in com.bigdata.ha">QuorumPipeline</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumService.html#getLastCommitCounter()">getLastCommitCounter</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getPrepareTimeout()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPrepareTimeout</h4>
<pre>public&nbsp;long&nbsp;getPrepareTimeout()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumService.html#getPrepareTimeout()">QuorumService</a></code></strong></div>
<div class="block">Return the configured timeout in milliseconds that the leader will await
 the other services to prepare for a 2-phase commit.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumService.html#getPrepareTimeout()">getPrepareTimeout</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="readFromQuorum(java.util.UUID, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFromQuorum</h4>
<pre>public&nbsp;byte[]&nbsp;readFromQuorum(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;storeId,
                    long&nbsp;addr)
                      throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                             <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/QuorumRead.html#readFromQuorum(java.util.UUID,%20long)">QuorumRead</a></code></strong></div>
<div class="block">Used by any service joined with the quorum to read a record from another
 service joined with the quorum in order to work around a "bad read" as
 identified by a checksum error on the local service.
 <p>
 Note: This is NOT the normal path for reading on a record from a service.
 This is used to handle bad reads (when a checksum or IO error is reported
 by the local disk) by reading the record from another member of the
 quorum.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/QuorumRead.html#readFromQuorum(java.util.UUID,%20long)">readFromQuorum</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/QuorumRead.html" title="interface in com.bigdata.ha">QuorumRead</a>&lt;<a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="type parameter in QuorumServiceBase">S</a> extends <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;</code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>storeId</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> of the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> from which the
            record should be read.</dd><dd><code>addr</code> - The address of a record on that store.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The record.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><code>HAGlue#readFromDisk(UUID, long)</code></dd></dl>
</li>
</ul>
<a name="processEvents()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>processEvents</h4>
<pre>protected&nbsp;void&nbsp;processEvents()</pre>
<div class="block">Called from ErrorTask in HAJournalServer to ensure that events are
 processed before entering SeekConsensus.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/695">
 HAJournalServer reports "follower" but is in SeekConsensus and is not
 participating in commits</a></dd></dl>
</li>
</ul>
<a name="cancelFutures(java.util.List)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>cancelFutures</h4>
<pre>public static&nbsp;&lt;F extends <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;T&gt;,T&gt;&nbsp;void&nbsp;cancelFutures(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;F&gt;&nbsp;futures)</pre>
<div class="block">Cancel the requests on the remote services (RMI). This is a best effort
 implementation. Any RMI related errors are trapped and ignored in order
 to be robust to failures in RMI when we try to cancel the futures.
 <p>
 NOte: This is not being done in parallel. However, due to a DGC thread
 leak issue, we now use <a href="../../../com/bigdata/service/proxy/ThickFuture.html" title="class in com.bigdata.service.proxy"><code>ThickFuture</code></a>s. Thus, the tasks that are
 being cancelled are all local tasks running on the
 <code>#executorService</code>. If that local task is doing an RMI, then
 cancelling it will cause an interrupt in the NIO request.</div>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QuorumServiceBase.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/ha/RunState.html" title="enum in com.bigdata.ha"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/ha/QuorumServiceBase.html" target="_top">Frames</a></li>
<li><a href="QuorumServiceBase.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
