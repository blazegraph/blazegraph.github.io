<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Jan 21 00:30:54 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>QuorumPipeline (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="QuorumPipeline (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":6,"i1":6,"i2":6,"i3":6,"i4":6,"i5":6,"i6":6,"i7":6,"i8":6};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],4:["t3","Abstract Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QuorumPipeline.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/ha/QuorumCommitImpl.html" title="class in com.bigdata.ha"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/ha/QuorumPipelineImpl.html" title="class in com.bigdata.ha"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/ha/QuorumPipeline.html" target="_top">Frames</a></li>
<li><a href="QuorumPipeline.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.ha</div>
<h2 title="Interface QuorumPipeline" class="title">Interface QuorumPipeline&lt;S extends <a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a>&gt;</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Subinterfaces:</dt>
<dd><a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;S&gt;</dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/bigdata/ha/QuorumPipelineImpl.html" title="class in com.bigdata.ha">QuorumPipelineImpl</a>, <a href="../../../com/bigdata/ha/QuorumServiceBase.html" title="class in com.bigdata.ha">QuorumServiceBase</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="typeNameLabel">QuorumPipeline&lt;S extends <a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a>&gt;</span></pre>
<div class="block">A non-remote interface for a member service in a <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a> defining
 methods to replicating writes.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t3" class="tableTab"><span><a href="javascript:show(4);">Abstract Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#getLastCommitCounter--">getLastCommitCounter</a></span>()</code>
<div class="block">Return the lastCommitCounter for this service (based on its current root
 block).</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#getLastCommitTime--">getLastCommitTime</a></span>()</code>
<div class="block">Return the lastCommitTime for this service (based on its current root
 block).</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#getStoreUUID--">getStoreUUID</a></span>()</code>
<div class="block">The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> of the backing store.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#logRootBlock-com.bigdata.journal.IRootBlockView-">logRootBlock</a></span>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Log the root block for the commit point that closes the current write set
 onto the <a href="../../../com/bigdata/ha/halog/HALogWriter.html" title="class in com.bigdata.ha.halog"><code>HALogWriter</code></a>.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#logWriteCacheBlock-com.bigdata.ha.msg.IHAWriteMessage-java.nio.ByteBuffer-">logWriteCacheBlock</a></span>(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Log the <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated data (if necessary).</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#purgeHALogs-long-">purgeHALogs</a></span>(long&nbsp;token)</code>
<div class="block">Purge the local HA log files.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#receiveAndReplicate-com.bigdata.ha.msg.IHASyncRequest-com.bigdata.ha.msg.IHASendState-com.bigdata.ha.msg.IHAWriteMessage-">receiveAndReplicate</a></span>(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                   <a href="../../../com/bigdata/ha/msg/IHASendState.html" title="interface in com.bigdata.ha.msg">IHASendState</a>&nbsp;snd,
                   <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg)</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#replicate-com.bigdata.ha.msg.IHASyncRequest-com.bigdata.ha.msg.IHAWriteMessage-java.nio.ByteBuffer-">replicate</a></span>(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
         <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/IHAPipelineResetResponse.html" title="interface in com.bigdata.ha">IHAPipelineResetResponse</a>&gt;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/ha/QuorumPipeline.html#resetPipeline-com.bigdata.ha.IHAPipelineResetRequest-">resetPipeline</a></span>(<a href="../../../com/bigdata/ha/IHAPipelineResetRequest.html" title="interface in com.bigdata.ha">IHAPipelineResetRequest</a>&nbsp;req)</code>
<div class="block">Reset the pipeline (blocking).</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="replicate-com.bigdata.ha.msg.IHASyncRequest-com.bigdata.ha.msg.IHAWriteMessage-java.nio.ByteBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>replicate</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;replicate(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                       <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline. This method is only invoked by the quorum
 leader. The payload is replicated to the first follower in the write
 pipeline. That follower will accept the payload (and replicate it if
 necessary) using <code>#receiveAndReplicate(IHAWriteMessage)</code>.
 <p>
 Note: The implementation of this method should be robust to changes in
 the write pipeline. Specifically, if a follower leaves the write
 pipeline, it should attempt to retransmit the message and the payload
 while allowing time for the write pipeline to be reconfigured in response
 to the related <a href="../../../com/bigdata/quorum/QuorumMember.html" title="interface in com.bigdata.quorum"><code>QuorumMember</code></a> events.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>req</code> - A synchronization request (optional). This is only non-null
            when historical <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks are being replayed
            down the write pipeline in order to synchronize a service.</dd>
<dd><code>msg</code> - The RMI metadata about the payload.</dd>
<dd><code>b</code> - The payload. The bytes from the position to the limit will be
            transmitted (note that the #of bytes remaining in the buffer
            MUST agree with <a href="../../../com/bigdata/ha/msg/IHAWriteMessageBase.html#getSize--"><code>IHAWriteMessageBase.getSize()</code></a>).</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="receiveAndReplicate-com.bigdata.ha.msg.IHASyncRequest-com.bigdata.ha.msg.IHASendState-com.bigdata.ha.msg.IHAWriteMessage-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveAndReplicate</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;receiveAndReplicate(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                                 <a href="../../../com/bigdata/ha/msg/IHASendState.html" title="interface in com.bigdata.ha.msg">IHASendState</a>&nbsp;snd,
                                 <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg)
                          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for a task which will replicate an NIO buffer
 along the write pipeline. This method is invoked for any node except the
 master, including the last node in the failover chain.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>req</code> - A synchronization request (optional). This is only non-null
            when historical <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks are being replayed
            down the write pipeline in order to synchronize a service.</dd>
<dd><code>snd</code> - Metadata about the state of the sender and potentially the
            routing of the payload along the write replication pipeline.</dd>
<dd><code>msg</code> - The RMI metadata about the payload.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="resetPipeline-com.bigdata.ha.IHAPipelineResetRequest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetPipeline</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/IHAPipelineResetResponse.html" title="interface in com.bigdata.ha">IHAPipelineResetResponse</a>&gt;&nbsp;resetPipeline(<a href="../../../com/bigdata/ha/IHAPipelineResetRequest.html" title="interface in com.bigdata.ha">IHAPipelineResetRequest</a>&nbsp;req)
                                        throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Reset the pipeline (blocking). This message is used to handle an error in
 pipeline replication. If replication fails, the socket connections both
 upstream and downstream of the point of failure can be left in an
 indeterminate state with partially buffered data. In order to bring the
 pipeline back into a known state (without forcing a quorum break) we
 message each service in the pipeline to reset its
 <a href="../../../com/bigdata/ha/pipeline/HAReceiveService.html" title="class in com.bigdata.ha.pipeline"><code>HAReceiveService</code></a> (including the inner <a href="../../../com/bigdata/ha/pipeline/HASendService.html" title="class in com.bigdata.ha.pipeline"><code>HASendService</code></a>). The
 next message and payload relayed from the leader will cause new socket
 connections to be established.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - The request.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for the operation on the local service.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="getLastCommitTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitTime</h4>
<pre>long&nbsp;getLastCommitTime()</pre>
<div class="block">Return the lastCommitTime for this service (based on its current root
 block). This supports the <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> which requires this
 information as part of the metadata about replicated <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a>
 blocks.</div>
</li>
</ul>
<a name="getLastCommitCounter--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitCounter</h4>
<pre>long&nbsp;getLastCommitCounter()</pre>
<div class="block">Return the lastCommitCounter for this service (based on its current root
 block). This supports the <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> which requires this
 information as part of the metadata about replicated <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a>
 blocks.</div>
</li>
</ul>
<a name="getStoreUUID--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreUUID</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;getStoreUUID()</pre>
<div class="block">The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> of the backing store.</div>
</li>
</ul>
<a name="logWriteCacheBlock-com.bigdata.ha.msg.IHAWriteMessage-java.nio.ByteBuffer-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logWriteCacheBlock</h4>
<pre>void&nbsp;logWriteCacheBlock(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                        <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)
                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Log the <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated data (if necessary).
 The log file for the current write set will be deleted if the quorum is
 fully met at the next 2-phase commit.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>msg</code> - The <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a>.</dd>
<dd><code>data</code> - The <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> block.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="logRootBlock-com.bigdata.journal.IRootBlockView-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>logRootBlock</h4>
<pre>void&nbsp;logRootBlock(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)
           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Log the root block for the commit point that closes the current write set
 onto the <a href="../../../com/bigdata/ha/halog/HALogWriter.html" title="class in com.bigdata.ha.halog"><code>HALogWriter</code></a>.
 <p>
 Note: This method is ONLY invoked as part of the 2-phase commit protocol.
 Therefore, this method ONLY applies to the live HALog file. A service is
 atomically either joined with the met quorum at a 2-phase commit point or
 not joined. The PREPARE and COMMIT messages are ONLY generated for
 services that were joined with the met quorum as of that atomic decision
 point in the commit protocol. Therefore, this method is never called for
 a service that was not joined as of that atomic decision point.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>rootBlock</code> - The root block for the commit point that was just achieved.</dd>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="purgeHALogs-long-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>purgeHALogs</h4>
<pre>void&nbsp;purgeHALogs(long&nbsp;token)</pre>
<div class="block">Purge the local HA log files. This should be invoked when the service
 goes through a commit point in which the quorum is fully met. At that
 moment, we no longer require these log files to resynchronize any
 service.
 <p>
 Note: The open HALog file is NOT removed by this method.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>token</code> - The quorum token. The quorum must remain fully met for this
            token across this operation. If that invariant is violated
            then the operation will terminate once this violation is
            noticed.</dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/QuorumPipeline.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/ha/QuorumCommitImpl.html" title="class in com.bigdata.ha"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/ha/QuorumPipelineImpl.html" title="class in com.bigdata.ha"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/ha/QuorumPipeline.html" target="_top">Frames</a></li>
<li><a href="QuorumPipeline.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
