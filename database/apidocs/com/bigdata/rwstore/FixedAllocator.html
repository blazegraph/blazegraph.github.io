<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Jan 21 00:30:59 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FixedAllocator (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="FixedAllocator (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":9,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10,"i28":10,"i29":10,"i30":10,"i31":10,"i32":10,"i33":10,"i34":10,"i35":10,"i36":10,"i37":10,"i38":10,"i39":10,"i40":10,"i41":10,"i42":10,"i43":10};
var tabs = {65535:["t0","All Methods"],1:["t1","Static Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FixedAllocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/rwstore/AllocBlock.html" title="class in com.bigdata.rwstore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/rwstore/FixedOutputStream.html" title="class in com.bigdata.rwstore"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/rwstore/FixedAllocator.html" target="_top">Frames</a></li>
<li><a href="FixedAllocator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rwstore</div>
<h2 title="Class FixedAllocator" class="title">Class FixedAllocator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.rwstore.FixedAllocator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">FixedAllocator</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></pre>
<div class="block">FixedAllocator
 
 Maintains List of AllocBlock(s)</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t1" class="tableTab"><span><a href="javascript:show(1);">Static Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#abortAllocationContext-com.bigdata.rawstore.IAllocationContext-com.bigdata.rwstore.RWWriteCacheService-">abortAllocationContext</a></span>(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context,
                      <a href="../../../com/bigdata/rwstore/RWWriteCacheService.html" title="class in com.bigdata.rwstore">RWWriteCacheService</a>&nbsp;writeCacheService)</code>
<div class="block">Unwinds the allocations made within the context and clears the write
 cache of any associated data</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#addAddresses-java.util.ArrayList-">addAddresses</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&nbsp;addrs)</code>&nbsp;</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#addressInRange-int-">addressInRange</a></span>(int&nbsp;addr)</code>&nbsp;</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#addToRegionMap-java.util.HashMap-">addToRegionMap</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../com/bigdata/rwstore/FixedAllocator.html" title="class in com.bigdata.rwstore">FixedAllocator</a>&gt;&nbsp;map)</code>&nbsp;</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#alloc-com.bigdata.rwstore.RWStore-int-com.bigdata.rawstore.IAllocationContext-">alloc</a></span>(<a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore">RWStore</a>&nbsp;store,
     int&nbsp;size,
     <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">The introduction of IAllocationContexts has added some complexity to
 the older concept of a free list.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#appendShortStats-java.lang.StringBuilder-com.bigdata.rwstore.RWStore.AllocationStats:A-">appendShortStats</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;str,
                <a href="../../../com/bigdata/rwstore/RWStore.AllocationStats.html" title="class in com.bigdata.rwstore">RWStore.AllocationStats</a>[]&nbsp;stats)</code>&nbsp;</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#calcBitSize-boolean-int-int-int-">calcBitSize</a></span>(boolean&nbsp;optDensity,
           int&nbsp;alloc,
           int&nbsp;minReserve,
           int&nbsp;modAllocation)</code>
<div class="block">This determines the size of the reservation required in terms of
 the number of ints each holding bits for 32 slots.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#canImmediatelyFree-int-int-com.bigdata.rawstore.IAllocationContext-">canImmediatelyFree</a></span>(int&nbsp;addr,
                  int&nbsp;size,
                  <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">If the context is this allocators context AND it is not in the commit bits
 then we can immediately free.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#compareTo-java.lang.Object-">compareTo</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</code>&nbsp;</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#computeDigest-java.lang.Object-java.security.MessageDigest-">computeDigest</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshot,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html?is-external=true" title="class or interface in java.security">MessageDigest</a>&nbsp;digest)</code>
<div class="block">Add the committed allocated slot contents to the digest
 
 FIXME: First version is correct rather than optimal, need to
 consider if there is any benefit to</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#equals-java.lang.Object-">equals</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</code>&nbsp;</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#free-int-int-">free</a></span>(int&nbsp;addr,
    int&nbsp;size)</code>&nbsp;</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#free-int-int-boolean-">free</a></span>(int&nbsp;addr,
    int&nbsp;size,
    boolean&nbsp;overideSession)</code>
<div class="block">Need to check if address to be freed was 'live' for any shadowed allocator to
 determine if we need to adjust the 'savedLive' data.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getAllocatedBlocks--">getAllocatedBlocks</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getAllocatedSlots--">getAllocatedSlots</a></span>()</code>
<div class="block">Computes the amount of storage allocated using the freeBits count.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/rwstore/AllocBlock.html" title="class in com.bigdata.rwstore">AllocBlock</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getBlockFromLocalOffset-int-">getBlockFromLocalOffset</a></span>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getBlockSize--">getBlockSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getDiskAddr--">getDiskAddr</a></span>()</code>
<div class="block">Return the bit in metabits for the last persisted version of this
 allocator.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getFileStorage--">getFileStorage</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getIndex--">getIndex</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getPhysicalAddress-int-">getPhysicalAddress</a></span>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getPhysicalAddress-int-boolean-">getPhysicalAddress</a></span>(int&nbsp;offset,
                  boolean&nbsp;nocheck)</code>
<div class="block">Return the byte offset on the file corresponding to a bit index into this
 <a href="../../../com/bigdata/rwstore/FixedAllocator.html" title="class in com.bigdata.rwstore"><code>FixedAllocator</code></a>.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getPhysicalSize-int-">getPhysicalSize</a></span>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getRawStartAddr--">getRawStartAddr</a></span>()</code>
<div class="block">returns the raw start address</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getSlotSize--">getSlotSize</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getStartAddr--">getStartAddr</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getStats-java.util.concurrent.atomic.AtomicLong-">getStats</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a>&nbsp;counter)</code>&nbsp;</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#getSummaryStats--">getSummaryStats</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i28" class="altColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#grabAllocation-com.bigdata.rwstore.RWStore-int-">grabAllocation</a></span>(<a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore">RWStore</a>&nbsp;store,
              int&nbsp;blockSize)</code>&nbsp;</td>
</tr>
<tr id="i29" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#hasFree--">hasFree</a></span>()</code>&nbsp;</td>
</tr>
<tr id="i30" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#isAllocated-int-">isAllocated</a></span>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr id="i31" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#isCommitted-int-">isCommitted</a></span>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr id="i32" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#postCommit--">postCommit</a></span>()</code>
<div class="block">Update the historical commit bits only once confirmed</div>
</td>
</tr>
<tr id="i33" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#read-java.io.DataInputStream-">read</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html?is-external=true" title="class or interface in java.io">DataInputStream</a>&nbsp;str)</code>&nbsp;</td>
</tr>
<tr id="i34" class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#removeFreedWrites-com.bigdata.rwstore.FixedAllocator-com.bigdata.cache.ConcurrentWeakValueCache-">removeFreedWrites</a></span>(<a href="../../../com/bigdata/rwstore/FixedAllocator.html" title="class in com.bigdata.rwstore">FixedAllocator</a>&nbsp;xfa,
                 <a href="../../../com/bigdata/cache/ConcurrentWeakValueCache.html" title="class in com.bigdata.cache">ConcurrentWeakValueCache</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a>&gt;&nbsp;externalCache)</code>&nbsp;</td>
</tr>
<tr id="i35" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#setAllocationContext-com.bigdata.rawstore.IAllocationContext-">setAllocationContext</a></span>(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>&nbsp;</td>
</tr>
<tr id="i36" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#setBucketStats-com.bigdata.rwstore.StorageStats.Bucket-">setBucketStats</a></span>(<a href="../../../com/bigdata/rwstore/StorageStats.Bucket.html" title="class in com.bigdata.rwstore">StorageStats.Bucket</a>&nbsp;b)</code>&nbsp;</td>
</tr>
<tr id="i37" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#setDiskAddr-int-">setDiskAddr</a></span>(int&nbsp;addr)</code>
<div class="block">Set the bit in metabits for this allocator.</div>
</td>
</tr>
<tr id="i38" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#setFreeList-java.util.ArrayList-">setFreeList</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&nbsp;list)</code>&nbsp;</td>
</tr>
<tr id="i39" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#setFreeList-java.util.ArrayList-boolean-">setFreeList</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&nbsp;list,
           boolean&nbsp;force)</code>
<div class="block">The force parameter is set to true when the allocator is being moved from one
 free list to another.</div>
</td>
</tr>
<tr id="i40" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#setIndex-int-">setIndex</a></span>(int&nbsp;index)</code>&nbsp;</td>
</tr>
<tr id="i41" class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#verify-int-">verify</a></span>(int&nbsp;addr)</code>&nbsp;</td>
</tr>
<tr id="i42" class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#verifyAllocatedAddress-long-">verifyAllocatedAddress</a></span>(long&nbsp;addr)</code>
<div class="block">Determines if the provided physical address is within an allocated slot</div>
</td>
</tr>
<tr id="i43" class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/rwstore/FixedAllocator.html#write--">write</a></span>()</code>
<div class="block">write called on commit, so this is the point when "transient frees" - the
 freeing of previously committed memory can be made available since we
 are creating a new commit point - the condition being that m_freeBits
 was zero and m_freeTransients not.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString--" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="setIndex-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIndex</h4>
<pre>public&nbsp;void&nbsp;setIndex(int&nbsp;index)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#setIndex-int-">setIndex</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="getStartAddr--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStartAddr</h4>
<pre>public&nbsp;long&nbsp;getStartAddr()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getStartAddr--">getStartAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="compareTo-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compareTo</h4>
<pre>public&nbsp;int&nbsp;compareTo(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true#compareTo-T-" title="class or interface in java.lang">compareTo</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a></code></dd>
</dl>
</li>
</ul>
<a name="equals-java.lang.Object-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>equals</h4>
<pre>public&nbsp;boolean&nbsp;equals(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;o)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Overrides:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="getDiskAddr--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDiskAddr</h4>
<pre>public&nbsp;int&nbsp;getDiskAddr()</pre>
<div class="block">Return the bit in metabits for the last persisted version of this
 allocator. This bit can be translated into the actual byte offset on the
 file by <a href="../../../com/bigdata/rwstore/RWStore.html#metaBit2Addr-int-"><code>RWStore.metaBit2Addr(int)</code></a>.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getDiskAddr--">getDiskAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="setDiskAddr-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setDiskAddr</h4>
<pre>public&nbsp;void&nbsp;setDiskAddr(int&nbsp;addr)</pre>
<div class="block">Set the bit in metabits for this allocator.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#setDiskAddr-int-">setDiskAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addr</code> - A bit obtained from <a href="../../../com/bigdata/rwstore/RWStore.html#metaAlloc--"><code>RWStore.metaAlloc()</code></a>.</dd>
</dl>
</li>
</ul>
<a name="getPhysicalAddress-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalAddress</h4>
<pre>public&nbsp;long&nbsp;getPhysicalAddress(int&nbsp;offset,
                               boolean&nbsp;nocheck)</pre>
<div class="block">Return the byte offset on the file corresponding to a bit index into this
 <a href="../../../com/bigdata/rwstore/FixedAllocator.html" title="class in com.bigdata.rwstore"><code>FixedAllocator</code></a>.
 <p>
 The tweak of 3 to the offset is to ensure 1, that no address is zero and
 2 to enable the values 1 & 2 to be special cased (this aspect is now
 historical).</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>offset</code> - The bit index into the <a href="../../../com/bigdata/rwstore/FixedAllocator.html" title="class in com.bigdata.rwstore"><code>FixedAllocator</code></a>.</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>The byte offset on the backing file.</dd>
</dl>
</li>
</ul>
<a name="getPhysicalSize-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalSize</h4>
<pre>public&nbsp;int&nbsp;getPhysicalSize(int&nbsp;offset)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getPhysicalSize-int-">getPhysicalSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="getBlockSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockSize</h4>
<pre>public&nbsp;int&nbsp;getBlockSize()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getBlockSize--">getBlockSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="setFreeList-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFreeList</h4>
<pre>public&nbsp;void&nbsp;setFreeList(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&nbsp;list)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#setFreeList-java.util.ArrayList-">setFreeList</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="setFreeList-java.util.ArrayList-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setFreeList</h4>
<pre>public&nbsp;void&nbsp;setFreeList(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&nbsp;list,
                        boolean&nbsp;force)</pre>
<div class="block">The force parameter is set to true when the allocator is being moved from one
 free list to another.</div>
</li>
</ul>
<a name="setAllocationContext-com.bigdata.rawstore.IAllocationContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setAllocationContext</h4>
<pre>public&nbsp;void&nbsp;setAllocationContext(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
</li>
</ul>
<a name="abortAllocationContext-com.bigdata.rawstore.IAllocationContext-com.bigdata.rwstore.RWWriteCacheService-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortAllocationContext</h4>
<pre>public&nbsp;void&nbsp;abortAllocationContext(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context,
                                   <a href="../../../com/bigdata/rwstore/RWWriteCacheService.html" title="class in com.bigdata.rwstore">RWWriteCacheService</a>&nbsp;writeCacheService)</pre>
<div class="block">Unwinds the allocations made within the context and clears the write
 cache of any associated data</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>writeCacheService</code> - </dd>
</dl>
</li>
</ul>
<a name="write--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;byte[]&nbsp;write()</pre>
<div class="block">write called on commit, so this is the point when "transient frees" - the
 freeing of previously committed memory can be made available since we
 are creating a new commit point - the condition being that m_freeBits
 was zero and m_freeTransients not.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#write--">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="read-java.io.DataInputStream-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;void&nbsp;read(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/DataInputStream.html?is-external=true" title="class or interface in java.io">DataInputStream</a>&nbsp;str)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#read-java.io.DataInputStream-">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="calcBitSize-boolean-int-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>calcBitSize</h4>
<pre>public static&nbsp;int&nbsp;calcBitSize(boolean&nbsp;optDensity,
                              int&nbsp;alloc,
                              int&nbsp;minReserve,
                              int&nbsp;modAllocation)</pre>
<div class="block">This determines the size of the reservation required in terms of
 the number of ints each holding bits for 32 slots.
 
 The minimum return value will be 1, for a single int holiding 32 bits.
 
 The maximum value will be the number of ints required to fill the minimum
 reservation.
 
 The minimum reservation will be some multiple of the
 address multiplier that allows alloction blocks to address large addresses
 with an INT32.  For example, by setting a minimum reservation at 128K, the
 allocation blocks INT32 start address may be multiplied by 128K to provide
 a physical address.
 
 The minReserve must be a power of 2, eg 1K, 2k or 4K.. etc
 
 A standard minReserve of 16K is plenty big enough, enabling 32TB of
 addressable store.  The logical maximum used store is calculated as the
 maximum fixed allocation size * MAX_INT.  So a store with a maximum
 fixed slot size of 4K could only allocated 8TB.
 
 Since the allocation size must be MOD 0 the minReserve, the lower the 
 minReserve the smaller the allocation may be required for larger
 slot sizes.
 
 Another consideration is file locality.  In this case the emphasis is
 on larger contiguous areas to improve the likely locality of allocations
 made by a FixedAllocator.  Here the addressability implied by the reserve
 is not an issue, and larger reserves are chosen to improve locality.  The
 downside is a potential for more wasted space, but this
 reduces as the store size grows and in large stores (> 10GB) becomes
 insignificant.
 
 Therefore, if a FixedAllocator is to be used in a large store and
 locality needs to be optimised for SATA disk access then the minReserve
 should be high = say 128K, while if the allocator is tuned to ByteBuffer
 allocation, a minallocation of 8 to 16K is more suitable.
 
 A final consideration is allocator reference efficiency in the sense
 to maximise the amount of allocations that can be made.  By this I mean
 just how close we can get to MAX_INT allocations.  For example, if we
 allow for upto 8192 allocations from a single allocator, but in
 practice average closer to 4096 then the maximum number of allocations
 comes down from MAX_INT to MAX_INT/2.  This is also a consideration when
 considering max fixed allocator size, since if we require a large number
 of Blobs this reduces the amount of "virtual" allocations by at least
 a factro of three for each blob (at least 2 fixed allocations for
 content and 1 more for the header).  A variation on the current Blob
 implementation could include the header in the first allocation, thus
 reducing the minimum Blob allocations from 3 to 2, but the point still
 holds that too small a max fixed allocation could dramatically reduce the
 number of allocations that could be made.</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>alloc</code> - the slot size to be managed</dd>
<dd><code>minReserve</code> - the minimum reservation in bytes</dd>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the size of the int array</dd>
</dl>
</li>
</ul>
<a name="getStats-java.util.concurrent.atomic.AtomicLong-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getStats(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicLong.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicLong</a>&nbsp;counter)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getStats-java.util.concurrent.atomic.AtomicLong-">getStats</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="getSummaryStats--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSummaryStats</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getSummaryStats()</pre>
</li>
</ul>
<a name="verify-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verify</h4>
<pre>public&nbsp;boolean&nbsp;verify(int&nbsp;addr)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#verify-int-">verify</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="addressInRange-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addressInRange</h4>
<pre>public&nbsp;boolean&nbsp;addressInRange(int&nbsp;addr)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#addressInRange-int-">addressInRange</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="free-int-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>public&nbsp;boolean&nbsp;free(int&nbsp;addr,
                    int&nbsp;size)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#free-int-int-">free</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="free-int-int-boolean-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>public&nbsp;boolean&nbsp;free(int&nbsp;addr,
                    int&nbsp;size,
                    boolean&nbsp;overideSession)</pre>
<div class="block">Need to check if address to be freed was 'live' for any shadowed allocator to
 determine if we need to adjust the 'savedLive' data.  This is critical since
 otherwise we will not be able to reset any unisolated alloc/frees.</div>
</li>
</ul>
<a name="alloc-com.bigdata.rwstore.RWStore-int-com.bigdata.rawstore.IAllocationContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>alloc</h4>
<pre>public&nbsp;int&nbsp;alloc(<a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore">RWStore</a>&nbsp;store,
                 int&nbsp;size,
                 <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block">The introduction of IAllocationContexts has added some complexity to
 the older concept of a free list.  With AllocationContexts it is
 possibly for allocator to have free space available but this being
 restricted to a specific AllocationContext.
 <p>
 In addition to the standard free allocation search we want to add a
 "density" restriction for small slots to encourage the aggregation
 of writes (by increasing the likelihood of sibling slot allocation).
 <p>
 There is some "Do What I mean" complexity here, with difficulty in 
 determining a good rule to identify an initial allocation point.  There
 is a danger of significantly reducing the allocation efficiency of
 short transactions if we too naively check committed bit density.  We
 should only do this when identifying the initial allocation, and when
 the allocIndex is incremented.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#alloc-com.bigdata.rwstore.RWStore-int-com.bigdata.rawstore.IAllocationContext-">alloc</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="grabAllocation-com.bigdata.rwstore.RWStore-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>grabAllocation</h4>
<pre>protected&nbsp;int&nbsp;grabAllocation(<a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore">RWStore</a>&nbsp;store,
                             int&nbsp;blockSize)</pre>
</li>
</ul>
<a name="hasFree--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasFree</h4>
<pre>public&nbsp;boolean&nbsp;hasFree()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#hasFree--">hasFree</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="addAddresses-java.util.ArrayList-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addAddresses</h4>
<pre>public&nbsp;void&nbsp;addAddresses(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&nbsp;addrs)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#addAddresses-java.util.ArrayList-">addAddresses</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="getRawStartAddr--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRawStartAddr</h4>
<pre>public&nbsp;int&nbsp;getRawStartAddr()</pre>
<div class="block">returns the raw start address</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getRawStartAddr--">getRawStartAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="getIndex--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndex</h4>
<pre>public&nbsp;int&nbsp;getIndex()</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getIndex--">getIndex</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="appendShortStats-java.lang.StringBuilder-com.bigdata.rwstore.RWStore.AllocationStats:A-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendShortStats</h4>
<pre>public&nbsp;void&nbsp;appendShortStats(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;str,
                             <a href="../../../com/bigdata/rwstore/RWStore.AllocationStats.html" title="class in com.bigdata.rwstore">RWStore.AllocationStats</a>[]&nbsp;stats)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#appendShortStats-java.lang.StringBuilder-com.bigdata.rwstore.RWStore.AllocationStats:A-">appendShortStats</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="getAllocatedBlocks--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllocatedBlocks</h4>
<pre>public&nbsp;int&nbsp;getAllocatedBlocks()</pre>
</li>
</ul>
<a name="getFileStorage--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFileStorage</h4>
<pre>public&nbsp;long&nbsp;getFileStorage()</pre>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the amount of heap storage assigned to this allocator over
 all reserved allocation blocks.</dd>
</dl>
</li>
</ul>
<a name="getAllocatedSlots--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllocatedSlots</h4>
<pre>public&nbsp;long&nbsp;getAllocatedSlots()</pre>
<div class="block">Computes the amount of storage allocated using the freeBits count.</div>
<dl>
<dt><span class="returnLabel">Returns:</span></dt>
<dd>the amount of storage to alloted slots in the allocation blocks</dd>
</dl>
</li>
</ul>
<a name="isAllocated-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAllocated</h4>
<pre>public&nbsp;boolean&nbsp;isAllocated(int&nbsp;offset)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#isAllocated-int-">isAllocated</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="isCommitted-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCommitted</h4>
<pre>public&nbsp;boolean&nbsp;isCommitted(int&nbsp;offset)</pre>
</li>
</ul>
<a name="getBlockFromLocalOffset-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockFromLocalOffset</h4>
<pre>protected final&nbsp;<a href="../../../com/bigdata/rwstore/AllocBlock.html" title="class in com.bigdata.rwstore">AllocBlock</a>&nbsp;getBlockFromLocalOffset(int&nbsp;offset)</pre>
</li>
</ul>
<a name="canImmediatelyFree-int-int-com.bigdata.rawstore.IAllocationContext-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>canImmediatelyFree</h4>
<pre>public&nbsp;boolean&nbsp;canImmediatelyFree(int&nbsp;addr,
                                  int&nbsp;size,
                                  <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block">If the context is this allocators context AND it is not in the commit bits
 then we can immediately free.</div>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#canImmediatelyFree-int-int-com.bigdata.rawstore.IAllocationContext-">canImmediatelyFree</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="setBucketStats-com.bigdata.rwstore.StorageStats.Bucket-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setBucketStats</h4>
<pre>public&nbsp;void&nbsp;setBucketStats(<a href="../../../com/bigdata/rwstore/StorageStats.Bucket.html" title="class in com.bigdata.rwstore">StorageStats.Bucket</a>&nbsp;b)</pre>
</li>
</ul>
<a name="getPhysicalAddress-int-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalAddress</h4>
<pre>public&nbsp;long&nbsp;getPhysicalAddress(int&nbsp;offset)</pre>
<dl>
<dt><span class="overrideSpecifyLabel">Specified by:</span></dt>
<dd><code><a href="../../../com/bigdata/rwstore/Allocator.html#getPhysicalAddress-int-">getPhysicalAddress</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/Allocator.html" title="interface in com.bigdata.rwstore">Allocator</a></code></dd>
</dl>
</li>
</ul>
<a name="getSlotSize--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotSize</h4>
<pre>public&nbsp;int&nbsp;getSlotSize()</pre>
</li>
</ul>
<a name="computeDigest-java.lang.Object-java.security.MessageDigest-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeDigest</h4>
<pre>public&nbsp;void&nbsp;computeDigest(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshot,
                          <a href="http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html?is-external=true" title="class or interface in java.security">MessageDigest</a>&nbsp;digest)</pre>
<div class="block">Add the committed allocated slot contents to the digest
 
 FIXME: First version is correct rather than optimal, need to
 consider if there is any benefit to</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>snapshot</code> - </dd>
<dd><code>digest</code> - </dd>
</dl>
</li>
</ul>
<a name="postCommit--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postCommit</h4>
<pre>public&nbsp;void&nbsp;postCommit()</pre>
<div class="block">Update the historical commit bits only once confirmed</div>
</li>
</ul>
<a name="removeFreedWrites-com.bigdata.rwstore.FixedAllocator-com.bigdata.cache.ConcurrentWeakValueCache-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>removeFreedWrites</h4>
<pre>public&nbsp;int&nbsp;removeFreedWrites(<a href="../../../com/bigdata/rwstore/FixedAllocator.html" title="class in com.bigdata.rwstore">FixedAllocator</a>&nbsp;xfa,
                             <a href="../../../com/bigdata/cache/ConcurrentWeakValueCache.html" title="class in com.bigdata.cache">ConcurrentWeakValueCache</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a>&gt;&nbsp;externalCache)</pre>
</li>
</ul>
<a name="verifyAllocatedAddress-long-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>verifyAllocatedAddress</h4>
<pre>public&nbsp;boolean&nbsp;verifyAllocatedAddress(long&nbsp;addr)</pre>
<div class="block">Determines if the provided physical address is within an allocated slot</div>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>addr</code> - </dd>
<dt><span class="returnLabel">Returns:</span></dt>
</dl>
</li>
</ul>
<a name="addToRegionMap-java.util.HashMap-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>addToRegionMap</h4>
<pre>public&nbsp;void&nbsp;addToRegionMap(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/HashMap.html?is-external=true" title="class or interface in java.util">HashMap</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../com/bigdata/rwstore/FixedAllocator.html" title="class in com.bigdata.rwstore">FixedAllocator</a>&gt;&nbsp;map)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FixedAllocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/rwstore/AllocBlock.html" title="class in com.bigdata.rwstore"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/rwstore/FixedOutputStream.html" title="class in com.bigdata.rwstore"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/rwstore/FixedAllocator.html" target="_top">Frames</a></li>
<li><a href="FixedAllocator.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
