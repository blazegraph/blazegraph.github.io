<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Mon Aug 29 21:18:10 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AllocationContext (Blazegraph Database Platform 2.1.4 API)</title>
<meta name="date" content="2016-08-29">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AllocationContext (Blazegraph Database Platform 2.1.4 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AllocationContext.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rwstore/sector/AllocationContext.html" target="_top">Frames</a></li>
<li><a href="AllocationContext.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rwstore.sector</div>
<h2 title="Class AllocationContext" class="title">Class AllocationContext</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.rwstore.sector.AllocationContext</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>, <a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a>, <a href="../../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a>, <a href="../../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a>, <a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a>, <a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a>, <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">AllocationContext</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>, <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></pre>
<div class="block">The <a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html" title="class in com.bigdata.rwstore.sector"><code>AllocationContext</code></a> is used to maintain a handle on allocations
 made within some specific environment (context).
 
 In this way, clearing a context will return all allocations to the more
 general pool.
 
 There are two obvious implementation strategies:
 <ol>
 <li>Retaining set of addresses allocated</li>
 <li>Retaining a copy of the allocated bits</li>
 </ol>
 
 If it was not for the BLOB implementations which require length data to
 manage the freeing of an allocation, it would be efficient to maintain copies
 of the allocation bits. This remains an option for the future but requires a
 relatively complex callback protocol.
 
 For this reason, the initial implementation maintains a set of allocated
 addresses.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Martyn Cutcher</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#AllocationContext(com.bigdata.rwstore.sector.AllocationContext)">AllocationContext</a></strong>(<a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html" title="class in com.bigdata.rwstore.sector">AllocationContext</a>&nbsp;parent)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#AllocationContext(com.bigdata.rwstore.sector.MemoryManager,%20boolean)">AllocationContext</a></strong>(<a href="../../../../com/bigdata/rwstore/sector/MemoryManager.html" title="class in com.bigdata.rwstore.sector">MemoryManager</a>&nbsp;root,
                 boolean&nbsp;isolated)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#abortContext(com.bigdata.rawstore.IAllocationContext)">abortContext</a></strong>(<a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Indicates that the allocation context will no longer be used and that the
 allocations made within the context should be discarded.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#alloc(byte[],%20int,%20com.bigdata.rawstore.IAllocationContext)">alloc</a></strong>(byte[]&nbsp;buf,
     int&nbsp;size,
     <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Writes data on the store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#allocate(java.nio.ByteBuffer)">allocate</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Version of <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20boolean)"><code>IMemoryManager.allocate(ByteBuffer, boolean)</code></a> which is either 
 blocking or non-blocking depending on whether or not the memory
 manager is set in a blocking mode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#allocate(java.nio.ByteBuffer,%20boolean)">allocate</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
        boolean&nbsp;blocks)</code>
<div class="block">Allocates space on the backing resource and copies the provided data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#allocate(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">allocate</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
        <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#allocate(int)">allocate</a></strong>(int&nbsp;nbytes)</code>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#allocate(int,%20boolean)">allocate</a></strong>(int&nbsp;nbytes,
        boolean&nbsp;blocks)</code>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#allocationSize(long)">allocationSize</a></strong>(long&nbsp;addr)</code>
<div class="block">Return the size of the application data for the allocation with the given
 address.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#checkActive()">checkActive</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#checkDeferredFrees(com.bigdata.journal.AbstractJournal)">checkDeferredFrees</a></strong>(<a href="../../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a>&nbsp;abstractJournal)</code>
<div class="block">This method is invoked during the commit protocol and gives the backing
 store an opportunity to check whether storage associated with deferred
 frees can now be released.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#clear()">clear</a></strong>()</code>
<div class="block">Clears all current allocations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#close()">close</a></strong>()</code>
<div class="block">Close the backing storage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#commit()">commit</a></strong>()</code>
<div class="block">Global commit on the backing store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#createAllocationContext()">createAllocationContext</a></strong>()</code>
<div class="block">Create a child allocation context within which the caller may make and
 release allocations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#delete(long,%20com.bigdata.rawstore.IAllocationContext)">delete</a></strong>(long&nbsp;addr,
      <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Delete the data associated with the address within the allocation
 context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#detachContext(com.bigdata.rawstore.IAllocationContext)">detachContext</a></strong>(<a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Indicates that the allocation context will no longer be used, but that
 the allocations made within the context should be preserved.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#free(long)">free</a></strong>(long&nbsp;addr)</code>
<div class="block">Frees the address and makes available for recycling</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#free(long,%20com.bigdata.rawstore.IAllocationContext)">free</a></strong>(long&nbsp;addr,
    <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#free(long,%20int)">free</a></strong>(long&nbsp;addr,
    int&nbsp;size)</code>
<div class="block">Frees allocated storage (clears the bit to enable recycling after
 the next commit).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#get(long)">get</a></strong>(long&nbsp;addr)</code>
<div class="block">Return an array of <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s providing an updatable view onto
 the backing allocation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getAllocationCount()">getAllocationCount</a></strong>()</code>
<div class="block">The #of allocation spanned by this allocation context (including any
 any child allocation contexts).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getAssociatedSlotSize(int)">getAssociatedSlotSize</a></strong>(int&nbsp;addr)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getCommitLock()">getCommitLock</a></strong>()</code>
<div class="block">Optionally return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that must be used (when non-
 <code>null</code>) to make the <a href="../../../../com/bigdata/rwstore/IStore.html#commit()"><code>IStore.commit()</code></a> / <a href="../../../../com/bigdata/rwstore/IStore.html#postCommit()"><code>IStore.postCommit()</code></a>
 strategy atomic.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getCounters()">getCounters</a></strong>()</code>
<div class="block">Return performance counters.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getData(long,%20byte[])">getData</a></strong>(long&nbsp;l,
       byte[]&nbsp;buf)</code>
<div class="block">Read data of a known size from the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getInputStream(long)">getInputStream</a></strong>(long&nbsp;addr)</code>
<div class="block">Return an input stream from which a previously written stream may be read
 back.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getLastReleaseTime()">getLastReleaseTime</a></strong>()</code>
<div class="block">If history is retained this returns the time for which data was most
 recently released.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getMaxSectors()">getMaxSectors</a></strong>()</code>
<div class="block">The maximum number of backing buffers which may be allocated by the
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a> if there is no
 effective limit on the #of backing buffers which may be allocated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getOutputStream()">getOutputStream</a></strong>()</code>
<div class="block">Return an output stream which can be used to write on the backing store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getOutputStream(com.bigdata.rawstore.IAllocationContext)">getOutputStream</a></strong>(<a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Return an output stream which can be used to write on the backing store
 within the given allocation context.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getPhysicalAddress(long)">getPhysicalAddress</a></strong>(long&nbsp;addr)</code>
<div class="block">Determine the unencoded physical address</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getSectorCount()">getSectorCount</a></strong>()</code>
<div class="block">The #of backing buffers in use.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getSectorSize()">getSectorSize</a></strong>()</code>
<div class="block">The size of a backing buffer in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getSlotBytes()">getSlotBytes</a></strong>()</code>
<div class="block">Return the #of bytes of consumed by allocation slots allocated against
 this <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getStoreFile()">getStoreFile</a></strong>()</code>
<div class="block">Retrieves store file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#getUserBytes()">getUserBytes</a></strong>()</code>
<div class="block">Return the #of bytes of application data allocated against this
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#isCommitted(long)">isCommitted</a></strong>(long&nbsp;addr)</code>
<div class="block">Return <code>true</code> iff the allocation having that address is
 flagged as committed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#isIsolated()">isIsolated</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#newAllocationContext(boolean)">newAllocationContext</a></strong>(boolean&nbsp;isolated)</code>
<div class="block">Creates a context to be used to isolate updates to within the context until it
 is released to the parent environment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/rwstore/IRawTx.html" title="interface in com.bigdata.rwstore">IRawTx</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#newTx()">newTx</a></strong>()</code>
<div class="block">A hook used to support session protection by incrementing and
 decrementing a transaction counter within the <a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#postCommit()">postCommit</a></strong>()</code>
<div class="block">Hook that supports synchronization with an external commit before which
 a rollback to "pre-commit" state is supported.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#read(long)">read</a></strong>(long&nbsp;addr)</code>
<div class="block">Return a copy of the data stored at that address.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache,%20int)">registerExternalCache</a></strong>(<a href="../../../../com/bigdata/cache/ConcurrentWeakValueCache.html" title="class in com.bigdata.cache">ConcurrentWeakValueCache</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a>&gt;&nbsp;historicalIndexCache,
                     int&nbsp;byteCount)</code>
<div class="block">Call made from AbstractJournal to register the cache used.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#release()">release</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#saveDeferrals()">saveDeferrals</a></strong>()</code>
<div class="block">Saves the current list of delete blocks, returning the address allocated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html#write(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">write</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
     <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Write the data within the allocation context.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AllocationContext(com.bigdata.rwstore.sector.MemoryManager, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>AllocationContext</h4>
<pre>public&nbsp;AllocationContext(<a href="../../../../com/bigdata/rwstore/sector/MemoryManager.html" title="class in com.bigdata.rwstore.sector">MemoryManager</a>&nbsp;root,
                 boolean&nbsp;isolated)</pre>
</li>
</ul>
<a name="AllocationContext(com.bigdata.rwstore.sector.AllocationContext)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AllocationContext</h4>
<pre>public&nbsp;AllocationContext(<a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html" title="class in com.bigdata.rwstore.sector">AllocationContext</a>&nbsp;parent)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="checkActive()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkActive</h4>
<pre>public final&nbsp;void&nbsp;checkActive()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IAllocationContext.html#checkActive()">checkActive</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a></code></dd>
</dl>
</li>
</ul>
<a name="isIsolated()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isIsolated</h4>
<pre>public&nbsp;boolean&nbsp;isIsolated()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IAllocationContext.html#isIsolated()">isIsolated</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a></code></dd>
</dl>
</li>
</ul>
<a name="allocate(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>public&nbsp;long&nbsp;allocate(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer)">IMemoryManager</a></code></strong></div>
<div class="block">Version of <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20boolean)"><code>IMemoryManager.allocate(ByteBuffer, boolean)</code></a> which is either 
 blocking or non-blocking depending on whether or not the memory
 manager is set in a blocking mode.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer)">allocate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data will be copied to the backing resource. For each
            buffer in this array, the position will be advanced to the
            limit.</dd></dl>
</li>
</ul>
<a name="allocate(java.nio.ByteBuffer, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>public&nbsp;long&nbsp;allocate(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
            boolean&nbsp;blocks)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20boolean)">IMemoryManager</a></code></strong></div>
<div class="block">Allocates space on the backing resource and copies the provided data.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20boolean)">allocate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data will be copied to the backing resource. For each
            buffer in this array, the position will be advanced to the
            limit.</dd><dd><code>blocks</code> - When <code>true</code> the request will block until the memory
            is available for the allocation.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the address to be passed to the get method to retrieve the data.</dd></dl>
</li>
</ul>
<a name="allocate(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>public&nbsp;long&nbsp;allocate(int&nbsp;nbytes)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int)">IMemoryManager</a></code></strong></div>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data. This is the blocking version of
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int)"><code>IMemoryManager.allocate(int)</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int)">allocate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>nbytes</code> - The size of the allocation request.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address of the allocation.</dd></dl>
</li>
</ul>
<a name="allocate(int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>public&nbsp;long&nbsp;allocate(int&nbsp;nbytes,
            boolean&nbsp;blocks)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int,%20boolean)">IMemoryManager</a></code></strong></div>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int,%20boolean)">allocate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>nbytes</code> - The size of the allocation request.</dd><dd><code>blocks</code> - When <code>true</code> the method will block until the
            allocation request can be satisfied. When <code>false</code> a
            <a href="../../../../com/bigdata/rwstore/sector/MemoryManagerOutOfMemory.html" title="class in com.bigdata.rwstore.sector"><code>MemoryManagerOutOfMemory</code></a> will be thrown.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address of the allocation.</dd></dl>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>public&nbsp;void&nbsp;clear()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#clear()">IMemoryManager</a></code></strong></div>
<div class="block">Clears all current allocations. Clearing an allocation context makes the
 backing heap storage available to immediate reallocation. Clearing the
 allocation context of the top-level <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> will release
 any direct <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s back to the pool from which they were
 allocated.
 <p>
 <strong>CAUTION: Do not clear an allocation context until you know that
 all threads with access to that allocation context have either been
 terminated or released their reference to that allocation context.
 </strong></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#clear()">clear</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="free(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>public&nbsp;void&nbsp;free(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long)">IMemoryManager</a></code></strong></div>
<div class="block">Frees the address and makes available for recycling</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long)">free</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - to be freed</dd></dl>
</li>
</ul>
<a name="get(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>[]&nbsp;get(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#get(long)">IMemoryManager</a></code></strong></div>
<div class="block">Return an array of <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s providing an updatable view onto
 the backing allocation.
 <p>
 The ByteBuffer[] return enables the handling of blobs that span more than
 a single slot, without the need to create an intermediate ByteBuffer.
 This method is designed for use with zero-copy NIO. Furthermore, since
 the <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s in the returned array are not read-only, they can
 be updated directly. In this way the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int)"><code>IMemoryManager.allocate(int)</code></a> can be used
 in conjunction with get to provide more flexibility when storing data.
 <p>
 Using ByteBuffer:put the returned array can be efficiently copied to
 another ByteBuffer:
 
 <pre>
 ByteBuffer mybb;
 ByteBuffer[] bufs = get(addr);
 for (ByteBuffer b : bufs) {
        mybb.put(b);
 }
 </pre>
 
 <strong>CAUTION: Do not hold onto the <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a> longer than is
 necessary.</strong> If the allocation is released by <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long)"><code>IMemoryManager.free(long)</code></a>
 or <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#clear()"><code>IMemoryManager.clear()</code></a>, then the memory backing the <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a> could
 be reallocated by another <a href="../../../../com/bigdata/io/DirectBufferPool.html" title="class in com.bigdata.io"><code>DirectBufferPool</code></a> consumer.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#get(long)">get</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - An previously allocated address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>array of ByteBuffers</dd></dl>
</li>
</ul>
<a name="read(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;byte[]&nbsp;read(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#read(long)">IMemoryManager</a></code></strong></div>
<div class="block">Return a copy of the data stored at that address. This method is intended
 for use with patterns where the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> is treated as a
 persistence store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#read(long)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A copy of the data stored at that address.</dd></dl>
</li>
</ul>
<a name="createAllocationContext()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAllocationContext</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a>&nbsp;createAllocationContext()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#createAllocationContext()">IMemoryManager</a></code></strong></div>
<div class="block">Create a child allocation context within which the caller may make and
 release allocations.
 
 TODO Why is the return not an <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore"><code>IAllocationContext</code></a> as well (that
 is, why does <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> not extend <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore"><code>IAllocationContext</code></a>
 ). Also, note that <a href="../../../../com/bigdata/rwstore/IStore.html#commit()"><code>IStore.commit()</code></a> is similar to
 <a href="../../../../com/bigdata/rwstore/IAllocationManager.html#detachContext(com.bigdata.rawstore.IAllocationContext)"><code>IAllocationManager.detachContext(IAllocationContext)</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#createAllocationContext()">createAllocationContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="allocationSize(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocationSize</h4>
<pre>public&nbsp;int&nbsp;allocationSize(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocationSize(long)">IMemoryManager</a></code></strong></div>
<div class="block">Return the size of the application data for the allocation with the given
 address.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocationSize(long)">allocationSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of bytes of in the applications allocation request.</dd></dl>
</li>
</ul>
<a name="getAllocationCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllocationCount</h4>
<pre>public&nbsp;long&nbsp;getAllocationCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getAllocationCount()">IMemoryManager</a></code></strong></div>
<div class="block">The #of allocation spanned by this allocation context (including any
 any child allocation contexts).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getAllocationCount()">getAllocationCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="getSlotBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotBytes</h4>
<pre>public&nbsp;long&nbsp;getSlotBytes()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSlotBytes()">IMemoryManager</a></code></strong></div>
<div class="block">Return the #of bytes of consumed by allocation slots allocated against
 this <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSlotBytes()">getSlotBytes</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="getUserBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserBytes</h4>
<pre>public&nbsp;long&nbsp;getUserBytes()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getUserBytes()">IMemoryManager</a></code></strong></div>
<div class="block">Return the #of bytes of application data allocated against this
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts). Due to
 the overhead of the storage allocation scheme, this value may be smaller
 than <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSlotBytes()"><code>IMemoryManager.getSlotBytes()</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getUserBytes()">getUserBytes</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="getCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounters</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a>&nbsp;getCounters()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">ICounterSetAccess</a></code></strong></div>
<div class="block">Return performance counters.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></code></dd>
</dl>
</li>
</ul>
<a name="getOutputStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputStream</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a>&nbsp;getOutputStream()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rawstore/IStreamStore.html#getOutputStream()">IStreamStore</a></code></strong></div>
<div class="block">Return an output stream which can be used to write on the backing store.
 You can recover the address used to read back the data from the
 <a href="../../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore"><code>IPSOutputStream</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IStreamStore.html#getOutputStream()">getOutputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The output stream.</dd></dl>
</li>
</ul>
<a name="getOutputStream(com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputStream</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a>&nbsp;getOutputStream(<a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#getOutputStream(com.bigdata.rawstore.IAllocationContext)">IAllocationManagerStore</a></code></strong></div>
<div class="block">Return an output stream which can be used to write on the backing store
 within the given allocation context. You can recover the address used to
 read back the data from the <a href="../../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore"><code>IPSOutputStream</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#getOutputStream(com.bigdata.rawstore.IAllocationContext)">getOutputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>context</code> - The context within which any allocations are made by the
            returned <a href="../../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore"><code>IPSOutputStream</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an output stream to stream data to and to retrieve an address to
         later stream the data back.</dd></dl>
</li>
</ul>
<a name="getInputStream(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInputStream</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;getInputStream(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rawstore/IStreamStore.html#getInputStream(long)">IStreamStore</a></code></strong></div>
<div class="block">Return an input stream from which a previously written stream may be read
 back.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IStreamStore.html#getInputStream(long)">getInputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address at which the stream was written.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an input stream for the data for provided address</dd></dl>
</li>
</ul>
<a name="alloc(byte[], int, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>alloc</h4>
<pre>public&nbsp;long&nbsp;alloc(byte[]&nbsp;buf,
         int&nbsp;size,
         <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#alloc(byte[],%20int,%20com.bigdata.rawstore.IAllocationContext)">IStore</a></code></strong></div>
<div class="block">Writes data on the store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#alloc(byte[],%20int,%20com.bigdata.rawstore.IAllocationContext)">alloc</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the allocated address</dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#close()">IStore</a></code></strong></div>
<div class="block">Close the backing storage.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
</dl>
</li>
</ul>
<a name="free(long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>public&nbsp;void&nbsp;free(long&nbsp;addr,
        int&nbsp;size)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#free(long,%20int)">IStore</a></code></strong></div>
<div class="block">Frees allocated storage (clears the bit to enable recycling after
 the next commit).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#free(long,%20int)">free</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - the storage address to be freed</dd></dl>
</li>
</ul>
<a name="getAssociatedSlotSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAssociatedSlotSize</h4>
<pre>public&nbsp;int&nbsp;getAssociatedSlotSize(int&nbsp;addr)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#getAssociatedSlotSize(int)">getAssociatedSlotSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - - the address</dd>
<dt><span class="strong">Returns:</span></dt><dd>the size of the slot associated</dd></dl>
</li>
</ul>
<a name="getData(long, byte[])">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getData</h4>
<pre>public&nbsp;void&nbsp;getData(long&nbsp;l,
           byte[]&nbsp;buf)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#getData(long,%20byte[])">IStore</a></code></strong></div>
<div class="block">Read data of a known size from the store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#getData(long,%20byte[])">getData</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>l</code> - the address of the data</dd><dd><code>buf</code> - the buffer of the size required!</dd></dl>
</li>
</ul>
<a name="getStoreFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreFile</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getStoreFile()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#getStoreFile()">IStore</a></code></strong></div>
<div class="block">Retrieves store file. Can be used to delete the store after the IStore
 has been released</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#getStoreFile()">getStoreFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the File object</dd></dl>
</li>
</ul>
<a name="getSectorSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSectorSize</h4>
<pre>public&nbsp;int&nbsp;getSectorSize()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSectorSize()">IMemoryManager</a></code></strong></div>
<div class="block">The size of a backing buffer in bytes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSectorSize()">getSectorSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="getMaxSectors()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSectors</h4>
<pre>public&nbsp;int&nbsp;getMaxSectors()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getMaxSectors()">IMemoryManager</a></code></strong></div>
<div class="block">The maximum number of backing buffers which may be allocated by the
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a> if there is no
 effective limit on the #of backing buffers which may be allocated.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getMaxSectors()">getMaxSectors</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="getSectorCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSectorCount</h4>
<pre>public&nbsp;int&nbsp;getSectorCount()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSectorCount()">IMemoryManager</a></code></strong></div>
<div class="block">The #of backing buffers in use.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSectorCount()">getSectorCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#commit()">IStore</a></code></strong></div>
<div class="block">Global commit on the backing store. Previously committed data which has
 been marked as <a href="../../../../com/bigdata/rwstore/IStore.html#free(long,%20int)"><code>IStore.free(long, int)</code></a> is now available for recycling.
 However, recycling can not occur if session protection is active.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#commit()">commit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
</dl>
</li>
</ul>
<a name="getCommitLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitLock</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;getCommitLock()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#getCommitLock()">IStore</a></code></strong></div>
<div class="block">Optionally return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that must be used (when non-
 <code>null</code>) to make the <a href="../../../../com/bigdata/rwstore/IStore.html#commit()"><code>IStore.commit()</code></a> / <a href="../../../../com/bigdata/rwstore/IStore.html#postCommit()"><code>IStore.postCommit()</code></a>
 strategy atomic.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#getCommitLock()">getCommitLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
</dl>
</li>
</ul>
<a name="postCommit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postCommit</h4>
<pre>public&nbsp;void&nbsp;postCommit()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html#postCommit()">IStore</a></code></strong></div>
<div class="block">Hook that supports synchronization with an external commit before which
 a rollback to "pre-commit" state is supported.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IStore.html#postCommit()">postCommit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></code></dd>
</dl>
</li>
</ul>
<a name="registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerExternalCache</h4>
<pre>public&nbsp;void&nbsp;registerExternalCache(<a href="../../../../com/bigdata/cache/ConcurrentWeakValueCache.html" title="class in com.bigdata.cache">ConcurrentWeakValueCache</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a>&gt;&nbsp;historicalIndexCache,
                         int&nbsp;byteCount)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache,%20int)">IHistoryManager</a></code></strong></div>
<div class="block">Call made from AbstractJournal to register the cache used. This can then
 be accessed to clear entries when storage is made available for
 re-cycling.
 <p>
 Note: It is not safe to clear at the point of the delete request since
 the data could still be loaded if the data is retained for a period due
 to a non-zero retention period or session protection.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache,%20int)">registerExternalCache</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="checkDeferredFrees(com.bigdata.journal.AbstractJournal)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkDeferredFrees</h4>
<pre>public&nbsp;int&nbsp;checkDeferredFrees(<a href="../../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a>&nbsp;abstractJournal)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#checkDeferredFrees(com.bigdata.journal.AbstractJournal)">IHistoryManager</a></code></strong></div>
<div class="block">This method is invoked during the commit protocol and gives the backing
 store an opportunity to check whether storage associated with deferred
 frees can now be released. The backing store needs to reply the deferred
 free blocks for the commit points that will be released, mark those
 addresses as free, and free the logged delete blocks.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#checkDeferredFrees(com.bigdata.journal.AbstractJournal)">checkDeferredFrees</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>number of addresses freed</dd><dt><span class="strong">See Also:</span></dt><dd><code>AbstractJournal#commitNow()</code></dd></dl>
</li>
</ul>
<a name="newTx()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newTx</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/rwstore/IRawTx.html" title="interface in com.bigdata.rwstore">IRawTx</a>&nbsp;newTx()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#newTx()">IHistoryManager</a></code></strong></div>
<div class="block">A hook used to support session protection by incrementing and
 decrementing a transaction counter within the <a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a>. As long as
 a transaction is active we can not release data which is currently marked
 as freed but was committed at the point the session started.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#newTx()">newTx</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="saveDeferrals()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveDeferrals</h4>
<pre>public&nbsp;long&nbsp;saveDeferrals()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#saveDeferrals()">IHistoryManager</a></code></strong></div>
<div class="block">Saves the current list of delete blocks, returning the address allocated.
 This can be used later to retrieve the addresses of allocations to be
 freed.
 <p>
 Writes the content of currentTxnFreeList to the store.
 <p>
 These are the current buffered frees that have yet been saved into a
 block referenced from the deferredFreeList</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#saveDeferrals()">saveDeferrals</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the address of the deferred addresses saved on the store, or zero
         if none.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/bigdata/journal/DeleteBlockCommitter.html" title="class in com.bigdata.journal"><code>DeleteBlockCommitter</code></a></dd></dl>
</li>
</ul>
<a name="getLastReleaseTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastReleaseTime</h4>
<pre>public&nbsp;long&nbsp;getLastReleaseTime()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#getLastReleaseTime()">IHistoryManager</a></code></strong></div>
<div class="block">If history is retained this returns the time for which data was most
 recently released. No request can be made for data earlier than this.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#getLastReleaseTime()">getLastReleaseTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>latest data release time</dd></dl>
</li>
</ul>
<a name="abortContext(com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortContext</h4>
<pre>public&nbsp;void&nbsp;abortContext(<a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html#abortContext(com.bigdata.rawstore.IAllocationContext)">IAllocationManager</a></code></strong></div>
<div class="block">Indicates that the allocation context will no longer be used and that the
 allocations made within the context should be discarded. The allocations
 associated with the context are discarded, as are any deletes made within
 the scope of that allocation context. The allocators associated with the
 allocation context are return to the global list of available allocators.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html#abortContext(com.bigdata.rawstore.IAllocationContext)">abortContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>context</code> - The application object which serves as the allocation context.</dd></dl>
</li>
</ul>
<a name="detachContext(com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>detachContext</h4>
<pre>public&nbsp;void&nbsp;detachContext(<a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html#detachContext(com.bigdata.rawstore.IAllocationContext)">IAllocationManager</a></code></strong></div>
<div class="block">Indicates that the allocation context will no longer be used, but that
 the allocations made within the context should be preserved. The
 allocations associated with the context are propagated to the parent
 allocation context. The <a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a> is the top-level parent of
 allocation contexts. The allocators associated with the allocation
 context are return to the global list of available allocators.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html#detachContext(com.bigdata.rawstore.IAllocationContext)">detachContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>context</code> - The application object which serves as the allocation context.</dd></dl>
</li>
</ul>
<a name="isCommitted(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCommitted</h4>
<pre>public&nbsp;boolean&nbsp;isCommitted(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#isCommitted(long)">IMemoryManager</a></code></strong></div>
<div class="block">Return <code>true</code> iff the allocation having that address is
 flagged as committed. The caller must be holding the allocation lock in
 order for the result to remain valid outside of the method call.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#isCommitted(long)">isCommitted</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the address is currently committed.</dd></dl>
</li>
</ul>
<a name="getPhysicalAddress(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalAddress</h4>
<pre>public&nbsp;long&nbsp;getPhysicalAddress(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getPhysicalAddress(long)">IMemoryManager</a></code></strong></div>
<div class="block">Determine the unencoded physical address</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getPhysicalAddress(long)">getPhysicalAddress</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The encoded address</dd>
<dt><span class="strong">Returns:</span></dt><dd>an unencoded address offset</dd></dl>
</li>
</ul>
<a name="allocate(java.nio.ByteBuffer, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>public&nbsp;long&nbsp;allocate(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
            <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">allocate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="write(java.nio.ByteBuffer, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;long&nbsp;write(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
         <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#write(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">IAllocationManagerStore</a></code></strong></div>
<div class="block">Write the data within the allocation context. The write is not visible
 outside of the allocation until the allocation context has been merged
 into the parent allocation context.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#write(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data.</dd><dd><code>context</code> - The allocation context.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address at which the data was written.</dd></dl>
</li>
</ul>
<a name="free(long, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>public&nbsp;void&nbsp;free(long&nbsp;addr,
        <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long,%20com.bigdata.rawstore.IAllocationContext)">free</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="delete(long, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(long&nbsp;addr,
          <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#delete(long,%20com.bigdata.rawstore.IAllocationContext)">IAllocationManagerStore</a></code></strong></div>
<div class="block">Delete the data associated with the address within the allocation
 context. The delete is not visible outside of the allocation until the
 allocation context has been merged into the parent allocation context.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#delete(long,%20com.bigdata.rawstore.IAllocationContext)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address whose allocation is to be deleted.</dd><dd><code>context</code> - The allocation context.</dd></dl>
</li>
</ul>
<a name="newAllocationContext(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newAllocationContext</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;newAllocationContext(boolean&nbsp;isolated)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html#newAllocationContext(boolean)">IAllocationManager</a></code></strong></div>
<div class="block">Creates a context to be used to isolate updates to within the context until it
 is released to the parent environment.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html#newAllocationContext(boolean)">newAllocationContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a new IAlocationContext</dd></dl>
</li>
</ul>
<a name="release()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>release</h4>
<pre>public&nbsp;void&nbsp;release()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rawstore/IAllocationContext.html#release()">release</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AllocationContext.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rwstore/sector/AllocationContext.html" target="_top">Frames</a></li>
<li><a href="AllocationContext.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
