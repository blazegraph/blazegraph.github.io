<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Tue Jan 26 02:01:46 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>SectorAllocator (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)</title>
<meta name="date" content="2016-01-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="SectorAllocator (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SectorAllocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/rwstore/sector/PSInputStream.html" title="class in com.bigdata.rwstore.sector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/rwstore/sector/TestAll.html" title="class in com.bigdata.rwstore.sector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rwstore/sector/SectorAllocator.html" target="_top">Frames</a></li>
<li><a href="SectorAllocator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rwstore.sector</div>
<h2 title="Class SectorAllocator" class="title">Class SectorAllocator</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.rwstore.sector.SectorAllocator</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html" title="class in com.bigdata.rwstore.sector">SectorAllocator</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">SectorAllocator</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html" title="class in com.bigdata.rwstore.sector">SectorAllocator</a>&gt;</pre>
<div class="block">The SectorAllocator is designed as an alternative the the standard RWStore
 FixedAllocators.
 
 The idea of the SectorAllocator is to efficiently contain within a single
 region as dense a usage as possible.  Since a SectorAllocator is able to
 allocate a full range of slot sizes, it should be able to service several
 thousand allocations and maximise disk locality on write.
 
 Furthermore, it presents an option to be synced with the backing store -
 similarly to a MappedFile, in which case a single write for the entire
 sector could be made for update.
 
 What we do not want is to run out of bits and to leave significant unused
 space in the sector.  This could happen if we primarily allocated small
 slots - say on average 512 bytes.  In this case, the maximum 1636 entries
 would map 1636 * 32 * 512 bytes => only just over 26M, so a 64M sector
 is massively wasteful.  The solution is to increment the sector reserve
 as required for each tab, say by a minimum of 256K while ensuring always less
 than 64M.  Bit waste in the allocator - where the sector memory is allocated
 with far fewer bits than available is less of an issue, although it does
 impact on teh total number of allocations available.  The absolute maximum
 size of an RWStore is derived from the maximum sector size * the number
 of sectors.  An 8K sector allows for 32K bits, which, which only requires
 15 unsigned bits, leaving a signed17bits for the sector index = 64K of
 sectors.  Implying a maximum addressable store file of 64M * 64K,
 = 4TB of full sectors.  If the average sector only requires 32M, then the
 total store would be reduced appropriately.
 
 The maximum theoretical storage is yielded by MAX_INT * AVG_SLOT_SIZE, so
 2GB * 2K (avg) would equate to the optimal maximum addressable allocations
 and file size.  An AVG of > 2K yields fewer allocations and an AVG of < 2K
 a reduced file size.
 
 TODO: add parameterisation of META_SIZE for exploitation by MemoryManager.
 TODO: cache block starts in m_addresses to simplify/optimise bit2Offset
 
 When a new SectorAllocator is at the head of the free list, a store
 such as the RWSectorStore can use an in-memory buffer to write the data
 to - sized to the full size of the sector.  This can be written in a single
 write to the WriteCacheService.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Martyn Cutcher</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#ALLOC_SIZES">ALLOC_SIZES</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#BLOB_SIZE">BLOB_SIZE</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#SectorAllocator(com.bigdata.rwstore.sector.ISectorManager,%20com.bigdata.rwstore.IWriteCacheManager)">SectorAllocator</a></strong>(<a href="../../../../com/bigdata/rwstore/sector/ISectorManager.html" title="interface in com.bigdata.rwstore.sector">ISectorManager</a>&nbsp;store,
               <a href="../../../../com/bigdata/rwstore/IWriteCacheManager.html" title="interface in com.bigdata.rwstore">IWriteCacheManager</a>&nbsp;writes)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#addAddresses(java.util.ArrayList)">addAddresses</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;addrs)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#addressSize(int)">addressSize</a></strong>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#alloc(int)">alloc</a></strong>(int&nbsp;size)</code>
<div class="block">Must find tag type that size fits in (or BLOB) and then find
 block of type into which an allocation can be made.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#bit2tag(int)">bit2tag</a></strong>(int&nbsp;bit)</code>
<div class="block">Since we know that all allocations are 32 bits each, there is no need to
 scan through the array.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#commit()">commit</a></strong>()</code>
<div class="block">Called from MemoryManager to commit bits</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#compareTo(com.bigdata.rwstore.sector.SectorAllocator)">compareTo</a></strong>(<a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html" title="class in com.bigdata.rwstore.sector">SectorAllocator</a>&nbsp;other)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#free(int)">free</a></strong>(int&nbsp;bit)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getBlobBlockCount(int)">getBlobBlockCount</a></strong>(int&nbsp;size)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getBlockForSize(int)">getBlockForSize</a></strong>(int&nbsp;size)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getIndex()">getIndex</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getPhysicalAddress(int)">getPhysicalAddress</a></strong>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getPhysicalSize(int)">getPhysicalSize</a></strong>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getSectorIndex(int)">getSectorIndex</a></strong>(int&nbsp;rwaddr)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getSectorOffset(int)">getSectorOffset</a></strong>(int&nbsp;rwaddr)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getStartAddr()">getStartAddr</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#getStats()">getStats</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#hasFree()">hasFree</a></strong>()</code>
<div class="block">Checks</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#hasFree(int)">hasFree</a></strong>(int&nbsp;threshold)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#isCommitted(int)">isCommitted</a></strong>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#isGettable(int)">isGettable</a></strong>(int&nbsp;offset)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#makeAddr(int,%20int)">makeAddr</a></strong>(int&nbsp;index,
        int&nbsp;bit)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#preserveSessionData()">preserveSessionData</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#releaseSession(com.bigdata.rwstore.IWriteCacheManager)">releaseSession</a></strong>(<a href="../../../../com/bigdata/rwstore/IWriteCacheManager.html" title="interface in com.bigdata.rwstore">IWriteCacheManager</a>&nbsp;cache)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#setIndex(int)">setIndex</a></strong>(int&nbsp;index)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#setSectorAddress(long,%20int)">setSectorAddress</a></strong>(long&nbsp;sectorAddress,
                int&nbsp;maxsize)</code>
<div class="block">As well as setting the address, this is the point when the
 allocator can pre-allocate the first set of tags.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="BLOB_SIZE">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>BLOB_SIZE</h4>
<pre>public static final&nbsp;int BLOB_SIZE</pre>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../constant-values.html#com.bigdata.rwstore.sector.SectorAllocator.BLOB_SIZE">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="ALLOC_SIZES">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ALLOC_SIZES</h4>
<pre>public static final&nbsp;int[] ALLOC_SIZES</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="SectorAllocator(com.bigdata.rwstore.sector.ISectorManager, com.bigdata.rwstore.IWriteCacheManager)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>SectorAllocator</h4>
<pre>public&nbsp;SectorAllocator(<a href="../../../../com/bigdata/rwstore/sector/ISectorManager.html" title="interface in com.bigdata.rwstore.sector">ISectorManager</a>&nbsp;store,
               <a href="../../../../com/bigdata/rwstore/IWriteCacheManager.html" title="interface in com.bigdata.rwstore">IWriteCacheManager</a>&nbsp;writes)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="alloc(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>alloc</h4>
<pre>public&nbsp;int&nbsp;alloc(int&nbsp;size)</pre>
<div class="block">Must find tag type that size fits in (or BLOB) and then find
 block of type into which an allocation can be made.</div>
</li>
</ul>
<a name="makeAddr(int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>makeAddr</h4>
<pre>public static&nbsp;int&nbsp;makeAddr(int&nbsp;index,
           int&nbsp;bit)</pre>
</li>
</ul>
<a name="free(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>public&nbsp;boolean&nbsp;free(int&nbsp;bit)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bit</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd></dd></dl>
</li>
</ul>
<a name="bit2tag(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>bit2tag</h4>
<pre>public&nbsp;int&nbsp;bit2tag(int&nbsp;bit)</pre>
<div class="block">Since we know that all allocations are 32 bits each, there is no need to
 scan through the array.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bit</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>the tag of the bit</dd></dl>
</li>
</ul>
<a name="getPhysicalAddress(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalAddress</h4>
<pre>public&nbsp;long&nbsp;getPhysicalAddress(int&nbsp;offset)</pre>
</li>
</ul>
<a name="getPhysicalSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalSize</h4>
<pre>public&nbsp;int&nbsp;getPhysicalSize(int&nbsp;offset)</pre>
</li>
</ul>
<a name="getStartAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStartAddr</h4>
<pre>public&nbsp;long&nbsp;getStartAddr()</pre>
</li>
</ul>
<a name="getStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStats</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getStats()</pre>
</li>
</ul>
<a name="hasFree(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasFree</h4>
<pre>public&nbsp;boolean&nbsp;hasFree(int&nbsp;threshold)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>threshold</code> - the minimum number of bits free per 32 bit block</dd>
<dt><span class="strong">Returns:</span></dt><dd>whether there are sufficient free for all block sizes</dd></dl>
</li>
</ul>
<a name="hasFree()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>hasFree</h4>
<pre>public&nbsp;boolean&nbsp;hasFree()</pre>
<div class="block">Checks</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>if there is a positive free count for all tags</dd></dl>
</li>
</ul>
<a name="preserveSessionData()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>preserveSessionData</h4>
<pre>public&nbsp;void&nbsp;preserveSessionData()</pre>
</li>
</ul>
<a name="addressSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addressSize</h4>
<pre>public&nbsp;int&nbsp;addressSize(int&nbsp;offset)</pre>
</li>
</ul>
<a name="setIndex(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setIndex</h4>
<pre>public&nbsp;void&nbsp;setIndex(int&nbsp;index)</pre>
</li>
</ul>
<a name="addAddresses(java.util.ArrayList)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>addAddresses</h4>
<pre>public&nbsp;void&nbsp;addAddresses(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/ArrayList.html?is-external=true" title="class or interface in java.util">ArrayList</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;addrs)</pre>
</li>
</ul>
<a name="setSectorAddress(long, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setSectorAddress</h4>
<pre>public&nbsp;void&nbsp;setSectorAddress(long&nbsp;sectorAddress,
                    int&nbsp;maxsize)</pre>
<div class="block">As well as setting the address, this is the point when the
 allocator can pre-allocate the first set of tags.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>sectorAddress</code> - managed by this Allocator</dd></dl>
</li>
</ul>
<a name="getSectorIndex(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSectorIndex</h4>
<pre>public static&nbsp;int&nbsp;getSectorIndex(int&nbsp;rwaddr)</pre>
</li>
</ul>
<a name="getSectorOffset(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSectorOffset</h4>
<pre>public static&nbsp;int&nbsp;getSectorOffset(int&nbsp;rwaddr)</pre>
</li>
</ul>
<a name="getBlobBlockCount(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlobBlockCount</h4>
<pre>public static&nbsp;int&nbsp;getBlobBlockCount(int&nbsp;size)</pre>
</li>
</ul>
<a name="getBlockForSize(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockForSize</h4>
<pre>public static&nbsp;int&nbsp;getBlockForSize(int&nbsp;size)</pre>
</li>
</ul>
<a name="compareTo(com.bigdata.rwstore.sector.SectorAllocator)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>compareTo</h4>
<pre>public&nbsp;int&nbsp;compareTo(<a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html" title="class in com.bigdata.rwstore.sector">SectorAllocator</a>&nbsp;other)</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true#compareTo(T)" title="class or interface in java.lang">compareTo</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Comparable.html?is-external=true" title="class or interface in java.lang">Comparable</a>&lt;<a href="../../../../com/bigdata/rwstore/sector/SectorAllocator.html" title="class in com.bigdata.rwstore.sector">SectorAllocator</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="getIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndex</h4>
<pre>public&nbsp;int&nbsp;getIndex()</pre>
</li>
</ul>
<a name="releaseSession(com.bigdata.rwstore.IWriteCacheManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseSession</h4>
<pre>public&nbsp;void&nbsp;releaseSession(<a href="../../../../com/bigdata/rwstore/IWriteCacheManager.html" title="interface in com.bigdata.rwstore">IWriteCacheManager</a>&nbsp;cache)</pre>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit()</pre>
<div class="block">Called from MemoryManager to commit bits</div>
</li>
</ul>
<a name="isCommitted(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCommitted</h4>
<pre>public&nbsp;boolean&nbsp;isCommitted(int&nbsp;offset)</pre>
</li>
</ul>
<a name="isGettable(int)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>isGettable</h4>
<pre>public&nbsp;boolean&nbsp;isGettable(int&nbsp;offset)</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/SectorAllocator.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/rwstore/sector/PSInputStream.html" title="class in com.bigdata.rwstore.sector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/rwstore/sector/TestAll.html" title="class in com.bigdata.rwstore.sector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rwstore/sector/SectorAllocator.html" target="_top">Frames</a></li>
<li><a href="SectorAllocator.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
