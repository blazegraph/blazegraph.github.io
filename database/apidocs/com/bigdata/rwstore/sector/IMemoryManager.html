<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Sat Jun 18 19:37:58 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>IMemoryManager (Blazegraph Database Platform 2.1.2 API)</title>
<meta name="date" content="2016-06-18">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IMemoryManager (Blazegraph Database Platform 2.1.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IMemoryManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html" title="class in com.bigdata.rwstore.sector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/rwstore/sector/ISectorManager.html" title="interface in com.bigdata.rwstore.sector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rwstore/sector/IMemoryManager.html" target="_top">Frames</a></li>
<li><a href="IMemoryManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rwstore.sector</div>
<h2 title="Interface IMemoryManager" class="title">Interface IMemoryManager</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Superinterfaces:</dt>
<dd><a href="../../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a>, <a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a>, <a href="../../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a>, <a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a>, <a href="../../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a></dd>
</dl>
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html" title="class in com.bigdata.rwstore.sector">AllocationContext</a>, <a href="../../../../com/bigdata/rwstore/sector/MemoryManager.html" title="class in com.bigdata.rwstore.sector">MemoryManager</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">IMemoryManager</span>
extends <a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a>, <a href="../../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></pre>
<div class="block">Abstraction for managing data in <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s. Typically those buffers
 will be allocated on the native process heap.
 <p>
 <strong>CAUTION: The memory manager helps you manage direct storage. However,
 it does not prevent you from doing something stupid with it.</strong> The
 most likely error is one in which you <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#get(long)"><code>get(long)</code></a> an address and hold
 onto the returned <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a> after the data at that address has been
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long)"><code>freed</code></a>. This can leave you in a position where you are
 reading on (or writing on!) someone else's data on the JVM native heap. The
 memory manager works with <a href="../../../../com/bigdata/io/DirectBufferPool.html" title="class in com.bigdata.io"><code>DirectBufferPool</code></a>s. This class provides the
 efficient reuse of direct allocations, but does not release them back to the
 JVM. For this reason, if you do stomp on someone's memory, it will not be
 memory in use by the JVM but only memory in use by another part of your
 application using the same <a href="../../../../com/bigdata/io/DirectBufferPool.html" title="class in com.bigdata.io"><code>DirectBufferPool</code></a> instance.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>martyncutcher</dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer)">allocate</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Version of <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20boolean)"><code>allocate(ByteBuffer, boolean)</code></a> which is either 
 blocking or non-blocking depending on whether or not the memory
 manager is set in a blocking mode.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20boolean)">allocate</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
        boolean&nbsp;blocks)</code>
<div class="block">Allocates space on the backing resource and copies the provided data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">allocate</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
        <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int)">allocate</a></strong>(int&nbsp;nbytes)</code>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int,%20boolean)">allocate</a></strong>(int&nbsp;nbytes,
        boolean&nbsp;blocks)</code>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocationSize(long)">allocationSize</a></strong>(long&nbsp;addr)</code>
<div class="block">Return the size of the application data for the allocation with the given
 address.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#clear()">clear</a></strong>()</code>
<div class="block">Clears all current allocations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#createAllocationContext()">createAllocationContext</a></strong>()</code>
<div class="block">Create a child allocation context within which the caller may make and
 release allocations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long)">free</a></strong>(long&nbsp;addr)</code>
<div class="block">Frees the address and makes available for recycling</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long,%20com.bigdata.rawstore.IAllocationContext)">free</a></strong>(long&nbsp;addr,
    <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#get(long)">get</a></strong>(long&nbsp;addr)</code>
<div class="block">Return an array of <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s providing an updatable view onto
 the backing allocation.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getAllocationCount()">getAllocationCount</a></strong>()</code>
<div class="block">The #of allocation spanned by this allocation context (including any
 any child allocation contexts).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getMaxSectors()">getMaxSectors</a></strong>()</code>
<div class="block">The maximum number of backing buffers which may be allocated by the
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a> if there is no
 effective limit on the #of backing buffers which may be allocated.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getPhysicalAddress(long)">getPhysicalAddress</a></strong>(long&nbsp;addr)</code>
<div class="block">Determine the unencoded physical address</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSectorCount()">getSectorCount</a></strong>()</code>
<div class="block">The #of backing buffers in use.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSectorSize()">getSectorSize</a></strong>()</code>
<div class="block">The size of a backing buffer in bytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSlotBytes()">getSlotBytes</a></strong>()</code>
<div class="block">Return the #of bytes of consumed by allocation slots allocated against
 this <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getUserBytes()">getUserBytes</a></strong>()</code>
<div class="block">Return the #of bytes of application data allocated against this
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#isCommitted(long)">isCommitted</a></strong>(long&nbsp;addr)</code>
<div class="block">Return <code>true</code> iff the allocation having that address is
 flagged as committed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#read(long)">read</a></strong>(long&nbsp;addr)</code>
<div class="block">Return a copy of the data stored at that address.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rwstore.IStore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rwstore.<a href="../../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore">IStore</a></h3>
<code><a href="../../../../com/bigdata/rwstore/IStore.html#alloc(byte[],%20int,%20com.bigdata.rawstore.IAllocationContext)">alloc</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#close()">close</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#commit()">commit</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#free(long,%20int)">free</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#getAssociatedSlotSize(int)">getAssociatedSlotSize</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#getCommitLock()">getCommitLock</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#getData(long,%20byte[])">getData</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#getStoreFile()">getStoreFile</a>, <a href="../../../../com/bigdata/rwstore/IStore.html#postCommit()">postCommit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rwstore.IAllocationManager">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rwstore.<a href="../../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a></h3>
<code><a href="../../../../com/bigdata/rwstore/IAllocationManager.html#abortContext(com.bigdata.rawstore.IAllocationContext)">abortContext</a>, <a href="../../../../com/bigdata/rwstore/IAllocationManager.html#detachContext(com.bigdata.rawstore.IAllocationContext)">detachContext</a>, <a href="../../../../com/bigdata/rwstore/IAllocationManager.html#newAllocationContext(boolean)">newAllocationContext</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rwstore.IHistoryManager">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rwstore.<a href="../../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></h3>
<code><a href="../../../../com/bigdata/rwstore/IHistoryManager.html#checkDeferredFrees(com.bigdata.journal.AbstractJournal)">checkDeferredFrees</a>, <a href="../../../../com/bigdata/rwstore/IHistoryManager.html#getLastReleaseTime()">getLastReleaseTime</a>, <a href="../../../../com/bigdata/rwstore/IHistoryManager.html#newTx()">newTx</a>, <a href="../../../../com/bigdata/rwstore/IHistoryManager.html#registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache,%20int)">registerExternalCache</a>, <a href="../../../../com/bigdata/rwstore/IHistoryManager.html#saveDeferrals()">saveDeferrals</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.counters.ICounterSetAccess">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.counters.<a href="../../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></h3>
<code><a href="../../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rawstore.IAllocationManagerStore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></h3>
<code><a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#delete(long,%20com.bigdata.rawstore.IAllocationContext)">delete</a>, <a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#getOutputStream(com.bigdata.rawstore.IAllocationContext)">getOutputStream</a>, <a href="../../../../com/bigdata/rawstore/IAllocationManagerStore.html#write(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">write</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rawstore.IStreamStore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a></h3>
<code><a href="../../../../com/bigdata/rawstore/IStreamStore.html#getInputStream(long)">getInputStream</a>, <a href="../../../../com/bigdata/rawstore/IStreamStore.html#getOutputStream()">getOutputStream</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="allocate(java.nio.ByteBuffer, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>long&nbsp;allocate(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
            boolean&nbsp;blocks)</pre>
<div class="block">Allocates space on the backing resource and copies the provided data.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data will be copied to the backing resource. For each
            buffer in this array, the position will be advanced to the
            limit.</dd><dd><code>blocks</code> - When <code>true</code> the request will block until the memory
            is available for the allocation.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the address to be passed to the get method to retrieve the data.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>data</i> is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#remaining()" title="class or interface in java.nio"><code>Buffer.remaining()</code></a> is ZERO (0).</dd>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/MemoryManagerResourceError.html" title="class in com.bigdata.rwstore.sector">MemoryManagerResourceError</a></code> - If the memory is not available for the allocation and
             <i>blocks:=false</i>. Whether or not this exception can be
             thrown depends on whether the backing buffer pool has a
             bounded capacity and whether the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> using
             that pool has a bounded capacity.</dd></dl>
</li>
</ul>
<a name="allocate(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>long&nbsp;allocate(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</pre>
<div class="block">Version of <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(java.nio.ByteBuffer,%20boolean)"><code>allocate(ByteBuffer, boolean)</code></a> which is either 
 blocking or non-blocking depending on whether or not the memory
 manager is set in a blocking mode.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data will be copied to the backing resource. For each
            buffer in this array, the position will be advanced to the
            limit.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>data</i> is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#remaining()" title="class or interface in java.nio"><code>Buffer.remaining()</code></a> is ZERO (0).</dd>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/MemoryManagerResourceError.html" title="class in com.bigdata.rwstore.sector">MemoryManagerResourceError</a></code> - If the memory is not available for the allocation and
             <i>blocks:=false</i>. Whether or not this exception can be
             thrown depends on whether the backing buffer pool has a
             bounded capacity and whether the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> using
             that pool has a bounded capacity.</dd></dl>
</li>
</ul>
<a name="allocate(int, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>long&nbsp;allocate(int&nbsp;nbytes,
            boolean&nbsp;blocks)</pre>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>nbytes</code> - The size of the allocation request.</dd><dd><code>blocks</code> - When <code>true</code> the method will block until the
            allocation request can be satisfied. When <code>false</code> a
            <a href="../../../../com/bigdata/rwstore/sector/MemoryManagerOutOfMemory.html" title="class in com.bigdata.rwstore.sector"><code>MemoryManagerOutOfMemory</code></a> will be thrown.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address of the allocation.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>nbytes</i> is non-positive.</dd>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/MemoryManagerResourceError.html" title="class in com.bigdata.rwstore.sector">MemoryManagerResourceError</a></code> - If the memory is not available for the allocation and
             <i>blocks:=false</i>. Whether or not this exception can be
             thrown depends on whether the backing buffer pool has a
             bounded capacity and whether the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> using
             that pool has a bounded capacity.</dd></dl>
</li>
</ul>
<a name="allocate(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>long&nbsp;allocate(int&nbsp;nbytes)</pre>
<div class="block">Return the address of a new allocation sufficient to store the specified
 number of bytes of application data. This is the blocking version of
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int)"><code>allocate(int)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>nbytes</code> - The size of the allocation request.</dd><dd><code>blocks</code> - When <code>true</code> the method will block until the
            allocation request can be satisfied. When <code>false</code> a
            <a href="../../../../com/bigdata/rwstore/sector/MemoryManagerOutOfMemory.html" title="class in com.bigdata.rwstore.sector"><code>MemoryManagerOutOfMemory</code></a> will be thrown.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address of the allocation.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>nbytes</i> is non-positive.</dd>
<dd><code><a href="../../../../com/bigdata/rwstore/sector/MemoryManagerResourceError.html" title="class in com.bigdata.rwstore.sector">MemoryManagerResourceError</a></code> - If the memory is not available for the allocation and
             <i>blocks:=false</i>. Whether or not this exception can be
             thrown depends on whether the backing buffer pool has a
             bounded capacity and whether the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> using
             that pool has a bounded capacity.</dd></dl>
</li>
</ul>
<a name="allocate(java.nio.ByteBuffer, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocate</h4>
<pre>long&nbsp;allocate(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
            <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
</li>
</ul>
<a name="get(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>get</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>[]&nbsp;get(long&nbsp;addr)</pre>
<div class="block">Return an array of <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s providing an updatable view onto
 the backing allocation.
 <p>
 The ByteBuffer[] return enables the handling of blobs that span more than
 a single slot, without the need to create an intermediate ByteBuffer.
 This method is designed for use with zero-copy NIO. Furthermore, since
 the <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s in the returned array are not read-only, they can
 be updated directly. In this way the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#allocate(int)"><code>allocate(int)</code></a> can be used
 in conjunction with get to provide more flexibility when storing data.
 <p>
 Using ByteBuffer:put the returned array can be efficiently copied to
 another ByteBuffer:
 
 <pre>
 ByteBuffer mybb;
 ByteBuffer[] bufs = get(addr);
 for (ByteBuffer b : bufs) {
        mybb.put(b);
 }
 </pre>
 
 <strong>CAUTION: Do not hold onto the <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a> longer than is
 necessary.</strong> If the allocation is released by <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#free(long)"><code>free(long)</code></a>
 or <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#clear()"><code>clear()</code></a>, then the memory backing the <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a> could
 be reallocated by another <a href="../../../../com/bigdata/io/DirectBufferPool.html" title="class in com.bigdata.io"><code>DirectBufferPool</code></a> consumer.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - An previously allocated address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>array of ByteBuffers</dd></dl>
</li>
</ul>
<a name="read(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>byte[]&nbsp;read(long&nbsp;addr)</pre>
<div class="block">Return a copy of the data stored at that address. This method is intended
 for use with patterns where the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> is treated as a
 persistence store.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A copy of the data stored at that address.</dd></dl>
</li>
</ul>
<a name="free(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>void&nbsp;free(long&nbsp;addr)</pre>
<div class="block">Frees the address and makes available for recycling</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - to be freed</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - If the address is known to be invalid (never written or
             deleted). Note that the address 0L is always invalid as
             is any address which encodes a 0 byte length.</dd></dl>
</li>
</ul>
<a name="free(long, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>free</h4>
<pre>void&nbsp;free(long&nbsp;addr,
        <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
</li>
</ul>
<a name="clear()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>clear</h4>
<pre>void&nbsp;clear()</pre>
<div class="block">Clears all current allocations. Clearing an allocation context makes the
 backing heap storage available to immediate reallocation. Clearing the
 allocation context of the top-level <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> will release
 any direct <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a>s back to the pool from which they were
 allocated.
 <p>
 <strong>CAUTION: Do not clear an allocation context until you know that
 all threads with access to that allocation context have either been
 terminated or released their reference to that allocation context.
 </strong></div>
</li>
</ul>
<a name="createAllocationContext()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>createAllocationContext</h4>
<pre><a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector">IMemoryManager</a>&nbsp;createAllocationContext()</pre>
<div class="block">Create a child allocation context within which the caller may make and
 release allocations.
 
 TODO Why is the return not an <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore"><code>IAllocationContext</code></a> as well (that
 is, why does <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> not extend <a href="../../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore"><code>IAllocationContext</code></a>
 ). Also, note that <a href="../../../../com/bigdata/rwstore/IStore.html#commit()"><code>IStore.commit()</code></a> is similar to
 <a href="../../../../com/bigdata/rwstore/IAllocationManager.html#detachContext(com.bigdata.rawstore.IAllocationContext)"><code>IAllocationManager.detachContext(IAllocationContext)</code></a>.</div>
</li>
</ul>
<a name="allocationSize(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>allocationSize</h4>
<pre>int&nbsp;allocationSize(long&nbsp;addr)</pre>
<div class="block">Return the size of the application data for the allocation with the given
 address.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of bytes of in the applications allocation request.</dd></dl>
</li>
</ul>
<a name="getAllocationCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllocationCount</h4>
<pre>long&nbsp;getAllocationCount()</pre>
<div class="block">The #of allocation spanned by this allocation context (including any
 any child allocation contexts).</div>
</li>
</ul>
<a name="getUserBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserBytes</h4>
<pre>long&nbsp;getUserBytes()</pre>
<div class="block">Return the #of bytes of application data allocated against this
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts). Due to
 the overhead of the storage allocation scheme, this value may be smaller
 than <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html#getSlotBytes()"><code>getSlotBytes()</code></a>.</div>
</li>
</ul>
<a name="getSlotBytes()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSlotBytes</h4>
<pre>long&nbsp;getSlotBytes()</pre>
<div class="block">Return the #of bytes of consumed by allocation slots allocated against
 this <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> (including any child allocation contexts).</div>
</li>
</ul>
<a name="getSectorSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSectorSize</h4>
<pre>int&nbsp;getSectorSize()</pre>
<div class="block">The size of a backing buffer in bytes.</div>
</li>
</ul>
<a name="getSectorCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getSectorCount</h4>
<pre>int&nbsp;getSectorCount()</pre>
<div class="block">The #of backing buffers in use.</div>
</li>
</ul>
<a name="getMaxSectors()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxSectors</h4>
<pre>int&nbsp;getMaxSectors()</pre>
<div class="block">The maximum number of backing buffers which may be allocated by the
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> and <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Integer.MAX_VALUE</code></a> if there is no
 effective limit on the #of backing buffers which may be allocated.</div>
</li>
</ul>
<a name="isCommitted(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCommitted</h4>
<pre>boolean&nbsp;isCommitted(long&nbsp;addr)</pre>
<div class="block">Return <code>true</code> iff the allocation having that address is
 flagged as committed. The caller must be holding the allocation lock in
 order for the result to remain valid outside of the method call.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the address is currently committed.</dd></dl>
</li>
</ul>
<a name="getPhysicalAddress(long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getPhysicalAddress</h4>
<pre>long&nbsp;getPhysicalAddress(long&nbsp;addr)</pre>
<div class="block">Determine the unencoded physical address</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The encoded address</dd>
<dt><span class="strong">Returns:</span></dt><dd>an unencoded address offset</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IMemoryManager.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/rwstore/sector/AllocationContext.html" title="class in com.bigdata.rwstore.sector"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/rwstore/sector/ISectorManager.html" title="interface in com.bigdata.rwstore.sector"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rwstore/sector/IMemoryManager.html" target="_top">Frames</a></li>
<li><a href="IMemoryManager.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
