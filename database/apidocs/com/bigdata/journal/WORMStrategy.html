<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Mon Aug 29 21:18:07 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>WORMStrategy (Blazegraph Database Platform 2.1.4 API)</title>
<meta name="date" content="2016-08-29">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="WORMStrategy (Blazegraph Database Platform 2.1.4 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WORMStrategy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/WarmUpTask.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/WORMStrategy.html" target="_top">Frames</a></li>
<li><a href="WORMStrategy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.journal.AbstractBufferStrategy">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.journal</div>
<h2 title="Class WORMStrategy" class="title">Class WORMStrategy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">com.bigdata.rawstore.AbstractRawStore</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html" title="class in com.bigdata.rawstore">com.bigdata.rawstore.AbstractRawWormStore</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">com.bigdata.journal.AbstractBufferStrategy</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.journal.WORMStrategy</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../com/bigdata/io/writecache/IBackingReader.html" title="interface in com.bigdata.io.writecache">IBackingReader</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a>, <a href="../../../com/bigdata/journal/IDiskBasedStrategy.html" title="interface in com.bigdata.journal">IDiskBasedStrategy</a>, <a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a>, <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a>, <a href="../../../com/bigdata/rawstore/IMRMW.html" title="interface in com.bigdata.rawstore">IMRMW</a>, <a href="../../../com/bigdata/rawstore/IMROW.html" title="interface in com.bigdata.rawstore">IMROW</a>, <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>, <a href="../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a>, <a href="../../../com/bigdata/rawstore/IWORM.html" title="interface in com.bigdata.rawstore">IWORM</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">WORMStrategy</span>
extends <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a>
implements <a href="../../../com/bigdata/journal/IDiskBasedStrategy.html" title="interface in com.bigdata.journal">IDiskBasedStrategy</a>, <a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a>, <a href="../../../com/bigdata/io/writecache/IBackingReader.html" title="interface in com.bigdata.io.writecache">IBackingReader</a></pre>
<div class="block">Disk-based Write Once Read Many (WORM) journal strategy. The phsyical layout
 on the disk is the journal header, the root blocks, and then the user extent.
 <p>
 Writes are buffered in a write cache. The cache is flushed when it would
 overflow. As a result only large sequential writes are performed on the
 store. Reads read through the write cache for consistency.
 <p>
 Note: This is used to realize both the <a href="../../../com/bigdata/journal/BufferMode.html#Disk"><code>BufferMode.Disk</code></a> and the
 <a href="../../../com/bigdata/journal/BufferMode.html#Temporary"><code>BufferMode.Temporary</code></a> <a href="../../../com/bigdata/journal/BufferMode.html" title="enum in com.bigdata.journal"><code>BufferMode</code></a>s. When configured for the
 <a href="../../../com/bigdata/journal/BufferMode.html#Temporary"><code>BufferMode.Temporary</code></a> mode: the root blocks will not be written onto
 the disk, writes will not be forced, and the backing file will be created the
 first time the <a href="../../../com/bigdata/journal/DiskOnlyStrategy.html" title="class in com.bigdata.journal"><code>DiskOnlyStrategy</code></a> attempts to write through to the
 disk. For many scenarios, the backing file will never be created unless the
 write cache overflows. This provides very low latency on start-up, the same
 MRMW capability, and allows very large temporary stores.
 
 FIXME Examine behavior when write caching is enabled/disabled for the OS.
 This has a profound impact. Asynchronous writes of multiple buffers, and the
 use of smaller buffers, may be absolutely when the write cache is disabled.
 It may be that swapping sets in because the Windows write cache is being
 overworked, in which case doing incremental and async IO would help. Compare
 with behavior on server platforms. See
 http://support.microsoft.com/kb/259716,
 http://www.accucadd.com/TechNotes/Cache/WriteBehindCache.htm,
 http://msdn2.microsoft.com/en-us/library/aa365165.aspx,
 http://www.jasonbrome.com/blog/archives/2004/04/03/writecache_enabled.html,
 http://support.microsoft.com/kb/811392,
 http://mail-archives.apache.org/mod_mbox
 /db-derby-dev/200609.mbox/%3C44F820A8.6000000@sun.com%3E
 
 <pre>
                /sbin/hdparm -W 0 /dev/hda 0 Disable write caching
                /sbin/hdparm -W 1 /dev/hda 1 Enable write caching
 </pre></div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/BufferMode.html#Disk"><code>BufferMode.Disk</code></a>, 
<a href="../../../com/bigdata/journal/BufferMode.html#Temporary"><code>BufferMode.Temporary</code></a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal">WORMStrategy.StoreCounters</a>&lt;<a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="type parameter in WORMStrategy.StoreCounters">T</a> extends <a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal">WORMStrategy.StoreCounters</a>&lt;<a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="type parameter in WORMStrategy.StoreCounters">T</a>&gt;&gt;</strong></code>
<div class="block">Striped performance counters for <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> access, including
 operations that read or write through to the underlying media.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.WormStoreState.html" title="class in com.bigdata.journal">WORMStrategy.WormStoreState</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.journal.AbstractBufferStrategy">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.bigdata.journal.<a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></h3>
<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#bufferMode">bufferMode</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#commitOffset">commitOffset</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_ADDRESS_IS_NULL">ERR_ADDRESS_IS_NULL</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_ADDRESS_NOT_WRITTEN">ERR_ADDRESS_NOT_WRITTEN</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_BAD_RECORD_SIZE">ERR_BAD_RECORD_SIZE</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_BUFFER_EMPTY">ERR_BUFFER_EMPTY</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_BUFFER_NULL">ERR_BUFFER_NULL</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_BUFFER_OVERRUN">ERR_BUFFER_OVERRUN</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_MAX_EXTENT">ERR_MAX_EXTENT</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_NOT_OPEN">ERR_NOT_OPEN</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_OPEN">ERR_OPEN</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_READ_ONLY">ERR_READ_ONLY</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_RECORD_LENGTH_ZERO">ERR_RECORD_LENGTH_ZERO</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#ERR_TRUNCATE">ERR_TRUNCATE</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#initialExtent">initialExtent</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#log">log</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#maximumExtent">maximumExtent</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#nextOffset">nextOffset</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#WARN">WARN</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.rawstore.AbstractRawWormStore">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html" title="class in com.bigdata.rawstore">AbstractRawWormStore</a></h3>
<code><a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#am">am</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.rawstore.IAddressManager">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></h3>
<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#NULL">NULL</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#abort()">abort</a></strong>()</code>
<div class="block">Resets the <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a> (if enabled).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#close()">close</a></strong>()</code>
<div class="block">Closes the file immediately (without flushing any pending writes).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#closeForWrites()">closeForWrites</a></strong>()</code>
<div class="block">Extended to reset the write cache.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#commit()">commit</a></strong>()</code>
<div class="block">A method that removes assumptions of how a specific strategy commits
 data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#computeDigest(java.lang.Object,%20java.security.MessageDigest)">computeDigest</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshot,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html?is-external=true" title="class or interface in java.security">MessageDigest</a>&nbsp;digest)</code>
<div class="block">Compute the digest of the entire backing store (including the magic, file
 version, root blocks, etc).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#delete(long)">delete</a></strong>(long&nbsp;addr)</code>
<div class="block">This implementation can not release storage allocations and invocations
 of this method are ignored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#deleteResources()">deleteResources</a></strong>()</code>
<div class="block">Deletes the backing file(s) (if any).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#force(boolean)">force</a></strong>(boolean&nbsp;metadata)</code>
<div class="block">Force the data to stable storage.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getBlockSequence()">getBlockSequence</a></strong>()</code>
<div class="block">Return the #of <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks that were written out for the
 last write set.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getChannel()">getChannel</a></strong>()</code>
<div class="block">Note: This MAY be <code>null</code>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getCounters()">getCounters</a></strong>()</code>
<div class="block">Return interesting information about the write cache and file operations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getCurrentBlockSequence()">getCurrentBlockSequence</a></strong>()</code>
<div class="block">Return the then-current write cache block sequence.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getExtent()">getExtent</a></strong>()</code>
<div class="block">The current size of the journal in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getFile()">getFile</a></strong>()</code>
<div class="block">The backing file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getHeaderSize()">getHeaderSize</a></strong>()</code>
<div class="block">The size of the file header in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getMinimumExtension()">getMinimumExtension</a></strong>()</code>
<div class="block">Overridden to use the value specified to the constructor.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getRandomAccessFile()">getRandomAccessFile</a></strong>()</code>
<div class="block">Note: This MAY be <code>null</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal">WORMStrategy.StoreCounters</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getStoreCounters()">getStoreCounters</a></strong>()</code>
<div class="block">Returns the striped performance counters for the store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/journal/StoreState.html" title="interface in com.bigdata.journal">StoreState</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getStoreState()">getStoreState</a></strong>()</code>
<div class="block">A StoreState object references critical transient data that can be used
 to determine a degree of consistency between stores, specifically for an
 HA context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getUserExtent()">getUserExtent</a></strong>()</code>
<div class="block">The size of the user data extent in bytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>com.bigdata.journal.WORMStrategy.WORMWriteCacheService</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#getWriteCacheService()">getWriteCacheService</a></strong>()</code>
<div class="block">Return the <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a> (mainly for debugging).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#isFullyBuffered()">isFullyBuffered</a></strong>()</code>
<div class="block">True iff the store is fully buffered (all reads are against memory).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#isStable()">isStable</a></strong>()</code>
<div class="block">True iff backed by stable storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)">postHACommit</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Provides a trigger for synchronization of transient state after a commit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#read(long)">read</a></strong>(long&nbsp;addr)</code>
<div class="block">Extended to handle <a href="../../../com/bigdata/util/ChecksumError.html" title="class in com.bigdata.util"><code>ChecksumError</code></a>s by reading on another node when
 the <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a> (iff the quorum is highly available).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#readFromLocalStore(long)">readFromLocalStore</a></strong>(long&nbsp;addr)</code>
<div class="block">Read from the local store in support of failover reads on nodes in a
 highly available <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#readRaw(long,%20java.nio.ByteBuffer)">readRaw</a></strong>(long&nbsp;offset,
       <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;dst)</code>
<div class="block">Read on the backing file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#readRootBlock(boolean)">readRootBlock</a></strong>(boolean&nbsp;rootBlock0)</code>
<div class="block">Read the specified root block from the backing file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">resetFromHARootBlock</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Reload from the current root block - <strong>CAUTION : THIS IS NOT A
 RESET / ABORT</strong>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">sendHALogBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg">IHALogRequest</a>&nbsp;req,
               <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
               <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)</code>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest,%20long,%20long,%20long,%20long,%20int,%20java.nio.ByteBuffer)">sendRawBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARebuildRequest</a>&nbsp;req,
             long&nbsp;sequence,
             long&nbsp;quorumToken,
             long&nbsp;fileExtent,
             long&nbsp;offset,
             int&nbsp;nbytes,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)</code>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#setExtentForLocalStore(long)">setExtentForLocalStore</a></strong>(long&nbsp;extent)</code>
<div class="block">Extend local store for a highly available <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#setStoreCounters(com.bigdata.journal.WORMStrategy.StoreCounters)">setStoreCounters</a></strong>(<a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal">WORMStrategy.StoreCounters</a>&lt;?&gt;&nbsp;storeCounters)</code>
<div class="block">Replaces the <a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal"><code>WORMStrategy.StoreCounters</code></a> object.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#snapshotAllocators()">snapshotAllocators</a></strong>()</code>
<div class="block">Snapshot the allocators in preparation for computing a digest of the
 committed allocations.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#transferTo(java.io.RandomAccessFile)">transferTo</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a>&nbsp;out)</code>
<div class="block">A block operation that transfers the serialized records (aka the written
 on portion of the user extent) en mass from the buffer onto an output
 file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#truncate(long)">truncate</a></strong>(long&nbsp;newExtent)</code>
<div class="block">Either truncates or extends the journal.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#useChecksums()">useChecksums</a></strong>()</code>
<div class="block"><code>false</code> by default since these were added for HA with the
 <a href="../../../com/bigdata/journal/WORMStrategy.html" title="class in com.bigdata.journal"><code>WORMStrategy</code></a> and the <a href="../../../com/bigdata/journal/RWStrategy.html" title="class in com.bigdata.journal"><code>RWStrategy</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#write(java.nio.ByteBuffer)">write</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Write the data (unisolated).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#writeOnStream(java.io.OutputStream,%20com.bigdata.journal.AbstractJournal.ISnapshotData,%20com.bigdata.quorum.Quorum,%20long)">writeOnStream</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a>&nbsp;os,
             <a href="../../../com/bigdata/journal/AbstractJournal.ISnapshotData.html" title="interface in com.bigdata.journal">AbstractJournal.ISnapshotData</a>&nbsp;snapshotData,
             <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum">Quorum</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>,<a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;&gt;&nbsp;quorum,
             long&nbsp;token)</code>
<div class="block">Write a consistent snapshot of the committed state of the backing store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">writeRawBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/HARebuildRequest.html" title="class in com.bigdata.ha.msg">HARebuildRequest</a>&nbsp;req,
              <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;transfer)</code>
<div class="block">Used to support the rebuild protocol</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">writeRawBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
              <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)</code>
<div class="block">Write a buffer containing data replicated from the master onto the local
 persistence store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WORMStrategy.html#writeRootBlock(com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.ForceEnum)">writeRootBlock</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock,
              <a href="../../../com/bigdata/journal/ForceEnum.html" title="enum in com.bigdata.journal">ForceEnum</a>&nbsp;forceOnCommit)</code>
<div class="block">Write the root block onto stable storage (ie, flush it through to disk).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.journal.AbstractBufferStrategy">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.journal.<a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></h3>
<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#assertOpen()">assertOpen</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#destroy()">destroy</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getBufferMode()">getBufferMode</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getInitialExtent()">getInitialExtent</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getMaximumExtent()">getMaximumExtent</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getMaxRecordSize()">getMaxRecordSize</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getMetaBitsAddr()">getMetaBitsAddr</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getMetaStartAddr()">getMetaStartAddr</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getNextOffset()">getNextOffset</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getResourceMetadata()">getResourceMetadata</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getUUID()">getUUID</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#isDirty()">isDirty</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#isOpen()">isOpen</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#isReadOnly()">isReadOnly</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#overflow(long)">overflow</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#requiresCommit(com.bigdata.journal.IRootBlockView)">requiresCommit</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#size()">size</a>, <a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#transferFromDiskTo(com.bigdata.journal.IDiskBasedStrategy,%20java.io.RandomAccessFile)">transferFromDiskTo</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rawstore.AbstractRawWormStore">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html" title="class in com.bigdata.rawstore">AbstractRawWormStore</a></h3>
<code><a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#getAddressManager()">getAddressManager</a>, <a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#getByteCount(long)">getByteCount</a>, <a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#getOffset(long)">getOffset</a>, <a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#getOffsetBits()">getOffsetBits</a>, <a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#getPhysicalAddress(long)">getPhysicalAddress</a>, <a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#toAddr(int,%20long)">toAddr</a>, <a href="../../../com/bigdata/rawstore/AbstractRawWormStore.html#toString(long)">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rawstore.AbstractRawStore">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">AbstractRawStore</a></h3>
<code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html#getInputStream(long)">getInputStream</a>, <a href="../../../com/bigdata/rawstore/AbstractRawStore.html#getOutputStream()">getOutputStream</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.journal.IBufferStrategy">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.journal.<a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></h3>
<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getAddressManager()">getAddressManager</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getBufferMode()">getBufferMode</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getInitialExtent()">getInitialExtent</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getMaximumExtent()">getMaximumExtent</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getMaxRecordSize()">getMaxRecordSize</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getMetaBitsAddr()">getMetaBitsAddr</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getMetaStartAddr()">getMetaStartAddr</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getNextOffset()">getNextOffset</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#getOffsetBits()">getOffsetBits</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#isDirty()">isDirty</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html#requiresCommit(com.bigdata.journal.IRootBlockView)">requiresCommit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rawstore.IRawStore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></h3>
<code><a href="../../../com/bigdata/rawstore/IRawStore.html#destroy()">destroy</a>, <a href="../../../com/bigdata/rawstore/IRawStore.html#getResourceMetadata()">getResourceMetadata</a>, <a href="../../../com/bigdata/rawstore/IRawStore.html#getUUID()">getUUID</a>, <a href="../../../com/bigdata/rawstore/IRawStore.html#isOpen()">isOpen</a>, <a href="../../../com/bigdata/rawstore/IRawStore.html#isReadOnly()">isReadOnly</a>, <a href="../../../com/bigdata/rawstore/IRawStore.html#size()">size</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rawstore.IAddressManager">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></h3>
<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getByteCount(long)">getByteCount</a>, <a href="../../../com/bigdata/rawstore/IAddressManager.html#getOffset(long)">getOffset</a>, <a href="../../../com/bigdata/rawstore/IAddressManager.html#getPhysicalAddress(long)">getPhysicalAddress</a>, <a href="../../../com/bigdata/rawstore/IAddressManager.html#toAddr(int,%20long)">toAddr</a>, <a href="../../../com/bigdata/rawstore/IAddressManager.html#toString(long)">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rawstore.IStreamStore">
<!--   -->
</a>
<h3>Methods inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a></h3>
<code><a href="../../../com/bigdata/rawstore/IStreamStore.html#getInputStream(long)">getInputStream</a>, <a href="../../../com/bigdata/rawstore/IStreamStore.html#getOutputStream()">getOutputStream</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getWriteCacheService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWriteCacheService</h4>
<pre>public&nbsp;com.bigdata.journal.WORMStrategy.WORMWriteCacheService&nbsp;getWriteCacheService()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getWriteCacheService()">IHABufferStrategy</a></code></strong></div>
<div class="block">Return the <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a> (mainly for debugging).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getWriteCacheService()">getWriteCacheService</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="useChecksums()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>useChecksums</h4>
<pre>public&nbsp;boolean&nbsp;useChecksums()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#useChecksums()">AbstractBufferStrategy</a></code></strong></div>
<div class="block"><code>false</code> by default since these were added for HA with the
 <a href="../../../com/bigdata/journal/WORMStrategy.html" title="class in com.bigdata.journal"><code>WORMStrategy</code></a> and the <a href="../../../com/bigdata/journal/RWStrategy.html" title="class in com.bigdata.journal"><code>RWStrategy</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#useChecksums()">useChecksums</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#useChecksums()">useChecksums</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getHeaderSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeaderSize</h4>
<pre>public final&nbsp;int&nbsp;getHeaderSize()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html#getHeaderSize()">IDiskBasedStrategy</a></code></strong></div>
<div class="block">The size of the file header in bytes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getHeaderSize()">getHeaderSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html#getHeaderSize()">getHeaderSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html" title="interface in com.bigdata.journal">IDiskBasedStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFile()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html#getFile()">IDiskBasedStrategy</a></code></strong></div>
<div class="block">The backing file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html#getFile()">getFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html" title="interface in com.bigdata.journal">IDiskBasedStrategy</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#getFile()">getFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="getRandomAccessFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRandomAccessFile</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a>&nbsp;getRandomAccessFile()</pre>
<div class="block">Note: This MAY be <code>null</code>. If <a href="../../../com/bigdata/journal/BufferMode.html#Temporary"><code>BufferMode.Temporary</code></a>
 is used then it WILL be <code>null</code> until the <code>#writeCache</code>
 is flushed to disk for the first time.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html#getRandomAccessFile()">getRandomAccessFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html" title="interface in com.bigdata.journal">IDiskBasedStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getChannel()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChannel</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels">FileChannel</a>&nbsp;getChannel()</pre>
<div class="block">Note: This MAY be <code>null</code>. If <a href="../../../com/bigdata/journal/BufferMode.html#Temporary"><code>BufferMode.Temporary</code></a>
 is used then it WILL be <code>null</code> until the <code>#writeCache</code>
 is flushed to disk for the first time.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html#getChannel()">getChannel</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IDiskBasedStrategy.html" title="interface in com.bigdata.journal">IDiskBasedStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getStoreCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreCounters</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal">WORMStrategy.StoreCounters</a>&lt;?&gt;&nbsp;getStoreCounters()</pre>
<div class="block">Returns the striped performance counters for the store.</div>
</li>
</ul>
<a name="setStoreCounters(com.bigdata.journal.WORMStrategy.StoreCounters)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setStoreCounters</h4>
<pre>public&nbsp;void&nbsp;setStoreCounters(<a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal">WORMStrategy.StoreCounters</a>&lt;?&gt;&nbsp;storeCounters)</pre>
<div class="block">Replaces the <a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal"><code>WORMStrategy.StoreCounters</code></a> object.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>storeCounters</code> - The new <a href="../../../com/bigdata/btree/BTree.Counter.html" title="class in com.bigdata.btree"><code>BTree.Counter</code></a>s.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the argument is <code>null</code>.</dd></dl>
</li>
</ul>
<a name="getCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounters</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a>&nbsp;getCounters()</pre>
<div class="block">Return interesting information about the write cache and file operations.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="isStable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStable</h4>
<pre>public final&nbsp;boolean&nbsp;isStable()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#isStable()">IRawStore</a></code></strong></div>
<div class="block">True iff backed by stable storage.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#isStable()">isStable</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="isFullyBuffered()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFullyBuffered</h4>
<pre>public&nbsp;boolean&nbsp;isFullyBuffered()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#isFullyBuffered()">IRawStore</a></code></strong></div>
<div class="block">True iff the store is fully buffered (all reads are against memory).
 Implementations MAY change the value returned by this method over the
 life cycle of the store, e.g., to conserve memory a store may drop or
 decrease its buffer if it is backed by disk.
 <p>
 Note: This does not guarantee that the OS will not swap the buffer onto
 disk.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#isFullyBuffered()">isFullyBuffered</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="force(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>force</h4>
<pre>public&nbsp;void&nbsp;force(boolean&nbsp;metadata)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#force(boolean)">IRawStore</a></code></strong></div>
<div class="block">Force the data to stable storage. While this is NOT sufficient to
 guarantee an atomic commit, the data must be forced to disk as part of an
 atomic commit protocol.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#force(boolean)">force</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>metadata</code> - If true, then force both the file contents and the file
            metadata to disk.</dd></dl>
</li>
</ul>
<a name="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit()</pre>
<div class="block">A method that removes assumptions of how a specific strategy commits
 data. For most strategies the action is void since the client WORM DISK
 strategy writes data as allocated. For the Read Write Strategy more data
 must be managed as part of the protocol outside of the RootBlock, and
 this is the method that triggers that management. The caller MUST provide
 appropriate synchronization.
 <p>
 This implementation flushes the write cache (if enabled).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#commit()">commit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#commit()">commit</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getBlockSequence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockSequence</h4>
<pre>public&nbsp;long&nbsp;getBlockSequence()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getBlockSequence()">IHABufferStrategy</a></code></strong></div>
<div class="block">Return the #of <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks that were written out for the
 last write set. This is used to communicate the #of write cache blocks in
 the commit point back to <a href="../../../com/bigdata/journal/AbstractJournal.html#commitNow(long)"><code>AbstractJournal.commitNow(long)</code></a>. It is
 part of the commit protocol.
 <p>
 Note: This DOES NOT reflect the current value of the block sequence
 counter for ongoing writes. That counter is owned by the
 <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getBlockSequence()">getBlockSequence</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/io/writecache/WriteCacheService.html#resetSequence()"><code>WriteCacheService.resetSequence()</code></a>, 
<a href="../../../com/bigdata/journal/IHABufferStrategy.html#getCurrentBlockSequence()"><code>FIXME I would prefer to expose the {@link WriteCacheService} to the
      {@link AbstractJournal} and let it directly invoke
      {@link WriteCacheService#resetSequence()}. The current pattern
      requires the {@link IHABufferStrategy} implementations to track the
      lastBlockSequence and is messy.</code></a></dd></dl>
</li>
</ul>
<a name="getCurrentBlockSequence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentBlockSequence</h4>
<pre>public&nbsp;long&nbsp;getCurrentBlockSequence()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getCurrentBlockSequence()">IHABufferStrategy</a></code></strong></div>
<div class="block">Return the then-current write cache block sequence.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getCurrentBlockSequence()">getCurrentBlockSequence</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getBlockSequence()"><code>IHABufferStrategy.getBlockSequence()</code></a></dd></dl>
</li>
</ul>
<a name="abort()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abort</h4>
<pre>public&nbsp;void&nbsp;abort()</pre>
<div class="block">Resets the <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a> (if enabled).
<p>
 Note: This assumes the caller is synchronized appropriately otherwise
 writes belonging to other threads will be discarded from the cache!</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#abort()">abort</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#abort()">abort</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Closes the file immediately (without flushing any pending writes).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#close()">close</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="deleteResources()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteResources</h4>
<pre>public&nbsp;void&nbsp;deleteResources()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#deleteResources()">IRawStore</a></code></strong></div>
<div class="block">Deletes the backing file(s) (if any).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#deleteResources()">deleteResources</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="getExtent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtent</h4>
<pre>public final&nbsp;long&nbsp;getExtent()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getExtent()">IBufferStrategy</a></code></strong></div>
<div class="block">The current size of the journal in bytes.  When the journal is backed by
 a disk file this is the actual size on disk of that file.  The initial
 value for this property is set by <a href="../../../com/bigdata/journal/Options.html#INITIAL_EXTENT"><code>Options.INITIAL_EXTENT</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getExtent()">getExtent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getUserExtent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserExtent</h4>
<pre>public final&nbsp;long&nbsp;getUserExtent()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getUserExtent()">IBufferStrategy</a></code></strong></div>
<div class="block">The size of the user data extent in bytes.
 <p>
 Note: The size of the user extent is always generally smaller than the
 value reported by <a href="../../../com/bigdata/journal/IBufferStrategy.html#getExtent()"><code>IBufferStrategy.getExtent()</code></a> since the latter also reports the
 space allocated to the journal header and root blocks.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getUserExtent()">getUserExtent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="read(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;read(long&nbsp;addr)</pre>
<div class="block">Extended to handle <a href="../../../com/bigdata/util/ChecksumError.html" title="class in com.bigdata.util"><code>ChecksumError</code></a>s by reading on another node when
 the <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a> (iff the quorum is highly available).
 <p>
 Read the data (unisolated).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#read(long)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - A long integer that encodes both the offset from which the
            data will be read and the #of bytes to be read. See
            <a href="../../../com/bigdata/rawstore/IAddressManager.html#toAddr(int,%20long)"><code>IAddressManager.toAddr(int, long)</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The data read. The buffer will be flipped to prepare for reading
         (the position will be zero and the limit will be the #of bytes
         read).</dd></dl>
</li>
</ul>
<a name="readFromLocalStore(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFromLocalStore</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;readFromLocalStore(long&nbsp;addr)
                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Read from the local store in support of failover reads on nodes in a
 highly available <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.
 <p>
 This implementation tests the <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a> first
 and then reads through to the local disk on a cache miss. This is
 automatically invoked by <a href="../../../com/bigdata/journal/WORMStrategy.html#read(long)"><code>read(long)</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#readFromLocalStore(long)">readFromLocalStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="readRaw(long, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRaw</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;readRaw(long&nbsp;offset,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;dst)</pre>
<div class="block">Read on the backing file. <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#remaining()" title="class or interface in java.nio"><code>Buffer.remaining()</code></a> bytes will be
 read into the caller's buffer, starting at the specified offset in the
 backing file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/io/writecache/IBackingReader.html#readRaw(long,%20java.nio.ByteBuffer)">readRaw</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/io/writecache/IBackingReader.html" title="interface in com.bigdata.io.writecache">IBackingReader</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#readRaw(long,%20java.nio.ByteBuffer)">readRaw</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>offset</code> - The offset of the first byte (now absolute, not relative to the 
            start of the data region).</dd><dd><code>dst</code> - Where to put the data. Bytes will be written at position until
            limit.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The caller's buffer, prepared for reading.</dd></dl>
</li>
</ul>
<a name="write(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;long&nbsp;write(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#write(java.nio.ByteBuffer)">IRawStore</a></code></strong></div>
<div class="block">Write the data (unisolated).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#write(java.nio.ByteBuffer)">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data. The bytes from the current
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#position()" title="class or interface in java.nio"><code>Buffer.position()</code></a> to the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#limit()" title="class or interface in java.nio"><code>Buffer.limit()</code></a> will be written and the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#position()" title="class or interface in java.nio"><code>Buffer.position()</code></a> will be advanced to the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#limit()" title="class or interface in java.nio"><code>Buffer.limit()</code></a> . The caller may subsequently
            modify the contents of the buffer without changing the state
            of the store (i.e., the data are copied into the store).</dd>
<dt><span class="strong">Returns:</span></dt><dd>A long integer formed that encodes both the offset from which the
         data may be read and the #of bytes to be read. See
         <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a>.</dd></dl>
</li>
</ul>
<a name="getMinimumExtension()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMinimumExtension</h4>
<pre>protected&nbsp;long&nbsp;getMinimumExtension()</pre>
<div class="block">Overridden to use the value specified to the constructor.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#getMinimumExtension()">getMinimumExtension</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="readRootBlock(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRootBlock</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;readRootBlock(boolean&nbsp;rootBlock0)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#readRootBlock(boolean)">IBufferStrategy</a></code></strong></div>
<div class="block">Read the specified root block from the backing file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#readRootBlock(boolean)">readRootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="writeRootBlock(com.bigdata.journal.IRootBlockView, com.bigdata.journal.ForceEnum)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRootBlock</h4>
<pre>public&nbsp;void&nbsp;writeRootBlock(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock,
                  <a href="../../../com/bigdata/journal/ForceEnum.html" title="enum in com.bigdata.journal">ForceEnum</a>&nbsp;forceOnCommit)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#writeRootBlock(com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.ForceEnum)">IBufferStrategy</a></code></strong></div>
<div class="block">Write the root block onto stable storage (ie, flush it through to disk).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#writeRootBlock(com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.ForceEnum)">writeRootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>rootBlock</code> - The root block. Which root block is indicated by
            <a href="../../../com/bigdata/journal/IRootBlockView.html#isRootBlock0()"><code>IRootBlockView.isRootBlock0()</code></a>.</dd></dl>
</li>
</ul>
<a name="truncate(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncate</h4>
<pre>public&nbsp;void&nbsp;truncate(long&nbsp;newExtent)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#truncate(long)">IBufferStrategy</a></code></strong></div>
<div class="block">Either truncates or extends the journal.
 <p>
 Note: Implementations of this method MUST be synchronized so that the
 operation is atomic with respect to concurrent writers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#truncate(long)">truncate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>newExtent</code> - The new extent of the journal. This value represent the total
            extent of the journal, including any root blocks together with
            the user extent.</dd></dl>
</li>
</ul>
<a name="transferTo(java.io.RandomAccessFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferTo</h4>
<pre>public&nbsp;long&nbsp;transferTo(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a>&nbsp;out)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#transferTo(java.io.RandomAccessFile)">IBufferStrategy</a></code></strong></div>
<div class="block">A block operation that transfers the serialized records (aka the written
 on portion of the user extent) en mass from the buffer onto an output
 file. The buffered records are written "in order" starting at the current
 position on the output file. The file is grown if necessary.  The file
 position is advanced to the last byte written on the file.
 <p>
 Note: Implementations of this method MUST be synchronized so that the
 operation is atomic with respect to concurrent writers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#transferTo(java.io.RandomAccessFile)">transferTo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - The file to which the buffer contents will be transferred.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of bytes written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="closeForWrites()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeForWrites</h4>
<pre>public&nbsp;void&nbsp;closeForWrites()</pre>
<div class="block">Extended to reset the write cache.
 <p>
 Note: The file is NOT closed and re-opened in a read-only mode in order
 to avoid causing difficulties for concurrent readers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#closeForWrites()">closeForWrites</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#closeForWrites()">closeForWrites</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="delete(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(long&nbsp;addr)</pre>
<div class="block">This implementation can not release storage allocations and invocations
 of this method are ignored.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#delete(long)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html#delete(long)">delete</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/journal/AbstractBufferStrategy.html" title="class in com.bigdata.journal">AbstractBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - A long integer formed using <code>Addr</code> that encodes both the
            offset at which the data was written and the #of bytes that
            were written.</dd></dl>
</li>
</ul>
<a name="writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage, com.bigdata.io.IBufferAccess)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRawBuffer</h4>
<pre>public&nbsp;void&nbsp;writeRawBuffer(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                  <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)
                    throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                           <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">IHABufferStrategy</a></code></strong></div>
<div class="block">Write a buffer containing data replicated from the master onto the local
 persistence store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">writeRawBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest, com.bigdata.ha.msg.IHAWriteMessage, com.bigdata.io.IBufferAccess)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendHALogBuffer</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;sendHALogBuffer(<a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg">IHALogRequest</a>&nbsp;req,
                           <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                           <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)
                             throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">IHABufferStrategy</a></code></strong></div>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">sendHALogBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The <a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg"><code>IHALogRequest</code></a> for some HALog file.</dd><dd><code>msg</code> - The <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a>.</dd><dd><code>b</code> - The raw buffer. Bytes from position to limit will be sent.
            remaining() must equal <a href="../../../com/bigdata/ha/msg/IHAWriteMessageBase.html#getSize()"><code>IHAWriteMessageBase.getSize()</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for that request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest, long, long, long, long, int, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendRawBuffer</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;sendRawBuffer(<a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARebuildRequest</a>&nbsp;req,
                         long&nbsp;sequence,
                         long&nbsp;quorumToken,
                         long&nbsp;fileExtent,
                         long&nbsp;offset,
                         int&nbsp;nbytes,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)
                           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest,%20long,%20long,%20long,%20long,%20int,%20java.nio.ByteBuffer)">IHABufferStrategy</a></code></strong></div>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest,%20long,%20long,%20long,%20long,%20int,%20java.nio.ByteBuffer)">sendRawBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The <a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg"><code>IHARebuildRequest</code></a> to replicate the backing file to
            the requesting service.</dd><dd><code>sequence</code> - The sequence of this <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> (origin ZERO
            (0)).</dd><dd><code>quorumToken</code> - The quorum token of the leader, which must remain valid across
            the rebuild protocol.</dd><dd><code>fileExtent</code> - The file extent as of the moment that the leader begins to
            replicate the existing backing file.</dd><dd><code>offset</code> - The starting offset (relative to the root blocks).</dd><dd><code>nbytes</code> - The #of bytes to be sent.</dd><dd><code>b</code> - The raw buffer. The buffer will be cleared and filled with the
            specified data, then sent down the write pipeline.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for that request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="writeOnStream(java.io.OutputStream, com.bigdata.journal.AbstractJournal.ISnapshotData, com.bigdata.quorum.Quorum, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeOnStream</h4>
<pre>public&nbsp;void&nbsp;writeOnStream(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a>&nbsp;os,
                 <a href="../../../com/bigdata/journal/AbstractJournal.ISnapshotData.html" title="interface in com.bigdata.journal">AbstractJournal.ISnapshotData</a>&nbsp;snapshotData,
                 <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum">Quorum</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>,<a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;&gt;&nbsp;quorum,
                 long&nbsp;token)
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                          <a href="../../../com/bigdata/quorum/QuorumException.html" title="class in com.bigdata.quorum">QuorumException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeOnStream(java.io.OutputStream,%20com.bigdata.journal.AbstractJournal.ISnapshotData,%20com.bigdata.quorum.Quorum,%20long)">IHABufferStrategy</a></code></strong></div>
<div class="block">Write a consistent snapshot of the committed state of the backing store.
 This method writes all data starting after the root blocks. The caller is
 responsible for putting down the root blocks themselves.
 <p>
 Note: The caller is able to obtain both root blocks atomically, while the
 strategy may not be aware of the root blocks or may not be able to
 coordinate their atomic capture.
 <p>
 Note: The caller must ensure that the resulting snapshot will be
 consistent either by ensuring that no writes occur or by taking a
 read-lock that will prevent overwrites of committed state during this
 operation.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeOnStream(java.io.OutputStream,%20com.bigdata.journal.AbstractJournal.ISnapshotData,%20com.bigdata.quorum.Quorum,%20long)">writeOnStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>os</code> - Where to write the data.</dd><dd><code>quorum</code> - The <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.</dd><dd><code>token</code> - The token that must remain valid during this operation.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/bigdata/quorum/QuorumException.html" title="class in com.bigdata.quorum">QuorumException</a></code> - if the service is not joined with the met quorum for that
             token at any point during the operation.</dd></dl>
</li>
</ul>
<a name="setExtentForLocalStore(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExtentForLocalStore</h4>
<pre>public&nbsp;void&nbsp;setExtentForLocalStore(long&nbsp;extent)
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                   <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#setExtentForLocalStore(long)">IHABufferStrategy</a></code></strong></div>
<div class="block">Extend local store for a highly available <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#setExtentForLocalStore(long)">setExtentForLocalStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetFromHARootBlock</h4>
<pre>public&nbsp;void&nbsp;resetFromHARootBlock(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">IHABufferStrategy</a></code></strong></div>
<div class="block">Reload from the current root block - <strong>CAUTION : THIS IS NOT A
 RESET / ABORT</strong>. The purpose of this method is to reload the root
 block under some very limited circumstances, specifically when the root
 blocks were replaced during a REBUILD or RESYNC of the backing store for
 HA.
 <p>
 Note: This method is used when the root blocks of the leader are
 installed onto a follower. This can change the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> for the
 backing store file. The <a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal"><code>IHABufferStrategy</code></a> implementation MUST
 update any cached value for that <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a>.
 <p>
 Use <a href="../../../com/bigdata/journal/IHABufferStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)"><code>IHABufferStrategy.postHACommit(IRootBlockView)</code></a> rather than this method in the
 2-phase commit on the follower.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">resetFromHARootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/662" >
      Latency on followers during commit on leader </a></dd></dl>
</li>
</ul>
<a name="postHACommit(com.bigdata.journal.IRootBlockView)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postHACommit</h4>
<pre>public&nbsp;void&nbsp;postHACommit(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)">IHABufferStrategy</a></code></strong></div>
<div class="block">Provides a trigger for synchronization of transient state after a commit.
 <p>
 For the RWStore this is used to resynchronize the allocators during the
 2-phase commit on the follower with the delta in the allocators from the
 write set associated with that commit.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)">postHACommit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>rootBlock</code> - The newly installed root block.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/662" >
      Latency on followers during commit on leader </a></dd></dl>
</li>
</ul>
<a name="snapshotAllocators()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotAllocators</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshotAllocators()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#snapshotAllocators()">IHABufferStrategy</a></code></strong></div>
<div class="block">Snapshot the allocators in preparation for computing a digest of the
 committed allocations.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#snapshotAllocators()">snapshotAllocators</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The snapshot in a format that is backing store specific -or-
         <code>null</code> if the snapshot is a NOP for the
         <a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal"><code>IBufferStrategy</code></a> (e.g., for the WORM).</dd></dl>
</li>
</ul>
<a name="computeDigest(java.lang.Object, java.security.MessageDigest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeDigest</h4>
<pre>public&nbsp;void&nbsp;computeDigest(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshot,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html?is-external=true" title="class or interface in java.security">MessageDigest</a>&nbsp;digest)
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a>,
                          <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#computeDigest(java.lang.Object,%20java.security.MessageDigest)">IHABufferStrategy</a></code></strong></div>
<div class="block">Compute the digest of the entire backing store (including the magic, file
 version, root blocks, etc).
 <p>
 Note: The digest is not reliable unless you either use a snapshot or
 suspend writes (on the quorum) while it is computed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#computeDigest(java.lang.Object,%20java.security.MessageDigest)">computeDigest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>snapshot</code> - The allocator snapshot (optional). When given, the digest is
            computed only for the snapshot. When <code>null</code> it is
            computed for the entire file.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest, com.bigdata.ha.msg.IHAWriteMessage, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRawBuffer</h4>
<pre>public&nbsp;void&nbsp;writeRawBuffer(<a href="../../../com/bigdata/ha/msg/HARebuildRequest.html" title="class in com.bigdata.ha.msg">HARebuildRequest</a>&nbsp;req,
                  <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;transfer)
                    throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">IHABufferStrategy</a></code></strong></div>
<div class="block">Used to support the rebuild protocol</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">writeRawBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getStoreState()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getStoreState</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/journal/StoreState.html" title="interface in com.bigdata.journal">StoreState</a>&nbsp;getStoreState()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getStoreState()">IHABufferStrategy</a></code></strong></div>
<div class="block">A StoreState object references critical transient data that can be used
 to determine a degree of consistency between stores, specifically for an
 HA context.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getStoreState()">getStoreState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WORMStrategy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/WarmUpTask.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/WORMStrategy.StoreCounters.html" title="class in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/WORMStrategy.html" target="_top">Frames</a></li>
<li><a href="WORMStrategy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.journal.AbstractBufferStrategy">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
