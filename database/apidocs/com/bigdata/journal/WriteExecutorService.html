<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_71) on Thu Jan 21 00:33:29 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html" charset="UTF-8">
<title>WriteExecutorService (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="WriteExecutorService (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WriteExecutorService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/WORMStrategy.WormStoreState.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/WriteExecutorService.html" target="_top">Frames</a></li>
<li><a href="WriteExecutorService.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_java.util.concurrent.ThreadPoolExecutor">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.journal</div>
<h2 title="Class WriteExecutorService" class="title">Class WriteExecutorService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">java.util.concurrent.AbstractExecutorService</a></li>
<li>
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">java.util.concurrent.ThreadPoolExecutor</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.journal.WriteExecutorService</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Executor.html?is-external=true" title="class or interface in java.util.concurrent">Executor</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">WriteExecutorService</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></pre>
<div class="block">A custom <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor</code></a> used by the <a href="../../../com/bigdata/journal/ConcurrencyManager.html" title="class in com.bigdata.journal"><code>ConcurrencyManager</code></a> to
 execute concurrent unisolated write tasks and perform group commits. Tasks
 extend <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal"><code>AbstractTask</code></a>. The caller receives a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> when they
 submit a task to the write service. That <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> is NOT available
 until the next group commit following the successful execution of the write
 task.
 <p>
 Note: adding the thread name to the log messages for this class can aid
 debugging. You can do this using the log4j configuration.
 <p>
 Note: the problem with running concurrent unisolated operations during a
 commit and relying on an "auto-commit" flag to indicate whether or not the
 index will participate is two fold. First, previous unisolated operations on
 the same index will not get committed if an operation is currently running,
 so we could wind up deferring check points of indices for quite a while.
 Second, if there is a problem with the commit and we have to abort, then any
 ongoing operations would still be using unisolated indices that could include
 write sets that were discarded - this would make abort non-atomic.
 <p>
 The ground state from which an unisolated operation begins needs to evolve
 after each unisolated operation that reaches its commit point successfully.
 This can be accomplished by holding onto the btree reference, or even just the
 address at which the metadata record for the btree was last written. We use
 <a href="../../../com/bigdata/journal/AbstractJournal.html#getName2Addr()"><code>AbstractJournal.getName2Addr()</code></a> for this purpose.
 <p>
 However, if an unisolated write fails for any reason on a given index then we
 MUST use the last successful check point for that index. This is handled by
 doing an abort.
 <p>
 Note: Due to the way in which the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> class is written, it "steals"
 child references when cloning an immutable node or leaf prior to making
 modifications. This means that we must reload the btree from a metadata
 record if we have to roll back due to an abort of some unisolated operation
 since the state of the <a href="../../../com/bigdata/btree/BTree.html" title="class in com.bigdata.btree"><code>BTree</code></a> has been changed as a side effect in a
 non-reversible manner.
 <p>
 Note: Running <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a>s may be interrupted at arbitrary moments for a
 number of reasons by this class. The foremost example is a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a>
 that is executing an <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal"><code>AbstractTask</code></a> when a concurrent decision is made
 to discard the commit group, e.g., because another task in that commit group
 failed. Regardless of the reason, if the <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang"><code>Thread</code></a> is performing an NIO
 operation at the moment that the interrupt is notice, then it will close the
 channel on which that operation was being performed. If you are using a
 disk-based <a href="../../../com/bigdata/journal/BufferMode.html" title="enum in com.bigdata.journal"><code>BufferMode</code></a> for the journal, then the interrupt just caused
 the backing <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/FileChannel.html?is-external=true" title="class or interface in java.nio.channels"><code>FileChannel</code></a> to be closed. In order to permit continued
 operations on the journal, the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> MUST transparently re-open
 the channel. (The same problem can arise if you are using NIO for sockets or
 anything else that uses the <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/channels/Channel.html?is-external=true" title="class or interface in java.nio.channels"><code>Channel</code></a> abstraction.)
 
 <h2>Overflow handling</h2>
 
 <p>
 The <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a> invokes <code>#overflow()</code> each time it
 does a group commit. Normally the <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a> does not
 quiesce before doing a group commit, and when it is not quiescent the
 <a href="../../../com/bigdata/resources/ResourceManager.html" title="class in com.bigdata.resources"><code>ResourceManager</code></a> can NOT <code>#overflow()</code> the journal since
 concurrent tasks are still writing on the current journal. Therefore the
 <a href="../../../com/bigdata/resources/ResourceManager.html" title="class in com.bigdata.resources"><code>ResourceManager</code></a> monitors the <a href="../../../com/bigdata/journal/IBufferStrategy.html#getExtent()"><code>IBufferStrategy.getExtent()</code></a> of
 the live journal. When it decides that the live journal is large enough it
 <a href="../../../com/bigdata/journal/WriteExecutorService.html#pause()"><code>pause()</code></a>s <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a> and waits
 until <code>#overflow()</code> is called with a quiescent
 <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a>. This effectively grants the
 <a href="../../../com/bigdata/resources/ResourceManager.html" title="class in com.bigdata.resources"><code>ResourceManager</code></a> exclusive access to the journal. It can then run
 <code>#overflow()</code> to setup a new journal and tell the
 <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a> to <a href="../../../com/bigdata/journal/WriteExecutorService.html#resume()"><code>resume()</code></a>
 processing.
 </p></div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="nested_classes_inherited_from_class_java.util.concurrent.ThreadPoolExecutor">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;java.util.concurrent.<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.AbortPolicy.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor.AbortPolicy</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.CallerRunsPolicy.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor.CallerRunsPolicy</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.DiscardOldestPolicy.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor.DiscardOldestPolicy</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.DiscardPolicy.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor.DiscardPolicy</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicInteger</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#activeTaskCountWithLocksHeld">activeTaskCountWithLocksHeld</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#groupCommitTimeout">groupCommitTimeout</a></strong></code>
<div class="block">The time in milliseconds that a group commit will await currently running
 tasks to join the commit group.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#overflowLockRequestTimeout">overflowLockRequestTimeout</a></strong></code>
<div class="block">The time in milliseconds that a group commit will await an exclusive lock
 on the write service in order to perform synchronous overflow processing.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#overflowLog">overflowLog</a></strong></code>
<div class="block">Uses the <a href="../../../com/bigdata/resources/OverflowManager.html" title="class in com.bigdata.resources"><code>OverflowManager</code></a> log for things relating to synchronous
 overflow processing.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#WriteExecutorService(com.bigdata.journal.IResourceManager,%20int,%20int,%20long,%20java.util.concurrent.TimeUnit,%20java.util.concurrent.BlockingQueue,%20java.util.concurrent.ThreadFactory,%20long,%20long)">WriteExecutorService</a></strong>(<a href="../../../com/bigdata/journal/IResourceManager.html" title="interface in com.bigdata.journal">IResourceManager</a>&nbsp;resourceManager,
                    int&nbsp;corePoolSize,
                    int&nbsp;maximumPoolSize,
                    long&nbsp;keepAliveTime,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;keepAliveUnit,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&gt;&nbsp;queue,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadFactory.html?is-external=true" title="class or interface in java.util.concurrent">ThreadFactory</a>&nbsp;threadFactory,
                    long&nbsp;groupCommitTimeout,
                    long&nbsp;overflowLockRequestTimeout)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#afterTask(com.bigdata.journal.AbstractTask,%20java.lang.Throwable)">afterTask</a></strong>(<a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal">AbstractTask</a>&lt;?&gt;&nbsp;r,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;t)</code>
<div class="block">This is executed after <a href="../../../com/bigdata/journal/AbstractTask.html#doTask()"><code>AbstractTask.doTask()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#beforeExecute(java.lang.Thread,%20java.lang.Runnable)">beforeExecute</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;t,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;r)</code>
<div class="block">If task execution has been <a href="../../../com/bigdata/journal/WriteExecutorService.html#pause()"><code>paused</code></a> then
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html?is-external=true#await()" title="class or interface in java.util.concurrent.locks"><code>awaits</code></a> someone to call <a href="../../../com/bigdata/journal/WriteExecutorService.html#resume()"><code>resume()</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#beforeTask(java.lang.Thread,%20com.bigdata.journal.AbstractTask)">beforeTask</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;t,
          <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal">AbstractTask</a>&lt;?&gt;&nbsp;r)</code>
<div class="block">Executed before <a href="../../../com/bigdata/journal/AbstractTask.html#doTask()"><code>AbstractTask.doTask()</code></a></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getAbortCount()">getAbortCount</a></strong>()</code>
<div class="block">The #of aborts (not failed tasks) since the <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a>
 was started.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getActiveTaskCountWithLocksHeld()">getActiveTaskCountWithLocksHeld</a></strong>()</code>
<div class="block">The instantaneous #of tasks that have <strong>acquired</strong> their
 locks are executing concurrently on the write service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getByteCountPerCommit()">getByteCountPerCommit</a></strong>()</code>
<div class="block">The #of bytes written by the last commit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getCommitGroupSize()">getCommitGroupSize</a></strong>()</code>
<div class="block">The #of tasks in the most recent commit group.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getGroupCommitCount()">getGroupCommitCount</a></strong>()</code>
<div class="block">The #of group commits since the <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a> was started
 (all commits by this service are group commits).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getInternalLockQueueLength()">getInternalLockQueueLength</a></strong>()</code>
<div class="block">The #of threads queued on the internal <a href="../../../com/bigdata/journal/WriteExecutorService.html#lock"><code>lock</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getLockManager()">getLockManager</a></strong>()</code>
<div class="block">The object that coordinates exclusive access to the resources.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getMaxCommitGroupSize()">getMaxCommitGroupSize</a></strong>()</code>
<div class="block">The maximum #of tasks in any commit group.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getMaxCommitServiceTime()">getMaxCommitServiceTime</a></strong>()</code>
<div class="block">The maximum service time in milliseconds of the atomic commit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getMaxCommitWaitingTime()">getMaxCommitWaitingTime</a></strong>()</code>
<div class="block">The maximum waiting time in millseconds from when a task completes
 successfully until the next group commit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getMaxPoolSize()">getMaxPoolSize</a></strong>()</code>
<div class="block">The maximum #of threads in the pool.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getMaxRunning()">getMaxRunning</a></strong>()</code>
<div class="block">The maximum #of tasks that are concurrently executing without regard to
 whether or not the tasks have acquired their locks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getOverflowCount()">getOverflowCount</a></strong>()</code>
<div class="block">The #of times synchronous overflow processing has been performed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getReadyCount()">getReadyCount</a></strong>()</code>
<div class="block">#of tasks that are waiting to run but are blocked on the #lock.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getRejectedExecutionCount()">getRejectedExecutionCount</a></strong>()</code>
<div class="block">The #of rejected tasks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getTaskCommittedCount()">getTaskCommittedCount</a></strong>()</code>
<div class="block">The #of tasks that (a) executed successfully and (b) have been committed.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getTaskFailedCount()">getTaskFailedCount</a></strong>()</code>
<div class="block">The #of tasks that have failed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#getTaskSuccessCount()">getTaskSuccessCount</a></strong>()</code>
<div class="block">The #of tasks that have executed successfully (MIGHT NOT have been
 committed safely).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#shutdown()">shutdown</a></strong>()</code>
<div class="block">Overridden to shutdown the embedded lock manager service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#shutdownNow()">shutdownNow</a></strong>()</code>
<div class="block">Overridden to shutdown the embedded lock manager service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#toString()">toString</a></strong>()</code>
<div class="block">A snapshot of the executor state.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#tryLock(long,%20java.util.concurrent.TimeUnit)">tryLock</a></strong>(long&nbsp;timeout,
       <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Acquires an exclusive lock on the write service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/WriteExecutorService.html#unlock()">unlock</a></strong>()</code>
<div class="block">Release the exclusive write lock.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.util.concurrent.ThreadPoolExecutor">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.util.concurrent.<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#afterExecute(java.lang.Runnable,%20java.lang.Throwable)" title="class or interface in java.util.concurrent">afterExecute</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#allowCoreThreadTimeOut(boolean)" title="class or interface in java.util.concurrent">allowCoreThreadTimeOut</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#allowsCoreThreadTimeOut()" title="class or interface in java.util.concurrent">allowsCoreThreadTimeOut</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#awaitTermination(long,%20java.util.concurrent.TimeUnit)" title="class or interface in java.util.concurrent">awaitTermination</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#execute(java.lang.Runnable)" title="class or interface in java.util.concurrent">execute</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#finalize()" title="class or interface in java.util.concurrent">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getActiveCount()" title="class or interface in java.util.concurrent">getActiveCount</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getCompletedTaskCount()" title="class or interface in java.util.concurrent">getCompletedTaskCount</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getCorePoolSize()" title="class or interface in java.util.concurrent">getCorePoolSize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getKeepAliveTime(java.util.concurrent.TimeUnit)" title="class or interface in java.util.concurrent">getKeepAliveTime</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getLargestPoolSize()" title="class or interface in java.util.concurrent">getLargestPoolSize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getMaximumPoolSize()" title="class or interface in java.util.concurrent">getMaximumPoolSize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getPoolSize()" title="class or interface in java.util.concurrent">getPoolSize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getQueue()" title="class or interface in java.util.concurrent">getQueue</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getRejectedExecutionHandler()" title="class or interface in java.util.concurrent">getRejectedExecutionHandler</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getTaskCount()" title="class or interface in java.util.concurrent">getTaskCount</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getThreadFactory()" title="class or interface in java.util.concurrent">getThreadFactory</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#isShutdown()" title="class or interface in java.util.concurrent">isShutdown</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#isTerminated()" title="class or interface in java.util.concurrent">isTerminated</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#isTerminating()" title="class or interface in java.util.concurrent">isTerminating</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#prestartAllCoreThreads()" title="class or interface in java.util.concurrent">prestartAllCoreThreads</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#prestartCoreThread()" title="class or interface in java.util.concurrent">prestartCoreThread</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#purge()" title="class or interface in java.util.concurrent">purge</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#remove(java.lang.Runnable)" title="class or interface in java.util.concurrent">remove</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setCorePoolSize(int)" title="class or interface in java.util.concurrent">setCorePoolSize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setKeepAliveTime(long,%20java.util.concurrent.TimeUnit)" title="class or interface in java.util.concurrent">setKeepAliveTime</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setMaximumPoolSize(int)" title="class or interface in java.util.concurrent">setMaximumPoolSize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setRejectedExecutionHandler(java.util.concurrent.RejectedExecutionHandler)" title="class or interface in java.util.concurrent">setRejectedExecutionHandler</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#setThreadFactory(java.util.concurrent.ThreadFactory)" title="class or interface in java.util.concurrent">setThreadFactory</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#terminated()" title="class or interface in java.util.concurrent">terminated</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.util.concurrent.AbstractExecutorService">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.util.concurrent.<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">AbstractExecutorService</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#invokeAll(java.util.Collection)" title="class or interface in java.util.concurrent">invokeAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#invokeAll(java.util.Collection,%20long,%20java.util.concurrent.TimeUnit)" title="class or interface in java.util.concurrent">invokeAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#invokeAny(java.util.Collection)" title="class or interface in java.util.concurrent">invokeAny</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#invokeAny(java.util.Collection,%20long,%20java.util.concurrent.TimeUnit)" title="class or interface in java.util.concurrent">invokeAny</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#newTaskFor(java.util.concurrent.Callable)" title="class or interface in java.util.concurrent">newTaskFor</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#newTaskFor(java.lang.Runnable,%20T)" title="class or interface in java.util.concurrent">newTaskFor</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#submit(java.util.concurrent.Callable)" title="class or interface in java.util.concurrent">submit</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#submit(java.lang.Runnable)" title="class or interface in java.util.concurrent">submit</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true#submit(java.lang.Runnable,%20T)" title="class or interface in java.util.concurrent">submit</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="overflowLog">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>overflowLog</h4>
<pre>protected static final&nbsp;org.apache.log4j.Logger overflowLog</pre>
<div class="block">Uses the <a href="../../../com/bigdata/resources/OverflowManager.html" title="class in com.bigdata.resources"><code>OverflowManager</code></a> log for things relating to synchronous
 overflow processing.</div>
</li>
</ul>
<a name="groupCommitTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>groupCommitTimeout</h4>
<pre>protected final&nbsp;long groupCommitTimeout</pre>
<div class="block">The time in milliseconds that a group commit will await currently running
 tasks to join the commit group.</div>
</li>
</ul>
<a name="overflowLockRequestTimeout">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>overflowLockRequestTimeout</h4>
<pre>protected final&nbsp;long overflowLockRequestTimeout</pre>
<div class="block">The time in milliseconds that a group commit will await an exclusive lock
 on the write service in order to perform synchronous overflow processing.
 This lock is requested IFF overflow process SHOULD be performed. The lock
 timeout needs to be of significant duration or a lock request for a write
 service under heavy write load will timeout, in which case an error will
 be logged. If overflow processing is not performed the live journal
 extent will grow without bound.</div>
</li>
</ul>
<a name="activeTaskCountWithLocksHeld">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>activeTaskCountWithLocksHeld</h4>
<pre>protected final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/atomic/AtomicInteger.html?is-external=true" title="class or interface in java.util.concurrent.atomic">AtomicInteger</a> activeTaskCountWithLocksHeld</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="WriteExecutorService(com.bigdata.journal.IResourceManager, int, int, long, java.util.concurrent.TimeUnit, java.util.concurrent.BlockingQueue, java.util.concurrent.ThreadFactory, long, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>WriteExecutorService</h4>
<pre>public&nbsp;WriteExecutorService(<a href="../../../com/bigdata/journal/IResourceManager.html" title="interface in com.bigdata.journal">IResourceManager</a>&nbsp;resourceManager,
                    int&nbsp;corePoolSize,
                    int&nbsp;maximumPoolSize,
                    long&nbsp;keepAliveTime,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;keepAliveUnit,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BlockingQueue.html?is-external=true" title="class or interface in java.util.concurrent">BlockingQueue</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&gt;&nbsp;queue,
                    <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadFactory.html?is-external=true" title="class or interface in java.util.concurrent">ThreadFactory</a>&nbsp;threadFactory,
                    long&nbsp;groupCommitTimeout,
                    long&nbsp;overflowLockRequestTimeout)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resourceManager</code> - </dd><dd><code>corePoolSize</code> - </dd><dd><code>maximumPoolSize</code> - </dd><dd><code>keepAliveTime</code> - </dd><dd><code>keepAliveUnit</code> - </dd><dd><code>queue</code> - </dd><dd><code>threadFactory</code> - </dd><dd><code>groupCommitTimeout</code> - The time in milliseconds that a group commit will await
            currently running tasks to join the commit group.</dd><dd><code>overflowLockRequestTimeout</code> - </dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getLockManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLockManager</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/concurrent/NonBlockingLockManagerWithNewDesign.html" title="class in com.bigdata.concurrent">NonBlockingLockManagerWithNewDesign</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;getLockManager()</pre>
<div class="block">The object that coordinates exclusive access to the resources.</div>
</li>
</ul>
<a name="getRejectedExecutionCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRejectedExecutionCount</h4>
<pre>public&nbsp;long&nbsp;getRejectedExecutionCount()</pre>
<div class="block">The #of rejected tasks.</div>
</li>
</ul>
<a name="getMaxPoolSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxPoolSize</h4>
<pre>public&nbsp;int&nbsp;getMaxPoolSize()</pre>
<div class="block">The maximum #of threads in the pool.</div>
</li>
</ul>
<a name="getMaxRunning()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxRunning</h4>
<pre>public&nbsp;long&nbsp;getMaxRunning()</pre>
<div class="block">The maximum #of tasks that are concurrently executing without regard to
 whether or not the tasks have acquired their locks.
 <p>
 Note: Since this does not reflect tasks executing concurrently with locks
 held it is not a measure of the true concurrency of tasks executing on
 the service.</div>
</li>
</ul>
<a name="getMaxCommitWaitingTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxCommitWaitingTime</h4>
<pre>public&nbsp;long&nbsp;getMaxCommitWaitingTime()</pre>
<div class="block">The maximum waiting time in millseconds from when a task completes
 successfully until the next group commit.</div>
</li>
</ul>
<a name="getMaxCommitServiceTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxCommitServiceTime</h4>
<pre>public&nbsp;long&nbsp;getMaxCommitServiceTime()</pre>
<div class="block">The maximum service time in milliseconds of the atomic commit.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/AbstractJournal.html#commit()"><code>AbstractJournal.commit()</code></a></dd></dl>
</li>
</ul>
<a name="getInternalLockQueueLength()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInternalLockQueueLength</h4>
<pre>public&nbsp;int&nbsp;getInternalLockQueueLength()</pre>
<div class="block">The #of threads queued on the internal <a href="../../../com/bigdata/journal/WriteExecutorService.html#lock"><code>lock</code></a>. These are (for the
 most part) threads waiting to start or stop during a group commit.
 However, you can not use this measure to infer whether there are threads
 waiting to run which are being starved during a group commit or simply
 threads waiting to do their post-processing.</div>
</li>
</ul>
<a name="getCommitGroupSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitGroupSize</h4>
<pre>public&nbsp;int&nbsp;getCommitGroupSize()</pre>
<div class="block">The #of tasks in the most recent commit group. In order to be useful
 information this must be sampled and turned into a moving average.</div>
</li>
</ul>
<a name="getMaxCommitGroupSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxCommitGroupSize</h4>
<pre>public&nbsp;int&nbsp;getMaxCommitGroupSize()</pre>
<div class="block">The maximum #of tasks in any commit group.</div>
</li>
</ul>
<a name="getGroupCommitCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getGroupCommitCount</h4>
<pre>public&nbsp;long&nbsp;getGroupCommitCount()</pre>
<div class="block">The #of group commits since the <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a> was started
 (all commits by this service are group commits).</div>
</li>
</ul>
<a name="getByteCountPerCommit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getByteCountPerCommit</h4>
<pre>public&nbsp;long&nbsp;getByteCountPerCommit()</pre>
<div class="block">The #of bytes written by the last commit. This must be sampled to turn it
 into useful information.</div>
</li>
</ul>
<a name="getAbortCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAbortCount</h4>
<pre>public&nbsp;long&nbsp;getAbortCount()</pre>
<div class="block">The #of aborts (not failed tasks) since the <a href="../../../com/bigdata/journal/WriteExecutorService.html" title="class in com.bigdata.journal"><code>WriteExecutorService</code></a>
 was started. Aborts are serious events and occur IFF an
 <a href="../../../com/bigdata/journal/IAtomicStore.html#commit()"><code>IAtomicStore.commit()</code></a> fails.  Failed tasks do NOT result in an
 abort.</div>
</li>
</ul>
<a name="getTaskFailedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaskFailedCount</h4>
<pre>public&nbsp;long&nbsp;getTaskFailedCount()</pre>
<div class="block">The #of tasks that have failed.  Task failure means that the write set(s)
 for the task are discarded and any indices on which it has written are
 rolled back.  Task failure does NOT cause the commit group to be discard.
 Rather, the failed task never joins a commit group and returns control
 immediately to the caller.</div>
</li>
</ul>
<a name="getTaskSuccessCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaskSuccessCount</h4>
<pre>public&nbsp;long&nbsp;getTaskSuccessCount()</pre>
<div class="block">The #of tasks that have executed successfully (MIGHT NOT have been
 committed safely).</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/WriteExecutorService.html#getTaskCommittedCount()"><code>getTaskCommittedCount()</code></a></dd></dl>
</li>
</ul>
<a name="getTaskCommittedCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getTaskCommittedCount</h4>
<pre>public&nbsp;long&nbsp;getTaskCommittedCount()</pre>
<div class="block">The #of tasks that (a) executed successfully and (b) have been committed.</div>
</li>
</ul>
<a name="getOverflowCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOverflowCount</h4>
<pre>public&nbsp;long&nbsp;getOverflowCount()</pre>
<div class="block">The #of times synchronous overflow processing has been performed.</div>
</li>
</ul>
<a name="getActiveTaskCountWithLocksHeld()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getActiveTaskCountWithLocksHeld</h4>
<pre>public&nbsp;int&nbsp;getActiveTaskCountWithLocksHeld()</pre>
<div class="block">The instantaneous #of tasks that have <strong>acquired</strong> their
 locks are executing concurrently on the write service. This is the real
 measure of concurrent task execution on the write service. However, you
 need to sample this value and compute a moving average in order to turn
 it into useful information.
 <p>
 The returned value is limited by <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getActiveCount()" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor.getActiveCount()</code></a>. Note that
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#getActiveCount()" title="class or interface in java.util.concurrent"><code>ThreadPoolExecutor.getActiveCount()</code></a> reports tasks which are <strong>waiting on
 their locks</strong> as well as those engaged in various pre- or
 post-processing.</div>
</li>
</ul>
<a name="getReadyCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReadyCount</h4>
<pre>public&nbsp;int&nbsp;getReadyCount()</pre>
<div class="block">#of tasks that are waiting to run but are blocked on the #lock. This
 value represents the #of tasks which have been starved from concurrent
 execution. The main culprit for a high value here is group commit and the
 occasional synchronous overflow or purge resources (when someone has an
 exclusive lock on the write service).</div>
</li>
</ul>
<a name="beforeExecute(java.lang.Thread, java.lang.Runnable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeExecute</h4>
<pre>protected&nbsp;void&nbsp;beforeExecute(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;t,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;r)</pre>
<div class="block">If task execution has been <a href="../../../com/bigdata/journal/WriteExecutorService.html#pause()"><code>paused</code></a> then
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Condition.html?is-external=true#await()" title="class or interface in java.util.concurrent.locks"><code>awaits</code></a> someone to call <a href="../../../com/bigdata/journal/WriteExecutorService.html#resume()"><code>resume()</code></a>.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#beforeExecute(java.lang.Thread,%20java.lang.Runnable)" title="class or interface in java.util.concurrent">beforeExecute</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - The thread that will run the task.</dd><dd><code>r</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> wrapping the <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal"><code>AbstractTask</code></a> - this
            is actually a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/FutureTask.html?is-external=true" title="class or interface in java.util.concurrent"><code>FutureTask</code></a>. See
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/AbstractExecutorService.html?is-external=true" title="class or interface in java.util.concurrent"><code>AbstractExecutorService</code></a>.</dd></dl>
</li>
</ul>
<a name="beforeTask(java.lang.Thread, com.bigdata.journal.AbstractTask)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>beforeTask</h4>
<pre>protected&nbsp;void&nbsp;beforeTask(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Thread.html?is-external=true" title="class or interface in java.lang">Thread</a>&nbsp;t,
              <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal">AbstractTask</a>&lt;?&gt;&nbsp;r)</pre>
<div class="block">Executed before <a href="../../../com/bigdata/journal/AbstractTask.html#doTask()"><code>AbstractTask.doTask()</code></a></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>t</code> - The thread in which that task will execute.</dd><dd><code>r</code> - The <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal"><code>AbstractTask</code></a>.</dd></dl>
</li>
</ul>
<a name="afterTask(com.bigdata.journal.AbstractTask, java.lang.Throwable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>afterTask</h4>
<pre>protected&nbsp;void&nbsp;afterTask(<a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal">AbstractTask</a>&lt;?&gt;&nbsp;r,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;t)</pre>
<div class="block">This is executed after <a href="../../../com/bigdata/journal/AbstractTask.html#doTask()"><code>AbstractTask.doTask()</code></a>. If the task
 completed successfully (no exception thrown and its thread is not
 interrupted) then we invoke <a href="../../../com/bigdata/journal/WriteExecutorService.html#groupCommit()"><code>groupCommit()</code></a>. Otherwise the write
 set of the task was already discarded by
 <a href="../../../com/bigdata/journal/AbstractTask.InnerWriteServiceCallable.html" title="class in com.bigdata.journal"><code>AbstractTask.InnerWriteServiceCallable</code></a> and we do nothing.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>r</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent"><code>Callable</code></a> wrapping the <a href="../../../com/bigdata/journal/AbstractTask.html" title="class in com.bigdata.journal"><code>AbstractTask</code></a>.</dd><dd><code>t</code> - The exception thrown -or- <code>null</code> if the task
            completed successfully.</dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<div class="block">A snapshot of the executor state.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#toString()" title="class or interface in java.util.concurrent">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></code></dd>
</dl>
</li>
</ul>
<a name="shutdown()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdown</h4>
<pre>public&nbsp;void&nbsp;shutdown()</pre>
<div class="block">Overridden to shutdown the embedded lock manager service.
 <p>
 </div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true#shutdown()" title="class or interface in java.util.concurrent">shutdown</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#shutdown()" title="class or interface in java.util.concurrent">shutdown</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></code></dd>
</dl>
</li>
</ul>
<a name="shutdownNow()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>shutdownNow</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&gt;&nbsp;shutdownNow()</pre>
<div class="block">Overridden to shutdown the embedded lock manager service.
 <p>
 </div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true#shutdownNow()" title="class or interface in java.util.concurrent">shutdownNow</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutorService.html?is-external=true" title="class or interface in java.util.concurrent">ExecutorService</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true#shutdownNow()" title="class or interface in java.util.concurrent">shutdownNow</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ThreadPoolExecutor.html?is-external=true" title="class or interface in java.util.concurrent">ThreadPoolExecutor</a></code></dd>
</dl>
</li>
</ul>
<a name="tryLock(long, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tryLock</h4>
<pre>public&nbsp;boolean&nbsp;tryLock(long&nbsp;timeout,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Acquires an exclusive lock on the write service.
 <p>
 The write service is paused for up to <i>timeout</i> units. During that
 time no new tasks will start. The lock will be granted if all running
 tasks complete before the <i>timeout</i> expires.
 <p>
 Note: The exclusive write lock is granted using the same <a href="../../../com/bigdata/journal/WriteExecutorService.html#lock"><code>lock</code></a>
 that is used to coordinate all other activity of the write service. If
 the exclusive write lock is granted then the caller's thread will hold
 the <a href="../../../com/bigdata/journal/WriteExecutorService.html#lock"><code>lock</code></a> and MUST release the lock using <a href="../../../com/bigdata/journal/WriteExecutorService.html#unlock()"><code>unlock()</code></a>.
 <p>
 Note: When the exclusive lock is granted there will be NO running tasks
 and the write service will be paused. This ensures that no task can run
 on the write service and that groupCommit will not attempt to grab the
 lock itself.
 <p>
 Note: If there is heavy write activity on the service then the timeout
 may well expire before the exclusive write lock becomes available.
 Further, the acquisition of the exclusive write lock will throttle
 concurrent write activity and negatively impact write performance if the
 system is heavily loaded by write tasks. Therefore, the write lock should
 be requested only when it is necessary and a significant value should be
 specified for the timeout (60s or more) to ensure that it is acquired.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - The timeout.</dd><dd><code>unit</code> - The unit in which the <i>timeout</i> is expressed.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the exclusive lock was acquired.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="unlock()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>unlock</h4>
<pre>public&nbsp;void&nbsp;unlock()</pre>
<div class="block">Release the exclusive write lock.</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalMonitorStateException.html?is-external=true" title="class or interface in java.lang">IllegalMonitorStateException</a></code> - if the current thread does not own the lock.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/WriteExecutorService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/WORMStrategy.WormStoreState.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li>Next Class</li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/WriteExecutorService.html" target="_top">Frames</a></li>
<li><a href="WriteExecutorService.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_classes_inherited_from_class_java.util.concurrent.ThreadPoolExecutor">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
