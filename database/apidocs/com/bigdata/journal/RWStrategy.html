<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Mon Mar 18 18:55:13 UTC 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>RWStrategy (Blazegraph Database Platform 2.1.5 API)</title>
<meta name="date" content="2019-03-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="RWStrategy (Blazegraph Database Platform 2.1.5 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RWStrategy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/RWAddressManager.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/SnapshotTask.html" title="class in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/RWStrategy.html" target="_top">Frames</a></li>
<li><a href="RWStrategy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.journal</div>
<h2 title="Class RWStrategy" class="title">Class RWStrategy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">com.bigdata.rawstore.AbstractRawStore</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.journal.RWStrategy</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a>, <a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a>, <a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a>, <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a>, <a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a>, <a href="../../../com/bigdata/rawstore/IMRMW.html" title="interface in com.bigdata.rawstore">IMRMW</a>, <a href="../../../com/bigdata/rawstore/IMROW.html" title="interface in com.bigdata.rawstore">IMROW</a>, <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a>, <a href="../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a>, <a href="../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a>, <a href="../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a>, <a href="../../../com/bigdata/rwstore/IRWStrategy.html" title="interface in com.bigdata.rwstore">IRWStrategy</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">RWStrategy</span>
extends <a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">AbstractRawStore</a>
implements <a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a>, <a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a>, <a href="../../../com/bigdata/rwstore/IRWStrategy.html" title="interface in com.bigdata.rwstore">IRWStrategy</a></pre>
<div class="block">A highly scalable persistent <a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal"><code>IBufferStrategy</code></a> wrapping the
 <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a> which may be used as the backing store for a <a href="../../../com/bigdata/journal/Journal.html" title="class in com.bigdata.journal"><code>Journal</code></a>.
 <p>
 The <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a> manages allocation slots. This can translate into an
 enormous space savings on the disk for large data sets (when compared to the
 WORM) since old revisions of B+Tree nodes and leaves may be recycled
 efficiently.
 
 <h2>History</h2>
 
 The <a href="../../../com/bigdata/journal/RWStrategy.html" title="class in com.bigdata.journal"><code>RWStrategy</code></a> supports access to historical commit states in
 combination with the history retention policy of the
 <a href="../../../com/bigdata/journal/ITransactionService.html" title="interface in com.bigdata.journal"><code>ITransactionService</code></a>.
 
 <h2>Compatibility</h2>
 
 The <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a> uses a distinct binary layout on the disk based which is
 not directly compatible with the WORM binary storage layer. The WORM and the
 <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a> uses the same file header and root blocks. However, the
 <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a> defines some fields in the root blocks which are not used by
 the WORM store such as the metabits info. In addition, some of the root block
 fields defined by the WORM store are not used by the <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a>.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd>Martyn Cutcher</dd>
<dt><span class="strong">See Also:</span></dt><dd><code>RWStore.Options</code></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.rawstore.IAddressManager">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.bigdata.rawstore.<a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></h3>
<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#NULL">NULL</a></code></li>
</ul>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#abort()">abort</a></strong>()</code>
<div class="block">Calls through to store and then to WriteCacheService.reset</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#abortContext(com.bigdata.rawstore.IAllocationContext)">abortContext</a></strong>(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Indicates that the allocation context will no longer be used and that the
 allocations made within the context should be discarded.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#checkDeferredFrees(com.bigdata.journal.AbstractJournal)">checkDeferredFrees</a></strong>(<a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a>&nbsp;journal)</code>
<div class="block">Lifted to provide a direct interface from the Journal so that the
 CommitRecordIndex can be pruned prior to store commit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#close()">close</a></strong>()</code>
<div class="block">Close the store immediately.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#closeForWrites()">closeForWrites</a></strong>()</code>
<div class="block">Operation is not supported.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#commit()">commit</a></strong>()</code>
<div class="block">A method that removes assumptions of how a specific strategy commits
 data.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#computeDigest(java.lang.Object,%20java.security.MessageDigest)">computeDigest</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshot,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html?is-external=true" title="class or interface in java.security">MessageDigest</a>&nbsp;digest)</code>
<div class="block">Compute the digest of the entire backing store (including the magic, file
 version, root blocks, etc).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#delete(long)">delete</a></strong>(long&nbsp;addr)</code>
<div class="block">The default implementation is a NOP.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#delete(long,%20com.bigdata.rawstore.IAllocationContext)">delete</a></strong>(long&nbsp;addr,
      <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Must check whether there are existing transactions which may access
 this data, and if not free immediately, otherwise defer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#deleteResources()">deleteResources</a></strong>()</code>
<div class="block">Deletes the backing file(s) (if any).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#destroy()">destroy</a></strong>()</code>
<div class="block">Closes the store immediately (if open) and deletes its persistent
 resources.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#detachContext(com.bigdata.rawstore.IAllocationContext)">detachContext</a></strong>(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Indicates that the allocation context will no longer be used, but that
 the allocations made within the context should be preserved.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#force(boolean)">force</a></strong>(boolean&nbsp;metadata)</code>
<div class="block">Force the data to stable storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getAddressManager()">getAddressManager</a></strong>()</code>
<div class="block">Return the delegate object that provides the <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a>
 implementation for this <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getBlockSequence()">getBlockSequence</a></strong>()</code>
<div class="block">Return the #of <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks that were written out for the
 last write set.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/journal/BufferMode.html" title="enum in com.bigdata.journal">BufferMode</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getBufferMode()">getBufferMode</a></strong>()</code>
<div class="block">The buffer mode supported by the implementation</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getByteCount(long)">getByteCount</a></strong>(long&nbsp;addr)</code>
<div class="block">The length of the datum in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getCommitLock()">getCommitLock</a></strong>()</code>
<div class="block">Optionally return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that must be used (when non-
 <code>null</code>) to make the <a href="../../../com/bigdata/journal/IBufferStrategy.html#commit()"><code>IBufferStrategy.commit()</code></a> /
 <a href="../../../com/bigdata/rwstore/IRWStrategy.html#postCommit()"><code>IRWStrategy.postCommit()</code></a> strategy atomic.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getCounters()">getCounters</a></strong>()</code>
<div class="block">Return the performance counter hierarchy.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getCurrentBlockSequence()">getCurrentBlockSequence</a></strong>()</code>
<div class="block">Return the then-current write cache block sequence.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getExtent()">getExtent</a></strong>()</code>
<div class="block">The current size of the journal in bytes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getFile()">getFile</a></strong>()</code>
<div class="block">The backing file -or- <code>null</code> if there is no backing file
 for the store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getHeaderSize()">getHeaderSize</a></strong>()</code>
<div class="block">The size of the journal header, including MAGIC, version, and both root
 blocks.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getInitialExtent()">getInitialExtent</a></strong>()</code>
<div class="block">The initial extent.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getInputStream(long)">getInputStream</a></strong>(long&nbsp;addr)</code>
<div class="block">Return an input stream from which a previously written stream may be read
 back.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getLastReleaseTime()">getLastReleaseTime</a></strong>()</code>
<div class="block">If history is retained this returns the time for which data was most
 recently released.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getMaximumExtent()">getMaximumExtent</a></strong>()</code>
<div class="block">The maximum extent allowable before a buffer overflow operation will be
 rejected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getMaxRecordSize()">getMaxRecordSize</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getMetaBitsAddr()">getMetaBitsAddr</a></strong>()</code>
<div class="block">The RWStrategy requires meta allocation info in the root block, this
 method is the hook to enable access.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getMetaStartAddr()">getMetaStartAddr</a></strong>()</code>
<div class="block">The RWStrategy requires meta allocation info in the root block, this
 method is the hook to enable access.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getNextOffset()">getNextOffset</a></strong>()</code>
<div class="block">The next offset at which a data item would be written on the store as an
 offset into the <em>user extent</em>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getOffset(long)">getOffset</a></strong>(long&nbsp;addr)</code>
<div class="block">The offset on the store at which the datum is stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getOffsetBits()">getOffsetBits</a></strong>()</code>
<div class="block">Although the RW Store uses a latched addressing strategy it is not
 meaningful to make this available in this interface.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getOutputStream()">getOutputStream</a></strong>()</code>
<div class="block">Return an output stream which can be used to write on the backing store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getOutputStream(com.bigdata.rawstore.IAllocationContext)">getOutputStream</a></strong>(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Return an output stream which can be used to write on the backing store
 within the given allocation context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getPhysicalAddress(long)">getPhysicalAddress</a></strong>(long&nbsp;addr)</code>
<div class="block">Determine the unencoded physical address</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/mdi/IResourceMetadata.html" title="interface in com.bigdata.mdi">IResourceMetadata</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getResourceMetadata()">getResourceMetadata</a></strong>()</code>
<div class="block">Not supported - this is available on the <a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal"><code>AbstractJournal</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore">RWStore</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getStore()">getStore</a></strong>()</code>
<div class="block">Return the backing <a href="../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/journal/StoreState.html" title="interface in com.bigdata.journal">StoreState</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getStoreState()">getStoreState</a></strong>()</code>
<div class="block">A StoreState object references critical transient data that can be used
 to determine a degree of consistency between stores, specifically for an
 HA context.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getUserExtent()">getUserExtent</a></strong>()</code>
<div class="block">The size of the user data extent in bytes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getUUID()">getUUID</a></strong>()</code>
<div class="block">Return the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> which identifies this <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache">WriteCacheService</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#getWriteCacheService()">getWriteCacheService</a></strong>()</code>
<div class="block">Return the <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a> (mainly for debugging).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#inWriteCache(long)">inWriteCache</a></strong>(long&nbsp;addr)</code>
<div class="block">Return <code>true</code> iff the address was in the write cache as of the
 moment the write cache was inspected.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#isCommitted(long)">isCommitted</a></strong>(long&nbsp;addr)</code>
<div class="block">Return true if the address is marked as committed in the <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a>
 in memory bit maps.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#isDirty()">isDirty</a></strong>()</code>
<div class="block">Supports protocol in BigdataSailConnection to check for modifications
 prior to calling rollback().</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#isFullyBuffered()">isFullyBuffered</a></strong>()</code>
<div class="block">True iff the store is fully buffered (all reads are against memory).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#isOpen()">isOpen</a></strong>()</code>
<div class="block"><code>true</code> iff the store is open.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#isReadOnly()">isReadOnly</a></strong>()</code>
<div class="block"><code>true</code> iff the store does not allow writes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#isStable()">isStable</a></strong>()</code>
<div class="block">True iff backed by stable storage.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#lockAddress(long)">lockAddress</a></strong>(long&nbsp;addr)</code>
<div class="block">An assert oriented method that allows a finite number of addresses
 to be monitored to ensure it is not freed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#newAllocationContext(boolean)">newAllocationContext</a></strong>(boolean&nbsp;isolated)</code>
<div class="block">Creates a context to be used to isolate updates to within the context until it
 is released to the parent environment.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/rwstore/IRawTx.html" title="interface in com.bigdata.rwstore">IRawTx</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#newTx()">newTx</a></strong>()</code>
<div class="block">A hook used to support session protection by incrementing and
 decrementing a transaction counter within the <a href="../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#postCommit()">postCommit</a></strong>()</code>
<div class="block">Called post commit to dispose any transient commit state retained to
 support reset/rollback.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)">postHACommit</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Provides a trigger for synchronization of transient state after a commit.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#read(long)">read</a></strong>(long&nbsp;addr)</code>
<div class="block">Read the data (unisolated).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#readFromLocalStore(long)">readFromLocalStore</a></strong>(long&nbsp;addr)</code>
<div class="block">Read from the local store in support of failover reads on nodes in a
 highly available <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#readRaw(long,%20java.nio.ByteBuffer)">readRaw</a></strong>(long&nbsp;position,
       <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;transfer)</code>
<div class="block">Used to support the rebuild protocol.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#readRootBlock(boolean)">readRootBlock</a></strong>(boolean&nbsp;rootBlock0)</code>
<div class="block">Read the specified root block from the backing file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache,%20int)">registerExternalCache</a></strong>(<a href="../../../com/bigdata/cache/ConcurrentWeakValueCache.html" title="class in com.bigdata.cache">ConcurrentWeakValueCache</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a>&gt;&nbsp;historicalIndexCache,
                     int&nbsp;byteCount)</code>
<div class="block">Call made from AbstractJournal to register the cache used.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#requiresCommit(com.bigdata.journal.IRootBlockView)">requiresCommit</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;block)</code>
<div class="block">A method that removes assumptions of how a specific strategy determines
 whether a transaction commit is required.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">resetFromHARootBlock</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</code>
<div class="block">Reload from the current root block - <strong>CAUTION : THIS IS NOT A
 RESET / ABORT</strong>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#saveDeferrals()">saveDeferrals</a></strong>()</code>
<div class="block">Saves the current list of delete blocks, returning the address allocated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">sendHALogBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg">IHALogRequest</a>&nbsp;req,
               <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
               <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)</code>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest,%20long,%20long,%20long,%20long,%20int,%20java.nio.ByteBuffer)">sendRawBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARebuildRequest</a>&nbsp;req,
             long&nbsp;sequence,
             long&nbsp;quorumToken,
             long&nbsp;fileExtent,
             long&nbsp;offset,
             int&nbsp;nbytes,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)</code>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#setExtentForLocalStore(long)">setExtentForLocalStore</a></strong>(long&nbsp;extent)</code>
<div class="block">Called from HAGlue.receiveAndReplicate to ensure the correct file extent
 prior to any writes.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#size()">size</a></strong>()</code>
<div class="block">The #of application data bytes written on the store (does not count any
 headers or root blocks that may exist for the store).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#snapshotAllocators()">snapshotAllocators</a></strong>()</code>
<div class="block">Snapshot the allocators in preparation for computing a digest of the
 committed allocations.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#toAddr(int,%20long)">toAddr</a></strong>(int&nbsp;nbytes,
      long&nbsp;offset)</code>
<div class="block">Converts a byte count and offset into a long integer.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#toString(long)">toString</a></strong>(long&nbsp;addr)</code>
<div class="block">A human readable representation of the address.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#transferTo(java.io.RandomAccessFile)">transferTo</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a>&nbsp;out)</code>
<div class="block">Operation is not supported.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#truncate(long)">truncate</a></strong>(long&nbsp;extent)</code>
<div class="block">Either truncates or extends the journal.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#useChecksums()">useChecksums</a></strong>()</code>
<div class="block">Return <code>true</code> if the store uses per-record checksums.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#write(java.nio.ByteBuffer)">write</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</code>
<div class="block">Write the data (unisolated).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#write(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">write</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
     <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</code>
<div class="block">Overridden to integrate with the shadow allocator support of the
 <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#writeOnStream(java.io.OutputStream,%20com.bigdata.journal.AbstractJournal.ISnapshotData,%20com.bigdata.quorum.Quorum,%20long)">writeOnStream</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a>&nbsp;os,
             <a href="../../../com/bigdata/journal/AbstractJournal.ISnapshotData.html" title="interface in com.bigdata.journal">AbstractJournal.ISnapshotData</a>&nbsp;snapshotData,
             <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum">Quorum</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>,<a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;&gt;&nbsp;quorum,
             long&nbsp;token)</code>
<div class="block">Write a consistent snapshot of the committed state of the backing store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">writeRawBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/HARebuildRequest.html" title="class in com.bigdata.ha.msg">HARebuildRequest</a>&nbsp;req,
              <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;transfer)</code>
<div class="block">Used to support the rebuild protocol</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">writeRawBuffer</a></strong>(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
              <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)</code>
<div class="block">Write a buffer containing data replicated from the master onto the local
 persistence store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/RWStrategy.html#writeRootBlock(com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.ForceEnum)">writeRootBlock</a></strong>(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock,
              <a href="../../../com/bigdata/journal/ForceEnum.html" title="enum in com.bigdata.journal">ForceEnum</a>&nbsp;forceOnCommit)</code>
<div class="block">Write the root block onto stable storage (ie, flush it through to disk).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="readRootBlock(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRootBlock</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;readRootBlock(boolean&nbsp;rootBlock0)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#readRootBlock(boolean)">IBufferStrategy</a></code></strong></div>
<div class="block">Read the specified root block from the backing file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#readRootBlock(boolean)">readRootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="read(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;read(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#read(long)">IRawStore</a></code></strong></div>
<div class="block">Read the data (unisolated).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#read(long)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - A long integer that encodes both the offset from which the
            data will be read and the #of bytes to be read. See
            <a href="../../../com/bigdata/rawstore/IAddressManager.html#toAddr(int,%20long)"><code>IAddressManager.toAddr(int, long)</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The data read. The buffer will be flipped to prepare for reading
         (the position will be zero and the limit will be the #of bytes
         read).</dd></dl>
</li>
</ul>
<a name="write(java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;long&nbsp;write(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#write(java.nio.ByteBuffer)">IRawStore</a></code></strong></div>
<div class="block">Write the data (unisolated).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#write(java.nio.ByteBuffer)">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data. The bytes from the current
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#position()" title="class or interface in java.nio"><code>Buffer.position()</code></a> to the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#limit()" title="class or interface in java.nio"><code>Buffer.limit()</code></a> will be written and the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#position()" title="class or interface in java.nio"><code>Buffer.position()</code></a> will be advanced to the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/Buffer.html?is-external=true#limit()" title="class or interface in java.nio"><code>Buffer.limit()</code></a> . The caller may subsequently
            modify the contents of the buffer without changing the state
            of the store (i.e., the data are copied into the store).</dd>
<dt><span class="strong">Returns:</span></dt><dd>A long integer formed that encodes both the offset from which the
         data may be read and the #of bytes to be read. See
         <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a>.</dd></dl>
</li>
</ul>
<a name="write(java.nio.ByteBuffer, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>write</h4>
<pre>public&nbsp;long&nbsp;write(<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;data,
         <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block">Overridden to integrate with the shadow allocator support of the
 <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a>. Shadow allocators may be used to isolate allocation
 changes (both allocating slots and releasing slots) across different
 processes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html#write(java.nio.ByteBuffer,%20com.bigdata.rawstore.IAllocationContext)">write</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>data</code> - The data.</dd><dd><code>context</code> - The allocation context.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The address at which the data was written.</dd></dl>
</li>
</ul>
<a name="delete(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html#delete(long)">AbstractRawStore</a></code></strong></div>
<div class="block">The default implementation is a NOP.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#delete(long)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html#delete(long)">delete</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">AbstractRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - A long integer formed using <code>Addr</code> that encodes both the
            offset at which the data was written and the #of bytes that
            were written.</dd></dl>
</li>
</ul>
<a name="delete(long, com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;void&nbsp;delete(long&nbsp;addr,
          <a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block">Must check whether there are existing transactions which may access
 this data, and if not free immediately, otherwise defer.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html#delete(long,%20com.bigdata.rawstore.IAllocationContext)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address whose allocation is to be deleted.</dd><dd><code>context</code> - The allocation context.</dd></dl>
</li>
</ul>
<a name="detachContext(com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>detachContext</h4>
<pre>public&nbsp;void&nbsp;detachContext(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IAllocationManager.html#detachContext(com.bigdata.rawstore.IAllocationContext)">IAllocationManager</a></code></strong></div>
<div class="block">Indicates that the allocation context will no longer be used, but that
 the allocations made within the context should be preserved. The
 allocations associated with the context are propagated to the parent
 allocation context. The <a href="../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a> is the top-level parent of
 allocation contexts. The allocators associated with the allocation
 context are return to the global list of available allocators.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IAllocationManager.html#detachContext(com.bigdata.rawstore.IAllocationContext)">detachContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>context</code> - The application object which serves as the allocation context.</dd></dl>
</li>
</ul>
<a name="abortContext(com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abortContext</h4>
<pre>public&nbsp;void&nbsp;abortContext(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IAllocationManager.html#abortContext(com.bigdata.rawstore.IAllocationContext)">IAllocationManager</a></code></strong></div>
<div class="block">Indicates that the allocation context will no longer be used and that the
 allocations made within the context should be discarded. The allocations
 associated with the context are discarded, as are any deletes made within
 the scope of that allocation context. The allocators associated with the
 allocation context are return to the global list of available allocators.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IAllocationManager.html#abortContext(com.bigdata.rawstore.IAllocationContext)">abortContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>context</code> - The application object which serves as the allocation context.</dd></dl>
</li>
</ul>
<a name="closeForWrites()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>closeForWrites</h4>
<pre>public&nbsp;void&nbsp;closeForWrites()</pre>
<div class="block">Operation is not supported.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#closeForWrites()">closeForWrites</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - always.</dd></dl>
</li>
</ul>
<a name="getBufferMode()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBufferMode</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/journal/BufferMode.html" title="enum in com.bigdata.journal">BufferMode</a>&nbsp;getBufferMode()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getBufferMode()">IBufferStrategy</a></code></strong></div>
<div class="block">The buffer mode supported by the implementation</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getBufferMode()">getBufferMode</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The implemented buffer mode.</dd></dl>
</li>
</ul>
<a name="getCounters()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCounters</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a>&nbsp;getCounters()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getCounters()">IBufferStrategy</a></code></strong></div>
<div class="block">Return the performance counter hierarchy.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/counters/ICounterSetAccess.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/counters/ICounterSetAccess.html" title="interface in com.bigdata.counters">ICounterSetAccess</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getExtent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtent</h4>
<pre>public&nbsp;long&nbsp;getExtent()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getExtent()">IBufferStrategy</a></code></strong></div>
<div class="block">The current size of the journal in bytes.  When the journal is backed by
 a disk file this is the actual size on disk of that file.  The initial
 value for this property is set by <a href="../../../com/bigdata/journal/Options.html#INITIAL_EXTENT"><code>Options.INITIAL_EXTENT</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getExtent()">getExtent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getHeaderSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHeaderSize</h4>
<pre>public&nbsp;int&nbsp;getHeaderSize()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getHeaderSize()">IBufferStrategy</a></code></strong></div>
<div class="block">The size of the journal header, including MAGIC, version, and both root
 blocks. This is used as an offset when computing the address of a record
 in an underlying file and is ignored by buffer modes that are not backed
 by a file (e.g., transient) or that are memory mapped (since the map is
 setup to skip over the header)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getHeaderSize()">getHeaderSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getInitialExtent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInitialExtent</h4>
<pre>public&nbsp;long&nbsp;getInitialExtent()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getInitialExtent()">IBufferStrategy</a></code></strong></div>
<div class="block">The initial extent.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getInitialExtent()">getInitialExtent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getMaximumExtent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaximumExtent</h4>
<pre>public&nbsp;long&nbsp;getMaximumExtent()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getMaximumExtent()">IBufferStrategy</a></code></strong></div>
<div class="block">The maximum extent allowable before a buffer overflow operation will be
 rejected.
 <p>
 Note: The semantics here differ from those defined by
 <a href="../../../com/bigdata/journal/Options.html#MAXIMUM_EXTENT"><code>Options.MAXIMUM_EXTENT</code></a>. The latter specifies the threshold at
 which a journal will overflow (onto another journal) while this specifies
 the maximum size to which a buffer is allowed to grow.
 <p>
 Note: This is <em>normally</em> zero (0L), which basically means that
 the maximum extent is ignored by the <a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal"><code>IBufferStrategy</code></a> but
 respected by the <a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal"><code>AbstractJournal</code></a>, resulting in a <i>soft limit</i>
 on journal overflow.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getMaximumExtent()">getMaximumExtent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The maximum extent permitted for the buffer -or- <code>0L</code>
         iff no limit is imposed.</dd></dl>
</li>
</ul>
<a name="useChecksums()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>useChecksums</h4>
<pre>public&nbsp;boolean&nbsp;useChecksums()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#useChecksums()">IBufferStrategy</a></code></strong></div>
<div class="block">Return <code>true</code> if the store uses per-record checksums. When
 <code>true</code>, an additional 4 bytes are written after the record on
 the disk. Those bytes contain the checksum of the record.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#useChecksums()">useChecksums</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getNextOffset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextOffset</h4>
<pre>public&nbsp;long&nbsp;getNextOffset()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getNextOffset()">IBufferStrategy</a></code></strong></div>
<div class="block">The next offset at which a data item would be written on the store as an
 offset into the <em>user extent</em>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getNextOffset()">getNextOffset</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getUserExtent()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUserExtent</h4>
<pre>public&nbsp;long&nbsp;getUserExtent()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getUserExtent()">IBufferStrategy</a></code></strong></div>
<div class="block">The size of the user data extent in bytes.
 <p>
 Note: The size of the user extent is always generally smaller than the
 value reported by <a href="../../../com/bigdata/journal/IBufferStrategy.html#getExtent()"><code>IBufferStrategy.getExtent()</code></a> since the latter also reports the
 space allocated to the journal header and root blocks.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getUserExtent()">getUserExtent</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="transferTo(java.io.RandomAccessFile)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>transferTo</h4>
<pre>public&nbsp;long&nbsp;transferTo(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/RandomAccessFile.html?is-external=true" title="class or interface in java.io">RandomAccessFile</a>&nbsp;out)
                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Operation is not supported.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#transferTo(java.io.RandomAccessFile)">transferTo</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>out</code> - The file to which the buffer contents will be transferred.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of bytes written.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - always.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="truncate(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>truncate</h4>
<pre>public&nbsp;void&nbsp;truncate(long&nbsp;extent)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#truncate(long)">IBufferStrategy</a></code></strong></div>
<div class="block">Either truncates or extends the journal.
 <p>
 Note: Implementations of this method MUST be synchronized so that the
 operation is atomic with respect to concurrent writers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#truncate(long)">truncate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>extent</code> - The new extent of the journal. This value represent the total
            extent of the journal, including any root blocks together with
            the user extent.</dd></dl>
</li>
</ul>
<a name="writeRootBlock(com.bigdata.journal.IRootBlockView, com.bigdata.journal.ForceEnum)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRootBlock</h4>
<pre>public&nbsp;void&nbsp;writeRootBlock(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock,
                  <a href="../../../com/bigdata/journal/ForceEnum.html" title="enum in com.bigdata.journal">ForceEnum</a>&nbsp;forceOnCommit)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#writeRootBlock(com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.ForceEnum)">IBufferStrategy</a></code></strong></div>
<div class="block">Write the root block onto stable storage (ie, flush it through to disk).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#writeRootBlock(com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.ForceEnum)">writeRootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>rootBlock</code> - The root block. Which root block is indicated by
            <a href="../../../com/bigdata/journal/IRootBlockView.html#isRootBlock0()"><code>IRootBlockView.isRootBlock0()</code></a>.</dd></dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#close()">IRawStore</a></code></strong></div>
<div class="block">Close the store immediately.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="deleteResources()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteResources</h4>
<pre>public&nbsp;void&nbsp;deleteResources()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#deleteResources()">IRawStore</a></code></strong></div>
<div class="block">Deletes the backing file(s) (if any).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#deleteResources()">deleteResources</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#destroy()">IRawStore</a></code></strong></div>
<div class="block">Closes the store immediately (if open) and deletes its persistent
 resources. Does NOT throw an <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a> if the store
 is already closed, but still deletes the backing resources.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#destroy()">destroy</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/rawstore/IRawStore.html#deleteResources()"><code>IRawStore.deleteResources()</code></a></dd></dl>
</li>
</ul>
<a name="commit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit</h4>
<pre>public&nbsp;void&nbsp;commit()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#commit()">IBufferStrategy</a></code></strong></div>
<div class="block">A method that removes assumptions of how a specific strategy commits
 data. For most strategies the action is void since the client WORM DISK
 strategy writes data as allocated. For the Read Write Strategy more data
 must be managed as part of the protocol outside of the RootBlock, and
 this is the method that triggers that management. The caller MUST provide
 appropriate synchronization.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#commit()">commit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="abort()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abort</h4>
<pre>public&nbsp;void&nbsp;abort()</pre>
<div class="block">Calls through to store and then to WriteCacheService.reset</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#abort()">abort</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="force(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>force</h4>
<pre>public&nbsp;void&nbsp;force(boolean&nbsp;metadata)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#force(boolean)">IRawStore</a></code></strong></div>
<div class="block">Force the data to stable storage. While this is NOT sufficient to
 guarantee an atomic commit, the data must be forced to disk as part of an
 atomic commit protocol.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#force(boolean)">force</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>metadata</code> - If true, then force both the file contents and the file
            metadata to disk.</dd></dl>
</li>
</ul>
<a name="getFile()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFile</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;getFile()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#getFile()">IRawStore</a></code></strong></div>
<div class="block">The backing file -or- <code>null</code> if there is no backing file
 for the store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#getFile()">getFile</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="getResourceMetadata()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getResourceMetadata</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/mdi/IResourceMetadata.html" title="interface in com.bigdata.mdi">IResourceMetadata</a>&nbsp;getResourceMetadata()</pre>
<div class="block">Not supported - this is available on the <a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal"><code>AbstractJournal</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#getResourceMetadata()">getResourceMetadata</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/UnsupportedOperationException.html?is-external=true" title="class or interface in java.lang">UnsupportedOperationException</a></code> - always</dd></dl>
</li>
</ul>
<a name="getUUID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUUID</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;getUUID()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#getUUID()">IRawStore</a></code></strong></div>
<div class="block">Return the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> which identifies this <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>. This
 supports <a href="../../../com/bigdata/rawstore/IRawStore.html#getResourceMetadata()"><code>IRawStore.getResourceMetadata()</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#getUUID()">getUUID</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="isFullyBuffered()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isFullyBuffered</h4>
<pre>public&nbsp;boolean&nbsp;isFullyBuffered()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#isFullyBuffered()">IRawStore</a></code></strong></div>
<div class="block">True iff the store is fully buffered (all reads are against memory).
 Implementations MAY change the value returned by this method over the
 life cycle of the store, e.g., to conserve memory a store may drop or
 decrease its buffer if it is backed by disk.
 <p>
 Note: This does not guarantee that the OS will not swap the buffer onto
 disk.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#isFullyBuffered()">isFullyBuffered</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="isOpen()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isOpen</h4>
<pre>public&nbsp;boolean&nbsp;isOpen()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#isOpen()">IRawStore</a></code></strong></div>
<div class="block"><code>true</code> iff the store is open.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#isOpen()">isOpen</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the store is open.</dd></dl>
</li>
</ul>
<a name="isReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReadOnly</h4>
<pre>public&nbsp;boolean&nbsp;isReadOnly()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#isReadOnly()">IRawStore</a></code></strong></div>
<div class="block"><code>true</code> iff the store does not allow writes.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#isReadOnly()">isReadOnly</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="isStable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isStable</h4>
<pre>public&nbsp;boolean&nbsp;isStable()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html#isStable()">IRawStore</a></code></strong></div>
<div class="block">True iff backed by stable storage.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#isStable()">isStable</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="size()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>size</h4>
<pre>public&nbsp;long&nbsp;size()</pre>
<div class="block">The #of application data bytes written on the store (does not count any
 headers or root blocks that may exist for the store).
 <p>
 Overridden to return the #of bytes in the file rather than the user
 bytes. This is because the <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a> does not know the #of bytes of
 user data in each allocation slot. Therefore it is not able to keep
 accurrate track of the user bytes as allocation slots are cycled.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IRawStore.html#size()">size</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore">IRawStore</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><code>(Records must
      store the as-written length for HA failover reads to be successful.)</code></dd></dl>
</li>
</ul>
<a name="getAddressManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAddressManager</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a>&nbsp;getAddressManager()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html#getAddressManager()">AbstractRawStore</a></code></strong></div>
<div class="block">Return the delegate object that provides the <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a>
 implementation for this <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>.
 <p>
 Note: <code>LRUNexus</code> depends on the delegation model to retain
 references to the <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a> without causing the
 <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> to be retained. It uses the <a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore"><code>IAddressManager</code></a> to
 decode the address in order to track the bytesOnDisk for the buffered
 records.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getAddressManager()">getAddressManager</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html#getAddressManager()">getAddressManager</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">AbstractRawStore</a></code></dd>
</dl>
</li>
</ul>
<a name="getByteCount(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getByteCount</h4>
<pre>public&nbsp;int&nbsp;getByteCount(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getByteCount(long)">IAddressManager</a></code></strong></div>
<div class="block">The length of the datum in bytes. This must be the actual length of the
 record on the disk, not the length of the caller's byte[]. This is
 necessary in order to support transparent checksums and/or compression
 for records in the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getByteCount(long)">getByteCount</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The opaque identifier that is the within store locator for
            some datum.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The offset of that datum.</dd></dl>
</li>
</ul>
<a name="getOffset(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOffset</h4>
<pre>public&nbsp;long&nbsp;getOffset(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getOffset(long)">IAddressManager</a></code></strong></div>
<div class="block">The offset on the store at which the datum is stored. While this is often
 the offset of a byte into a file on disk, implementations MAY assign
 offsets using other strategies.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getOffset(long)">getOffset</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The opaque identifier that is the within store locator for
            some datum.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The offset of that datum.</dd></dl>
</li>
</ul>
<a name="toAddr(int, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toAddr</h4>
<pre>public&nbsp;long&nbsp;toAddr(int&nbsp;nbytes,
          long&nbsp;offset)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toAddr(int,%20long)">IAddressManager</a></code></strong></div>
<div class="block">Converts a byte count and offset into a long integer.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toAddr(int,%20long)">toAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>nbytes</code> - The byte count.</dd><dd><code>offset</code> - The byte offset.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The long integer.</dd></dl>
</li>
</ul>
<a name="toString(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toString(long)">IAddressManager</a></code></strong></div>
<div class="block">A human readable representation of the address.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#toString(long)">toString</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The opaque identifier that is the within store locator for
            some datum.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A human readable representation.</dd></dl>
</li>
</ul>
<a name="requiresCommit(com.bigdata.journal.IRootBlockView)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>requiresCommit</h4>
<pre>public&nbsp;boolean&nbsp;requiresCommit(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;block)</pre>
<div class="block">A method that removes assumptions of how a specific strategy determines
 whether a transaction commit is required.
 <p>
 The state of the provided block is not relevant since it does not hold
 information on recent allocations (the meta allocations will only effect
 the root block after a commit). This is passed through to the
 <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a> which examines its internal state.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#requiresCommit(com.bigdata.journal.IRootBlockView)">requiresCommit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>block</code> - The root block held by the client, can be checked against the
            state of the Buffer Strategy</dd>
<dt><span class="strong">Returns:</span></dt><dd>whether any modification has occurred.</dd></dl>
</li>
</ul>
<a name="isDirty()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDirty</h4>
<pre>public&nbsp;boolean&nbsp;isDirty()</pre>
<div class="block">Supports protocol in BigdataSailConnection to check for modifications
 prior to calling rollback().</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#isDirty()">isDirty</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>true if store has been modified since last commit()</dd></dl>
</li>
</ul>
<a name="getMetaBitsAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaBitsAddr</h4>
<pre>public&nbsp;long&nbsp;getMetaBitsAddr()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getMetaBitsAddr()">IBufferStrategy</a></code></strong></div>
<div class="block">The RWStrategy requires meta allocation info in the root block, this
 method is the hook to enable access. The metaBitsAddr is the address in
 the file where the metaBits that control the allocation of the allocation
 blocks themselves is stored.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getMetaBitsAddr()">getMetaBitsAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the metaBitsAddr for the root block if any</dd></dl>
</li>
</ul>
<a name="getMetaStartAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaStartAddr</h4>
<pre>public&nbsp;long&nbsp;getMetaStartAddr()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getMetaStartAddr()">IBufferStrategy</a></code></strong></div>
<div class="block">The RWStrategy requires meta allocation info in the root block, this
 method is the hook to enable access. The metaStartAddr is the address in
 the file where the allocation blocks are stored.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getMetaStartAddr()">getMetaStartAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the metaStartAddr for the root block if any</dd></dl>
</li>
</ul>
<a name="getMaxRecordSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMaxRecordSize</h4>
<pre>public&nbsp;int&nbsp;getMaxRecordSize()</pre>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getMaxRecordSize()">getMaxRecordSize</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the maximum record size supported by this strategy</dd></dl>
</li>
</ul>
<a name="getOffsetBits()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOffsetBits</h4>
<pre>public&nbsp;int&nbsp;getOffsetBits()</pre>
<div class="block">Although the RW Store uses a latched addressing strategy it is not
 meaningful to make this available in this interface.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IBufferStrategy.html#getOffsetBits()">getOffsetBits</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal">IBufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the number of bits available in the address to define offset</dd></dl>
</li>
</ul>
<a name="getStore()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStore</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore">RWStore</a>&nbsp;getStore()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IRWStrategy.html#getStore()">IRWStrategy</a></code></strong></div>
<div class="block">Return the backing <a href="../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IRWStrategy.html#getStore()">getStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IRWStrategy.html" title="interface in com.bigdata.rwstore">IRWStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getPhysicalAddress(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getPhysicalAddress</h4>
<pre>public&nbsp;long&nbsp;getPhysicalAddress(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getPhysicalAddress(long)">IAddressManager</a></code></strong></div>
<div class="block">Determine the unencoded physical address</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAddressManager.html#getPhysicalAddress(long)">getPhysicalAddress</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAddressManager.html" title="interface in com.bigdata.rawstore">IAddressManager</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The encoded address</dd>
<dt><span class="strong">Returns:</span></dt><dd>an unencoded address offset</dd></dl>
</li>
</ul>
<a name="writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage, com.bigdata.io.IBufferAccess)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRawBuffer</h4>
<pre>public&nbsp;void&nbsp;writeRawBuffer(<a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                  <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)
                    throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                           <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">IHABufferStrategy</a></code></strong></div>
<div class="block">Write a buffer containing data replicated from the master onto the local
 persistence store.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">writeRawBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest, com.bigdata.ha.msg.IHAWriteMessage, com.bigdata.io.IBufferAccess)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendHALogBuffer</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;sendHALogBuffer(<a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg">IHALogRequest</a>&nbsp;req,
                           <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                           <a href="../../../com/bigdata/io/IBufferAccess.html" title="interface in com.bigdata.io">IBufferAccess</a>&nbsp;b)
                             throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">IHABufferStrategy</a></code></strong></div>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendHALogBuffer(com.bigdata.ha.msg.IHALogRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20com.bigdata.io.IBufferAccess)">sendHALogBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The <a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg"><code>IHALogRequest</code></a> for some HALog file.</dd><dd><code>msg</code> - The <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a>.</dd><dd><code>b</code> - The raw buffer. Bytes from position to limit will be sent.
            remaining() must equal <a href="../../../com/bigdata/ha/msg/IHAWriteMessageBase.html#getSize()"><code>IHAWriteMessageBase.getSize()</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for that request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest, long, long, long, long, int, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendRawBuffer</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;sendRawBuffer(<a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARebuildRequest</a>&nbsp;req,
                         long&nbsp;sequence,
                         long&nbsp;quorumToken,
                         long&nbsp;fileExtent,
                         long&nbsp;offset,
                         int&nbsp;nbytes,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;b)
                           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest,%20long,%20long,%20long,%20long,%20int,%20java.nio.ByteBuffer)">IHABufferStrategy</a></code></strong></div>
<div class="block">Send an <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> and the associated raw buffer through the
 write pipeline.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#sendRawBuffer(com.bigdata.ha.msg.IHARebuildRequest,%20long,%20long,%20long,%20long,%20int,%20java.nio.ByteBuffer)">sendRawBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The <a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg"><code>IHARebuildRequest</code></a> to replicate the backing file to
            the requesting service.</dd><dd><code>sequence</code> - The sequence of this <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg"><code>IHAWriteMessage</code></a> (origin ZERO
            (0)).</dd><dd><code>quorumToken</code> - The quorum token of the leader, which must remain valid across
            the rebuild protocol.</dd><dd><code>fileExtent</code> - The file extent as of the moment that the leader begins to
            replicate the existing backing file.</dd><dd><code>offset</code> - The starting offset (relative to the root blocks).</dd><dd><code>nbytes</code> - The #of bytes to be sent.</dd><dd><code>b</code> - The raw buffer. The buffer will be cleared and filled with the
            specified data, then sent down the write pipeline.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for that request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="writeOnStream(java.io.OutputStream, com.bigdata.journal.AbstractJournal.ISnapshotData, com.bigdata.quorum.Quorum, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeOnStream</h4>
<pre>public&nbsp;void&nbsp;writeOnStream(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a>&nbsp;os,
                 <a href="../../../com/bigdata/journal/AbstractJournal.ISnapshotData.html" title="interface in com.bigdata.journal">AbstractJournal.ISnapshotData</a>&nbsp;snapshotData,
                 <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum">Quorum</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>,<a href="../../../com/bigdata/ha/QuorumService.html" title="interface in com.bigdata.ha">QuorumService</a>&lt;<a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>&gt;&gt;&nbsp;quorum,
                 long&nbsp;token)
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                          <a href="../../../com/bigdata/quorum/QuorumException.html" title="class in com.bigdata.quorum">QuorumException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeOnStream(java.io.OutputStream,%20com.bigdata.journal.AbstractJournal.ISnapshotData,%20com.bigdata.quorum.Quorum,%20long)">IHABufferStrategy</a></code></strong></div>
<div class="block">Write a consistent snapshot of the committed state of the backing store.
 This method writes all data starting after the root blocks. The caller is
 responsible for putting down the root blocks themselves.
 <p>
 Note: The caller is able to obtain both root blocks atomically, while the
 strategy may not be aware of the root blocks or may not be able to
 coordinate their atomic capture.
 <p>
 Note: The caller must ensure that the resulting snapshot will be
 consistent either by ensuring that no writes occur or by taking a
 read-lock that will prevent overwrites of committed state during this
 operation.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeOnStream(java.io.OutputStream,%20com.bigdata.journal.AbstractJournal.ISnapshotData,%20com.bigdata.quorum.Quorum,%20long)">writeOnStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>os</code> - Where to write the data.</dd><dd><code>quorum</code> - The <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.</dd><dd><code>token</code> - The token that must remain valid during this operation.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="../../../com/bigdata/quorum/QuorumException.html" title="class in com.bigdata.quorum">QuorumException</a></code> - if the service is not joined with the met quorum for that
             token at any point during the operation.</dd></dl>
</li>
</ul>
<a name="snapshotAllocators()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>snapshotAllocators</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshotAllocators()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#snapshotAllocators()">IHABufferStrategy</a></code></strong></div>
<div class="block">Snapshot the allocators in preparation for computing a digest of the
 committed allocations.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#snapshotAllocators()">snapshotAllocators</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The snapshot in a format that is backing store specific -or-
         <code>null</code> if the snapshot is a NOP for the
         <a href="../../../com/bigdata/journal/IBufferStrategy.html" title="interface in com.bigdata.journal"><code>IBufferStrategy</code></a> (e.g., for the WORM).</dd></dl>
</li>
</ul>
<a name="computeDigest(java.lang.Object, java.security.MessageDigest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeDigest</h4>
<pre>public&nbsp;void&nbsp;computeDigest(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&nbsp;snapshot,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/security/MessageDigest.html?is-external=true" title="class or interface in java.security">MessageDigest</a>&nbsp;digest)
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a>,
                          <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#computeDigest(java.lang.Object,%20java.security.MessageDigest)">IHABufferStrategy</a></code></strong></div>
<div class="block">Compute the digest of the entire backing store (including the magic, file
 version, root blocks, etc).
 <p>
 Note: The digest is not reliable unless you either use a snapshot or
 suspend writes (on the quorum) while it is computed.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#computeDigest(java.lang.Object,%20java.security.MessageDigest)">computeDigest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>snapshot</code> - The allocator snapshot (optional). When given, the digest is
            computed only for the snapshot. When <code>null</code> it is
            computed for the entire file.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="readFromLocalStore(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFromLocalStore</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;readFromLocalStore(long&nbsp;addr)
                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#readFromLocalStore(long)">IHABufferStrategy</a></code></strong></div>
<div class="block">Read from the local store in support of failover reads on nodes in a
 highly available <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#readFromLocalStore(long)">readFromLocalStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="setExtentForLocalStore(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setExtentForLocalStore</h4>
<pre>public&nbsp;void&nbsp;setExtentForLocalStore(long&nbsp;extent)
                            throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                   <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Called from HAGlue.receiveAndReplicate to ensure the correct file extent
 prior to any writes. For RW this is essential as the allocation blocks
 for current committed data could otherwise be overwritten and the store
 invalidated.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#setExtentForLocalStore(long)">setExtentForLocalStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/IHABufferStrategy.html#setExtentForLocalStore(long)"><code>IHABufferStrategy.setExtentForLocalStore(long)</code></a></dd></dl>
</li>
</ul>
<a name="lockAddress(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>lockAddress</h4>
<pre>public&nbsp;boolean&nbsp;lockAddress(long&nbsp;addr)</pre>
<div class="block">An assert oriented method that allows a finite number of addresses
 to be monitored to ensure it is not freed.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - - address to be locked</dd>
<dt><span class="strong">Returns:</span></dt><dd>true - for use in assert statement</dd></dl>
</li>
</ul>
<a name="getLastReleaseTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastReleaseTime</h4>
<pre>public&nbsp;long&nbsp;getLastReleaseTime()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#getLastReleaseTime()">IHistoryManager</a></code></strong></div>
<div class="block">If history is retained this returns the time for which data was most
 recently released. No request can be made for data earlier than this.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#getLastReleaseTime()">getLastReleaseTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>latest data release time</dd></dl>
</li>
</ul>
<a name="checkDeferredFrees(com.bigdata.journal.AbstractJournal)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>checkDeferredFrees</h4>
<pre>public&nbsp;int&nbsp;checkDeferredFrees(<a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a>&nbsp;journal)</pre>
<div class="block">Lifted to provide a direct interface from the Journal so that the
 CommitRecordIndex can be pruned prior to store commit.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#checkDeferredFrees(com.bigdata.journal.AbstractJournal)">checkDeferredFrees</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>number of addresses freed</dd><dt><span class="strong">See Also:</span></dt><dd><code>AbstractJournal#commitNow()</code></dd></dl>
</li>
</ul>
<a name="isCommitted(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isCommitted</h4>
<pre>public&nbsp;boolean&nbsp;isCommitted(long&nbsp;addr)</pre>
<div class="block">Return true if the address is marked as committed in the <a href="../../../com/bigdata/rwstore/RWStore.html" title="class in com.bigdata.rwstore"><code>RWStore</code></a>
 in memory bit maps.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IRWStrategy.html#isCommitted(long)">isCommitted</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IRWStrategy.html" title="interface in com.bigdata.rwstore">IRWStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the address is currently committed.</dd></dl>
</li>
</ul>
<a name="inWriteCache(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inWriteCache</h4>
<pre>public&nbsp;boolean&nbsp;inWriteCache(long&nbsp;addr)</pre>
<div class="block">Return <code>true</code> iff the address was in the write cache as of the
 moment the write cache was inspected.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address.</dd></dl>
</li>
</ul>
<a name="newTx()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newTx</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/rwstore/IRawTx.html" title="interface in com.bigdata.rwstore">IRawTx</a>&nbsp;newTx()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#newTx()">IHistoryManager</a></code></strong></div>
<div class="block">A hook used to support session protection by incrementing and
 decrementing a transaction counter within the <a href="../../../com/bigdata/rwstore/IStore.html" title="interface in com.bigdata.rwstore"><code>IStore</code></a>. As long as
 a transaction is active we can not release data which is currently marked
 as freed but was committed at the point the session started.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#newTx()">newTx</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>registerExternalCache</h4>
<pre>public&nbsp;void&nbsp;registerExternalCache(<a href="../../../com/bigdata/cache/ConcurrentWeakValueCache.html" title="class in com.bigdata.cache">ConcurrentWeakValueCache</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>,<a href="../../../com/bigdata/journal/ICommitter.html" title="interface in com.bigdata.journal">ICommitter</a>&gt;&nbsp;historicalIndexCache,
                         int&nbsp;byteCount)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache,%20int)">IHistoryManager</a></code></strong></div>
<div class="block">Call made from AbstractJournal to register the cache used. This can then
 be accessed to clear entries when storage is made available for
 re-cycling.
 <p>
 Note: It is not safe to clear at the point of the delete request since
 the data could still be loaded if the data is retained for a period due
 to a non-zero retention period or session protection.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#registerExternalCache(com.bigdata.cache.ConcurrentWeakValueCache,%20int)">registerExternalCache</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
</dl>
</li>
</ul>
<a name="saveDeferrals()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>saveDeferrals</h4>
<pre>public&nbsp;long&nbsp;saveDeferrals()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#saveDeferrals()">IHistoryManager</a></code></strong></div>
<div class="block">Saves the current list of delete blocks, returning the address allocated.
 This can be used later to retrieve the addresses of allocations to be
 freed.
 <p>
 Writes the content of currentTxnFreeList to the store.
 <p>
 These are the current buffered frees that have yet been saved into a
 block referenced from the deferredFreeList</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IHistoryManager.html#saveDeferrals()">saveDeferrals</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IHistoryManager.html" title="interface in com.bigdata.rwstore">IHistoryManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>the address of the deferred addresses saved on the store, or zero
         if none.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/DeleteBlockCommitter.html" title="class in com.bigdata.journal"><code>DeleteBlockCommitter</code></a></dd></dl>
</li>
</ul>
<a name="getInputStream(long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInputStream</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;getInputStream(long&nbsp;addr)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IStreamStore.html#getInputStream(long)">IStreamStore</a></code></strong></div>
<div class="block">Return an input stream from which a previously written stream may be read
 back.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IStreamStore.html#getInputStream(long)">getInputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html#getInputStream(long)">getInputStream</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">AbstractRawStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>addr</code> - The address at which the stream was written.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an input stream for the data for provided address</dd></dl>
</li>
</ul>
<a name="getOutputStream()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputStream</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a>&nbsp;getOutputStream()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IStreamStore.html#getOutputStream()">IStreamStore</a></code></strong></div>
<div class="block">Return an output stream which can be used to write on the backing store.
 You can recover the address used to read back the data from the
 <a href="../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore"><code>IPSOutputStream</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IStreamStore.html#getOutputStream()">getOutputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IStreamStore.html" title="interface in com.bigdata.rawstore">IStreamStore</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html#getOutputStream()">getOutputStream</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/rawstore/AbstractRawStore.html" title="class in com.bigdata.rawstore">AbstractRawStore</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The output stream.</dd></dl>
</li>
</ul>
<a name="getOutputStream(com.bigdata.rawstore.IAllocationContext)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOutputStream</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore">IPSOutputStream</a>&nbsp;getOutputStream(<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;context)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html#getOutputStream(com.bigdata.rawstore.IAllocationContext)">IAllocationManagerStore</a></code></strong></div>
<div class="block">Return an output stream which can be used to write on the backing store
 within the given allocation context. You can recover the address used to
 read back the data from the <a href="../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore"><code>IPSOutputStream</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html#getOutputStream(com.bigdata.rawstore.IAllocationContext)">getOutputStream</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rawstore/IAllocationManagerStore.html" title="interface in com.bigdata.rawstore">IAllocationManagerStore</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>context</code> - The context within which any allocations are made by the
            returned <a href="../../../com/bigdata/rawstore/IPSOutputStream.html" title="class in com.bigdata.rawstore"><code>IPSOutputStream</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an output stream to stream data to and to retrieve an address to
         later stream the data back.</dd></dl>
</li>
</ul>
<a name="resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetFromHARootBlock</h4>
<pre>public&nbsp;void&nbsp;resetFromHARootBlock(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">IHABufferStrategy</a></code></strong></div>
<div class="block">Reload from the current root block - <strong>CAUTION : THIS IS NOT A
 RESET / ABORT</strong>. The purpose of this method is to reload the root
 block under some very limited circumstances, specifically when the root
 blocks were replaced during a REBUILD or RESYNC of the backing store for
 HA.
 <p>
 Note: This method is used when the root blocks of the leader are
 installed onto a follower. This can change the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> for the
 backing store file. The <a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal"><code>IHABufferStrategy</code></a> implementation MUST
 update any cached value for that <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a>.
 <p>
 Use <a href="../../../com/bigdata/journal/IHABufferStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)"><code>IHABufferStrategy.postHACommit(IRootBlockView)</code></a> rather than this method in the
 2-phase commit on the follower.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#resetFromHARootBlock(com.bigdata.journal.IRootBlockView)">resetFromHARootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/662" >
      Latency on followers during commit on leader </a></dd></dl>
</li>
</ul>
<a name="getBlockSequence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockSequence</h4>
<pre>public&nbsp;long&nbsp;getBlockSequence()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getBlockSequence()">IHABufferStrategy</a></code></strong></div>
<div class="block">Return the #of <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks that were written out for the
 last write set. This is used to communicate the #of write cache blocks in
 the commit point back to <a href="../../../com/bigdata/journal/AbstractJournal.html#commitNow(long)"><code>AbstractJournal.commitNow(long)</code></a>. It is
 part of the commit protocol.
 <p>
 Note: This DOES NOT reflect the current value of the block sequence
 counter for ongoing writes. That counter is owned by the
 <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getBlockSequence()">getBlockSequence</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/io/writecache/WriteCacheService.html#resetSequence()"><code>WriteCacheService.resetSequence()</code></a>, 
<a href="../../../com/bigdata/journal/IHABufferStrategy.html#getCurrentBlockSequence()"><code>FIXME I would prefer to expose the {@link WriteCacheService} to the
      {@link AbstractJournal} and let it directly invoke
      {@link WriteCacheService#resetSequence()}. The current pattern
      requires the {@link IHABufferStrategy} implementations to track the
      lastBlockSequence and is messy.</code></a></dd></dl>
</li>
</ul>
<a name="getCurrentBlockSequence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCurrentBlockSequence</h4>
<pre>public&nbsp;long&nbsp;getCurrentBlockSequence()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getCurrentBlockSequence()">IHABufferStrategy</a></code></strong></div>
<div class="block">Return the then-current write cache block sequence.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getCurrentBlockSequence()">getCurrentBlockSequence</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getBlockSequence()"><code>IHABufferStrategy.getBlockSequence()</code></a></dd></dl>
</li>
</ul>
<a name="readRaw(long, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readRaw</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;readRaw(long&nbsp;position,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;transfer)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#readRaw(long,%20java.nio.ByteBuffer)">IHABufferStrategy</a></code></strong></div>
<div class="block">Used to support the rebuild protocol.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#readRaw(long,%20java.nio.ByteBuffer)">readRaw</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>position</code> - - absolute file offset</dd><dd><code>transfer</code> - - target buffer for read</dd></dl>
</li>
</ul>
<a name="writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest, com.bigdata.ha.msg.IHAWriteMessage, java.nio.ByteBuffer)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeRawBuffer</h4>
<pre>public&nbsp;void&nbsp;writeRawBuffer(<a href="../../../com/bigdata/ha/msg/HARebuildRequest.html" title="class in com.bigdata.ha.msg">HARebuildRequest</a>&nbsp;req,
                  <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;transfer)
                    throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">IHABufferStrategy</a></code></strong></div>
<div class="block">Used to support the rebuild protocol</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#writeRawBuffer(com.bigdata.ha.msg.HARebuildRequest,%20com.bigdata.ha.msg.IHAWriteMessage,%20java.nio.ByteBuffer)">writeRawBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getCommitLock()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitLock</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks">Lock</a>&nbsp;getCommitLock()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IRWStrategy.html#getCommitLock()">IRWStrategy</a></code></strong></div>
<div class="block">Optionally return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/locks/Lock.html?is-external=true" title="class or interface in java.util.concurrent.locks"><code>Lock</code></a> that must be used (when non-
 <code>null</code>) to make the <a href="../../../com/bigdata/journal/IBufferStrategy.html#commit()"><code>IBufferStrategy.commit()</code></a> /
 <a href="../../../com/bigdata/rwstore/IRWStrategy.html#postCommit()"><code>IRWStrategy.postCommit()</code></a> strategy atomic.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IRWStrategy.html#getCommitLock()">getCommitLock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IRWStrategy.html" title="interface in com.bigdata.rwstore">IRWStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="postCommit()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postCommit</h4>
<pre>public&nbsp;void&nbsp;postCommit()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IRWStrategy.html#postCommit()">IRWStrategy</a></code></strong></div>
<div class="block">Called post commit to dispose any transient commit state retained to
 support reset/rollback.
 <p>
 Note: It is the responsibility of the commit protocol layers to wind up
 calling <a href="../../../com/bigdata/journal/IBufferStrategy.html#abort()"><code>IBufferStrategy.abort()</code></a> if there is a failure during the
 commit protocol.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IRWStrategy.html#postCommit()">postCommit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IRWStrategy.html" title="interface in com.bigdata.rwstore">IRWStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="postHACommit(com.bigdata.journal.IRootBlockView)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>postHACommit</h4>
<pre>public&nbsp;void&nbsp;postHACommit(<a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;rootBlock)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)">IHABufferStrategy</a></code></strong></div>
<div class="block">Provides a trigger for synchronization of transient state after a commit.
 <p>
 For the RWStore this is used to resynchronize the allocators during the
 2-phase commit on the follower with the delta in the allocators from the
 write set associated with that commit.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#postHACommit(com.bigdata.journal.IRootBlockView)">postHACommit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>rootBlock</code> - The newly installed root block.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/662" >
      Latency on followers during commit on leader </a></dd></dl>
</li>
</ul>
<a name="getWriteCacheService()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWriteCacheService</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache">WriteCacheService</a>&nbsp;getWriteCacheService()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getWriteCacheService()">IHABufferStrategy</a></code></strong></div>
<div class="block">Return the <a href="../../../com/bigdata/io/writecache/WriteCacheService.html" title="class in com.bigdata.io.writecache"><code>WriteCacheService</code></a> (mainly for debugging).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getWriteCacheService()">getWriteCacheService</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="getStoreState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreState</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/journal/StoreState.html" title="interface in com.bigdata.journal">StoreState</a>&nbsp;getStoreState()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getStoreState()">IHABufferStrategy</a></code></strong></div>
<div class="block">A StoreState object references critical transient data that can be used
 to determine a degree of consistency between stores, specifically for an
 HA context.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/journal/IHABufferStrategy.html#getStoreState()">getStoreState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/journal/IHABufferStrategy.html" title="interface in com.bigdata.journal">IHABufferStrategy</a></code></dd>
</dl>
</li>
</ul>
<a name="newAllocationContext(boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>newAllocationContext</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/rawstore/IAllocationContext.html" title="interface in com.bigdata.rawstore">IAllocationContext</a>&nbsp;newAllocationContext(boolean&nbsp;isolated)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/rwstore/IAllocationManager.html#newAllocationContext(boolean)">IAllocationManager</a></code></strong></div>
<div class="block">Creates a context to be used to isolate updates to within the context until it
 is released to the parent environment.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/rwstore/IAllocationManager.html#newAllocationContext(boolean)">newAllocationContext</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/rwstore/IAllocationManager.html" title="interface in com.bigdata.rwstore">IAllocationManager</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>a new IAlocationContext</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/RWStrategy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/RWAddressManager.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/SnapshotTask.html" title="class in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/RWStrategy.html" target="_top">Frames</a></li>
<li><a href="RWStrategy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2019 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
