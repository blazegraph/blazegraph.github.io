<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_51) on Thu Jan 21 00:30:57 EST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>TestTransactionService (Blazegraph Database Platform 2.0.0-SNAPSHOT API)</title>
<meta name="date" content="2016-01-21">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="TestTransactionService (Blazegraph Database Platform 2.0.0-SNAPSHOT API)";
        }
    }
    catch(err) {
    }
//-->
var methods = {"i0":10,"i1":10,"i2":10,"i3":10,"i4":10,"i5":10,"i6":10,"i7":10,"i8":10,"i9":10,"i10":10,"i11":10,"i12":10,"i13":10,"i14":10,"i15":10,"i16":10,"i17":10,"i18":10,"i19":10,"i20":10,"i21":10,"i22":10,"i23":10,"i24":10,"i25":10,"i26":10,"i27":10};
var tabs = {65535:["t0","All Methods"],2:["t2","Instance Methods"],8:["t4","Concrete Methods"]};
var altColor = "altColor";
var rowColor = "rowColor";
var tableTab = "tableTab";
var activeTableTab = "activeTableTab";
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TestTransactionService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/TestTemporaryStore.TestRawStore.html" title="class in com.bigdata.journal"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/TestTransactionService.html" target="_top">Frames</a></li>
<li><a href="TestTransactionService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.junit.framework.TestCase2">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.journal</div>
<h2 title="Class TestTransactionService" class="title">Class TestTransactionService</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>junit.framework.Assert</li>
<li>
<ul class="inheritance">
<li>junit.framework.TestCase</li>
<li>
<ul class="inheritance">
<li><a href="../../../junit/framework/TestCase2.html" title="class in junit.framework">junit.framework.TestCase2</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.journal.TestTransactionService</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd>junit.framework.Test</dd>
</dl>
<hr>
<br>
<pre>public class <span class="typeNameLabel">TestTransactionService</span>
extends <a href="../../../junit/framework/TestCase2.html" title="class in junit.framework">TestCase2</a></pre>
<div class="block">Unit tests of the <a href="../../../com/bigdata/service/AbstractTransactionService.html" title="class in com.bigdata.service"><code>AbstractTransactionService</code></a> using a mock client.</div>
<dl>
<dt><span class="simpleTagLabel">Version:</span></dt>
<dd>$Id$</dd>
<dt><span class="simpleTagLabel">Author:</span></dt>
<dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
</dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested.class.summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static class&nbsp;</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal">TestTransactionService.MockTransactionService</a></span></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="nested.classes.inherited.from.class.junit.framework.TestCase2">
<!--   -->
</a>
<h3>Nested classes/interfaces inherited from class&nbsp;junit.framework.<a href="../../../junit/framework/TestCase2.html" title="class in junit.framework">TestCase2</a></h3>
<code><a href="../../../junit/framework/TestCase2.MyProperties.html" title="class in junit.framework">TestCase2.MyProperties</a>, <a href="../../../junit/framework/TestCase2.RandomType.html" title="class in junit.framework">TestCase2.RandomType</a></code></li>
</ul>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field.summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields.inherited.from.class.junit.framework.TestCase2">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;junit.framework.<a href="../../../junit/framework/TestCase2.html" title="class in junit.framework">TestCase2</a></h3>
<code><a href="../../../junit/framework/TestCase2.html#Z:Z_randomType">_randomType</a>, <a href="../../../junit/framework/TestCase2.html#log">log</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#TestTransactionService--">TestTransactionService</a></span>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colOne"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#TestTransactionService-java.lang.String-">TestTransactionService</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg0)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method.summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="memberSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span id="t0" class="activeTableTab"><span>All Methods</span><span class="tabEnd">&nbsp;</span></span><span id="t2" class="tableTab"><span><a href="javascript:show(2);">Instance Methods</a></span><span class="tabEnd">&nbsp;</span></span><span id="t4" class="tableTab"><span><a href="javascript:show(8);">Concrete Methods</a></span><span class="tabEnd">&nbsp;</span></span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr id="i0" class="altColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal">TestTransactionService.MockTransactionService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#newFixture--">newFixture</a></span>()</code>
<div class="block">Implementation uses a mock client.</div>
</td>
</tr>
<tr id="i1" class="rowColor">
<td class="colFirst"><code>protected <a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal">TestTransactionService.MockTransactionService</a></code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#newFixture-java.util.Properties-">newFixture</a></span>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;p)</code>
<div class="block">Implementation uses a mock client.</div>
</td>
</tr>
<tr id="i2" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_abortAll--">test_abortAll</a></span>()</code>
<div class="block">Test for <a href="../../../com/bigdata/service/AbstractTransactionService.html#abortAllTx--"><code>AbstractTransactionService.abortAllTx()</code></a>.</div>
</td>
</tr>
<tr id="i3" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_nothingCommitted_readOnlyTx--">test_newTx_nothingCommitted_readOnlyTx</a></span>()</code>
<div class="block">Verify the behavior of the <a href="../../../com/bigdata/service/AbstractTransactionService.html" title="class in com.bigdata.service"><code>AbstractTransactionService</code></a> when there
 are no commit points and a read-only transaction is requested.</div>
</td>
</tr>
<tr id="i4" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_nothingCommitted_readWriteTx--">test_newTx_nothingCommitted_readWriteTx</a></span>()</code>
<div class="block">Verify the behavior of the <a href="../../../com/bigdata/service/AbstractTransactionService.html" title="class in com.bigdata.service"><code>AbstractTransactionService</code></a> when there
 are no commit points and a read-write transaction is requested.</div>
</td>
</tr>
<tr id="i5" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readCommitted01--">test_newTx_readCommitted01</a></span>()</code>
<div class="block">Test ability to start a read-committed tx when [lastCommitTime] is
 non-zero.</div>
</td>
</tr>
<tr id="i6" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readCommitted02--">test_newTx_readCommitted02</a></span>()</code>
<div class="block">Unit test when [lastCommitTime] is zero.</div>
</td>
</tr>
<tr id="i7" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_contention--">test_newTx_readOnly_contention</a></span>()</code>
<div class="block">Unit test in which all possible start times for a read-only transaction
 are used, forcing the caller to block.</div>
</td>
</tr>
<tr id="i8" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_historyGone--">test_newTx_readOnly_historyGone</a></span>()</code>
<div class="block">Verify that a request for an historical state that is no longer available
 will be rejected.</div>
</td>
</tr>
<tr id="i9" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_historyGone2--">test_newTx_readOnly_historyGone2</a></span>()</code>
<div class="block">This is a variant on <a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_historyGone--"><code>test_newTx_readOnly_historyGone()</code></a> where we
 do not start tx2.</div>
</td>
</tr>
<tr id="i10" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_releaseTimeRespectsReadsOnCommitTime--">test_newTx_readOnly_releaseTimeRespectsReadsOnCommitTime</a></span>()</code>
<div class="block">Unit test verifies that the release time does NOT advance when the
 earliest running transaction terminates but a second transaction is still
 active which reads on the same commit time.</div>
</td>
</tr>
<tr id="i11" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_timestamp_is_lastCommitTime--">test_newTx_readOnly_timestamp_is_lastCommitTime</a></span>()</code>
<div class="block">Verify that you can create a read-only transaction by providing the
 lastCommitTime as the timestamp.</div>
</td>
</tr>
<tr id="i12" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_timestampInFuture--">test_newTx_readOnly_timestampInFuture</a></span>()</code>
<div class="block">Verify that you can create a read-only transaction using a timestamp that
 is in the future.</div>
</td>
</tr>
<tr id="i13" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_txComplete_postConditions--">test_newTx_readOnly_txComplete_postConditions</a></span>()</code>
<div class="block">Create a read-only transaction, commit it, and then attempt to re-commit
 it and to abort it - those operations should fail with an
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>.</div>
</td>
</tr>
<tr id="i14" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly--">test_newTx_readOnly</a></span>()</code>
<div class="block">Unit test for a new read-only transaction.</div>
</td>
</tr>
<tr id="i15" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readWrite_01--">test_newTx_readWrite_01</a></span>()</code>
<div class="block">Create a new read-write tx and then abort it.</div>
</td>
</tr>
<tr id="i16" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readWrite_02--">test_newTx_readWrite_02</a></span>()</code>
<div class="block">Create a new read-write tx and then commit it.</div>
</td>
</tr>
<tr id="i17" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readWrite_03--">test_newTx_readWrite_03</a></span>()</code>
<div class="block">Create two read-write transactions and commit both.</div>
</td>
</tr>
<tr id="i18" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readWrite_txComplete_postConditions--">test_newTx_readWrite_txComplete_postConditions</a></span>()</code>
<div class="block">Create a read-write transaction, commit it, and then attempt to re-commit
 it and to abort it - those operations should fail with an
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>.</div>
</td>
</tr>
<tr id="i19" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_shutdown_interrupted--">test_shutdown_interrupted</a></span>()</code>
<div class="block">Test that shutdown() may be interrupted while waiting for a tx to
 complete and that it will convert to shutdownNow() which does not wait.</div>
</td>
</tr>
<tr id="i20" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_shutdown_newTxNotAllowed--">test_shutdown_newTxNotAllowed</a></span>()</code>
<div class="block">Test that shutdown() does not permit new tx to start (a variety of things
 are not permitted during shutdown).</div>
</td>
</tr>
<tr id="i21" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_shutdown_nothingRunning--">test_shutdown_nothingRunning</a></span>()</code>
<div class="block">Verifies that we can shutdown() the service when there are no
 active transactions.</div>
</td>
</tr>
<tr id="i22" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_shutdown_waitsForReadOnlyTx_aborts--">test_shutdown_waitsForReadOnlyTx_aborts</a></span>()</code>
<div class="block">Test that the service will wait for a read-only tx to abort.</div>
</td>
</tr>
<tr id="i23" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_shutdown_waitsForReadOnlyTx_commits--">test_shutdown_waitsForReadOnlyTx_commits</a></span>()</code>
<div class="block">Test that the service will wait for a read-only tx to commit.</div>
</td>
</tr>
<tr id="i24" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_shutdown_waitsForReadWriteTx_aborts--">test_shutdown_waitsForReadWriteTx_aborts</a></span>()</code>
<div class="block">Test that the service will wait for a read-write tx to abort.</div>
</td>
</tr>
<tr id="i25" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_shutdown_waitsForReadWriteTx_commits--">test_shutdown_waitsForReadWriteTx_commits</a></span>()</code>
<div class="block">Test that the service will wait for a read-write tx to commit.</div>
</td>
</tr>
<tr id="i26" class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_updateReleaseTime_noTxRemaining--">test_updateReleaseTime_noTxRemaining</a></span>()</code>
<div class="block">Test verifies the advance of the release time when the earliest running
 transaction completes.</div>
</td>
</tr>
<tr id="i27" class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><span class="memberNameLink"><a href="../../../com/bigdata/journal/TestTransactionService.html#test_updateReleaseTime_otherTxStillActive--">test_updateReleaseTime_otherTxStillActive</a></span>()</code>
<div class="block">A unit test of advancing the last release time for the case where there
 are still active transactions running once the earliest active
 transaction commits.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.junit.framework.TestCase2">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;junit.framework.<a href="../../../junit/framework/TestCase2.html" title="class in junit.framework">TestCase2</a></h3>
<code><a href="../../../junit/framework/TestCase2.html#assertEquals-boolean:A-boolean:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-byte:A-byte:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-char:A-char:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-double:A-double:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-double-double-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-float:A-float:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-float-float-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-int:A-int:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-long:A-long:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.Object:A-java.lang.Object:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-short:A-short:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-boolean:A-boolean:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-byte:A-byte:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-char:A-char:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-double:A-double:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-double-double-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-float:A-float:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-float-float-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-int:A-int:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-long:A-long:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-java.lang.Object:A-java.lang.Object:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEquals-java.lang.String-short:A-short:A-">assertEquals</a>, <a href="../../../junit/framework/TestCase2.html#assertEqualsWithinUlps-java.lang.String-double-double-long-">assertEqualsWithinUlps</a>, <a href="../../../junit/framework/TestCase2.html#assertSameArray-java.lang.Object:A-java.lang.Object:A-">assertSameArray</a>, <a href="../../../junit/framework/TestCase2.html#assertSameArray-java.lang.String-java.lang.Object:A-java.lang.Object:A-">assertSameArray</a>, <a href="../../../junit/framework/TestCase2.html#assertSameBigDecimal-java.math.BigDecimal-java.math.BigDecimal-">assertSameBigDecimal</a>, <a href="../../../junit/framework/TestCase2.html#assertSameBigDecimal-java.lang.String-java.math.BigDecimal-java.math.BigDecimal-">assertSameBigDecimal</a>, <a href="../../../junit/framework/TestCase2.html#assertSameBigInteger-java.math.BigInteger-java.math.BigInteger-">assertSameBigInteger</a>, <a href="../../../junit/framework/TestCase2.html#assertSameBigInteger-java.lang.String-java.math.BigInteger-java.math.BigInteger-">assertSameBigInteger</a>, <a href="../../../junit/framework/TestCase2.html#assertSameIterator-java.lang.Object:A-java.util.Iterator-">assertSameIterator</a>, <a href="../../../junit/framework/TestCase2.html#assertSameIterator-java.lang.String-java.lang.Object:A-java.util.Iterator-">assertSameIterator</a>, <a href="../../../junit/framework/TestCase2.html#assertSameIteratorAnyOrder-java.lang.Object:A-java.util.Iterator-">assertSameIteratorAnyOrder</a>, <a href="../../../junit/framework/TestCase2.html#assertSameIteratorAnyOrder-java.lang.String-java.lang.Object:A-java.util.Iterator-">assertSameIteratorAnyOrder</a>, <a href="../../../junit/framework/TestCase2.html#assertSameValue-java.lang.Object-java.lang.Object-">assertSameValue</a>, <a href="../../../junit/framework/TestCase2.html#assertSameValue-java.lang.String-java.lang.Object-java.lang.Object-">assertSameValue</a>, <a href="../../../junit/framework/TestCase2.html#assertZeroUlps-double-double-">assertZeroUlps</a>, <a href="../../../junit/framework/TestCase2.html#assertZeroUlps-float-float-">assertZeroUlps</a>, <a href="../../../junit/framework/TestCase2.html#fail-java.lang.String-java.lang.Throwable-">fail</a>, <a href="../../../junit/framework/TestCase2.html#getInnerCause-java.lang.Throwable-java.lang.Class-">getInnerCause</a>, <a href="../../../junit/framework/TestCase2.html#getNormalInt-int-">getNormalInt</a>, <a href="../../../junit/framework/TestCase2.html#getProjectBuildPath--">getProjectBuildPath</a>, <a href="../../../junit/framework/TestCase2.html#getProperties--">getProperties</a>, <a href="../../../junit/framework/TestCase2.html#getRandomObject-boolean-">getRandomObject</a>, <a href="../../../junit/framework/TestCase2.html#getRandomObject-java.util.Random-boolean-">getRandomObject</a>, <a href="../../../junit/framework/TestCase2.html#getRandomOrder-int-">getRandomOrder</a>, <a href="../../../junit/framework/TestCase2.html#getRandomString-int-int-">getRandomString</a>, <a href="../../../junit/framework/TestCase2.html#getTestInputStream-java.lang.String-">getTestInputStream</a>, <a href="../../../junit/framework/TestCase2.html#getTestResource-java.lang.String-">getTestResource</a>, <a href="../../../junit/framework/TestCase2.html#getTestResource-java.lang.String-java.lang.String-">getTestResource</a>, <a href="../../../junit/framework/TestCase2.html#getUlps-double-double-">getUlps</a>, <a href="../../../junit/framework/TestCase2.html#getUlps-float-float-">getUlps</a>, <a href="../../../junit/framework/TestCase2.html#isDEBUG--">isDEBUG</a>, <a href="../../../junit/framework/TestCase2.html#isDEBUG-org.apache.log4j.Logger-">isDEBUG</a>, <a href="../../../junit/framework/TestCase2.html#isINFO--">isINFO</a>, <a href="../../../junit/framework/TestCase2.html#isINFO-org.apache.log4j.Logger-">isINFO</a>, <a href="../../../junit/framework/TestCase2.html#isInnerCause-java.lang.Throwable-java.lang.Class-">isInnerCause</a>, <a href="../../../junit/framework/TestCase2.html#logProperties-junit.framework.TestCase2.MyProperties-int-">logProperties</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.junit.framework.TestCase">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;junit.framework.TestCase</h3>
<code>assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertEquals, assertFalse, assertFalse, assertNotNull, assertNotNull, assertNotSame, assertNotSame, assertNull, assertNull, assertSame, assertSame, assertTrue, assertTrue, countTestCases, createResult, fail, fail, failNotEquals, failNotSame, failSame, format, getName, run, run, runBare, runTest, setName, setUp, tearDown, toString</code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods.inherited.from.class.java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone--" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals-java.lang.Object-" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize--" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass--" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode--" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify--" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll--" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait--" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait-long-int-" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor.detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="TestTransactionService--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>TestTransactionService</h4>
<pre>public&nbsp;TestTransactionService()</pre>
</li>
</ul>
<a name="TestTransactionService-java.lang.String-">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>TestTransactionService</h4>
<pre>public&nbsp;TestTransactionService(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;arg0)</pre>
<dl>
<dt><span class="paramLabel">Parameters:</span></dt>
<dd><code>arg0</code> - </dd>
</dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method.detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="newFixture--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newFixture</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal">TestTransactionService.MockTransactionService</a>&nbsp;newFixture()</pre>
<div class="block">Implementation uses a mock client.</div>
</li>
</ul>
<a name="newFixture-java.util.Properties-">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newFixture</h4>
<pre>protected&nbsp;<a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal">TestTransactionService.MockTransactionService</a>&nbsp;newFixture(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;p)</pre>
<div class="block">Implementation uses a mock client.</div>
</li>
</ul>
<a name="test_newTx_readWrite_01--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readWrite_01</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readWrite_01()</pre>
<div class="block">Create a new read-write tx and then abort it.
 <p>
 Note: New read-write transaction identifiers are assigned using
 <a href="../../../com/bigdata/journal/ITimestampService.html#nextTimestamp--"><code>ITimestampService.nextTimestamp()</code></a>. Therefore they are
 monotonically increasing. New read-write transactions may be created at
 any time - there are no preconditions other than that the transaction
 service is running. Likewise there is no contention other than for the
 next distinct timestamp.</div>
</li>
</ul>
<a name="test_newTx_readWrite_02--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readWrite_02</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readWrite_02()</pre>
<div class="block">Create a new read-write tx and then commit it.</div>
</li>
</ul>
<a name="test_newTx_readWrite_03--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readWrite_03</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readWrite_03()</pre>
<div class="block">Create two read-write transactions and commit both.</div>
</li>
</ul>
<a name="test_newTx_readWrite_txComplete_postConditions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readWrite_txComplete_postConditions</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readWrite_txComplete_postConditions()</pre>
<div class="block">Create a read-write transaction, commit it, and then attempt to re-commit
 it and to abort it - those operations should fail with an
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>.</div>
</li>
</ul>
<a name="test_newTx_readCommitted01--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readCommitted01</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readCommitted01()
                                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Test ability to start a read-committed tx when [lastCommitTime] is
 non-zero.
 <p>
 Note: A "read-committed" transactions is just a shorthand for a read-only
 transaction whose start time is the last commit time on the database. As
 such the abort and commit procedure are the same as for a read-only
 transaction. The only difference is in how the start time of the
 transaction is generated, so that is all we test here.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_newTx_readCommitted02--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readCommitted02</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readCommitted02()</pre>
<div class="block">Unit test when [lastCommitTime] is zero.</div>
</li>
</ul>
<a name="test_newTx_readOnly--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly()
                         throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Unit test for a new read-only transaction.
 <p>
 Read-only transactions are allowed to read on historical commit points of
 the database. The edge case is allowed where the callers timestamp
 exactly corresponds to the lastCommitTime, but it is not permitted to be
 GT the lastCommitTime since that could allow data not yet committed to
 become visible during the transaction (breaking isolation).
 <p>
 A commitTime is identified by looking up the callers timestamp in a log
 of the historical commit times and returning the first historical commit
 time LTE the callers timestamp.
 <p>
 The transaction start time is then chosen from the half-open interval
 <i>commitTime</i> (inclusive lower bound) : <i>nextCommitTime</i>
 (exclusive upper bound).
 <P>
 Note: This test (used to) fail occasionally. This occured if the
 timestamps assigned by the <a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal"><code>TestTransactionService.MockTransactionService</code></a> are only 1 unit
 apart. When that happens, there are not enough distinct values available
 to allow 2 concurrent read-only transactions. See <a href=
 "https://sourceforge.net/apps/trac/bigdata/ticket/145">ISSUE#145 </a>.
 Also see <a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html#nextTimestamp--"><code>TestTransactionService.MockTransactionService.nextTimestamp()</code></a> which has been
 overridden to guarantee that there are at least two distinct values such
 that this test will pass.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_newTx_readOnly_contention--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly_contention</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly_contention()
                                    throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Unit test in which all possible start times for a read-only transaction
 are used, forcing the caller to block.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_newTx_readOnly_timestamp_is_lastCommitTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly_timestamp_is_lastCommitTime</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly_timestamp_is_lastCommitTime()
                                                     throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Verify that you can create a read-only transaction by providing the
 lastCommitTime as the timestamp.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_newTx_nothingCommitted_readOnlyTx--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_nothingCommitted_readOnlyTx</h4>
<pre>public&nbsp;void&nbsp;test_newTx_nothingCommitted_readOnlyTx()</pre>
<div class="block">Verify the behavior of the <a href="../../../com/bigdata/service/AbstractTransactionService.html" title="class in com.bigdata.service"><code>AbstractTransactionService</code></a> when there
 are no commit points and a read-only transaction is requested. Since
 there are no commit points, the transaction service will return the next
 timestamp. That value will be GT the requested timestamp and LT any
 commit point (all commit points are in the future).</div>
</li>
</ul>
<a name="test_newTx_nothingCommitted_readWriteTx--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_nothingCommitted_readWriteTx</h4>
<pre>public&nbsp;void&nbsp;test_newTx_nothingCommitted_readWriteTx()</pre>
<div class="block">Verify the behavior of the <a href="../../../com/bigdata/service/AbstractTransactionService.html" title="class in com.bigdata.service"><code>AbstractTransactionService</code></a> when there
 are no commit points and a read-write transaction is requested. You can
 always obtain a read-write transaction, even when there are no commit
 points on the database.</div>
</li>
</ul>
<a name="test_newTx_readOnly_timestampInFuture--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly_timestampInFuture</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly_timestampInFuture()</pre>
<div class="block">Verify that you can create a read-only transaction using a timestamp that
 is in the future. A commit point is generated and a read-only tx is
 requested which is beyond that commit point. The returned tx will be
 assigned using nextTimestamp() which is guaranteed to be less than the
 next commit point on the database (which in this case would be the first
 commit point as well).</div>
</li>
</ul>
<a name="test_newTx_readOnly_releaseTimeRespectsReadsOnCommitTime--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly_releaseTimeRespectsReadsOnCommitTime</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly_releaseTimeRespectsReadsOnCommitTime()
                                                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Unit test verifies that the release time does NOT advance when the
 earliest running transaction terminates but a second transaction is still
 active which reads on the same commit time.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dt><span class="seeLabel">See Also:</span></dt>
<dd><code>https://sourceforge.net/apps/trac/bigdata/ticket/467</code></dd>
</dl>
</li>
</ul>
<a name="test_newTx_readOnly_historyGone--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly_historyGone</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly_historyGone()
                                     throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Verify that a request for an historical state that is no longer available
 will be rejected.
 <p>
 The test is setup as follows:
 
 <pre>
                                           +------tx2---------------
                   +-----------------tx1---------------+
       +-----------tx0---------+
 +=====================================================+
                                           +========================
 0-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
       tx0   |     tx1   |     |     |     tx2   |     |
       (0)   ts1   (0)   ts2   |     ts3   (ct0) ts4   |
                               ct0                     ct1
 rt=0                                                  rt=ct0-1
 </pre>
 
 where tx0, ... are transactions.<br/>
 where ts0, ... are timestamps.<br/>
 where ct0, ... are the commit times for the corresponding tx#.<br/>
 where (...) indicates the commit time on which the transaction is
 reading.<br/>
 where rt# is a releaseTime. The releaseTime and lastCommitTime are
 initially ZERO (0).<br/>
 The long "====" lines above the timeline represent the period during
 which a given commit point is available to a new transaction.<br/>
 The long "---" lines above the timeline represent the life cycle of a
 specific transaction.<br/>
 <p>
 Any transaction which starts before ct1 will see the history going back
 to commitTime=0. This commit time is initially available because there is
 no committed data. It is pinned by tx0 and then by tx1. Once both of
 those transactions complete, that commit time is released (minReleaseAge
 is zero).
 <p>
 When tx1 completes, the release time is advanced (rt=ct0-1).
 <p>
 Any transaction which starts after tx2 will see history back to ct0.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_newTx_readOnly_historyGone2--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly_historyGone2</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly_historyGone2()
                                      throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">This is a variant on <a href="../../../com/bigdata/journal/TestTransactionService.html#test_newTx_readOnly_historyGone--"><code>test_newTx_readOnly_historyGone()</code></a> where we
 do not start tx2. In this case, when we end tx1 the release time will
 advance right up to the most recent commit time.
 <p>
 The test is setup as follows:
 
 <pre>
                   +-----------------tx1---------------+
       +-----------tx0---------+
 +=====================================================+
 0-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+-----+
       tx0   |     tx1   |     |     |           |     |
       (0)   ts1   (0)   ts2   |     ts3               |
                               ct0                     ct1
 rt=0                                                  rt=now-1
 </pre>
 
 where tx0, ... are transactions.<br/>
 where ts0, ... are timestamps.<br/>
 where ct0, ... are the commit times for the corresponding tx#.<br/>
 where (...) indicates the commit time on which the transaction is
 reading.<br/>
 where rt# is a releaseTime. The releaseTime and lastCommitTime are
 initially ZERO (0).<br/>
 The long "====" lines above the timeline represent the period during
 which a given commit point is available to a new transaction.<br/>
 The long "---" lines above the timeline represent the life cycle of a
 specific transaction.<br/>
 <p>
 Any transaction which starts before ct1 will see the history going back
 to commitTime=0. This commit time is initially available because there is
 no committed data. It is pinned by tx0 and then by tx1. Once both of
 those transactions complete, that commit time is released (minReleaseAge
 is zero).
 <p>
 When tx1 completes, the release time is advanced (rt=now-1).
 <p>
 Any transaction which starts after ct1 will see read on ct1.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_updateReleaseTime_noTxRemaining--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_updateReleaseTime_noTxRemaining</h4>
<pre>public&nbsp;void&nbsp;test_updateReleaseTime_noTxRemaining()
                                          throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Test verifies the advance of the release time when the earliest running
 transaction completes. This version focuses on when there are no active
 transactions once the earliest transaction completes. In this case the
 [lastCommitTime] is the exclusive upper bound for the new releaseTime.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_updateReleaseTime_otherTxStillActive--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_updateReleaseTime_otherTxStillActive</h4>
<pre>public&nbsp;void&nbsp;test_updateReleaseTime_otherTxStillActive()
                                               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">A unit test of advancing the last release time for the case where there
 are still active transactions running once the earliest active
 transaction commits.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_newTx_readOnly_txComplete_postConditions--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_newTx_readOnly_txComplete_postConditions</h4>
<pre>public&nbsp;void&nbsp;test_newTx_readOnly_txComplete_postConditions()
                                                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Create a read-only transaction, commit it, and then attempt to re-commit
 it and to abort it - those operations should fail with an
 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalStateException.html?is-external=true" title="class or interface in java.lang"><code>IllegalStateException</code></a>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_shutdown_nothingRunning--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_shutdown_nothingRunning</h4>
<pre>public&nbsp;void&nbsp;test_shutdown_nothingRunning()</pre>
<div class="block">Verifies that we can shutdown() the service when there are no
 active transactions.</div>
</li>
</ul>
<a name="test_shutdown_waitsForReadWriteTx_commits--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_shutdown_waitsForReadWriteTx_commits</h4>
<pre>public&nbsp;void&nbsp;test_shutdown_waitsForReadWriteTx_commits()
                                               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Test that the service will wait for a read-write tx to commit.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_shutdown_waitsForReadWriteTx_aborts--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_shutdown_waitsForReadWriteTx_aborts</h4>
<pre>public&nbsp;void&nbsp;test_shutdown_waitsForReadWriteTx_aborts()
                                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Test that the service will wait for a read-write tx to abort.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_shutdown_newTxNotAllowed--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_shutdown_newTxNotAllowed</h4>
<pre>public&nbsp;void&nbsp;test_shutdown_newTxNotAllowed()
                                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Test that shutdown() does not permit new tx to start (a variety of things
 are not permitted during shutdown).</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_shutdown_waitsForReadOnlyTx_commits--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_shutdown_waitsForReadOnlyTx_commits</h4>
<pre>public&nbsp;void&nbsp;test_shutdown_waitsForReadOnlyTx_commits()
                                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Test that the service will wait for a read-only tx to commit.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_shutdown_waitsForReadOnlyTx_aborts--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_shutdown_waitsForReadOnlyTx_aborts</h4>
<pre>public&nbsp;void&nbsp;test_shutdown_waitsForReadOnlyTx_aborts()
                                             throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Test that the service will wait for a read-only tx to abort.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_shutdown_interrupted--">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>test_shutdown_interrupted</h4>
<pre>public&nbsp;void&nbsp;test_shutdown_interrupted()
                               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Test that shutdown() may be interrupted while waiting for a tx to
 complete and that it will convert to shutdownNow() which does not wait.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
</dl>
</li>
</ul>
<a name="test_abortAll--">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>test_abortAll</h4>
<pre>public&nbsp;void&nbsp;test_abortAll()
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></pre>
<div class="block">Test for <a href="../../../com/bigdata/service/AbstractTransactionService.html#abortAllTx--"><code>AbstractTransactionService.abortAllTx()</code></a>.</div>
<dl>
<dt><span class="throwsLabel">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/TestTransactionService.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/TestTemporaryStore.TestRawStore.html" title="class in com.bigdata.journal"><span class="typeNameLink">Prev&nbsp;Class</span></a></li>
<li><a href="../../../com/bigdata/journal/TestTransactionService.MockTransactionService.html" title="class in com.bigdata.journal"><span class="typeNameLink">Next&nbsp;Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/TestTransactionService.html" target="_top">Frames</a></li>
<li><a href="TestTransactionService.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested.class.summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields.inherited.from.class.junit.framework.TestCase2">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor.summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor.detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method.detail">Method</a></li>
</ul>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
