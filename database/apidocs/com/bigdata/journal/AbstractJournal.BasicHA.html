<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Fri Apr 08 18:36:23 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AbstractJournal.BasicHA (Blazegraph Database Platform 2.1.0 API)</title>
<meta name="date" content="2016-04-08">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractJournal.BasicHA (Blazegraph Database Platform 2.1.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractJournal.BasicHA.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.VoteNoTask.html" title="class in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/AbstractJournal.BasicHA.html" target="_top">Frames</a></li>
<li><a href="AbstractJournal.BasicHA.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.journal</div>
<h2 title="Class AbstractJournal.BasicHA" class="title">Class AbstractJournal.BasicHA</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.journal.AbstractJournal.BasicHA</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/ha/HACommitGlue.html" title="interface in com.bigdata.ha">HACommitGlue</a>, <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a>, <a href="../../../com/bigdata/ha/HAGlueBase.html" title="interface in com.bigdata.ha">HAGlueBase</a>, <a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a>, <a href="../../../com/bigdata/ha/HAReadGlue.html" title="interface in com.bigdata.ha">HAReadGlue</a>, <a href="../../../com/bigdata/ha/HATXSGlue.html" title="interface in com.bigdata.ha">HATXSGlue</a>, <a href="../../../com/bigdata/service/IService.html" title="interface in com.bigdata.service">IService</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi">Remote</a></dd>
</dl>
<dl>
<dt>Enclosing class:</dt>
<dd><a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a></dd>
</dl>
<hr>
<br>
<pre>protected class <span class="strong">AbstractJournal.BasicHA</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></pre>
<div class="block">Implementation hooks into the various low-level operations required to
 support HA for the journal.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.VoteNoTask.html" title="class in com.bigdata.journal">AbstractJournal.BasicHA.VoteNoTask</a></strong></code>
<div class="block">Task votes NO (unconditional).</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#AbstractJournal.BasicHA(java.util.UUID,%20java.net.InetSocketAddress)">AbstractJournal.BasicHA</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceId,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;writePipelineAddr)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#abort2Phase(com.bigdata.ha.msg.IHA2PhaseAbortMessage)">abort2Phase</a></strong>(<a href="../../../com/bigdata/ha/msg/IHA2PhaseAbortMessage.html" title="interface in com.bigdata.ha.msg">IHA2PhaseAbortMessage</a>&nbsp;abortMessage)</code>
<div class="block">Discard the current write set using <a href="../../../com/bigdata/journal/AbstractJournal.html#abort()"><code>AbstractJournal.abort()</code></a>,
 reloading all state from the last root block, etc.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#awaitHAReady(long,%20java.util.concurrent.TimeUnit)">awaitHAReady</a></strong>(long&nbsp;timeout,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;units)</code>
<div class="block">Await the service being ready to partitipate in an HA quorum.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHANotifyReleaseTimeResponse.html" title="interface in com.bigdata.ha.msg">IHANotifyReleaseTimeResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#awaitServiceJoin(com.bigdata.ha.msg.IHAAwaitServiceJoinRequest)">awaitServiceJoin</a></strong>(<a href="../../../com/bigdata/ha/msg/IHAAwaitServiceJoinRequest.html" title="interface in com.bigdata.ha.msg">IHAAwaitServiceJoinRequest</a>&nbsp;req)</code>
<div class="block">A follower uses this message to request that the quorum leader await the
 visibility of the zookeeper event in which the service join becomes
 visible to the leader.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#commit2Phase(com.bigdata.ha.msg.IHA2PhaseCommitMessage)">commit2Phase</a></strong>(<a href="../../../com/bigdata/ha/msg/IHA2PhaseCommitMessage.html" title="interface in com.bigdata.ha.msg">IHA2PhaseCommitMessage</a>&nbsp;commitMessage)</code>
<div class="block">Commit using the root block from the corresponding prepare message.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHADigestResponse.html" title="interface in com.bigdata.ha.msg">IHADigestResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#computeDigest(com.bigdata.ha.msg.IHADigestRequest)">computeDigest</a></strong>(<a href="../../../com/bigdata/ha/msg/IHADigestRequest.html" title="interface in com.bigdata.ha.msg">IHADigestRequest</a>&nbsp;req)</code>
<div class="block">Compute the digest of the entire backing store - <strong>THIS METHOD IS
 ONLY FOR DIAGNOSTIC PURPOSES.</strong></div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHALogDigestResponse.html" title="interface in com.bigdata.ha.msg">IHALogDigestResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#computeHALogDigest(com.bigdata.ha.msg.IHALogDigestRequest)">computeHALogDigest</a></strong>(<a href="../../../com/bigdata/ha/msg/IHALogDigestRequest.html" title="interface in com.bigdata.ha.msg">IHALogDigestRequest</a>&nbsp;req)</code>
<div class="block">Compute the digest of the entire HALog file - <strong>THIS METHOD IS ONLY
 FOR DIAGNOSTIC PURPOSES.</strong></div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHASnapshotDigestResponse.html" title="interface in com.bigdata.ha.msg">IHASnapshotDigestResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#computeHASnapshotDigest(com.bigdata.ha.msg.IHASnapshotDigestRequest)">computeHASnapshotDigest</a></strong>(<a href="../../../com/bigdata/ha/msg/IHASnapshotDigestRequest.html" title="interface in com.bigdata.ha.msg">IHASnapshotDigestRequest</a>&nbsp;req)</code>
<div class="block">Compute the digest of the entire snapshot file - <strong>THIS METHOD IS
 ONLY FOR DIAGNOSTIC PURPOSES.</strong> This digest is computed for the
 compressed data so it may be compared directly with the digest of the
 backing store from which the snapshot was obtained.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#destroy()">destroy</a></strong>()</code>
<div class="block">Destroy the service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#gatherMinimumVisibleCommitTime(com.bigdata.ha.msg.IHAGatherReleaseTimeRequest)">gatherMinimumVisibleCommitTime</a></strong>(<a href="../../../com/bigdata/ha/msg/IHAGatherReleaseTimeRequest.html" title="interface in com.bigdata.ha.msg">IHAGatherReleaseTimeRequest</a>&nbsp;req)</code>
<div class="block">Message used to request information about the earliest commit point that
 is pinned on a follower.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getExtendedRunState()">getExtendedRunState</a></strong>()</code>
<div class="block">The extended run state of the service - this embeds more information but
 is not designed for progamatic interpretation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHALogRootBlocksResponse.html" title="interface in com.bigdata.ha.msg">IHALogRootBlocksResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getHALogRootBlocksForWriteSet(com.bigdata.ha.msg.IHALogRootBlocksRequest)">getHALogRootBlocksForWriteSet</a></strong>(<a href="../../../com/bigdata/ha/msg/IHALogRootBlocksRequest.html" title="interface in com.bigdata.ha.msg">IHALogRootBlocksRequest</a>&nbsp;msg)</code>
<div class="block">Request the root blocks for the HA Log for the specified commit point.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/HAStatusEnum.html" title="enum in com.bigdata.ha">HAStatusEnum</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getHAStatus()">getHAStatus</a></strong>()</code>
<div class="block">A simplified summary of the HA status of the service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHAWriteSetStateResponse.html" title="interface in com.bigdata.ha.msg">IHAWriteSetStateResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getHAWriteSetState(com.bigdata.ha.msg.IHAWriteSetStateRequest)">getHAWriteSetState</a></strong>(<a href="../../../com/bigdata/ha/msg/IHAWriteSetStateRequest.html" title="interface in com.bigdata.ha.msg">IHAWriteSetStateRequest</a>&nbsp;req)</code>
<div class="block">Request metadata about the current write set from the quorum leader.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getHostname()">getHostname</a></strong>()</code>
<div class="block">The host on which this service is running.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getIndexManager()">getIndexManager</a></strong>()</code>
<div class="block">Return the backing <a href="../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal"><code>IIndexManager</code></a> (non-RMI method).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getNSSPort()">getNSSPort</a></strong>()</code>
<div class="block">The port that the NanoSparqlServer is running on.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected &lt;E&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getProxy(java.util.concurrent.Future)">getProxy</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;&nbsp;future)</code>
<div class="block">Return a proxy object for a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> suitable for use in an RMI
 environment (the default implementation returns its argument).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected &lt;E&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getProxy(java.util.concurrent.Future,%20boolean)">getProxy</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;&nbsp;future,
        boolean&nbsp;asyncFuture)</code>
<div class="block">Return a proxy object for a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> suitable for use in an RMI
 environment (the default implementation returns its argument).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHARootBlockResponse.html" title="interface in com.bigdata.ha.msg">IHARootBlockResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getRootBlock(com.bigdata.ha.msg.IHARootBlockRequest)">getRootBlock</a></strong>(<a href="../../../com/bigdata/ha/msg/IHARootBlockRequest.html" title="interface in com.bigdata.ha.msg">IHARootBlockRequest</a>&nbsp;msg)</code>
<div class="block">Return the then current root block for the persistence store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/RunState.html" title="enum in com.bigdata.ha">RunState</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getRunState()">getRunState</a></strong>()</code>
<div class="block">The <a href="../../../com/bigdata/ha/RunState.html" title="enum in com.bigdata.ha"><code>RunState</code></a> of the service - this does NOT tell you whether the
 service is ready to act as a leader or follower.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getServiceId()">getServiceId</a></strong>()</code>
<div class="block">The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> of this service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getServiceIface()">getServiceIface</a></strong>()</code>
<div class="block">Return the most interesting interface for the service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getServiceName()">getServiceName</a></strong>()</code>
<div class="block">Return name by which a user might recognize this service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getServiceUUID()">getServiceUUID</a></strong>()</code>
<div class="block">The unique identifier for this service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#getWritePipelineAddr()">getWritePipelineAddr</a></strong>()</code>
<div class="block">Return the address at which this service will listen for write pipeline
 messages sent from the upstream service.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#moveToEndOfPipeline()">moveToEndOfPipeline</a></strong>()</code>
<div class="block">Instruct the service to move to the end of the write pipeline.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#nextTimestamp()">nextTimestamp</a></strong>()</code>
<div class="block">This exposes the clock used to assign transaction identifiers and
 commit times.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/ha/msg/IHANotifyReleaseTimeResponse.html" title="interface in com.bigdata.ha.msg">IHANotifyReleaseTimeResponse</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#notifyEarliestCommitTime(com.bigdata.ha.msg.IHANotifyReleaseTimeRequest)">notifyEarliestCommitTime</a></strong>(<a href="../../../com/bigdata/ha/msg/IHANotifyReleaseTimeRequest.html" title="interface in com.bigdata.ha.msg">IHANotifyReleaseTimeRequest</a>&nbsp;req)</code>
<div class="block">Message used by the follower to notify the leader about the new release
 time that will be visible for new transaction starts.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#prepare2Phase(com.bigdata.ha.msg.IHA2PhasePrepareMessage)">prepare2Phase</a></strong>(<a href="../../../com/bigdata/ha/msg/IHA2PhasePrepareMessage.html" title="interface in com.bigdata.ha.msg">IHA2PhasePrepareMessage</a>&nbsp;prepareMessage)</code>
<div class="block">Save a reference to the caller's root block, flush writes to the backing
 channel and acknowledge "yes" if ready to commit.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/msg/IHAReadResponse.html" title="interface in com.bigdata.ha.msg">IHAReadResponse</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#readFromDisk(com.bigdata.ha.msg.IHAReadRequest)">readFromDisk</a></strong>(<a href="../../../com/bigdata/ha/msg/IHAReadRequest.html" title="interface in com.bigdata.ha.msg">IHAReadRequest</a>&nbsp;msg)</code>
<div class="block">Read a record an <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> managed by the service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#rebuildFromLeader(com.bigdata.ha.msg.IHARemoteRebuildRequest)">rebuildFromLeader</a></strong>(<a href="../../../com/bigdata/ha/msg/IHARemoteRebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARemoteRebuildRequest</a>&nbsp;req)</code>
<div class="block">Disaster recovery (REBUILD) of the local database instance from the
 leader of a met quorum.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHASendState,%20com.bigdata.ha.msg.IHAWriteMessage)">receiveAndReplicate</a></strong>(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                   <a href="../../../com/bigdata/ha/msg/IHASendState.html" title="interface in com.bigdata.ha.msg">IHASendState</a>&nbsp;snd,
                   <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg)</code>
<div class="block">Accept metadata describing an NIO buffer transfer along the write
 pipeline.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/IHAPipelineResetResponse.html" title="interface in com.bigdata.ha">IHAPipelineResetResponse</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">resetPipeline</a></strong>(<a href="../../../com/bigdata/ha/IHAPipelineResetRequest.html" title="interface in com.bigdata.ha">IHAPipelineResetRequest</a>&nbsp;req)</code>
<div class="block">Reset the pipeline (blocking).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#sendHALogForWriteSet(com.bigdata.ha.msg.IHALogRequest)">sendHALogForWriteSet</a></strong>(<a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg">IHALogRequest</a>&nbsp;msg)</code>
<div class="block">The recipient will send the <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks for the specified
 write set on the write pipeline.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/msg/IHASendStoreResponse.html" title="interface in com.bigdata.ha.msg">IHASendStoreResponse</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#sendHAStore(com.bigdata.ha.msg.IHARebuildRequest)">sendHAStore</a></strong>(<a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARebuildRequest</a>&nbsp;msg)</code>
<div class="block">Send the raw blocks for the requested backing store across the write
 pipeline.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>&lt;T&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;T&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#submit(com.bigdata.ha.IIndexManagerCallable,%20boolean)">submit</a></strong>(<a href="../../../com/bigdata/ha/IIndexManagerCallable.html" title="interface in com.bigdata.ha">IIndexManagerCallable</a>&lt;T&gt;&nbsp;callable,
      boolean&nbsp;asyncFuture)</code>
<div class="block">Run the caller's task on the service.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/msg/IHASnapshotResponse.html" title="interface in com.bigdata.ha.msg">IHASnapshotResponse</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#takeSnapshot(com.bigdata.ha.msg.IHASnapshotRequest)">takeSnapshot</a></strong>(<a href="../../../com/bigdata/ha/msg/IHASnapshotRequest.html" title="interface in com.bigdata.ha.msg">IHASnapshotRequest</a>&nbsp;req)</code>
<div class="block">Request that the service take a snapshot.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.html#validateNewRootBlock(boolean,%20com.bigdata.journal.IRootBlockView,%20com.bigdata.journal.IRootBlockView)">validateNewRootBlock</a></strong>(boolean&nbsp;isLeader,
                    <a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;oldRB,
                    <a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;newRB)</code>
<div class="block">Validate the new root block against the current root block.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractJournal.BasicHA(java.util.UUID, java.net.InetSocketAddress)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractJournal.BasicHA</h4>
<pre>protected&nbsp;AbstractJournal.BasicHA(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceId,
                       <a href="http://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;writePipelineAddr)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getIndexManager()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getIndexManager</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal">AbstractJournal</a>&nbsp;getIndexManager()</pre>
<div class="block">Return the backing <a href="../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal"><code>IIndexManager</code></a> (non-RMI method).</div>
</li>
</ul>
<a name="getServiceId()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceId</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;getServiceId()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlueBase.html#getServiceId()">HAGlueBase</a></code></strong></div>
<div class="block">The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> of this service.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlueBase.html#getServiceId()">getServiceId</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlueBase.html" title="interface in com.bigdata.ha">HAGlueBase</a></code></dd>
</dl>
</li>
</ul>
<a name="getWritePipelineAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getWritePipelineAddr</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/net/InetSocketAddress.html?is-external=true" title="class or interface in java.net">InetSocketAddress</a>&nbsp;getWritePipelineAddr()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#getWritePipelineAddr()">HAPipelineGlue</a></code></strong></div>
<div class="block">Return the address at which this service will listen for write pipeline
 messages sent from the upstream service.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#getWritePipelineAddr()">getWritePipelineAddr</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
</dl>
</li>
</ul>
<a name="getNSSPort()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNSSPort</h4>
<pre>public&nbsp;int&nbsp;getNSSPort()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#getNSSPort()">HAGlue</a></code></strong></div>
<div class="block">The port that the NanoSparqlServer is running on.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#getNSSPort()">getNSSPort</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
</dl>
</li>
</ul>
<a name="getRunState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRunState</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/RunState.html" title="enum in com.bigdata.ha">RunState</a>&nbsp;getRunState()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#getRunState()">HAGlue</a></code></strong></div>
<div class="block">The <a href="../../../com/bigdata/ha/RunState.html" title="enum in com.bigdata.ha"><code>RunState</code></a> of the service - this does NOT tell you whether the
 service is ready to act as a leader or follower.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#getRunState()">getRunState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
</dl>
</li>
</ul>
<a name="getExtendedRunState()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getExtendedRunState</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getExtendedRunState()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#getExtendedRunState()">HAGlue</a></code></strong></div>
<div class="block">The extended run state of the service - this embeds more information but
 is not designed for progamatic interpretation.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#getExtendedRunState()">getExtendedRunState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
</dl>
</li>
</ul>
<a name="getHAStatus()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHAStatus</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/HAStatusEnum.html" title="enum in com.bigdata.ha">HAStatusEnum</a>&nbsp;getHAStatus()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#getHAStatus()">HAGlue</a></code></strong></div>
<div class="block">A simplified summary of the HA status of the service. This may be used to
 reliably decide whether the service is the <a href="../../../com/bigdata/ha/HAStatusEnum.html#Leader"><code>HAStatusEnum.Leader</code></a>, a
 <a href="../../../com/bigdata/ha/HAStatusEnum.html#Follower"><code>HAStatusEnum.Follower</code></a>, or <a href="../../../com/bigdata/ha/HAStatusEnum.html#NotReady"><code>HAStatusEnum.NotReady</code></a>. This is
 exposed both here (an RMI interface) and by the REST API.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#getHAStatus()">getHAStatus</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
</dl>
</li>
</ul>
<a name="awaitHAReady(long, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitHAReady</h4>
<pre>public&nbsp;long&nbsp;awaitHAReady(long&nbsp;timeout,
                <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;units)
                  throws <a href="../../../com/bigdata/quorum/AsynchronousQuorumCloseException.html" title="class in com.bigdata.quorum">AsynchronousQuorumCloseException</a>,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#awaitHAReady(long,%20java.util.concurrent.TimeUnit)">HAGlue</a></code></strong></div>
<div class="block">Await the service being ready to partitipate in an HA quorum. The
 preconditions include:
 <ol>
 <li>receiving notice of the quorum token via
 <code>#setQuorumToken(long)</code></li>
 <li>The service is joined with the met quorum for that token</li>
 <li>If the service is a follower and it's local root blocks were at
 <code>commitCounter:=0</code>, then the root blocks from the leader have
 been installed on the follower.</li>
 <ol></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#awaitHAReady(long,%20java.util.concurrent.TimeUnit)">awaitHAReady</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>timeout</code> - The timeout to await this condition.</dd>
<dt><span class="strong">Returns:</span></dt><dd>the quorum token for which the service became HA ready.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/bigdata/quorum/AsynchronousQuorumCloseException.html" title="class in com.bigdata.quorum">AsynchronousQuorumCloseException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></code></dd></dl>
</li>
</ul>
<a name="awaitServiceJoin(com.bigdata.ha.msg.IHAAwaitServiceJoinRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitServiceJoin</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHANotifyReleaseTimeResponse.html" title="interface in com.bigdata.ha.msg">IHANotifyReleaseTimeResponse</a>&nbsp;awaitServiceJoin(<a href="../../../com/bigdata/ha/msg/IHAAwaitServiceJoinRequest.html" title="interface in com.bigdata.ha.msg">IHAAwaitServiceJoinRequest</a>&nbsp;req)
                                              throws <a href="../../../com/bigdata/quorum/AsynchronousQuorumCloseException.html" title="class in com.bigdata.quorum">AsynchronousQuorumCloseException</a>,
                                                     <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                                     <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></pre>
<div class="block">A follower uses this message to request that the quorum leader await the
 visibility of the zookeeper event in which the service join becomes
 visible to the leader. This is invoked while holding a lock that blocks
 pipeline replication, so the leader can not flush the write replication
 pipeline and enter the commit. The callback to the leader ensures that
 the service join is visible to the leader before the leader makes an
 atomic decision about the set of services that are joined with the met
 quorum for a 2-phase commit.
 
 FIXME awaitServiceJoin() is failing to set the commitCounter on the
 message. Either create a new message type or return the right
 message. The joining service should be able to verify that the
 release time is applicable for its commit counter (in
 <a href="../../../com/bigdata/service/AbstractHATransactionService.html#runWithBarrierLock(java.lang.Runnable)"><code>AbstractHATransactionService.runWithBarrierLock(Runnable)</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#awaitServiceJoin(com.bigdata.ha.msg.IHAAwaitServiceJoinRequest)">awaitServiceJoin</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The request.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The most recent consensus release time for the quorum leader.
         This information is used to ensure that a service which joins
         after a gather and before a PREPARE will join with the correct
         release time for its local journal and thus will not permit
         transactions to start against commit points which have been
         recycled by the quorum leader.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></code> - if the timeout is exceeded before the service join becomes
             visible to this service.</dd>
<dd><code><a href="../../../com/bigdata/quorum/AsynchronousQuorumCloseException.html" title="class in com.bigdata.quorum">AsynchronousQuorumCloseException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="https://sourceforge.net/apps/trac/bigdata/ticket/681" >
      HAJournalServer deadlock: pipelineRemove() and getLeaderId()</a></dd></dl>
</li>
</ul>
<a name="computeDigest(com.bigdata.ha.msg.IHADigestRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeDigest</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHADigestResponse.html" title="interface in com.bigdata.ha.msg">IHADigestResponse</a>&nbsp;computeDigest(<a href="../../../com/bigdata/ha/msg/IHADigestRequest.html" title="interface in com.bigdata.ha.msg">IHADigestRequest</a>&nbsp;req)
                                throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                       <a href="http://docs.oracle.com/javase/7/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a>,
                                       <a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#computeDigest(com.bigdata.ha.msg.IHADigestRequest)">HAGlue</a></code></strong></div>
<div class="block">Compute the digest of the entire backing store - <strong>THIS METHOD IS
 ONLY FOR DIAGNOSTIC PURPOSES.</strong>
 <p>
 The digest is useless if there are concurrent writes since it can not be
 meaningfully compared with the digest of another store unless both stores
 are known to be stable.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#computeDigest(com.bigdata.ha.msg.IHADigestRequest)">computeDigest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></code></dd></dl>
</li>
</ul>
<a name="computeHALogDigest(com.bigdata.ha.msg.IHALogDigestRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeHALogDigest</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHALogDigestResponse.html" title="interface in com.bigdata.ha.msg">IHALogDigestResponse</a>&nbsp;computeHALogDigest(<a href="../../../com/bigdata/ha/msg/IHALogDigestRequest.html" title="interface in com.bigdata.ha.msg">IHALogDigestRequest</a>&nbsp;req)
                                        throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                               <a href="http://docs.oracle.com/javase/7/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a>,
                                               <a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#computeHALogDigest(com.bigdata.ha.msg.IHALogDigestRequest)">HAGlue</a></code></strong></div>
<div class="block">Compute the digest of the entire HALog file - <strong>THIS METHOD IS ONLY
 FOR DIAGNOSTIC PURPOSES.</strong>
 <p>
 The digest is useless if there are concurrent writes since it can not be
 meaningfully compared with the digest of another store unless both stores
 are known to be stable.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#computeHALogDigest(com.bigdata.ha.msg.IHALogDigestRequest)">computeHALogDigest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a></code> - if the HALog for the specified commit point does not exist.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></code></dd></dl>
</li>
</ul>
<a name="computeHASnapshotDigest(com.bigdata.ha.msg.IHASnapshotDigestRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>computeHASnapshotDigest</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHASnapshotDigestResponse.html" title="interface in com.bigdata.ha.msg">IHASnapshotDigestResponse</a>&nbsp;computeHASnapshotDigest(<a href="../../../com/bigdata/ha/msg/IHASnapshotDigestRequest.html" title="interface in com.bigdata.ha.msg">IHASnapshotDigestRequest</a>&nbsp;req)
                                                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                                         <a href="http://docs.oracle.com/javase/7/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a>,
                                                         <a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#computeHASnapshotDigest(com.bigdata.ha.msg.IHASnapshotDigestRequest)">HAGlue</a></code></strong></div>
<div class="block">Compute the digest of the entire snapshot file - <strong>THIS METHOD IS
 ONLY FOR DIAGNOSTIC PURPOSES.</strong> This digest is computed for the
 compressed data so it may be compared directly with the digest of the
 backing store from which the snapshot was obtained.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#computeHASnapshotDigest(com.bigdata.ha.msg.IHASnapshotDigestRequest)">computeHASnapshotDigest</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/FileNotFoundException.html?is-external=true" title="class or interface in java.io">FileNotFoundException</a></code> - if no snapshot exists for that commit point.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/NoSuchAlgorithmException.html?is-external=true" title="class or interface in java.security">NoSuchAlgorithmException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/security/DigestException.html?is-external=true" title="class or interface in java.security">DigestException</a></code></dd></dl>
</li>
</ul>
<a name="takeSnapshot(com.bigdata.ha.msg.IHASnapshotRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>takeSnapshot</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/msg/IHASnapshotResponse.html" title="interface in com.bigdata.ha.msg">IHASnapshotResponse</a>&gt;&nbsp;takeSnapshot(<a href="../../../com/bigdata/ha/msg/IHASnapshotRequest.html" title="interface in com.bigdata.ha.msg">IHASnapshotRequest</a>&nbsp;req)
                                         throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#takeSnapshot(com.bigdata.ha.msg.IHASnapshotRequest)">HAGlue</a></code></strong></div>
<div class="block">Request that the service take a snapshot. If there is already a snapshot
 in progress, then the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for that request will be returned.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#takeSnapshot(com.bigdata.ha.msg.IHASnapshotRequest)">takeSnapshot</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The request (optional). When <code>null</code>, the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for any existing snapshot operation will be
            returned but the request WILL NOT schedule a snapshot if none
            is running.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for the snapshot -or- <code>null</code> if no
         snapshot is running and none will be taken for that request.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="rebuildFromLeader(com.bigdata.ha.msg.IHARemoteRebuildRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rebuildFromLeader</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;rebuildFromLeader(<a href="../../../com/bigdata/ha/msg/IHARemoteRebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARemoteRebuildRequest</a>&nbsp;req)
                               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#rebuildFromLeader(com.bigdata.ha.msg.IHARemoteRebuildRequest)">HAGlue</a></code></strong></div>
<div class="block">Disaster recovery (REBUILD) of the local database instance from the
 leader of a met quorum.
 
 There are several preconditions:
 <ul>
 
 <li>The quorum must be met and there must be an
 <code>HAStatusEnum#Ready</code> leader.</li>
 
 <li>This service must be <a href="../../../com/bigdata/ha/HAStatusEnum.html#NotReady"><code>HAStatusEnum.NotReady</code></a>.</li>
 
 <li>This service MUST NOT be at the same commit point as the leader (if
 it is, then the service could meet in a data race with the met quorum and
 we do not permit RESTORE if the service is joined with the met quorum).</li>
 
 <li>The <code>HAJournalServer</code> must not be running a RESTORE (we don't
 want it to accidentally interrupt a RESTORE that is in progress).</li>
 
 </ul></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#rebuildFromLeader(com.bigdata.ha.msg.IHARemoteRebuildRequest)">rebuildFromLeader</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The (asynchronous) <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> of the REBUILD operation -or-
         <code>null</code> if any of the pre-conditions were violated.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getProxy(java.util.concurrent.Future)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProxy</h4>
<pre>protected final&nbsp;&lt;E&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;&nbsp;getProxy(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;&nbsp;future)</pre>
<div class="block">Return a proxy object for a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> suitable for use in an RMI
 environment (the default implementation returns its argument).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>future</code> - The future.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The proxy for that future.</dd></dl>
</li>
</ul>
<a name="getProxy(java.util.concurrent.Future, boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getProxy</h4>
<pre>protected&nbsp;&lt;E&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;&nbsp;getProxy(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;E&gt;&nbsp;future,
                     boolean&nbsp;asyncFuture)</pre>
<div class="block">Return a proxy object for a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> suitable for use in an RMI
 environment (the default implementation returns its argument).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>future</code> - The future.</dd><dd><code>asyncFuture</code> - When <code>true</code>, the service should not wait for
            the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> to complete but should return a proxy
            object that may be used by the client to monitor or cancel
            the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>. When <code>false</code>, the method
            should wait for the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> to complete and then
            return a "thick" <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> which wraps the completion
            state but does not permit asynchronous monitoring or
            cancellation of the operation wrapped by the
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The proxy for that future.</dd></dl>
</li>
</ul>
<a name="prepare2Phase(com.bigdata.ha.msg.IHA2PhasePrepareMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>prepare2Phase</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Boolean.html?is-external=true" title="class or interface in java.lang">Boolean</a>&gt;&nbsp;prepare2Phase(<a href="../../../com/bigdata/ha/msg/IHA2PhasePrepareMessage.html" title="interface in com.bigdata.ha.msg">IHA2PhasePrepareMessage</a>&nbsp;prepareMessage)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HACommitGlue.html#prepare2Phase(com.bigdata.ha.msg.IHA2PhasePrepareMessage)">HACommitGlue</a></code></strong></div>
<div class="block">Save a reference to the caller's root block, flush writes to the backing
 channel and acknowledge "yes" if ready to commit. If the node can not
 prepare for any reason, then it must return "no".</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HACommitGlue.html#prepare2Phase(com.bigdata.ha.msg.IHA2PhasePrepareMessage)">prepare2Phase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HACommitGlue.html" title="interface in com.bigdata.ha">HACommitGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>prepareMessage</code> - The message used to prepare for the commit.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> which evaluates to a yes/no vote on whether the
         service is prepared to commit.</dd></dl>
</li>
</ul>
<a name="validateNewRootBlock(boolean, com.bigdata.journal.IRootBlockView, com.bigdata.journal.IRootBlockView)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>validateNewRootBlock</h4>
<pre>protected&nbsp;void&nbsp;validateNewRootBlock(boolean&nbsp;isLeader,
                        <a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;oldRB,
                        <a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;newRB)</pre>
<div class="block">Validate the new root block against the current root block. This
 method checks a variety of invariants:
 <ul>
 <li>The UUID of the store must be the same.</li>
 <li>The commitTime must be strictly increasing.</li>
 <li>The commitCounter must increase by ONE (1).</li>
 <li></li>
 </ul>
 Note: This code path is only when [isJoined := true] (that is, the
 service was joined with the met quorum at the atomic decision point
 for the joined set for the 2-phase commit).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>isLeader</code> - iff this service is the leader for this commit.</dd><dd><code>oldRB</code> - the old (aka current) root block.</dd><dd><code>newRB</code> - the new (aka proposed) root block.</dd></dl>
</li>
</ul>
<a name="commit2Phase(com.bigdata.ha.msg.IHA2PhaseCommitMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>commit2Phase</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;commit2Phase(<a href="../../../com/bigdata/ha/msg/IHA2PhaseCommitMessage.html" title="interface in com.bigdata.ha.msg">IHA2PhaseCommitMessage</a>&nbsp;commitMessage)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HACommitGlue.html#commit2Phase(com.bigdata.ha.msg.IHA2PhaseCommitMessage)">HACommitGlue</a></code></strong></div>
<div class="block">Commit using the root block from the corresponding prepare message. It is
 an error if a commit message is observed without the corresponding
 prepare message.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HACommitGlue.html#commit2Phase(com.bigdata.ha.msg.IHA2PhaseCommitMessage)">commit2Phase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HACommitGlue.html" title="interface in com.bigdata.ha">HACommitGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>commitMessage</code> - The commit message.</dd></dl>
</li>
</ul>
<a name="abort2Phase(com.bigdata.ha.msg.IHA2PhaseAbortMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>abort2Phase</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;abort2Phase(<a href="../../../com/bigdata/ha/msg/IHA2PhaseAbortMessage.html" title="interface in com.bigdata.ha.msg">IHA2PhaseAbortMessage</a>&nbsp;abortMessage)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HACommitGlue.html#abort2Phase(com.bigdata.ha.msg.IHA2PhaseAbortMessage)">HACommitGlue</a></code></strong></div>
<div class="block">Discard the current write set using <a href="../../../com/bigdata/journal/AbstractJournal.html#abort()"><code>AbstractJournal.abort()</code></a>,
 reloading all state from the last root block, etc.
 <p>
 Note: A service automatically does a local abort() if it leaves the pool
 of services joined with the quorum or if the leader fails over. Therefore
 a service should reject this message if the token has been invalidated
 since the service either has dine or will shortly do a low-level abort()
 on its own initiative.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HACommitGlue.html#abort2Phase(com.bigdata.ha.msg.IHA2PhaseAbortMessage)">abort2Phase</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HACommitGlue.html" title="interface in com.bigdata.ha">HACommitGlue</a></code></dd>
</dl>
</li>
</ul>
<a name="readFromDisk(com.bigdata.ha.msg.IHAReadRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readFromDisk</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/msg/IHAReadResponse.html" title="interface in com.bigdata.ha.msg">IHAReadResponse</a>&gt;&nbsp;readFromDisk(<a href="../../../com/bigdata/ha/msg/IHAReadRequest.html" title="interface in com.bigdata.ha.msg">IHAReadRequest</a>&nbsp;msg)</pre>
<div class="block">Read a record an <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> managed by the service. Services MUST
 NOT refer this message to another service. If the read can not be
 satisfied, for example because the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a> has been released or
 because there is a checksum error when reading on the <a href="../../../com/bigdata/rawstore/IRawStore.html" title="interface in com.bigdata.rawstore"><code>IRawStore</code></a>,
 then that exception should be thrown back to the caller.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAReadGlue.html#readFromDisk(com.bigdata.ha.msg.IHAReadRequest)">readFromDisk</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAReadGlue.html" title="interface in com.bigdata.ha">HAReadGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The <a href="../../../com/bigdata/ha/msg/IHAReadRequest.html" title="interface in com.bigdata.ha.msg"><code>IHAReadRequest</code></a>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> of an operation which evaluated to the desired
         record.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/ha/QuorumRead.html#readFromQuorum(java.util.UUID,%20long)"><code>QuorumRead.readFromQuorum(UUID, long)</code></a></dd></dl>
</li>
</ul>
<a name="receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest, com.bigdata.ha.msg.IHASendState, com.bigdata.ha.msg.IHAWriteMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>receiveAndReplicate</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;receiveAndReplicate(<a href="../../../com/bigdata/ha/msg/IHASyncRequest.html" title="interface in com.bigdata.ha.msg">IHASyncRequest</a>&nbsp;req,
                               <a href="../../../com/bigdata/ha/msg/IHASendState.html" title="interface in com.bigdata.ha.msg">IHASendState</a>&nbsp;snd,
                               <a href="../../../com/bigdata/ha/msg/IHAWriteMessage.html" title="interface in com.bigdata.ha.msg">IHAWriteMessage</a>&nbsp;msg)
                                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHASendState,%20com.bigdata.ha.msg.IHAWriteMessage)">HAPipelineGlue</a></code></strong></div>
<div class="block">Accept metadata describing an NIO buffer transfer along the write
 pipeline. This method is never invoked on the master. It is only invoked
 on the failover nodes, including the last node in the failover chain.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#receiveAndReplicate(com.bigdata.ha.msg.IHASyncRequest,%20com.bigdata.ha.msg.IHASendState,%20com.bigdata.ha.msg.IHAWriteMessage)">receiveAndReplicate</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - A request for an HALog (optional). This is only non-null when
            historical <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks are being replayed down
            the write pipeline in order to synchronize a service.</dd><dd><code>snd</code> - Metadata about the state of the sender and potentially the
            routing of the payload along the write replication pipeline.</dd><dd><code>msg</code> - The metadata.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> which will become available once the buffer
         transfer is complete.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getHALogRootBlocksForWriteSet(com.bigdata.ha.msg.IHALogRootBlocksRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHALogRootBlocksForWriteSet</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHALogRootBlocksResponse.html" title="interface in com.bigdata.ha.msg">IHALogRootBlocksResponse</a>&nbsp;getHALogRootBlocksForWriteSet(<a href="../../../com/bigdata/ha/msg/IHALogRootBlocksRequest.html" title="interface in com.bigdata.ha.msg">IHALogRootBlocksRequest</a>&nbsp;msg)
                                                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#getHALogRootBlocksForWriteSet(com.bigdata.ha.msg.IHALogRootBlocksRequest)">HAPipelineGlue</a></code></strong></div>
<div class="block">Request the root blocks for the HA Log for the specified commit point.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#getHALogRootBlocksForWriteSet(com.bigdata.ha.msg.IHALogRootBlocksRequest)">getHALogRootBlocksForWriteSet</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The request (specifies the desired HA Log by the commit
            counter of the closing root block).</dd>
<dt><span class="strong">Returns:</span></dt><dd>The requested root blocks.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="sendHALogForWriteSet(com.bigdata.ha.msg.IHALogRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendHALogForWriteSet</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;sendHALogForWriteSet(<a href="../../../com/bigdata/ha/msg/IHALogRequest.html" title="interface in com.bigdata.ha.msg">IHALogRequest</a>&nbsp;msg)
                                  throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#sendHALogForWriteSet(com.bigdata.ha.msg.IHALogRequest)">HAPipelineGlue</a></code></strong></div>
<div class="block">The recipient will send the <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks for the specified
 write set on the write pipeline. These <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks will be
 visible to ALL services in the write pipeline. It is important that all
 services <em>ignore</em> <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks that are not in
 sequence for the current write set unless they have explicitly requested
 an HALog using this method.
 <p>
 Note: The <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks are sent on the write pipeline.
 Therefore, a service MUST NOT request the write set from a service that
 is downstream from it in the write pipeline. It is always safe to request
 the data from the leader.
 <p>
 Note: The <a href="../../../com/bigdata/ha/msg/HAWriteMessage.html" title="class in com.bigdata.ha.msg"><code>HAWriteMessage</code></a> includes a quorum token. When historical
 <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks are being replicated in response to this
 method, the will be replicated using the quorum token that was in effect
 for that write set. Implementations MUST NOT perform asserts on the
 quorum token until after they have determined that the message is for the
 <em>current</em> write set.
 <p>
 Note: DO NOT use a <a href="../../../com/bigdata/service/proxy/ThickFuture.html" title="class in com.bigdata.service.proxy"><code>ThickFuture</code></a> for the returned <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.
 That will defeat the ability of the requester to cancel the
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#sendHALogForWriteSet(com.bigdata.ha.msg.IHALogRequest)">sendHALogForWriteSet</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>A <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> that may be used to cancel the remote process
         sending the data through the write pipeline.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="sendHAStore(com.bigdata.ha.msg.IHARebuildRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>sendHAStore</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/msg/IHASendStoreResponse.html" title="interface in com.bigdata.ha.msg">IHASendStoreResponse</a>&gt;&nbsp;sendHAStore(<a href="../../../com/bigdata/ha/msg/IHARebuildRequest.html" title="interface in com.bigdata.ha.msg">IHARebuildRequest</a>&nbsp;msg)
                                         throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#sendHAStore(com.bigdata.ha.msg.IHARebuildRequest)">HAPipelineGlue</a></code></strong></div>
<div class="block">Send the raw blocks for the requested backing store across the write
 pipeline.
 <p>
 Note: This method supports disaster recovery of a service from a met
 quorum. This procedure can only be used when a met quorum exists.
 <p>
 Note: DO NOT use a <a href="../../../com/bigdata/service/proxy/ThickFuture.html" title="class in com.bigdata.service.proxy"><code>ThickFuture</code></a> for the returned <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.
 That will defeat the ability of the requester to cancel the
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#sendHAStore(com.bigdata.ha.msg.IHARebuildRequest)">sendHAStore</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>A <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> that may be used to cancel the remote process
         sending the data through the write pipeline. The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>
         will report the current root block in effect as of the moment
         when the <code>sendHAStore</code> operation was completed.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="getHAWriteSetState(com.bigdata.ha.msg.IHAWriteSetStateRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHAWriteSetState</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHAWriteSetStateResponse.html" title="interface in com.bigdata.ha.msg">IHAWriteSetStateResponse</a>&nbsp;getHAWriteSetState(<a href="../../../com/bigdata/ha/msg/IHAWriteSetStateRequest.html" title="interface in com.bigdata.ha.msg">IHAWriteSetStateRequest</a>&nbsp;req)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#getHAWriteSetState(com.bigdata.ha.msg.IHAWriteSetStateRequest)">HAPipelineGlue</a></code></strong></div>
<div class="block">Request metadata about the current write set from the quorum leader.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#getHAWriteSetState(com.bigdata.ha.msg.IHAWriteSetStateRequest)">getHAWriteSetState</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The request.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The response.</dd></dl>
</li>
</ul>
<a name="getRootBlock(com.bigdata.ha.msg.IHARootBlockRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getRootBlock</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHARootBlockResponse.html" title="interface in com.bigdata.ha.msg">IHARootBlockResponse</a>&nbsp;getRootBlock(<a href="../../../com/bigdata/ha/msg/IHARootBlockRequest.html" title="interface in com.bigdata.ha.msg">IHARootBlockRequest</a>&nbsp;msg)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#getRootBlock(com.bigdata.ha.msg.IHARootBlockRequest)">HAGlue</a></code></strong></div>
<div class="block">Return the then current root block for the persistence store.
 <p>
 Note: The initial root blocks are identical, so this may be used to
 create a new journal in a quorum by replicating the root blocks of the
 quorum leader.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#getRootBlock(com.bigdata.ha.msg.IHARootBlockRequest)">getRootBlock</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The message requesting the then current root block.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The then current root block.</dd></dl>
</li>
</ul>
<a name="moveToEndOfPipeline()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>moveToEndOfPipeline</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&nbsp;moveToEndOfPipeline()</pre>
<div class="block">Instruct the service to move to the end of the write pipeline. The leader
 MUST be the first service in the write pipeline since it is the service
 to which the application directs all write requests. This message is used
 when a leader will be elected and it needs to force other services before
 it in the write pipeline to leave/add themselves from/to the write
 pipeline such that the leader becomes the first service in the write
 pipeline.
 <p>
 This implementation does pipeline remove() followed by pipline add().</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#moveToEndOfPipeline()">moveToEndOfPipeline</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
</dl>
</li>
</ul>
<a name="resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>resetPipeline</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="../../../com/bigdata/ha/IHAPipelineResetResponse.html" title="interface in com.bigdata.ha">IHAPipelineResetResponse</a>&gt;&nbsp;resetPipeline(<a href="../../../com/bigdata/ha/IHAPipelineResetRequest.html" title="interface in com.bigdata.ha">IHAPipelineResetRequest</a>&nbsp;req)
                                               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">HAPipelineGlue</a></code></strong></div>
<div class="block">Reset the pipeline (blocking). This message is used to handle an error in
 pipeline replication. If replication fails, the socket connections both
 upstream and downstream of the point of failure can be left in an
 indeterminate state with partially buffered data. In order to bring the
 pipeline back into a known state (without forcing a quorum break) we
 message each service in the pipeline to reset its
 <a href="../../../com/bigdata/ha/pipeline/HAReceiveService.html" title="class in com.bigdata.ha.pipeline"><code>HAReceiveService</code></a> (including the inner <a href="../../../com/bigdata/ha/pipeline/HASendService.html" title="class in com.bigdata.ha.pipeline"><code>HASendService</code></a>). The
 next message and payload relayed from the leader will cause new socket
 connections to be established.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAPipelineGlue.html#resetPipeline(com.bigdata.ha.IHAPipelineResetRequest)">resetPipeline</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAPipelineGlue.html" title="interface in com.bigdata.ha">HAPipelineGlue</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for the operation on the remote service.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="gatherMinimumVisibleCommitTime(com.bigdata.ha.msg.IHAGatherReleaseTimeRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>gatherMinimumVisibleCommitTime</h4>
<pre>public&nbsp;void&nbsp;gatherMinimumVisibleCommitTime(<a href="../../../com/bigdata/ha/msg/IHAGatherReleaseTimeRequest.html" title="interface in com.bigdata.ha.msg">IHAGatherReleaseTimeRequest</a>&nbsp;req)
                                    throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Message used to request information about the earliest commit point that
 is pinned on a follower. This is used by the leader to make a decision
 about the new release time for the replication cluster.
 <p>
 Note: This message is used as part of a pattern where the leader
 instructs the followers to message the leader with their earliest commit
 point pinned by either a transaction or the minReleaseAge of their
 <a href="../../../com/bigdata/journal/ITransactionService.html" title="interface in com.bigdata.journal"><code>ITransactionService</code></a> using
 <code>#notifyEarliestCommitTime(IHANotifyReleaseTimeResponse)</code>.
 <p>
 The message is a sync RMI call. The follower will clear an outcome and
 execute a task which runs asynchronously and messages back to the leader
 with its <a href="../../../com/bigdata/ha/msg/IHANotifyReleaseTimeResponse.html" title="interface in com.bigdata.ha.msg"><code>IHANotifyReleaseTimeResponse</code></a>. The leader will report
 back the consensus release time. The outcome of these on the follower is
 not directly reported back to the leader, e.g., through a remote
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> because this causes a DGC thread leak on the follower. See
 the ticket below. Instead, the follower notes the outcome of the gather
 operation and will vote "NO" in
 <a href="../../../com/bigdata/ha/HACommitGlue.html#prepare2Phase(com.bigdata.ha.msg.IHA2PhasePrepareMessage)"><code>HACommitGlue.prepare2Phase(IHA2PhasePrepareMessage)</code></a> unless it
 completes its side of the release time consensus protocol without error
 (that is, the otherwise unmonitored outcome of the asynchronous task for
 <a href="../../../com/bigdata/ha/HATXSGlue.html#gatherMinimumVisibleCommitTime(com.bigdata.ha.msg.IHAGatherReleaseTimeRequest)"><code>HATXSGlue.gatherMinimumVisibleCommitTime(IHAGatherReleaseTimeRequest)</code></a>).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HATXSGlue.html#gatherMinimumVisibleCommitTime(com.bigdata.ha.msg.IHAGatherReleaseTimeRequest)">gatherMinimumVisibleCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HATXSGlue.html" title="interface in com.bigdata.ha">HATXSGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The request from the leader.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a
      href="https://sourceforge.net/apps/trac/bigdata/ticket/673"
      > Native thread leak in HAJournalServer process </a></dd></dl>
</li>
</ul>
<a name="notifyEarliestCommitTime(com.bigdata.ha.msg.IHANotifyReleaseTimeRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyEarliestCommitTime</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/ha/msg/IHANotifyReleaseTimeResponse.html" title="interface in com.bigdata.ha.msg">IHANotifyReleaseTimeResponse</a>&nbsp;notifyEarliestCommitTime(<a href="../../../com/bigdata/ha/msg/IHANotifyReleaseTimeRequest.html" title="interface in com.bigdata.ha.msg">IHANotifyReleaseTimeRequest</a>&nbsp;req)
                                                      throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a>,
                                                             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                                                             <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BrokenBarrierException.html?is-external=true" title="class or interface in java.util.concurrent">BrokenBarrierException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HATXSGlue.html#notifyEarliestCommitTime(com.bigdata.ha.msg.IHANotifyReleaseTimeRequest)">HATXSGlue</a></code></strong></div>
<div class="block">Message used by the follower to notify the leader about the new release
 time that will be visible for new transaction starts. The leader then
 chooses the mimimum across itself and the followers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HATXSGlue.html#notifyEarliestCommitTime(com.bigdata.ha.msg.IHANotifyReleaseTimeRequest)">notifyEarliestCommitTime</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HATXSGlue.html" title="interface in com.bigdata.ha">HATXSGlue</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The earliest pinned commit point across the services joined with
         the met quorum.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/BrokenBarrierException.html?is-external=true" title="class or interface in java.util.concurrent">BrokenBarrierException</a></code></dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="nextTimestamp()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>nextTimestamp</h4>
<pre>public&nbsp;long&nbsp;nextTimestamp()</pre>
<div class="block">This exposes the clock used to assign transaction identifiers and
 commit times. It is being exposed to support certain kinds of
 overrides for unit tests.
 <p>
 Note: This method is NOT exposed to RMI. However, it can still be
 overridden by the unit tests.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The next timestamp from that clock.</dd></dl>
</li>
</ul>
<a name="getServiceUUID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceUUID</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;getServiceUUID()
                    throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/service/IService.html#getServiceUUID()">IService</a></code></strong></div>
<div class="block">The unique identifier for this service.
 <p>
 Note: Some service discovery frameworks (Jini) will assign the service a
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> asynchronously after a new service starts, in which case
 this method will return <code>null</code> until the service
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> has been assigned.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/service/IService.html#getServiceUUID()">getServiceUUID</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/service/IService.html" title="interface in com.bigdata.service">IService</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The unique data service identifier.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - since you can use this method with RMI.</dd></dl>
</li>
</ul>
<a name="getServiceIface()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceIface</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Class.html?is-external=true" title="class or interface in java.lang">Class</a>&nbsp;getServiceIface()
                      throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/service/IService.html#getServiceIface()">IService</a></code></strong></div>
<div class="block">Return the most interesting interface for the service.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/service/IService.html#getServiceIface()">getServiceIface</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/service/IService.html" title="interface in com.bigdata.service">IService</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - since you can use this method with RMI.</dd></dl>
</li>
</ul>
<a name="getHostname()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHostname</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getHostname()
                   throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/service/IService.html#getHostname()">IService</a></code></strong></div>
<div class="block">The host on which this service is running.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/service/IService.html#getHostname()">getHostname</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/service/IService.html" title="interface in com.bigdata.service">IService</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - since you can use this method with RMI.</dd></dl>
</li>
</ul>
<a name="getServiceName()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getServiceName</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getServiceName()
                      throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/service/IService.html#getServiceName()">IService</a></code></strong></div>
<div class="block">Return name by which a user might recognize this service.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/service/IService.html#getServiceName()">getServiceName</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/service/IService.html" title="interface in com.bigdata.service">IService</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code> - since you can use this method with RMI.</dd></dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()
             throws <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/RemoteException.html?is-external=true" title="class or interface in java.rmi">RemoteException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/service/IService.html#destroy()">IService</a></code></strong></div>
<div class="block">Destroy the service. If the service is running, it is shutdown
 immediately and then destroyed. This method has the same signature as
 <code>DestroyAdmin#destroy()</code>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/service/IService.html#destroy()">destroy</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/service/IService.html" title="interface in com.bigdata.service">IService</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/RemoteException.html?is-external=true" title="class or interface in java.rmi">RemoteException</a></code></dd></dl>
</li>
</ul>
<a name="submit(com.bigdata.ha.IIndexManagerCallable, boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>submit</h4>
<pre>public&nbsp;&lt;T&gt;&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;T&gt;&nbsp;submit(<a href="../../../com/bigdata/ha/IIndexManagerCallable.html" title="interface in com.bigdata.ha">IIndexManagerCallable</a>&lt;T&gt;&nbsp;callable,
                   boolean&nbsp;asyncFuture)
                 throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html#submit(com.bigdata.ha.IIndexManagerCallable,%20boolean)">HAGlue</a></code></strong></div>
<div class="block">Run the caller's task on the service.
 <p>
 Note: This interface provides direct access to the raw index manager.
 Caller's requiring concurrency control should submit an <a href="../../../com/bigdata/rdf/task/IApiTask.html" title="interface in com.bigdata.rdf.task"><code>IApiTask</code></a>
 in order to have their task queue for the necessary locks and run on the
 appropriate executor service.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/ha/HAGlue.html#submit(com.bigdata.ha.IIndexManagerCallable,%20boolean)">submit</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/ha/HAGlue.html" title="interface in com.bigdata.ha">HAGlue</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>callable</code> - The task to run on the service.</dd><dd><code>asyncFuture</code> - <code>true</code> if the task will execute asynchronously
            and return a <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for the computation that may
            be used to inspect and/or cancel the computation.
            <code>false</code> if the task will execute synchronously
            and return a thick <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractJournal.BasicHA.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/AbstractJournal.BasicHA.VoteNoTask.html" title="class in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/AbstractJournal.BasicHA.html" target="_top">Frames</a></li>
<li><a href="AbstractJournal.BasicHA.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
