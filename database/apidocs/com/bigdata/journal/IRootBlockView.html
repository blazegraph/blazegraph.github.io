<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Tue Jan 26 02:01:33 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>IRootBlockView (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)</title>
<meta name="date" content="2016-01-26">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="IRootBlockView (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IRootBlockView.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/IResourceManager.html" title="interface in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/ISnapshotFactory.html" title="interface in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/IRootBlockView.html" target="_top">Frames</a></li>
<li><a href="IRootBlockView.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.journal</div>
<h2 title="Interface IRootBlockView" class="title">Interface IRootBlockView</h2>
</div>
<div class="contentContainer">
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Known Implementing Classes:</dt>
<dd><a href="../../../com/bigdata/journal/RootBlockView.html" title="class in com.bigdata.journal">RootBlockView</a></dd>
</dl>
<hr>
<br>
<pre>public interface <span class="strong">IRootBlockView</span></pre>
<div class="block">Interface for a root block on the journal. The root block provides metadata
 about the journal. The journal has two root blocks. The root blocks are
 written in an alternating order according to the Challis algorithm. Each root
 block includes a field at the head and tail whose value is strictly
 increasing fields. This field is often referred to as a root block
 "timestamps", but in practice we use the commit counter. On restart, the root
 block is choosen whose (a) strictly increasing fields agree; and (b) whose
 value on those fields is greater. This protected against both crashes and
 partial writes of the root block itself.
 <p>
 The commit counter is a store local strictly increasing non-negative long
 integer (commit counters are distinct for each store regardless of whether
 they are part of the same distributed database). The commit counters MUST be
 strictly increasing (a) so that they place the commit records into a total
 ordering; (b) so that the more current root block may be choose by comparing
 the value of the field in each of the two root blocks; and (c) so that a
 partial write of a root block may be detected by the presence of different
 values for the field at the head and tail of a given root block. The commit
 counter is also used as the field written at the head and tail of each root
 block according to the Challis algorithm. If those fields are the same then
 the root block is assumed to have been completely written.
 <p>
 Note that random data may still result in an identical value during a partial
 write. This possibility is guarded against by storing the checksum of the
 root block.
 <p>
 The first and last commit times are persisted in each root block in order to
 support both unisolated commits and transactions, whether in a local or a
 distributed database. These "times" are generated by the appropriate
 <code>ITransactionManagerService</code> service, which is responsible both for assigning
 transaction start times (which are in fact the transaction identifier) and
 transaction commit times, which are stored in root blocks of the various
 stored that participate in a given database and reported via
 <a href="../../../com/bigdata/journal/IRootBlockView.html#getFirstCommitTime()"><code>getFirstCommitTime()</code></a> and <a href="../../../com/bigdata/journal/IRootBlockView.html#getLastCommitTime()"><code>getLastCommitTime()</code></a>. While these
 do not strictly speaking have to be "times" they do have to be assigned using
 the same measure as the transaction identifiers, so either a coordinated time
 server or a strictly increasing counter. Regardless, we need to know "when" a
 transaction commits as well as "when" it starts whether we measure "when"
 using a counter or a clock. Also note that we need to assign "commit times"
 even when the operation is unisolated. This means that we have to coordinate
 an unisolated commit on a store that is part of a distributed database with
 the centralized transaction manager. This should be done as part of the group
 commit since we are waiting at that point anyway to optimize IO by minimizing
 syncs to disk.
 <p>
 Note that some file systems or disks can re-order writes of by the
 application and write the data in a more efficient order. This can cause the
 root blocks to be written before the application data is stable on disk. The
 <a href="../../../com/bigdata/journal/Options.html#DOUBLE_SYNC"><code>Options.DOUBLE_SYNC</code></a> option exists to defeat this behavior and ensure
 restart-safety for such systems.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#NO_BLOCK_SEQUENCE">NO_BLOCK_SEQUENCE</a></strong></code>
<div class="block">The value used for <a href="../../../com/bigdata/journal/IRootBlockView.html#getBlockSequence()"><code>getBlockSequence()</code></a> for both historical stores
 and for stores that do not support this concept.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#asReadOnlyBuffer()">asReadOnlyBuffer</a></strong>()</code>
<div class="block">A read-only buffer whose contents are the root block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#asRootBlock(boolean)">asRootBlock</a></strong>(boolean&nbsp;rootBlock0)</code>
<div class="block">Return a version of the caller's root block that is flagged as either
 rootBlock0 or rootBlock1 as indicated by the argument.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getBlockSequence()">getBlockSequence</a></strong>()</code>
<div class="block">Return the #of <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks that have been written out as
 part of the current write set.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getCloseTime()">getCloseTime</a></strong>()</code>
<div class="block">The timestamp assigned as the time at which writes were disallowed for
 the journal.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getCommitCounter()">getCommitCounter</a></strong>()</code>
<div class="block">The commit counter is a positive long integer that is strictly local to
 the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getCommitRecordAddr()">getCommitRecordAddr</a></strong>()</code>
<div class="block">Return the address at which the <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a> for this root block
 is stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getCommitRecordIndexAddr()">getCommitRecordIndexAddr</a></strong>()</code>
<div class="block">The address of the root of the <a href="../../../com/bigdata/journal/CommitRecordIndex.html" title="class in com.bigdata.journal"><code>CommitRecordIndex</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getCreateTime()">getCreateTime</a></strong>()</code>
<div class="block">The timestamp assigned as the creation time for the journal.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getFirstCommitTime()">getFirstCommitTime</a></strong>()</code>
<div class="block">The database wide timestamp of first commit on the store -or- 0L if there
 have been no commits.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getLastCommitTime()">getLastCommitTime</a></strong>()</code>
<div class="block">The database wide timestamp of the most recent commit on the store or 0L
 iff there have been no commits.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getMetaBitsAddr()">getMetaBitsAddr</a></strong>()</code>
<div class="block">For the <a href="../../../com/bigdata/journal/StoreTypeEnum.html#RW"><code>StoreTypeEnum.RW</code></a> store, where we will read the metadata
 bits from.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getMetaStartAddr()">getMetaStartAddr</a></strong>()</code>
<div class="block">For the <a href="../../../com/bigdata/journal/StoreTypeEnum.html#RW"><code>StoreTypeEnum.RW</code></a> store, the start of the area of the file
 where the allocation blocks are allocated.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getNextOffset()">getNextOffset</a></strong>()</code>
<div class="block">The next offset at which a data item would be written on the store.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getOffsetBits()">getOffsetBits</a></strong>()</code>
<div class="block">The #of bits in a 64-bit long integer address that are dedicated to the
 byte offset into the store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getQuorumToken()">getQuorumToken</a></strong>()</code>
<div class="block">The <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a> token associated with this commit point or
 <a href="../../../com/bigdata/quorum/Quorum.html#NO_QUORUM"><code>Quorum.NO_QUORUM</code></a> if there was no quorum.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/journal/StoreTypeEnum.html" title="enum in com.bigdata.journal">StoreTypeEnum</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getStoreType()">getStoreType</a></strong>()</code>
<div class="block">A byte value which specifies whether the backing store is a journal
 (log-structured store or WORM) or a read-write store.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getUUID()">getUUID</a></strong>()</code>
<div class="block">The unique journal identifier</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#getVersion()">getVersion</a></strong>()</code>
<div class="block">The root block version number.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#isRootBlock0()">isRootBlock0</a></strong>()</code>
<div class="block">There are two root blocks and they are written in an alternating order.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/journal/IRootBlockView.html#valid()">valid</a></strong>()</code>
<div class="block">Assertion throws exception unless the root block is valid.</div>
</td>
</tr>
</table>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="NO_BLOCK_SEQUENCE">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>NO_BLOCK_SEQUENCE</h4>
<pre>static final&nbsp;long NO_BLOCK_SEQUENCE</pre>
<div class="block">The value used for <a href="../../../com/bigdata/journal/IRootBlockView.html#getBlockSequence()"><code>getBlockSequence()</code></a> for both historical stores
 and for stores that do not support this concept.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.journal.IRootBlockView.NO_BLOCK_SEQUENCE">Constant Field Values</a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="valid()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>valid</h4>
<pre>void&nbsp;valid()
           throws <a href="../../../com/bigdata/journal/RootBlockException.html" title="class in com.bigdata.journal">RootBlockException</a></pre>
<div class="block">Assertion throws exception unless the root block is valid. Conditions
 tested include the root block MAGIC and the root block timestamps (there
 are two and they must agree).</div>
<dl><dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../com/bigdata/journal/RootBlockException.html" title="class in com.bigdata.journal">RootBlockException</a></code></dd></dl>
</li>
</ul>
<a name="isRootBlock0()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isRootBlock0</h4>
<pre>boolean&nbsp;isRootBlock0()</pre>
<div class="block">There are two root blocks and they are written in an alternating order.
 For the sake of distinction, the first one is referred to as "rootBlock0"
 while the 2nd one is referred to as "rootBlock1". This method indicates
 which root block is represented by this view based on metadata supplied
 to the constructor (the distinction is not persistent on disk).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>True iff the root block view was constructed from "rootBlock0".</dd></dl>
</li>
</ul>
<a name="getVersion()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getVersion</h4>
<pre>int&nbsp;getVersion()</pre>
<div class="block">The root block version number.</div>
</li>
</ul>
<a name="getNextOffset()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getNextOffset</h4>
<pre>long&nbsp;getNextOffset()</pre>
<div class="block">The next offset at which a data item would be written on the store.
 
 FIXME The RWStore has different semantics for this field. Document those
 semantics and modify <a href="../../../com/bigdata/journal/AbstractJournal.html" title="class in com.bigdata.journal"><code>AbstractJournal</code></a> so we can directly decide
 how many bytes were "written" (for the WORM) or were "allocated" (for the
 RWStore, in which case it should probably be the net of the bytes
 allocated and released). Update all the locations in the code which rely
 on <a href="../../../com/bigdata/journal/IRootBlockView.html#getNextOffset()"><code>getNextOffset()</code></a> to compute the #of bytes written onto the
 store.</div>
</li>
</ul>
<a name="getFirstCommitTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFirstCommitTime</h4>
<pre>long&nbsp;getFirstCommitTime()</pre>
<div class="block">The database wide timestamp of first commit on the store -or- 0L if there
 have been no commits.  In a local database, this timestamp is generated by
 a local timestamp service.  In a distributed database, this timestamp
 is generated by a shared timestamp service. The timestamps returned by
 this method are strictly increasing for a given store and for a given
 database.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The timestamp of the first commit on the store or 0L iff there
         have been no commits.</dd></dl>
</li>
</ul>
<a name="getLastCommitTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getLastCommitTime</h4>
<pre>long&nbsp;getLastCommitTime()</pre>
<div class="block">The database wide timestamp of the most recent commit on the store or 0L
 iff there have been no commits. In a local database, this timestamp is
 generated by a local timestamp service. In a distributed database, this
 timestamp is generated by a shared timestamp service. The timestamps
 returned by this method are strictly increasing for a given store and for
 a given database.</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The timestamp of the most recent commit on the store or 0L iff
         there have been no commits.</dd></dl>
</li>
</ul>
<a name="getCommitCounter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitCounter</h4>
<pre>long&nbsp;getCommitCounter()</pre>
<div class="block">The commit counter is a positive long integer that is strictly local to
 the store. The commit counter is used to avoid problems with timestamps
 generated by different machines or when time goes backwards or other
 nasty stuff. The correct root block is chosen by selecting the valid
 root block with the larger commit counter (the value of the commit counter
 is reused by the <code>Challis field</code>).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The commit counter.</dd></dl>
</li>
</ul>
<a name="getCommitRecordAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitRecordAddr</h4>
<pre>long&nbsp;getCommitRecordAddr()</pre>
<div class="block">Return the address at which the <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a> for this root block
 is stored. The <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a>s are stored separately from the
 root block so that they may be indexed by the commit timestamps. This is
 necessary in order to be able to quickly recover the root addresses for a
 given commit timestamp, which is a featured used to support transactional
 isolation.
 <p>
 Note: When a logical journal may overflow onto more than one physical
 journal then the address of the <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a> MAY refer to a
 historical physical journal and care MUST be exercised to resolve the
 address against the appropriate journal file. [This paragraph is probably
 not valid.  Verify and remove if it is not true.]</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>The address at which the <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a> for this root
         block is stored.</dd></dl>
</li>
</ul>
<a name="getCommitRecordIndexAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCommitRecordIndexAddr</h4>
<pre>long&nbsp;getCommitRecordIndexAddr()</pre>
<div class="block">The address of the root of the <a href="../../../com/bigdata/journal/CommitRecordIndex.html" title="class in com.bigdata.journal"><code>CommitRecordIndex</code></a>. The
 <a href="../../../com/bigdata/journal/CommitRecordIndex.html" title="class in com.bigdata.journal"><code>CommitRecordIndex</code></a> contains the ordered addresses of the
 historical <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a>s on the <a href="../../../com/bigdata/journal/Journal.html" title="class in com.bigdata.journal"><code>Journal</code></a>. The address
 of the <a href="../../../com/bigdata/journal/CommitRecordIndex.html" title="class in com.bigdata.journal"><code>CommitRecordIndex</code></a> is stored directly in the root block
 rather than the <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a> since we can not obtain this
 address until after we have formatted and written the
 <a href="../../../com/bigdata/journal/ICommitRecord.html" title="interface in com.bigdata.journal"><code>ICommitRecord</code></a>.</div>
</li>
</ul>
<a name="getUUID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUUID</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;getUUID()</pre>
<div class="block">The unique journal identifier</div>
</li>
</ul>
<a name="getOffsetBits()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOffsetBits</h4>
<pre>int&nbsp;getOffsetBits()</pre>
<div class="block">The #of bits in a 64-bit long integer address that are dedicated to the
 byte offset into the store.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/rawstore/WormAddressManager.html" title="class in com.bigdata.rawstore"><code>WormAddressManager</code></a></dd></dl>
</li>
</ul>
<a name="getCreateTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCreateTime</h4>
<pre>long&nbsp;getCreateTime()</pre>
<div class="block">The timestamp assigned as the creation time for the journal.</div>
</li>
</ul>
<a name="getCloseTime()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getCloseTime</h4>
<pre>long&nbsp;getCloseTime()</pre>
<div class="block">The timestamp assigned as the time at which writes were disallowed for
 the journal.</div>
</li>
</ul>
<a name="getStoreType()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStoreType</h4>
<pre><a href="../../../com/bigdata/journal/StoreTypeEnum.html" title="enum in com.bigdata.journal">StoreTypeEnum</a>&nbsp;getStoreType()</pre>
<div class="block">A byte value which specifies whether the backing store is a journal
 (log-structured store or WORM) or a read-write store. Only two values are
 defined at present. ZERO (0) is a WORM; ONE (1) is a read/write store.</div>
</li>
</ul>
<a name="getMetaBitsAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaBitsAddr</h4>
<pre>long&nbsp;getMetaBitsAddr()</pre>
<div class="block">For the <a href="../../../com/bigdata/journal/StoreTypeEnum.html#RW"><code>StoreTypeEnum.RW</code></a> store, where we will read the metadata
 bits from. When we start the store up we need to retrieve the metabits
 from this address. This is a byte offset into the file and is stored as a
 long integer. Normal addresses are calculated with reference to the
 allocation blocks. The value for a WORM store is ZERO (0).</div>
</li>
</ul>
<a name="getMetaStartAddr()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getMetaStartAddr</h4>
<pre>long&nbsp;getMetaStartAddr()</pre>
<div class="block">For the <a href="../../../com/bigdata/journal/StoreTypeEnum.html#RW"><code>StoreTypeEnum.RW</code></a> store, the start of the area of the file
 where the allocation blocks are allocated. This is also a byte offset
 into the file and is stored as a 64-bit integer. It is called
 metaStartAddr because that is the offset that is used with the
 metaBitsAddr to determine how to find the allocation blocks. The value
 for a WORM store is ZERO (0).</div>
</li>
</ul>
<a name="getQuorumToken()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQuorumToken</h4>
<pre>long&nbsp;getQuorumToken()</pre>
<div class="block">The <a href="../../../com/bigdata/quorum/Quorum.html" title="interface in com.bigdata.quorum"><code>Quorum</code></a> token associated with this commit point or
 <a href="../../../com/bigdata/quorum/Quorum.html#NO_QUORUM"><code>Quorum.NO_QUORUM</code></a> if there was no quorum.
 <p>
 Note: If commit points are part of the resynchronization protocol, they
 MUST NOT use the current quorum token unless the service is synchronized
 with the quorum at that commit point.</div>
</li>
</ul>
<a name="getBlockSequence()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockSequence</h4>
<pre>long&nbsp;getBlockSequence()</pre>
<div class="block">Return the #of <a href="../../../com/bigdata/io/writecache/WriteCache.html" title="class in com.bigdata.io.writecache"><code>WriteCache</code></a> blocks that have been written out as
 part of the current write set. This value is origin ZERO (0) and is reset
 to ZERO (0) after each commit or abort.</div>
</li>
</ul>
<a name="asReadOnlyBuffer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>asReadOnlyBuffer</h4>
<pre><a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio">ByteBuffer</a>&nbsp;asReadOnlyBuffer()</pre>
<div class="block">A read-only buffer whose contents are the root block. The position,
 limit, and mark will be independent for each <a href="http://docs.oracle.com/javase/7/docs/api/java/nio/ByteBuffer.html?is-external=true" title="class or interface in java.nio"><code>ByteBuffer</code></a> that is
 returned by this method.</div>
</li>
</ul>
<a name="asRootBlock(boolean)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>asRootBlock</h4>
<pre><a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal">IRootBlockView</a>&nbsp;asRootBlock(boolean&nbsp;rootBlock0)</pre>
<div class="block">Return a version of the caller's root block that is flagged as either
 rootBlock0 or rootBlock1 as indicated by the argument. Root blocks are
 immutable, so this will either return your argument or return a new
 <a href="../../../com/bigdata/journal/IRootBlockView.html" title="interface in com.bigdata.journal"><code>IRootBlockView</code></a> in which the sense of the <a href="../../../com/bigdata/journal/IRootBlockView.html#isRootBlock0()"><code>isRootBlock0()</code></a>
 flag is now correct.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>rootBlock0</code> - Whether you want rootBlock0 or rootBlock1.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The root block.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/IRootBlockView.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/journal/IResourceManager.html" title="interface in com.bigdata.journal"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/journal/ISnapshotFactory.html" title="interface in com.bigdata.journal"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/journal/IRootBlockView.html" target="_top">Frames</a></li>
<li><a href="IRootBlockView.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li>Constr&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
