<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Sat Jun 18 19:38:18 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>BigdataFileSystem (Blazegraph Database Platform 2.1.2 API)</title>
<meta name="date" content="2016-06-18">
<link rel="stylesheet" type="text/css" href="../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="BigdataFileSystem (Blazegraph Database Platform 2.1.2 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BigdataFileSystem.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/bfs/AtomicBlockWriteProc.html" title="class in com.bigdata.bfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/bfs/BigdataFileSystem.Options.html" title="interface in com.bigdata.bfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/bfs/BigdataFileSystem.html" target="_top">Frames</a></li>
<li><a href="BigdataFileSystem.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.bfs</div>
<h2 title="Class BigdataFileSystem" class="title">Class BigdataFileSystem</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../com/bigdata/relation/AbstractResource.html" title="class in com.bigdata.relation">com.bigdata.relation.AbstractResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;</li>
<li>
<ul class="inheritance">
<li>com.bigdata.bfs.BigdataFileSystem</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a>, <a href="../../../com/bigdata/relation/IMutableResource.html" title="interface in com.bigdata.relation">IMutableResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;, <a href="../../../com/bigdata/relation/locator/ILocatableResource.html" title="interface in com.bigdata.relation.locator">ILocatableResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;, <a href="../../../com/bigdata/sparse/IRowStoreConstants.html" title="interface in com.bigdata.sparse">IRowStoreConstants</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">BigdataFileSystem</span>
extends <a href="../../../com/bigdata/relation/AbstractResource.html" title="class in com.bigdata.relation">AbstractResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;
implements <a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a>, <a href="../../../com/bigdata/sparse/IRowStoreConstants.html" title="interface in com.bigdata.sparse">IRowStoreConstants</a></pre>
<div class="block">A distributed file system with extensible metadata and atomic append
 implemented using the bigdata scale-out architecture. Files have a client
 assigned identifier, which is a Unicode string. The file identifier MAY be
 structured so as to look like a hierarchical file system using any desired
 convention. Files are versioned and historical versions MAY be accessed until
 the next compacting merge discards their data. File data is stored in large
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blockSize"><code>blockSize</code></a> blocks. Partial and even empty blocks are allowed and only
 the data written will be stored. <code>2^63-1</code> distinct blocks may be
 written per file version, making the maximum possible file size
 <code>536,870,912</code> exabytes. Files may be used as queues, in which
 case blocks containing new records are atomically appended while a map/reduce
 style master consumes the head block of the file.
 <p>
 Efficient method are offered for streaming and block oriented IO. All block
 read and write operations are atomic, including block append. Files may be
 easily written such that records never cross a block boundary by the
 expediency of flushing the output stream if a record would overflow the
 current block. A flush forces the atomic write of a partial block. Partial
 blocks are stored efficiently - only the bytes actually written are stored.
 Blocks are large enough that most applications can safely store a large
 number of logical records in each block. Files comprised of application
 defined logical records organized into a sequence of blocks are well-suited
 to map/reduce processing. They may be efficiently split at block boundaries
 and references to the blocks distributed to clients. Likewise, reduce clients
 can aggregate data into large files suitable for further map/reduce
 processing.
 <p>
 The distributed file system uses two scale-out indices to support ACID
 operations on file metadata and atomic file append. These ACID guarantees
 arise from the use of unisolated operations on the respective indices and
 therefore apply only to the individual file metadata or file block
 operations. In particular, file metadata read and write are atomic and all
 individual file block IO (read, write, and append) operations are atomic.
 Atomicity is NOT guaranteed when performing more than a single file block IO
 operation, e.g., multiple appends MIGHT NOT write sequential blocks since
 other block operations could have intervened.
 <p>
 The content length of the file is not stored as file metadata. Instead it MAY
 be estimated by a range count of the index entries spanned by the file's
 data. The exact file size may be readily determined when reading small files
 by the expediency of sucking the entire file into a buffer - all reads are at
 least one block. Streaming processing is advised in all cases when handling
 large files, including when the file is to be delivered via HTTP.
 <p>
 The <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getFileMetadataIndex()"><code>metadata index</code></a> uses a <a href="../../../com/bigdata/sparse/SparseRowStore.html" title="class in com.bigdata.sparse"><code>SparseRowStore</code></a>
 design, similar to Google's bigtable or Hadoop's HBase. All updates to file
 version metadata are atomic. The primary key in the metadata index for every
 file is its <a href="../../../com/bigdata/bfs/FileMetadataSchema.html#ID"><code>FileMetadataSchema.ID</code></a>. In addition, each version of a file
 has a distinct <a href="../../../com/bigdata/bfs/FileMetadataSchema.html#VERSION"><code>FileMetadataSchema.VERSION</code></a> property. File creation time,
 version creation time, and file version metadata update timestamps may be
 recovered from the timestamps associated with the properties in the metadata
 index. The use of the <a href="../../../com/bigdata/bfs/FileMetadataSchema.html#CONTENT_TYPE"><code>FileMetadataSchema.CONTENT_TYPE</code></a> and
 <a href="../../../com/bigdata/bfs/FileMetadataSchema.html#CONTENT_ENCODING"><code>FileMetadataSchema.CONTENT_ENCODING</code></a> properties is enforced by the
 high-level <a href="../../../com/bigdata/bfs/Document.html" title="interface in com.bigdata.bfs"><code>Document</code></a> interface. Applications are free to define
 additional properties.
 <p>
 Each time a file is created a new version number is assigned. The data index
 uses the <a href="../../../com/bigdata/bfs/FileMetadataSchema.html#ID"><code>FileMetadataSchema.ID</code></a> as the first field in a compound key. The
 second field is the <a href="../../../com/bigdata/bfs/FileMetadataSchema.html#VERSION"><code>FileMetadataSchema.VERSION</code></a> - a 32-bit integer. The
 remainder of the key is a 64-bit signed block identifier (2^63-1 distinct
 block identifiers). The block identifiers are strictly monotonic (e.g., one
 up) and their sequence orders the blocks into the logical byte order of the
 file.
 <p>
 Operations that create a new file actually create a new file version. The old
 file version will eventually be garbage collected depending on the policy in
 effect for compacting merges. Likewise, operations that delete a file simply
 mark the metadata for the file version as deleted and the file version will
 be eventually reclaimed. The high-level <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#update(com.bigdata.bfs.Document)"><code>update(Document)</code></a> operation
 in fact simply creates a new file version.
 <p>
 <h2>Use cases</h2>
 <p>
 Use case: A REST-ful repository. Documents may be stored, updated, read,
 deleted, and searched using a full text index.
 <p>
 Use case: A map/reduce master reads document metadata using an index scan. It
 examines the data index's <a href="../../../com/bigdata/mdi/MetadataIndex.html" title="class in com.bigdata.mdi"><code>MetadataIndex</code></a> (that is, the index that
 knows where each partition of the scale-out data index is stored) and
 determines which map clients are going to be "close" to each document and
 then hands off the document to one of those map clients.
 <p>
 Use case: The same as the use case above, but large files are being processed
 and there is a requirement to "break" the files into splits and hand off the
 splits. This can be achieved by estimating the file size using a range
 count and multiplying through by the block size. Blocks may be handed off to
 the clients in parallel (of course, clients need to deal with the hassle of
 processing files where records will cross split boundaries unless they always
 pad out with unused bytes to the next <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blockSize"><code>blockSize</code></a> boundary).
 <p>
 Use case: A reduce client wants to write a very large files so it creates a
 metadata record for the file and then does a series of atomic appears to the
 file. The file may grow arbitrarily large. Clients may begin to read from the
 file as soon as the first block has been flushed.
 <p>
 Use case: Queues MAY be built from the operations to atomically read or
 delete the first block for the file version. The "design pattern" is to have
 clients append blocks to the file version, taking care that logical rows
 never cross a block boundary (e.g., by flushing partial blocks). A master
 then reads the head block from the file version, distributing the logical
 records therein to consumers and providing fail safe processing in case
 consumers die or take too long. Once all records for the head block have been
 processed the master simply deletes the head block. This "pattern" is quite
 similar to map/reduce and, like map/reduce, requires that the consumer
 operations may be safely re-run.
 <p>
 Use case: File replication, retention of deleted versions, and media indexing
 are administered by creating "zones" comprising one or more index partitions
 with a shared file identifier prefix, e.g., /tmp or /highly-available, or
 /deployment-text-index. All files in a given zone share the same policy for
 file replication, compacting merges (determining when a deleted or even a
 non-deleted file version will be discarded), and media indexing.
 <p>
 Use case: File rename is NOT a cheap operation. It essentially creates a new
 file version with the desired name and copies the data from the old file
 version to the new file version. Finally the old file version is "deleted".
 This approach is necessary since files may moved from one "zone" to another
 and since the file data must reside on the index partition(s) identified by
 its file version.
 
 FIXME write a JSON API that interoperates to the extent possible with GAE and
 HBASE.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.Options.html" title="interface in com.bigdata.bfs">BigdataFileSystem.Options</a></strong></code>
<div class="block">Configuration options.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#DEBUG">DEBUG</a></strong></code>
<div class="block">True iff the <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#log"><code>log</code></a> level is DEBUG or less.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#FILE_DATA_INDEX_BASENAME">FILE_DATA_INDEX_BASENAME</a></strong></code>
<div class="block">The basename of the index in which the file data blocks are stored.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#FILE_METADATA_INDEX_BASENAME">FILE_METADATA_INDEX_BASENAME</a></strong></code>
<div class="block">The basename of the index in which the file metadata are stored.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#INFO">INFO</a></strong></code>
<div class="block">True iff the <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#log"><code>log</code></a> level is INFO or less.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#log">log</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#MAX_BLOCK">MAX_BLOCK</a></strong></code>
<div class="block">The maximum block identifier that can be assigned to a file version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static <a href="../../../com/bigdata/bfs/FileMetadataSchema.html" title="class in com.bigdata.bfs">FileMetadataSchema</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#metadataSchema">metadataSchema</a></strong></code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.relation.AbstractResource">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.bigdata.relation.<a href="../../../com/bigdata/relation/AbstractResource.html" title="class in com.bigdata.relation">AbstractResource</a></h3>
<code><a href="../../../com/bigdata/relation/AbstractResource.html#indexManager">indexManager</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.sparse.IRowStoreConstants">
<!--   -->
</a>
<h3>Fields inherited from interface&nbsp;com.bigdata.sparse.<a href="../../../com/bigdata/sparse/IRowStoreConstants.html" title="interface in com.bigdata.sparse">IRowStoreConstants</a></h3>
<code><a href="../../../com/bigdata/sparse/IRowStoreConstants.html#AUTO_TIMESTAMP">AUTO_TIMESTAMP</a>, <a href="../../../com/bigdata/sparse/IRowStoreConstants.html#AUTO_TIMESTAMP_UNIQUE">AUTO_TIMESTAMP_UNIQUE</a>, <a href="../../../com/bigdata/sparse/IRowStoreConstants.html#CURRENT_ROW">CURRENT_ROW</a>, <a href="../../../com/bigdata/sparse/IRowStoreConstants.html#MAX_TIMESTAMP">MAX_TIMESTAMP</a>, <a href="../../../com/bigdata/sparse/IRowStoreConstants.html#MIN_TIMESTAMP">MIN_TIMESTAMP</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#BigdataFileSystem(com.bigdata.journal.IIndexManager,%20java.lang.String,%20java.lang.Long,%20java.util.Properties)">BigdataFileSystem</a></strong>(<a href="../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal">IIndexManager</a>&nbsp;indexManager,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;namespace,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;timestamp,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;properties)</code>
<div class="block">Ctor specified by <a href="../../../com/bigdata/relation/locator/DefaultResourceLocator.html" title="class in com.bigdata.relation.locator"><code>DefaultResourceLocator</code></a>.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#appendBlock(java.lang.String,%20int,%20byte[],%20int,%20int)">appendBlock</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
           int&nbsp;version,
           byte[]&nbsp;b,
           int&nbsp;off,
           int&nbsp;len)</code>
<div class="block">Atomic append of a block to a file version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected static void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#assertLong(java.util.Map,%20java.lang.String)">assertLong</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;properties,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#assertString(java.util.Map,%20java.lang.String)">assertString</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;properties,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blocks(java.lang.String,%20int)">blocks</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
      int&nbsp;version)</code>
<div class="block">Returns an iterator that visits all block identifiers for the file
 version in sequence.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#copyBlocks(java.lang.String,%20int,%20java.lang.String,%20int)">copyBlocks</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fromId,
          int&nbsp;fromVersion,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toId,
          int&nbsp;toVersion)</code>
<div class="block">Copies blocks from one file version to another.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#copyStream(java.lang.String,%20int,%20java.io.InputStream)">copyStream</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
          int&nbsp;version,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;is)</code>
<div class="block">Copies data from the input stream to the file version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#create()">create</a></strong>()</code>
<div class="block">Note: A commit is required in order for a read-committed view to have
 access to the registered indices.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#create(com.bigdata.bfs.Document)">create</a></strong>(<a href="../../../com/bigdata/bfs/Document.html" title="interface in com.bigdata.bfs">Document</a>&nbsp;doc)</code>
<div class="block">Create a new persistent document in this repository based on the metadata
 and content in the supplied document object.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#create(java.util.Map)">create</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;metadata)</code>
<div class="block">Creates a new file version from the specified metadata.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#delete(java.lang.String)">delete</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id)</code>
<div class="block">Note: A new file version is marked as deleted and then the file blocks
 for the old version are deleted from the data index.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#deleteAll(java.lang.String,%20java.lang.String)">deleteAll</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fromId,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toId)</code>
<div class="block">Efficient delete of file metadata and file data for all files and file
 versions spanned by the specified file identifiers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#deleteBlock(java.lang.String,%20int,%20long)">deleteBlock</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
           int&nbsp;version,
           long&nbsp;block)</code>
<div class="block">Atomic delete of a block for a file version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#deleteHead(java.lang.String,%20int)">deleteHead</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
          int&nbsp;version)</code>
<div class="block">Atomic delete of the first block of the file version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#destroy()">destroy</a></strong>()</code>
<div class="block">Destroy any logically contained resources (relations, indices).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/sparse/ITPV.html" title="interface in com.bigdata.sparse">ITPV</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getAllVersionInfo(java.lang.String)">getAllVersionInfo</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id)</code>
<div class="block">Return an array describing all non-eradicated versions of a file.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getBlockCount(java.lang.String,%20int)">getBlockCount</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
             int&nbsp;version)</code>
<div class="block">Return the maximum #of blocks in the file version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getBlockSize()">getBlockSize</a></strong>()</code>
<div class="block">The size of a file block.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;? extends <a href="../../../com/bigdata/bfs/DocumentHeader.html" title="interface in com.bigdata.bfs">DocumentHeader</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getDocumentHeaders(java.lang.String,%20java.lang.String)">getDocumentHeaders</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fromId,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toId)</code>
<div class="block">Return a listing of the documents and metadata about them in this
 repository.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getFileDataIndex()">getFileDataIndex</a></strong>()</code>
<div class="block">The index in which the file blocks are stored (the index must exist).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/sparse/SparseRowStore.html" title="class in com.bigdata.sparse">SparseRowStore</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getFileMetadataIndex()">getFileMetadataIndex</a></strong>()</code>
<div class="block">The index in which the file metadata is stored (the index must exist).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getOffsetBits()">getOffsetBits</a></strong>()</code>
<div class="block">The #of bits in a 64-bit long integer identifier that are used to encode
 the byte offset of a record in the store as an unsigned integer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/bfs/FileVersionInputStream.html" title="class in com.bigdata.bfs">FileVersionInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#inputStream(java.lang.String,%20int)">inputStream</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
           int&nbsp;version)</code>
<div class="block">Read data from a file version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../com/bigdata/bfs/FileVersionInputStream.html" title="class in com.bigdata.bfs">FileVersionInputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#inputStream(java.lang.String,%20int,%20long)">inputStream</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
           int&nbsp;version,
           long&nbsp;tx)</code>
<div class="block">Read data from a file version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#isReadOnly()">isReadOnly</a></strong>()</code>
<div class="block"><code>true</code> unless {<a href="../../../com/bigdata/relation/AbstractResource.html#getTimestamp()"><code>AbstractResource.getTimestamp()</code></a> is <a href="../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#outputStream(java.lang.String,%20int)">outputStream</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
            int&nbsp;version)</code>
<div class="block">Return an output stream that will <em>append</em> on the file version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/bfs/Document.html" title="interface in com.bigdata.bfs">Document</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#read(java.lang.String)">read</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id)</code>
<div class="block">Reads the document metadata for the current version of the specified
 file.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#readBlock(java.lang.String,%20int,%20long)">readBlock</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
         int&nbsp;version,
         long&nbsp;block)</code>
<div class="block">Atomic read of a block for a file version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html?is-external=true" title="class or interface in java.io">Reader</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#reader(java.lang.String,%20int,%20java.lang.String)">reader</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
      int&nbsp;version,
      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;encoding)</code>
<div class="block">Read character data from a file version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>byte[]</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#readHead(java.lang.String,%20int)">readHead</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
        int&nbsp;version)</code>
<div class="block">Atomic read of the first block of the file version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../com/bigdata/sparse/ITPS.html" title="interface in com.bigdata.sparse">ITPS</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#readMetadata(java.lang.String,%20long)">readMetadata</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
            long&nbsp;timestamp)</code>
<div class="block">Return the file metadata for the version of the file associated with the
 specified timestamp.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#search(java.lang.String)">search</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;query)</code>
<div class="block">FIXME Integrate with <a href="../../../com/bigdata/search/FullTextIndex.html" title="class in com.bigdata.search"><code>FullTextIndex</code></a> to providing indexing and
 search of file versions.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#update(com.bigdata.bfs.Document)">update</a></strong>(<a href="../../../com/bigdata/bfs/Document.html" title="interface in com.bigdata.bfs">Document</a>&nbsp;doc)</code>
<div class="block">Create a new file version using the supplied file metadata.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#updateMetadata(java.lang.String,%20java.util.Map)">updateMetadata</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;metadata)</code>
<div class="block">Update the metadata for the current file version.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#writeBlock(java.lang.String,%20int,%20long,%20byte[],%20int,%20int)">writeBlock</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
          int&nbsp;version,
          long&nbsp;block,
          byte[]&nbsp;b,
          int&nbsp;off,
          int&nbsp;len)</code>
<div class="block">Atomic write of a block for a file version.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io">Writer</a></code></td>
<td class="colLast"><code><strong><a href="../../../com/bigdata/bfs/BigdataFileSystem.html#writer(java.lang.String,%20int,%20java.lang.String)">writer</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
      int&nbsp;version,
      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;encoding)</code>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io"><code>Writer</code></a> that will <em>append</em> character data on the
 file version.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.relation.AbstractResource">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.relation.<a href="../../../com/bigdata/relation/AbstractResource.html" title="class in com.bigdata.relation">AbstractResource</a></h3>
<code><a href="../../../com/bigdata/relation/AbstractResource.html#acquireExclusiveLock()">acquireExclusiveLock</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#assertWritable()">assertWritable</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getBareProperties()">getBareProperties</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getChunkCapacity()">getChunkCapacity</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getChunkOfChunksCapacity()">getChunkOfChunksCapacity</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getChunkTimeout()">getChunkTimeout</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getCommitTime()">getCommitTime</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getContainer()">getContainer</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getContainerNamespace()">getContainerNamespace</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getExecutorService()">getExecutorService</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getFullyBufferedReadThreshold()">getFullyBufferedReadThreshold</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getIndexManager()">getIndexManager</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getMaxParallelSubqueries()">getMaxParallelSubqueries</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getNamespace()">getNamespace</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getProperties()">getProperties</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getProperty(java.lang.String,%20java.lang.String)">getProperty</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getProperty(java.lang.String,%20java.lang.String,%20com.bigdata.config.IValidator)">getProperty</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#getTimestamp()">getTimestamp</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#init()">init</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#isForceSerialExecution()">isForceSerialExecution</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#toString()">toString</a>, <a href="../../../com/bigdata/relation/AbstractResource.html#unlock(com.bigdata.journal.IResourceLock)">unlock</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>protected static final&nbsp;org.apache.log4j.Logger log</pre>
</li>
</ul>
<a name="INFO">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>INFO</h4>
<pre>protected static final&nbsp;boolean INFO</pre>
<div class="block">True iff the <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#log"><code>log</code></a> level is INFO or less.</div>
</li>
</ul>
<a name="DEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEBUG</h4>
<pre>protected static final&nbsp;boolean DEBUG</pre>
<div class="block">True iff the <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#log"><code>log</code></a> level is DEBUG or less.</div>
</li>
</ul>
<a name="MAX_BLOCK">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>MAX_BLOCK</h4>
<pre>protected static final&nbsp;long MAX_BLOCK</pre>
<div class="block">The maximum block identifier that can be assigned to a file version.
 <p>
 Note: This is limited to -1 so that we can always
 form the key greater than any valid key for a file version. This is
 required by the atomic append logic when it seeks the next block
 identifier. See <a href="../../../com/bigdata/bfs/AtomicBlockAppendProc.html" title="class in com.bigdata.bfs"><code>AtomicBlockAppendProc</code></a>.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.bfs.BigdataFileSystem.MAX_BLOCK">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FILE_METADATA_INDEX_BASENAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FILE_METADATA_INDEX_BASENAME</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> FILE_METADATA_INDEX_BASENAME</pre>
<div class="block">The basename of the index in which the file metadata are stored. The
 fully qualified name of the index uses <a href="../../../com/bigdata/relation/AbstractResource.html#getNamespace()"><code>AbstractResource.getNamespace()</code></a> as a
 prefix.
 <p>
 Note: This is a <a href="../../../com/bigdata/sparse/SparseRowStore.html" title="class in com.bigdata.sparse"><code>SparseRowStore</code></a> governed by the
 <a href="../../../com/bigdata/bfs/FileMetadataSchema.html" title="class in com.bigdata.bfs"><code>FileMetadataSchema</code></a>.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.bfs.BigdataFileSystem.FILE_METADATA_INDEX_BASENAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="FILE_DATA_INDEX_BASENAME">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>FILE_DATA_INDEX_BASENAME</h4>
<pre>public static final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a> FILE_DATA_INDEX_BASENAME</pre>
<div class="block">The basename of the index in which the file data blocks are stored. The
 fully qualified name of the index uses <a href="../../../com/bigdata/relation/AbstractResource.html#getNamespace()"><code>AbstractResource.getNamespace()</code></a> as a
 prefix.
 <p>
 Note: The entries in this index are a series of blocks for a file. Blocks
 are <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blockSize"><code>blockSize</code></a> bytes each and are assigned monotonically
 increasing block numbers by the atomic append operation. The final block
 may be smaller (there is no need to pad out the data with nulls). The
 keys are formed from two fields - a field containing the content
 identifier followed by an integer field containing the sequential block
 number. A range scan with a fromKey of the file identifier and a toKey
 computed using the successor of the file identifier will naturally visit
 all blocks in a file in sequence.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../constant-values.html#com.bigdata.bfs.BigdataFileSystem.FILE_DATA_INDEX_BASENAME">Constant Field Values</a></dd></dl>
</li>
</ul>
<a name="metadataSchema">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>metadataSchema</h4>
<pre>public static final&nbsp;<a href="../../../com/bigdata/bfs/FileMetadataSchema.html" title="class in com.bigdata.bfs">FileMetadataSchema</a> metadataSchema</pre>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="BigdataFileSystem(com.bigdata.journal.IIndexManager, java.lang.String, java.lang.Long, java.util.Properties)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>BigdataFileSystem</h4>
<pre>public&nbsp;BigdataFileSystem(<a href="../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal">IIndexManager</a>&nbsp;indexManager,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;namespace,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&nbsp;timestamp,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Properties.html?is-external=true" title="class or interface in java.util">Properties</a>&nbsp;properties)</pre>
<div class="block">Ctor specified by <a href="../../../com/bigdata/relation/locator/DefaultResourceLocator.html" title="class in com.bigdata.relation.locator"><code>DefaultResourceLocator</code></a>.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/bfs/BigdataFileSystem.Options.html" title="interface in com.bigdata.bfs"><code>BigdataFileSystem.Options</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getOffsetBits()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getOffsetBits</h4>
<pre>public final&nbsp;int&nbsp;getOffsetBits()</pre>
<div class="block">The #of bits in a 64-bit long integer identifier that are used to encode
 the byte offset of a record in the store as an unsigned integer.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/Options.html#OFFSET_BITS"><code>Options.OFFSET_BITS</code></a>, 
<a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getBlockSize()"><code>getBlockSize()</code></a></dd></dl>
</li>
</ul>
<a name="getBlockSize()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockSize</h4>
<pre>public final&nbsp;int&nbsp;getBlockSize()</pre>
<div class="block">The size of a file block. Block identifiers are 64-bit signed integers.
 The maximum file length is <code>2^63 - 1 </code> blocks ( 536,870,912
 Exabytes).
 <p>
 Note: The <a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs"><code>BigdataFileSystem</code></a> makes the <strong>assumption</strong>
 that the <a href="../../../com/bigdata/journal/Options.html#OFFSET_BITS"><code>Options.OFFSET_BITS</code></a> is the #of
 offset bits configured for the <a href="../../../com/bigdata/service/IDataService.html" title="interface in com.bigdata.service"><code>IDataService</code></a>s in the connected
 <a href="../../../com/bigdata/service/IBigdataFederation.html" title="interface in com.bigdata.service"><code>IBigdataFederation</code></a> and computes the
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getBlockSize()"><code>getBlockSize()</code></a> based on that assumption. It is
 NOT possible to write blocks on the <a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs"><code>BigdataFileSystem</code></a> whose size
 is greater than the maximum block size actually configured for the
 <a href="../../../com/bigdata/service/IDataService.html" title="interface in com.bigdata.service"><code>IDataService</code></a>s in the connected <a href="../../../com/bigdata/service/IBigdataFederation.html" title="interface in com.bigdata.service"><code>IBigdataFederation</code></a>.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/journal/Options.html#OFFSET_BITS"><code>Options.OFFSET_BITS</code></a>, 
<a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getOffsetBits()"><code>getOffsetBits()</code></a></dd></dl>
</li>
</ul>
<a name="assertString(java.util.Map, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertString</h4>
<pre>protected static&nbsp;void&nbsp;assertString(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;properties,
                <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
</li>
</ul>
<a name="assertLong(java.util.Map, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>assertLong</h4>
<pre>protected static&nbsp;void&nbsp;assertLong(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;properties,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;name)</pre>
</li>
</ul>
<a name="getFileMetadataIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFileMetadataIndex</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/sparse/SparseRowStore.html" title="class in com.bigdata.sparse">SparseRowStore</a>&nbsp;getFileMetadataIndex()</pre>
<div class="block">The index in which the file metadata is stored (the index must exist).</div>
</li>
</ul>
<a name="getFileDataIndex()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getFileDataIndex</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/btree/IIndex.html" title="interface in com.bigdata.btree">IIndex</a>&nbsp;getFileDataIndex()</pre>
<div class="block">The index in which the file blocks are stored (the index must exist).</div>
</li>
</ul>
<a name="isReadOnly()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isReadOnly</h4>
<pre>public&nbsp;boolean&nbsp;isReadOnly()</pre>
<div class="block"><code>true</code> unless {<a href="../../../com/bigdata/relation/AbstractResource.html#getTimestamp()"><code>AbstractResource.getTimestamp()</code></a> is <a href="../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a>.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/relation/AbstractResource.html#isReadOnly()">isReadOnly</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/relation/AbstractResource.html" title="class in com.bigdata.relation">AbstractResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;</code></dd>
</dl>
</li>
</ul>
<a name="create()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;void&nbsp;create()</pre>
<div class="block">Note: A commit is required in order for a read-committed view to have
 access to the registered indices. When running against an
 <a href="../../../com/bigdata/service/IBigdataFederation.html" title="interface in com.bigdata.service"><code>IBigdataFederation</code></a>, <a href="../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a> operations will take
 care of this for you. Otherwise you must do this yourself.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/relation/IMutableResource.html#create()">create</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/relation/IMutableResource.html" title="interface in com.bigdata.relation">IMutableResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/relation/AbstractResource.html#create()">create</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/relation/AbstractResource.html" title="class in com.bigdata.relation">AbstractResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;</code></dd>
</dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/relation/IMutableResource.html#destroy()">IMutableResource</a></code></strong></div>
<div class="block">Destroy any logically contained resources (relations, indices).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/relation/IMutableResource.html#destroy()">destroy</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/relation/IMutableResource.html" title="interface in com.bigdata.relation">IMutableResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;</code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../com/bigdata/relation/AbstractResource.html#destroy()">destroy</a></code>&nbsp;in class&nbsp;<code><a href="../../../com/bigdata/relation/AbstractResource.html" title="class in com.bigdata.relation">AbstractResource</a>&lt;<a href="../../../com/bigdata/relation/IDatabase.html" title="interface in com.bigdata.relation">IDatabase</a>&lt;<a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs">BigdataFileSystem</a>&gt;&gt;</code></dd>
</dl>
</li>
</ul>
<a name="create(java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;int&nbsp;create(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;metadata)</pre>
<div class="block">Creates a new file version from the specified metadata. The new file
 version will not have any blocks. You can use either stream-oriented or
 block oriented IO to write data on the newly created file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>metadata</code> - The file metadata.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The new version identifier.</dd></dl>
</li>
</ul>
<a name="create(com.bigdata.bfs.Document)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>create</h4>
<pre>public&nbsp;int&nbsp;create(<a href="../../../com/bigdata/bfs/Document.html" title="interface in com.bigdata.bfs">Document</a>&nbsp;doc)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html#create(com.bigdata.bfs.Document)">IContentRepository</a></code></strong></div>
<div class="block">Create a new persistent document in this repository based on the metadata
 and content in the supplied document object.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/bfs/IContentRepository.html#create(com.bigdata.bfs.Document)">create</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>doc</code> - an object containing the content and metadata to persist</dd>
<dt><span class="strong">Returns:</span></dt><dd>The new version.</dd></dl>
</li>
</ul>
<a name="read(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>read</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/bfs/Document.html" title="interface in com.bigdata.bfs">Document</a>&nbsp;read(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id)</pre>
<div class="block">Reads the document metadata for the current version of the specified
 file.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/bfs/IContentRepository.html#read(java.lang.String)">read</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A read-only view of the file version that is capable of reading
         the content from the repository -or- <code>null</code> iff
         there is no current version for that file identifier.</dd></dl>
</li>
</ul>
<a name="readMetadata(java.lang.String, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readMetadata</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/sparse/ITPS.html" title="interface in com.bigdata.sparse">ITPS</a>&nbsp;readMetadata(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                long&nbsp;timestamp)</pre>
<div class="block">Return the file metadata for the version of the file associated with the
 specified timestamp.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>timestamp</code> - The timestamp.</dd>
<dt><span class="strong">Returns:</span></dt><dd>A read-only view of the logical row of metadata for that file as
         of that timestamp.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../com/bigdata/sparse/ITPS.html" title="interface in com.bigdata.sparse"><code>ITPS</code></a>, 
<code>SparseRowStore#read(Schema, Object, long, com.bigdata.sparse.INameFilter)</code></dd></dl>
</li>
</ul>
<a name="updateMetadata(java.lang.String, java.util.Map)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateMetadata</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;updateMetadata(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                                <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>&gt;&nbsp;metadata)</pre>
<div class="block">Update the metadata for the current file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>metadata</code> - The properties to be written. A <code>null</code> value for
            a property will cause the corresponding property to be
            deleted. Properties not present in this map will NOT be
            modified.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The complete metadata for the current file version.</dd></dl>
</li>
</ul>
<a name="update(com.bigdata.bfs.Document)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>update</h4>
<pre>public&nbsp;int&nbsp;update(<a href="../../../com/bigdata/bfs/Document.html" title="interface in com.bigdata.bfs">Document</a>&nbsp;doc)</pre>
<div class="block">Create a new file version using the supplied file metadata.
 <p>
 Note: This is essentially a delete + create operation. Since the combined
 operation is NOT atomic it is possible that conflicts can arise when more
 than one client attempts to update a file concurrently.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/bfs/IContentRepository.html#update(com.bigdata.bfs.Document)">update</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>doc</code> - The file metadata.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The new version.</dd></dl>
</li>
</ul>
<a name="delete(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>delete</h4>
<pre>public&nbsp;long&nbsp;delete(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id)</pre>
<div class="block">Note: A new file version is marked as deleted and then the file blocks
 for the old version are deleted from the data index. This sequence means
 (a) that clients attempting to read on the file using the high level API
 will not see the file as soon as its metadata is updated; (b) that the
 timestamp on the deleted version will be strictly LESS THAN the commit
 time(s) when the file blocks are deleted, so reading from the timestamp
 of the deleted version will let you see the deleted file blocks. This is
 a deliberate convenience - if we were to delete the file blocks first
 then we would not have ready access to a timestamp that would be before
 the first file block delete and hence sufficient to perform a historical
 read on the last state of the file before it was deleted.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/bfs/IContentRepository.html#delete(java.lang.String)">delete</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - the identifier of the document to delete</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of blocks that were deleted for that file.</dd></dl>
</li>
</ul>
<a name="getAllVersionInfo(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllVersionInfo</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/sparse/ITPV.html" title="interface in com.bigdata.sparse">ITPV</a>[]&nbsp;getAllVersionInfo(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id)</pre>
<div class="block">Return an array describing all non-eradicated versions of a file.
 <p>
 This method returns all known version identifiers together with their
 timestamps, thereby making it possible to read either the metadata or the
 data for historical file versions - as long as the metadata and/or data
 has not yet been eradicated.
 <p>
 The file metadata and data blocks for historical version(s) of a file
 remain available until they are eradicated from their respective indices
 by a compacting merge in which the history policies no longer perserve
 those data.
 <p>
 In order to read the historical file metadata you need to know the
 timestamp associated with the version identifer which you wish to read.
 This should be timestamp when that version was <em>deleted</em> MINUS
 ONE in order to read the last valid metadata for the file version that
 file version was deleted.
 <p>
 Likewise, in order to read the historical version data you need to know
 the version identifer which you wish to read as well as the timestamp.
 In this case, use the timestamp when that version was <em>deleted</em>
 in order to read the last committed state for the file version.
 <p>
 Historical file version metadata is eradicated atomically since the
 entire logical row will be hosted on the same index partition. Either the
 file version metadata is available or it is now.
 <p>
 Historical file version data is eradicated one index partition at a time.
 If the file version spans more than one index partition then it may be
 possible to read some blocks from the file but not others.
 <p>
 Historical file version metadata and data will remain available until
 their governing history policy is no longer satisified. Therefore, when
 in doubt, you can consult the history policy in force for the file to
 determine whether or not its data may have been eradicated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An array containing (timestamp,version) tuples. Tuples where the
         <a href="../../../com/bigdata/sparse/ITPV.html#getValue()"><code>ITPV.getValue()</code></a> returns <code>null</code> give the
         timestamp at which a file version was <em>deleted</em>. Tuples
         where the <a href="../../../com/bigdata/sparse/ITPV.html#getValue()"><code>ITPV.getValue()</code></a> returns non-<code>null</code>
         give the timestamp at which a file version was <em>created</em>.</dd><dt><span class="strong">See Also:</span></dt><dd><code>#readMetadata(String, long), to read the file version metadata based
      on a timestamp.</code>, 
<code>#inputStream(String, int, long), to read the file data as of a
      specific timestamp.</code></dd></dl>
</li>
</ul>
<a name="getDocumentHeaders(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDocumentHeaders</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;? extends <a href="../../../com/bigdata/bfs/DocumentHeader.html" title="interface in com.bigdata.bfs">DocumentHeader</a>&gt;&nbsp;getDocumentHeaders(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fromId,
                                                    <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toId)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html#getDocumentHeaders(java.lang.String,%20java.lang.String)">IContentRepository</a></code></strong></div>
<div class="block">Return a listing of the documents and metadata about them in this
 repository.
 <p>
 Note: If you assign identifiers using a namespace then you can use this
 method to efficiently visit all documents within that namespace.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/bfs/IContentRepository.html#getDocumentHeaders(java.lang.String,%20java.lang.String)">getDocumentHeaders</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromId</code> - The identifier of the first document to be visited or
            <code>null</code> if there is no lower bound.</dd><dd><code>toId</code> - The identifier of the first document that will NOT be visited
            or <code>null</code> if there is no upper bound.</dd>
<dt><span class="strong">Returns:</span></dt><dd>an iterator of <a href="../../../com/bigdata/bfs/DocumentHeader.html" title="interface in com.bigdata.bfs"><code>DocumentHeader</code></a>s.</dd></dl>
</li>
</ul>
<a name="deleteAll(java.lang.String, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteAll</h4>
<pre>public&nbsp;long&nbsp;deleteAll(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fromId,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toId)</pre>
<div class="block">Efficient delete of file metadata and file data for all files and file
 versions spanned by the specified file identifiers.  File versions are
 marked "deleted" before the file blocks are deleted so that you can
 read on historical file version with exactly the same semantics as
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#delete(java.lang.String)"><code>delete(String)</code></a>.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/bfs/IContentRepository.html#deleteAll(java.lang.String,%20java.lang.String)">deleteAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>fromId</code> - The identifier of the first document to be deleted or
            <code>null</code> if there is no lower bound.</dd><dd><code>toId</code> - The identifier of the first document that will NOT be deleted
            or <code>null</code> if there is no upper bound.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of files that were deleted.</dd></dl>
</li>
</ul>
<a name="search(java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>search</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&gt;&nbsp;search(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;query)</pre>
<div class="block">FIXME Integrate with <a href="../../../com/bigdata/search/FullTextIndex.html" title="class in com.bigdata.search"><code>FullTextIndex</code></a> to providing indexing and
 search of file versions. Deleted file versions should be removed from the
 text index. There should be explicit metadata on the file version in
 order for it to be indexed. The text indexer will require content type
 and encoding information in order to handle indexing. Low-level output
 stream, writer, block write and block append operations will not trigger
 the indexer since it depends on the metadata index to know whether or not
 a file version should be indexed. However you could explicitly submit a
 file version for indexing.
 <p>
 Perhaps the best way to handle this is to queue document metadata up for
 a distributed full text indexing service. The service accepts metadata
 for documents from the queue and decides whether or not the document
 should be indexed based on its metadata and how the document should be
 processed if it is to be indexed. Those business rules would be
 registered with the full text indexing service. (Alternatively, they can
 be configured with the <a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs"><code>BigdataFileSystem</code></a> and applied locally as
 the blocks of the file are written into the repository. That's certainly
 easier right off the bat.)</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../com/bigdata/bfs/IContentRepository.html#search(java.lang.String)">search</a></code>&nbsp;in interface&nbsp;<code><a href="../../../com/bigdata/bfs/IContentRepository.html" title="interface in com.bigdata.bfs">IContentRepository</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>query</code> - A query.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An iterator visiting the identifiers of the documents in order of
         decreasing relevance to the query.</dd></dl>
</li>
</ul>
<a name="blocks(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>blocks</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Iterator.html?is-external=true" title="class or interface in java.util">Iterator</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true" title="class or interface in java.lang">Long</a>&gt;&nbsp;blocks(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                    int&nbsp;version)</pre>
<div class="block">Returns an iterator that visits all block identifiers for the file
 version in sequence.
 <p>
 Note: This may be used to efficiently distribute blocks among a
 population of clients, e.g., in a map/reduce paradigm.</div>
</li>
</ul>
<a name="copyBlocks(java.lang.String, int, java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>copyBlocks</h4>
<pre>public&nbsp;long&nbsp;copyBlocks(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;fromId,
              int&nbsp;fromVersion,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toId,
              int&nbsp;toVersion)</pre>
<div class="block">Copies blocks from one file version to another. The data in each block of
 the source file version is copied into a new block that is appended to
 the target file version. Empty blocks are copied. Partial blocks are NOT
 combined. The block identifiers are NOT preserved since atomic append is
 used to add blocks to the target file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fromId</code> - </dd><dd><code>fromVersion</code> - </dd><dd><code>toId</code> - </dd><dd><code>toVersion</code> - </dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of blocks copied.
 
 FIXME This could be made more efficient by sending the copy operation to
 each index partition in turn. that would avoid having to copy the data
 first to the client and thence to the target index partition.</dd></dl>
</li>
</ul>
<a name="writeBlock(java.lang.String, int, long, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writeBlock</h4>
<pre>public&nbsp;boolean&nbsp;writeBlock(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                 int&nbsp;version,
                 long&nbsp;block,
                 byte[]&nbsp;b,
                 int&nbsp;off,
                 int&nbsp;len)</pre>
<div class="block">Atomic write of a block for a file version.
 <p>
 Note: You can write any valid block identifier at any time. If the block
 exists then its data will be replaced.
 <p>
 Note: Writing blocks out of sequence can create "holes". Those holes may
 be filled by later writing the "missing" blocks.
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#copyBlocks(java.lang.String,%20int,%20java.lang.String,%20int)"><code>copyBlocks(String, int, String, int)</code></a> will renumber the blocks
 and produce a dense sequence of blocks.
 <p>
 Note: Atomic append will always write the successor of the largest block
 identifier already written on the file version. If you write block
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#MAX_BLOCK"><code>MAX_BLOCK</code></a> then it will no longer be possible to append blocks to
 that file version, but you can still write blocks using
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#writeBlock(java.lang.String,%20int,%20long,%20byte[],%20int,%20int)"><code>writeBlock(String, int, long, byte[], int, int)</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The file version.</dd><dd><code>block</code> - The block identifier in [0:<a href="../../../com/bigdata/bfs/BigdataFileSystem.html#MAX_BLOCK"><code>MAX_BLOCK</code></a>].</dd><dd><code>b</code> - The buffer containing the bytes to be written. When the buffer
            contains more than <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blockSize"><code>blockSize</code></a> bytes it will be broken
            up into multiple blocks.</dd><dd><code>off</code> - The offset of the 1st byte to be written.</dd><dd><code>len</code> - The #of bytes to be written.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the block was overwritten (ie., if the
         block already exists, which case its contents were replaced).</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>id</id> is <code>null</code> or an empty string.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>version</id> is negative.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>block</id> is negative.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>b</id> is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>off</id> is negative or greater than the length of the
             byte[].</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>len</id> is negative or <i>off+len</i> is greater
             than the length of the byte[].</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>len</i> is greater than <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blockSize"><code>blockSize</code></a>.</dd></dl>
</li>
</ul>
<a name="deleteHead(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteHead</h4>
<pre>public&nbsp;long&nbsp;deleteHead(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
              int&nbsp;version)</pre>
<div class="block">Atomic delete of the first block of the file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The block identifier of the deleted block -or- <code>-1L</code>
         if nothing was deleted.</dd></dl>
</li>
</ul>
<a name="deleteBlock(java.lang.String, int, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteBlock</h4>
<pre>public&nbsp;boolean&nbsp;deleteBlock(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                  int&nbsp;version,
                  long&nbsp;block)</pre>
<div class="block">Atomic delete of a block for a file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd><dd><code>block</code> - The block identifier -or- <code>-1L</code> to read the first
            block in the file version regardless of its block identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff the block was deleted.</dd></dl>
</li>
</ul>
<a name="readHead(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readHead</h4>
<pre>public&nbsp;byte[]&nbsp;readHead(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
              int&nbsp;version)</pre>
<div class="block">Atomic read of the first block of the file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The contents of the block -or- <code>null</code> iff there are
         no blocks for that file version. Note that an empty block will
         return an empty byte[] rather than <code>null</code>.</dd></dl>
</li>
</ul>
<a name="readBlock(java.lang.String, int, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>readBlock</h4>
<pre>public&nbsp;byte[]&nbsp;readBlock(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
               int&nbsp;version,
               long&nbsp;block)</pre>
<div class="block">Atomic read of a block for a file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd><dd><code>block</code> - The block identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The contents of the block -or- <code>null</code> iff the block
         does not exist. Note that an empty block will return an empty
         byte[] rather than <code>null</code>.</dd></dl>
</li>
</ul>
<a name="appendBlock(java.lang.String, int, byte[], int, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>appendBlock</h4>
<pre>public&nbsp;long&nbsp;appendBlock(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
               int&nbsp;version,
               byte[]&nbsp;b,
               int&nbsp;off,
               int&nbsp;len)</pre>
<div class="block">Atomic append of a block to a file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The file version.</dd><dd><code>b</code> - The buffer containing the data to be written..</dd><dd><code>off</code> - The offset of the 1st byte to be written.</dd><dd><code>len</code> - The #of bytes to be written in [0:<a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blockSize"><code>blockSize</code></a>].</dd>
<dt><span class="strong">Returns:</span></dt><dd>The block identifer for the written block.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>id</id> is <code>null</code> or an empty string.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>version</id> is negative.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>b</id> is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>off</id> is negative or greater than the length of the
             byte[].</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>len</id> is negative or <i>off+len</i> is greater
             than the length of the byte[].</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if <i>len</i> is greater than <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blockSize"><code>blockSize</code></a>.</dd></dl>
</li>
</ul>
<a name="getBlockCount(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getBlockCount</h4>
<pre>public&nbsp;long&nbsp;getBlockCount(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                 int&nbsp;version)</pre>
<div class="block">Return the maximum #of blocks in the file version. The return value
 includes any deleted but not yet eradicated blocks for the specified file
 version, so it represents an upper bound on the #of blocks that could be
 read for that file version.
 <p>
 Note: the block count only decreases when a compacting merge eradicates
 deleted blocks from an index partition. It will increase any time there
 is a write on a block for the file version for which neither a delete nor
 an undeleted entry exists. The only way to count the #of non-deleted
 blocks for a file version is to traverse the <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#blocks(java.lang.String,%20int)"><code>blocks(String, int)</code></a>
 iterator.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The file version identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of blocks in that file.</dd></dl>
</li>
</ul>
<a name="writer(java.lang.String, int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>writer</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io">Writer</a>&nbsp;writer(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
            int&nbsp;version,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;encoding)
              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/UnsupportedEncodingException.html?is-external=true" title="class or interface in java.io">UnsupportedEncodingException</a></pre>
<div class="block">Return a <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io"><code>Writer</code></a> that will <em>append</em> character data on the
 file version. Characters written on the <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true" title="class or interface in java.io"><code>Writer</code></a> will be converted
 to bytes using the specified encoding. Bytes will be buffered until the
 block is full and then written on the file version using an atomic
 append. An <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true#flush()" title="class or interface in java.io"><code>Writer.flush()</code></a> will force a non-empty partial block to
 be written immediately.
 <p>
 Note: Map/Reduce processing of a file version MAY be facilitated greatly
 by ensuring that "records" never cross a block boundary - this means that
 file versions can be split into blocks and blocks distributed to clients
 without any regard for the record structure within those blocks. The
 caller can prevent records from crossing block boundaries by the simple
 expediency of invoking <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true#flush()" title="class or interface in java.io"><code>Writer.flush()</code></a> to force the atomic append
 of a (partial but non-empty) block to the file.
 <p>
 Since the characters are being converted to bytes, the caller MUST make
 <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Writer.html?is-external=true#flush()" title="class or interface in java.io"><code>Writer.flush()</code></a> decisions with an awareness of the expansion rate
 of the specified encoding. For simplicity, it is easy to specify
 <code>UTF-16</code> in which case you can simply count two bytes
 written for each character written.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd><dd><code>encoding</code> - The character set encoding.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The writer on which to write the character data.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/UnsupportedEncodingException.html?is-external=true" title="class or interface in java.io">UnsupportedEncodingException</a></code></dd></dl>
</li>
</ul>
<a name="reader(java.lang.String, int, java.lang.String)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>reader</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/Reader.html?is-external=true" title="class or interface in java.io">Reader</a>&nbsp;reader(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
            int&nbsp;version,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;encoding)
              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/UnsupportedEncodingException.html?is-external=true" title="class or interface in java.io">UnsupportedEncodingException</a></pre>
<div class="block">Read character data from a file version.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd><dd><code>encoding</code> - The character set encoding.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The reader from which you can read the character data.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/UnsupportedEncodingException.html?is-external=true" title="class or interface in java.io">UnsupportedEncodingException</a></code></dd></dl>
</li>
</ul>
<a name="inputStream(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputStream</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/bfs/FileVersionInputStream.html" title="class in com.bigdata.bfs">FileVersionInputStream</a>&nbsp;inputStream(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                                 int&nbsp;version)</pre>
<div class="block">Read data from a file version.
 <p>
 Note: The input stream will remain coherent for the file version as of
 the time that the view on the file version is formed. Additional atomic
 appends MAY be read, but that is NOT guarenteed. If the file is deleted
 and its data is expunged by a compacting merge during the read then the
 read MAY be truncated.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An input stream from which the caller may read the data in the
         file -or- <code>null</code> if there is no data for that file
         version, including no deleted blocks pending garbage collection.
         An empty input stream MAY be returned since empty blocks are
         allowed. An empty stream will also be returned after a file
         version is deleted until the deleted blocks are eradicated from
         the file data index.</dd></dl>
</li>
</ul>
<a name="inputStream(java.lang.String, int, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>inputStream</h4>
<pre>public&nbsp;<a href="../../../com/bigdata/bfs/FileVersionInputStream.html" title="class in com.bigdata.bfs">FileVersionInputStream</a>&nbsp;inputStream(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                                 int&nbsp;version,
                                 long&nbsp;tx)</pre>
<div class="block">Read data from a file version.
 <p>
 Some points about consistency and transaction identifiers.
 <ol>
 
 <li> When using an <a href="../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a> read addition atomic writes and
 atomic appends issued after the input stream view was formed MAY be read,
 but that is NOT guarenteed - it depends on the buffering of the range
 iterator used to read blocks for the file version. Likewise, if the file
 is deleted and its data is expunged by a compacting merge during the read
 then the read MAY be truncated. </li>
 
 <li> It is possible to re-create historical states of a file version
 corresponding to a <em>commit point</em> for the
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html#getFileDataIndex()"><code>data index</code></a> provided that the relevant data has
 not been eradicated by a compacting merge. It is not possible to recover
 all states - merely committed states - since unisolated writes may be
 grouped together by group commit and therefore have the same commit
 point. </li>
 
 <li> It is possible to issue transactional read requests, but you must
 first open a transaction with an <code>ITransactionManagerService</code>. In general
 the use of full transactions is discouraged as the
 <a href="../../../com/bigdata/bfs/BigdataFileSystem.html" title="class in com.bigdata.bfs"><code>BigdataFileSystem</code></a> is designed for high throughput and high
 concurrency with weaker isolation levels suitable for scale-out
 processing techniques including map/reduce.</li>
 
 </ol></div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd><dd><code>tx</code> - The transaction identifier. This is generally either
            <a href="../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a> to use an unisolated read -or-
            <code>- timestamp</code> to use a historical read for the
            most recent consistent state of the file data not later than
            <i>timestamp</i>.</dd>
<dt><span class="strong">Returns:</span></dt><dd>An input stream from which the caller may read the data in the
         file -or- <code>null</code> if there is no data for that file
         version, including no deleted blocks pending garbage collection.
         An empty input stream MAY be returned since empty blocks are
         allowed. An empty stream will also be returned after a file
         version is deleted until the deleted blocks are eradicated from
         the file data index.</dd></dl>
</li>
</ul>
<a name="outputStream(java.lang.String, int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>outputStream</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true" title="class or interface in java.io">OutputStream</a>&nbsp;outputStream(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
                        int&nbsp;version)</pre>
<div class="block">Return an output stream that will <em>append</em> on the file version.
 Bytes written on the output stream will be buffered until they are full
 blocks and then written on the file version using an atomic append. An
 <a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true#flush()" title="class or interface in java.io"><code>OutputStream.flush()</code></a> will force a non-empty partial block to be
 written immediately.
 <p>
 Note: Map/Reduce processing of a file version MAY be facilitated greatly
 by ensuring that "records" never cross a block boundary - this means that
 files can be split into blocks and blocks distributed to clients without
 any regard for the record structure within those blocks. The caller can
 prevent records from crossing block boundaries by the simple expediency
 of invoking <a href="http://docs.oracle.com/javase/7/docs/api/java/io/OutputStream.html?is-external=true#flush()" title="class or interface in java.io"><code>OutputStream.flush()</code></a> to force the atomic append of a
 (partial but non-empty) block to the file.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The output stream.</dd></dl>
</li>
</ul>
<a name="copyStream(java.lang.String, int, java.io.InputStream)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>copyStream</h4>
<pre>public&nbsp;long&nbsp;copyStream(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;id,
              int&nbsp;version,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;is)</pre>
<div class="block">Copies data from the input stream to the file version. The data is
 buffered into blocks. Each block is written on the file version using an
 atomic append. Writing an empty stream will cause an empty block to be
 appended (this ensures that read back will read an empty stream).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>id</code> - The file identifier.</dd><dd><code>version</code> - The version identifier.</dd><dd><code>is</code> - The input stream (closed iff it is fully consumed).</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of bytes copied.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/BigdataFileSystem.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../index-all.html">Index</a></li>
<li><a href="../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../com/bigdata/bfs/AtomicBlockWriteProc.html" title="class in com.bigdata.bfs"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../com/bigdata/bfs/BigdataFileSystem.Options.html" title="interface in com.bigdata.bfs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../index.html?com/bigdata/bfs/BigdataFileSystem.html" target="_top">Frames</a></li>
<li><a href="BigdataFileSystem.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
