<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Thu Feb 25 05:02:45 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>FederatedRunningQuery (Blazegraph Database Platform 2.0.1 API)</title>
<meta name="date" content="2016-02-25">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="FederatedRunningQuery (Blazegraph Database Platform 2.0.1 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FederatedRunningQuery.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/bop/fed/FederatedQueryEngineCounters.html" title="class in com.bigdata.bop.fed"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/bop/fed/FederationChunkHandler.html" title="class in com.bigdata.bop.fed"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/bop/fed/FederatedRunningQuery.html" target="_top">Frames</a></li>
<li><a href="FederatedRunningQuery.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.bop.fed</div>
<h2 title="Class FederatedRunningQuery" class="title">Class FederatedRunningQuery</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">com.bigdata.bop.engine.AbstractRunningQuery</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html" title="class in com.bigdata.bop.engine">com.bigdata.bop.engine.ChunkedRunningQuery</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.bop.fed.FederatedRunningQuery</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/bigdata/bop/engine/IRunningQuery.html" title="interface in com.bigdata.bop.engine">IRunningQuery</a>, <a href="../../../../com/bigdata/bop/IQueryContext.html" title="interface in com.bigdata.bop">IQueryContext</a>, <a href="../../../../com/bigdata/util/concurrent/IHaltable.html" title="interface in com.bigdata.util.concurrent">IHaltable</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">FederatedRunningQuery</span>
extends <a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html" title="class in com.bigdata.bop.engine">ChunkedRunningQuery</a></pre>
<div class="block">Extends <a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html" title="class in com.bigdata.bop.engine"><code>ChunkedRunningQuery</code></a> to provide additional state and logic required
 to support distributed query evaluation against an <a href="../../../../com/bigdata/service/IBigdataFederation.html" title="interface in com.bigdata.service"><code>IBigdataFederation</code></a>
 .</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id: FederatedRunningQuery.java 3511 2010-09-06 20:45:37Z
          thompsonbry $</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.bigdata.bop.engine.<a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></h3>
<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_DUPLICATE_IDENTIFIER">ERR_DUPLICATE_IDENTIFIER</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_NO_SUCH_BOP">ERR_NO_SUCH_BOP</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_NOT_CONTROLLER">ERR_NOT_CONTROLLER</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_NOT_PIPELINE_START">ERR_NOT_PIPELINE_START</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_QUERY_DONE">ERR_QUERY_DONE</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#lock">lock</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#FederatedRunningQuery(com.bigdata.bop.fed.FederatedQueryEngine,%20java.util.UUID,%20boolean,%20com.bigdata.bop.engine.IQueryClient,%20java.util.UUID,%20com.bigdata.bop.PipelineOp,%20com.bigdata.bop.engine.IChunkMessage)">FederatedRunningQuery</a></strong>(<a href="../../../../com/bigdata/bop/fed/FederatedQueryEngine.html" title="class in com.bigdata.bop.fed">FederatedQueryEngine</a>&nbsp;queryEngine,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;queryId,
                     boolean&nbsp;controller,
                     <a href="../../../../com/bigdata/bop/engine/IQueryClient.html" title="interface in com.bigdata.bop.engine">IQueryClient</a>&nbsp;clientProxy,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;queryControllerId,
                     <a href="../../../../com/bigdata/bop/PipelineOp.html" title="class in com.bigdata.bop">PipelineOp</a>&nbsp;query,
                     <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;realSource)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#acceptChunk(com.bigdata.bop.engine.IChunkMessage)">acceptChunk</a></strong>(<a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;msg)</code>
<div class="block">Overridden to make this visible to the <a href="../../../../com/bigdata/bop/fed/FederatedQueryEngine.html" title="class in com.bigdata.bop.fed"><code>FederatedQueryEngine</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#cancelQueryOnPeers(java.lang.Throwable,%20java.util.Set)">cancelQueryOnPeers</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;cause,
                  <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&gt;&nbsp;startedOn)</code>
<div class="block">Overridden to notify each peer on which the query was started.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#doLastPass(int,%20java.util.Set)">doLastPass</a></strong>(int&nbsp;bopId,
          <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&nbsp;doneOn)</code>
<div class="block">Overridden to broadcast to all nodes and/or shards on which the operator
 has run in scale-out.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/io/DirectBufferPoolAllocator.IAllocationContext.html" title="interface in com.bigdata.io">DirectBufferPoolAllocator.IAllocationContext</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#getAllocationContext(com.bigdata.bop.fed.AllocationContextKey)">getAllocationContext</a></strong>(<a href="../../../../com/bigdata/bop/fed/AllocationContextKey.html" title="class in com.bigdata.bop.fed">AllocationContextKey</a>&nbsp;key)</code>
<div class="block">Return the <a href="../../../../com/bigdata/io/DirectBufferPoolAllocator.IAllocationContext.html" title="interface in com.bigdata.io"><code>DirectBufferPoolAllocator.IAllocationContext</code></a> for the given key.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../com/bigdata/bop/engine/IChunkHandler.html" title="interface in com.bigdata.bop.engine">IChunkHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#getChunkHandler()">getChunkHandler</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/bop/fed/FederatedQueryEngine.html" title="class in com.bigdata.bop.fed">FederatedQueryEngine</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#getQueryEngine()">getQueryEngine</a></strong>()</code>
<div class="block">The query engine class executing the query on this node.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/bop/engine/IQueryPeer.html" title="interface in com.bigdata.bop.engine">IQueryPeer</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#getQueryPeer(java.util.UUID)">getQueryPeer</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceUUID)</code>
<div class="block">Resolve the proxy for an <a href="../../../../com/bigdata/bop/engine/IQueryPeer.html" title="interface in com.bigdata.bop.engine"><code>IQueryPeer</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#releaseNativeMemoryForOperator(int)">releaseNativeMemoryForOperator</a></strong>(int&nbsp;bopId)</code>
<div class="block">Extended to release all allocations associated with the specified
 operator.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html#releaseNativeMemoryForQuery()">releaseNativeMemoryForQuery</a></strong>()</code>
<div class="block">Extended to release all <a href="../../../../com/bigdata/io/DirectBufferPoolAllocator.IAllocationContext.html" title="interface in com.bigdata.io"><code>DirectBufferPoolAllocator.IAllocationContext</code></a>s associated with the
 query when it terminates.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.bop.engine.ChunkedRunningQuery">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.bop.engine.<a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html" title="class in com.bigdata.bop.engine">ChunkedRunningQuery</a></h3>
<code><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#cancelRunningOperators(boolean)">cancelRunningOperators</a>, <a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#consumeChunk()">consumeChunk</a>, <a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#getQueueStats()">getQueueStats</a>, <a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#haltOp(com.bigdata.bop.engine.IHaltOpMessage)">haltOp</a>, <a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#releaseAcceptedMessages()">releaseAcceptedMessages</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.bop.engine.<a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></h3>
<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#addChild(com.bigdata.bop.engine.IRunningQuery)">addChild</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#cancel(boolean)">cancel</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#checkDeadline()">checkDeadline</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#get()">get</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#get(long,%20java.util.concurrent.TimeUnit)">get</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getAsThrownCause()">getAsThrownCause</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getAttributes()">getAttributes</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getBOp(int)">getBOp</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getBOpIndex()">getBOpIndex</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getCause()">getCause</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getChildren()">getChildren</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getDeadline()">getDeadline</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getDoneTime()">getDoneTime</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getElapsed()">getElapsed</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getFederation()">getFederation</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getFuture()">getFuture</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getLocalIndexManager()">getLocalIndexManager</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getMemoryManager()">getMemoryManager</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQuery()">getQuery</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryBuffer()">getQueryBuffer</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryController()">getQueryController</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryId()">getQueryId</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getRunningCount(int)">getRunningCount</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getRunState(int)">getRunState</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStartedOnCount(int)">getStartedOnCount</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStartTime()">getStartTime</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStaticAnalysisStats()">getStaticAnalysisStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStats()">getStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStats(java.lang.Integer)">getStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#halt(T)">halt</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#halt(java.lang.Void)">halt</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isAtOnceReady(int)">isAtOnceReady</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isCancelled()">isCancelled</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isController()">isController</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isDone()">isDone</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isRootCauseInterrupt(java.lang.Throwable)">isRootCauseInterrupt</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#iterator()">iterator</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#newQueryBuffer(com.bigdata.bop.PipelineOp,%20com.bigdata.bop.engine.BOpStats)">newQueryBuffer</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#runStateString()">runStateString</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#setDeadline(long)">setDeadline</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#setStaticAnalysisStats(com.bigdata.bop.engine.StaticAnalysisStats)">setStaticAnalysisStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#startOp(com.bigdata.bop.engine.IStartOpMessage)">startOp</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#startQuery(com.bigdata.bop.engine.IChunkMessage)">startQuery</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#toString()">toString</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#tryGetRunState(int)">tryGetRunState</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="FederatedRunningQuery(com.bigdata.bop.fed.FederatedQueryEngine, java.util.UUID, boolean, com.bigdata.bop.engine.IQueryClient, java.util.UUID, com.bigdata.bop.PipelineOp, com.bigdata.bop.engine.IChunkMessage)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>FederatedRunningQuery</h4>
<pre>public&nbsp;FederatedRunningQuery(<a href="../../../../com/bigdata/bop/fed/FederatedQueryEngine.html" title="class in com.bigdata.bop.fed">FederatedQueryEngine</a>&nbsp;queryEngine,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;queryId,
                     boolean&nbsp;controller,
                     <a href="../../../../com/bigdata/bop/engine/IQueryClient.html" title="interface in com.bigdata.bop.engine">IQueryClient</a>&nbsp;clientProxy,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;queryControllerId,
                     <a href="../../../../com/bigdata/bop/PipelineOp.html" title="class in com.bigdata.bop">PipelineOp</a>&nbsp;query,
                     <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;realSource)</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="releaseNativeMemoryForOperator(int)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseNativeMemoryForOperator</h4>
<pre>protected&nbsp;void&nbsp;releaseNativeMemoryForOperator(int&nbsp;bopId)</pre>
<div class="block">Extended to release all allocations associated with the specified
 operator.
 <p>
 Release native memory associated with this operator, if any (NOP, but
 overridden in scale-out to release NIO buffers used to move solutions
 around in the cluster).
 <p>
 Note: Operators are responsible for releasing their child
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> context, if any, when they terminate and should
 specify the <code>PipelineOp.Annotations#LAST_PASS</code> annotation to
 receive notice in the form of a final evaluation pass over an empty
 <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>. If they do NOT release an <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a>
 context which is a child of the {<a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getMemoryManager()"><code>query's
 context</code></a>, then their child <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> context will be
 retained until the termination of the query, at which point the query's
 <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a> context will be release, and all child contexts
 will be released automatically along with it.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#releaseNativeMemoryForOperator(int)">releaseNativeMemoryForOperator</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#releaseNativeMemoryForQuery()"><code>AbstractRunningQuery.releaseNativeMemoryForQuery()</code></a></dd></dl>
</li>
</ul>
<a name="releaseNativeMemoryForQuery()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseNativeMemoryForQuery</h4>
<pre>protected&nbsp;void&nbsp;releaseNativeMemoryForQuery()</pre>
<div class="block">Extended to release all <a href="../../../../com/bigdata/io/DirectBufferPoolAllocator.IAllocationContext.html" title="interface in com.bigdata.io"><code>DirectBufferPoolAllocator.IAllocationContext</code></a>s associated with the
 query when it terminates.
 <p>
 Release native memory associated with this query, if any.
 
 FIXME This could cause direct buffers to be released back to the pool
 before the operator tasks have terminated. That is NOT safe as the
 buffers could then be reissued to other threads while existing threads
 still have references to the buffers. Really, the same problem exists
 with the allocation contexts used for NIO transfers of IBindingSet[]s.
 <p>
 We will have to be very careful to wait until each operator's Future
 isDone() before calling clear() on the IMemoryManager to release the
 native buffers back to the pool. If we release a buffer while an operator
 is still running, then we will get data corruption arising from the
 recycling of the buffer to another native buffer user.
 <p>
 AbstractRunningQuery.cancel(...) is where we need to handle this, more
 specifically cancelRunningOperators(). Right now it is not waiting for
 those operators to terminate.
 <p>
 Making this work is tricky. AbstractRunningQuery is holding a lock. The
 operator tasks do not actually require that lock to terminate, but they
 are wrapped by a ChunkWrapperTask, which handles reporting back to the
 AbstractRunningQuery and *does* need the lock, and also by a
 ChunkFutureTask. Since we actually do do ChunkFutureTask.get(), we are
 going to deadlock if we invoke that while holding the
 AbstractRunningQuery's lock.
 <p>
 The alternative is to handle the tear down of the native buffers for a
 query asynchronously after the query has been cancelled, deferring the
 release of the native buffers back to the direct buffer pool until all
 tasks for the query are known to be done.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#releaseNativeMemoryForQuery()">releaseNativeMemoryForQuery</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><code>MemoryManager should know when it has been closed
 
 FIXME We need to have distinct events for the query evaluation life cycle
 and the query results life cycle. Really, this means that temporary
 solution sets are scoped to the parent query. This is a matter of the
 scope of the allocation context for the {@link DirectBufferPoolAllocator}
 and releasing that scope when the parent query is done (in cancel()).
 [Also consider scoping the temporary solution sets to a transaction or an
 HTTP session, e.g., by an integration with the NSS using traditional
 session concepts.]</code></dd></dl>
</li>
</ul>
<a name="getQueryEngine()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueryEngine</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/bop/fed/FederatedQueryEngine.html" title="class in com.bigdata.bop.fed">FederatedQueryEngine</a>&nbsp;getQueryEngine()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/bop/engine/IRunningQuery.html#getQueryEngine()">IRunningQuery</a></code></strong></div>
<div class="block">The query engine class executing the query on this node.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/IRunningQuery.html#getQueryEngine()">getQueryEngine</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/bop/engine/IRunningQuery.html" title="interface in com.bigdata.bop.engine">IRunningQuery</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryEngine()">getQueryEngine</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
</dl>
</li>
</ul>
<a name="acceptChunk(com.bigdata.bop.engine.IChunkMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acceptChunk</h4>
<pre>protected&nbsp;boolean&nbsp;acceptChunk(<a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;msg)</pre>
<div class="block">Overridden to make this visible to the <a href="../../../../com/bigdata/bop/fed/FederatedQueryEngine.html" title="class in com.bigdata.bop.fed"><code>FederatedQueryEngine</code></a>.
 <p>
 Make a chunk of binding sets available for consumption by the query.
 <p>
 Note: this is invoked by <a href="../../../../com/bigdata/bop/engine/QueryEngine.html#acceptChunk(com.bigdata.bop.engine.IChunkMessage)"><code>QueryEngine.acceptChunk(IChunkMessage)</code></a></div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#acceptChunk(com.bigdata.bop.engine.IChunkMessage)">acceptChunk</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html" title="class in com.bigdata.bop.engine">ChunkedRunningQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The chunk.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the message was accepted.</dd></dl>
</li>
</ul>
<a name="getQueryPeer(java.util.UUID)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueryPeer</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/bop/engine/IQueryPeer.html" title="interface in com.bigdata.bop.engine">IQueryPeer</a>&nbsp;getQueryPeer(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;serviceUUID)</pre>
<div class="block">Resolve the proxy for an <a href="../../../../com/bigdata/bop/engine/IQueryPeer.html" title="interface in com.bigdata.bop.engine"><code>IQueryPeer</code></a>. This is special cased for
 both <i>this</i> service (the actual reference is returned) and the query
 controller (we use an alternative path to discover the query controller
 since it might not be registered against a lookup service if it is not a
 data service).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>serviceUUID</code> - The service identifier for the peer.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The proxy for the service, the actual <a href="../../../../com/bigdata/bop/engine/QueryEngine.html" title="class in com.bigdata.bop.engine"><code>QueryEngine</code></a>
         reference if the identified service is <i>this</i> service, or
         <code>null</code> if the service could not be discovered.</dd></dl>
</li>
</ul>
<a name="getAllocationContext(com.bigdata.bop.fed.AllocationContextKey)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getAllocationContext</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/io/DirectBufferPoolAllocator.IAllocationContext.html" title="interface in com.bigdata.io">DirectBufferPoolAllocator.IAllocationContext</a>&nbsp;getAllocationContext(<a href="../../../../com/bigdata/bop/fed/AllocationContextKey.html" title="class in com.bigdata.bop.fed">AllocationContextKey</a>&nbsp;key)</pre>
<div class="block">Return the <a href="../../../../com/bigdata/io/DirectBufferPoolAllocator.IAllocationContext.html" title="interface in com.bigdata.io"><code>DirectBufferPoolAllocator.IAllocationContext</code></a> for the given key.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>key</code> - The key.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The allocation context.</dd></dl>
</li>
</ul>
<a name="cancelQueryOnPeers(java.lang.Throwable, java.util.Set)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelQueryOnPeers</h4>
<pre>protected&nbsp;boolean&nbsp;cancelQueryOnPeers(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;cause,
                         <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&gt;&nbsp;startedOn)</pre>
<div class="block">Overridden to notify each peer on which the query was started.
 <p>
 Cancel the query on each node where it is known to be running.
 <p>
 Note: The default implementation verifies that the caller is holding the
 <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#lock"><code>AbstractRunningQuery.lock</code></a> but is otherwise a NOP. This is overridden for scale-out.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#cancelQueryOnPeers(java.lang.Throwable,%20java.util.Set)">cancelQueryOnPeers</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>cause</code> - When non-<code>null</code>, the cause.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> iff something was cancelled.</dd></dl>
</li>
</ul>
<a name="getChunkHandler()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getChunkHandler</h4>
<pre>protected&nbsp;<a href="../../../../com/bigdata/bop/engine/IChunkHandler.html" title="interface in com.bigdata.bop.engine">IChunkHandler</a>&nbsp;getChunkHandler()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#getChunkHandler()">getChunkHandler</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html" title="class in com.bigdata.bop.engine">ChunkedRunningQuery</a></code></dd>
</dl>
</li>
</ul>
<a name="doLastPass(int, java.util.Set)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>doLastPass</h4>
<pre>protected&nbsp;void&nbsp;doLastPass(int&nbsp;bopId,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Set.html?is-external=true" title="class or interface in java.util">Set</a>&nbsp;doneOn)</pre>
<div class="block">Overridden to broadcast to all nodes and/or shards on which the operator
 has run in scale-out. Broadcast will be to nodes if the operator is hash
 partitioned. Broadcast will be to shards if the operator is key-range
 partitioned.
 <p>
 Queue empty <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>s to trigger the last evaluation pass
 for an operator which can not be re-triggered by any upstream operator or
 by <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>s which have already been buffered.
 <p>
 Note: If the queue for accepting new chunks could block then this could
 deadlock. We work around that by using the same lock for the
 AbstractRunningQuery and the queue of accepted messages. If the queue
 blocks, this thread will be yield the lock and another thread may make
 progress.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#doLastPass(int,%20java.util.Set)">doLastPass</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
<dd><code>doneOn</code> - The collection of shards or services on which the operator
            need to receive a last evaluation pass message.</dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/bigdata/bop/BOpEvaluationContext.html" title="enum in com.bigdata.bop"><code>BOpEvaluationContext</code></a></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/FederatedRunningQuery.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/bop/fed/FederatedQueryEngineCounters.html" title="class in com.bigdata.bop.fed"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/bop/fed/FederationChunkHandler.html" title="class in com.bigdata.bop.fed"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/bop/fed/FederatedRunningQuery.html" target="_top">Frames</a></li>
<li><a href="FederatedRunningQuery.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
