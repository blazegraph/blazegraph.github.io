<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Thu Feb 25 05:11:49 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>ChunkedRunningQuery (Blazegraph Database Platform 2.0.1 API)</title>
<meta name="date" content="2016-02-25">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="ChunkedRunningQuery (Blazegraph Database Platform 2.0.1 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ChunkedRunningQuery.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/bop/engine/BSBundle.html" title="class in com.bigdata.bop.engine"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/bop/engine/HaltOpMessage.html" title="class in com.bigdata.bop.engine"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/bop/engine/ChunkedRunningQuery.html" target="_top">Frames</a></li>
<li><a href="ChunkedRunningQuery.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.bop.engine</div>
<h2 title="Class ChunkedRunningQuery" class="title">Class ChunkedRunningQuery</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">com.bigdata.bop.engine.AbstractRunningQuery</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.bop.engine.ChunkedRunningQuery</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/bigdata/bop/engine/IRunningQuery.html" title="interface in com.bigdata.bop.engine">IRunningQuery</a>, <a href="../../../../com/bigdata/bop/IQueryContext.html" title="interface in com.bigdata.bop">IQueryContext</a>, <a href="../../../../com/bigdata/util/concurrent/IHaltable.html" title="interface in com.bigdata.util.concurrent">IHaltable</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../com/bigdata/bop/fed/FederatedRunningQuery.html" title="class in com.bigdata.bop.fed">FederatedRunningQuery</a></dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">ChunkedRunningQuery</span>
extends <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></pre>
<div class="block"><a href="../../../../com/bigdata/bop/engine/IRunningQuery.html" title="interface in com.bigdata.bop.engine"><code>IRunningQuery</code></a> implementation based on the assignment of
 <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>(s) to an operator task. Operators (other than those
 with "operator-at-once" evaluation semantics) will typically executed
 multiple times, consuming at least one <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a> each time they
 are evaluated. <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>s target a specific operator (bopId) and
 shard (shardId). In scale-out, binding sets will be mapped across the target
 access path and may be replicated to one or more nodes depending on the
 distribution of the shards. This evaluation strategy is compatible with both
 the <a href="../../../../com/bigdata/journal/Journal.html" title="class in com.bigdata.journal"><code>Journal</code></a> (aka standalone) and the <a href="../../../../com/bigdata/service/IBigdataFederation.html" title="interface in com.bigdata.service"><code>IBigdataFederation</code></a> (aka
 clustered or scale-out).
 <p>
 Note: The challenge with this implementation is managing the amount of data
 buffered on the JVM heap without introducing control structures which can
 result in deadlock or starvation. This has been addressed to a large extent
 by sharing a lock between this class and the per-operator input work queues
 using modified version of the JSR 166 classes. For high volume operator at
 once evaluation, we need to buffer the data on the native process heap using
 the <a href="../../../../com/bigdata/rwstore/sector/IMemoryManager.html" title="interface in com.bigdata.rwstore.sector"><code>IMemoryManager</code></a>.</div>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.bigdata.bop.engine.<a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></h3>
<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_DUPLICATE_IDENTIFIER">ERR_DUPLICATE_IDENTIFIER</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_NO_SUCH_BOP">ERR_NO_SUCH_BOP</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_NOT_CONTROLLER">ERR_NOT_CONTROLLER</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_NOT_PIPELINE_START">ERR_NOT_PIPELINE_START</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#ERR_QUERY_DONE">ERR_QUERY_DONE</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#lock">lock</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#ChunkedRunningQuery(com.bigdata.bop.engine.QueryEngine,%20java.util.UUID,%20boolean,%20com.bigdata.bop.engine.IQueryClient,%20com.bigdata.bop.PipelineOp,%20com.bigdata.bop.engine.IChunkMessage)">ChunkedRunningQuery</a></strong>(<a href="../../../../com/bigdata/bop/engine/QueryEngine.html" title="class in com.bigdata.bop.engine">QueryEngine</a>&nbsp;queryEngine,
                   <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;queryId,
                   boolean&nbsp;controller,
                   <a href="../../../../com/bigdata/bop/engine/IQueryClient.html" title="interface in com.bigdata.bop.engine">IQueryClient</a>&nbsp;clientProxy,
                   <a href="../../../../com/bigdata/bop/PipelineOp.html" title="class in com.bigdata.bop">PipelineOp</a>&nbsp;query,
                   <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;realSource)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#acceptChunk(com.bigdata.bop.engine.IChunkMessage)">acceptChunk</a></strong>(<a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;msg)</code>
<div class="block">Make a chunk of binding sets available for consumption by the query.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#cancelRunningOperators(boolean)">cancelRunningOperators</a></strong>(boolean&nbsp;mayInterruptIfRunning)</code>
<div class="block">Cancel any running operators for this query on this node (internal API).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#consumeChunk()">consumeChunk</a></strong>()</code>
<div class="block">Instruct the <a href="../../../../com/bigdata/bop/engine/IRunningQuery.html" title="interface in com.bigdata.bop.engine"><code>IRunningQuery</code></a> to consume an <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>
 already on its input queue.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../com/bigdata/bop/engine/IChunkHandler.html" title="interface in com.bigdata.bop.engine">IChunkHandler</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#getChunkHandler()">getChunkHandler</a></strong>()</code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../../com/bigdata/bop/engine/QueueStats.html" title="class in com.bigdata.bop.engine">QueueStats</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#getQueueStats()">getQueueStats</a></strong>()</code>
<div class="block">Return a summary of the work queue for the operators in this query
 (non-blocking).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#haltOp(com.bigdata.bop.engine.IHaltOpMessage)">haltOp</a></strong>(<a href="../../../../com/bigdata/bop/engine/IHaltOpMessage.html" title="interface in com.bigdata.bop.engine">IHaltOpMessage</a>&nbsp;msg)</code>
<div class="block">Overridden to attempt to consume another chunk each time an operator
 reports that it has halted evaluation.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/bop/engine/ChunkedRunningQuery.html#releaseAcceptedMessages()">releaseAcceptedMessages</a></strong>()</code>
<div class="block">Close the <a href="../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> for any <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>s
 which have been <em>accepted</em> for this queue on this node (internal
 API).</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.bop.engine.<a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></h3>
<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#addChild(com.bigdata.bop.engine.IRunningQuery)">addChild</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#cancel(boolean)">cancel</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#cancelQueryOnPeers(java.lang.Throwable,%20java.util.Set)">cancelQueryOnPeers</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#checkDeadline()">checkDeadline</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#doLastPass(int,%20java.util.Set)">doLastPass</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#get()">get</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#get(long,%20java.util.concurrent.TimeUnit)">get</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getAsThrownCause()">getAsThrownCause</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getAttributes()">getAttributes</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getBOp(int)">getBOp</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getBOpIndex()">getBOpIndex</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getCause()">getCause</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getChildren()">getChildren</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getDeadline()">getDeadline</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getDoneTime()">getDoneTime</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getElapsed()">getElapsed</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getFederation()">getFederation</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getFuture()">getFuture</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getLocalIndexManager()">getLocalIndexManager</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getMemoryManager()">getMemoryManager</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQuery()">getQuery</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryBuffer()">getQueryBuffer</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryController()">getQueryController</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryEngine()">getQueryEngine</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getQueryId()">getQueryId</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getRunningCount(int)">getRunningCount</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getRunState(int)">getRunState</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStartedOnCount(int)">getStartedOnCount</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStartTime()">getStartTime</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStaticAnalysisStats()">getStaticAnalysisStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStats()">getStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#getStats(java.lang.Integer)">getStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#halt(T)">halt</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#halt(java.lang.Void)">halt</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isAtOnceReady(int)">isAtOnceReady</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isCancelled()">isCancelled</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isController()">isController</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isDone()">isDone</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#isRootCauseInterrupt(java.lang.Throwable)">isRootCauseInterrupt</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#iterator()">iterator</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#newQueryBuffer(com.bigdata.bop.PipelineOp,%20com.bigdata.bop.engine.BOpStats)">newQueryBuffer</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#releaseNativeMemoryForOperator(int)">releaseNativeMemoryForOperator</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#releaseNativeMemoryForQuery()">releaseNativeMemoryForQuery</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#runStateString()">runStateString</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#setDeadline(long)">setDeadline</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#setStaticAnalysisStats(com.bigdata.bop.engine.StaticAnalysisStats)">setStaticAnalysisStats</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#startOp(com.bigdata.bop.engine.IStartOpMessage)">startOp</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#startQuery(com.bigdata.bop.engine.IChunkMessage)">startQuery</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#toString()">toString</a>, <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#tryGetRunState(int)">tryGetRunState</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="ChunkedRunningQuery(com.bigdata.bop.engine.QueryEngine, java.util.UUID, boolean, com.bigdata.bop.engine.IQueryClient, com.bigdata.bop.PipelineOp, com.bigdata.bop.engine.IChunkMessage)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>ChunkedRunningQuery</h4>
<pre>public&nbsp;ChunkedRunningQuery(<a href="../../../../com/bigdata/bop/engine/QueryEngine.html" title="class in com.bigdata.bop.engine">QueryEngine</a>&nbsp;queryEngine,
                   <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;queryId,
                   boolean&nbsp;controller,
                   <a href="../../../../com/bigdata/bop/engine/IQueryClient.html" title="interface in com.bigdata.bop.engine">IQueryClient</a>&nbsp;clientProxy,
                   <a href="../../../../com/bigdata/bop/PipelineOp.html" title="class in com.bigdata.bop">PipelineOp</a>&nbsp;query,
                   <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;realSource)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>queryEngine</code> - The <a href="../../../../com/bigdata/bop/engine/QueryEngine.html" title="class in com.bigdata.bop.engine"><code>QueryEngine</code></a> on which the query is running. In
            scale-out, a query is typically instantiated on many
            <a href="../../../../com/bigdata/bop/engine/QueryEngine.html" title="class in com.bigdata.bop.engine"><code>QueryEngine</code></a>s.</dd><dd><code>queryId</code> - The identifier for that query.</dd><dd><code>controller</code> - <code>true</code> iff the <a href="../../../../com/bigdata/bop/engine/QueryEngine.html" title="class in com.bigdata.bop.engine"><code>QueryEngine</code></a> is the query
            controller for this query (the <a href="../../../../com/bigdata/bop/engine/QueryEngine.html" title="class in com.bigdata.bop.engine"><code>QueryEngine</code></a> which will
            coordinate the query evaluation).</dd><dd><code>clientProxy</code> - The query controller. In standalone, this is the same as the
            <i>queryEngine</i>. In scale-out, this is a proxy for the
            query controller whenever the query is instantiated on a node
            other than the query controller itself.</dd><dd><code>query</code> - The query.</dd><dd><code>saStats</code> - Statistics object containing static analysis statistics</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if any argument is <code>null</code>.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the <i>readTimestamp</i> is <a href="../../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a>
             (queries may not read on the unisolated indices).</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/IllegalArgumentException.html?is-external=true" title="class or interface in java.lang">IllegalArgumentException</a></code> - if the <i>writeTimestamp</i> is neither
             <a href="../../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a> nor a read-write transaction
             identifier.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="acceptChunk(com.bigdata.bop.engine.IChunkMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>acceptChunk</h4>
<pre>protected&nbsp;boolean&nbsp;acceptChunk(<a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine">IChunkMessage</a>&lt;<a href="../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&gt;&nbsp;msg)</pre>
<div class="block">Make a chunk of binding sets available for consumption by the query.
 <p>
 Note: this is invoked by <a href="../../../../com/bigdata/bop/engine/QueryEngine.html#acceptChunk(com.bigdata.bop.engine.IChunkMessage)"><code>QueryEngine.acceptChunk(IChunkMessage)</code></a></div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#acceptChunk(com.bigdata.bop.engine.IChunkMessage)">acceptChunk</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The chunk.</dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if the message was accepted.</dd></dl>
</li>
</ul>
<a name="consumeChunk()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>consumeChunk</h4>
<pre>protected&nbsp;void&nbsp;consumeChunk()</pre>
<div class="block">Instruct the <a href="../../../../com/bigdata/bop/engine/IRunningQuery.html" title="interface in com.bigdata.bop.engine"><code>IRunningQuery</code></a> to consume an <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>
 already on its input queue..
 <p>
 Examines the input queue for each (bopId,partitionId). If there is work
 available and no task is currently running, then drain the work queue and
 submit a task to consume that work.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#consumeChunk()">consumeChunk</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
</dl>
</li>
</ul>
<a name="haltOp(com.bigdata.bop.engine.IHaltOpMessage)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>haltOp</h4>
<pre>protected&nbsp;void&nbsp;haltOp(<a href="../../../../com/bigdata/bop/engine/IHaltOpMessage.html" title="interface in com.bigdata.bop.engine">IHaltOpMessage</a>&nbsp;msg)</pre>
<div class="block">Overridden to attempt to consume another chunk each time an operator
 reports that it has halted evaluation. This is necessary because the
 haltOp() message can arrive asynchronously, so we need to test the work
 queues in case there are "at-once" operators awaiting the termination of
 their predecessor(s) in the pipeline.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#haltOp(com.bigdata.bop.engine.IHaltOpMessage)">haltOp</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>msg</code> - The <a href="../../../../com/bigdata/bop/engine/IHaltOpMessage.html" title="interface in com.bigdata.bop.engine"><code>IHaltOpMessage</code></a></dd></dl>
</li>
</ul>
<a name="cancelRunningOperators(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelRunningOperators</h4>
<pre>protected&nbsp;boolean&nbsp;cancelRunningOperators(boolean&nbsp;mayInterruptIfRunning)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#cancelRunningOperators(boolean)">AbstractRunningQuery</a></code></strong></div>
<div class="block">Cancel any running operators for this query on this node (internal API).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#cancelRunningOperators(boolean)">cancelRunningOperators</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd><code>true</code> if any operators were cancelled.</dd></dl>
</li>
</ul>
<a name="releaseAcceptedMessages()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>releaseAcceptedMessages</h4>
<pre>protected&nbsp;void&nbsp;releaseAcceptedMessages()</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#releaseAcceptedMessages()">AbstractRunningQuery</a></code></strong></div>
<div class="block">Close the <a href="../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> for any <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>s
 which have been <em>accepted</em> for this queue on this node (internal
 API).
 <p>
 Note: This must be invoked while holding a lock which is exclusive with
 the lock used to hand off <a href="../../../../com/bigdata/bop/engine/IChunkMessage.html" title="interface in com.bigdata.bop.engine"><code>IChunkMessage</code></a>s to operator tasks
 otherwise we could wind up invoking <a href="../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html#close()"><code>IAsynchronousIterator.close()</code></a>
 from on an <a href="../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> running in a different thread.
 That would cause visibility problems in the close() semantics unless the
 <a href="../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> is thread-safe for close (e.g., volatile
 write, synchronized, etc.). The appropriate lock for this is
 <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#lock"><code>AbstractRunningQuery.lock</code></a>. This method is only invoked out of
 <a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#cancel(boolean)"><code>AbstractRunningQuery.cancel(boolean)</code></a> which owns that lock.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html#releaseAcceptedMessages()">releaseAcceptedMessages</a></code>&nbsp;in class&nbsp;<code><a href="../../../../com/bigdata/bop/engine/AbstractRunningQuery.html" title="class in com.bigdata.bop.engine">AbstractRunningQuery</a></code></dd>
</dl>
</li>
</ul>
<a name="getQueueStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getQueueStats</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Integer.html?is-external=true" title="class or interface in java.lang">Integer</a>,<a href="../../../../com/bigdata/bop/engine/QueueStats.html" title="class in com.bigdata.bop.engine">QueueStats</a>&gt;&nbsp;getQueueStats()</pre>
<div class="block">Return a summary of the work queue for the operators in this query
 (non-blocking).</div>
<dl><dt><span class="strong">Returns:</span></dt><dd>A map whose keys are the operator identifiers and whose values
         provide summary statistics for the work queue(s) for those
         operators.
         <p>
         Note: For a cluster, there is one work queue per (operator,shard)
         pair.</dd></dl>
</li>
</ul>
<a name="getChunkHandler()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getChunkHandler</h4>
<pre>protected&nbsp;<a href="../../../../com/bigdata/bop/engine/IChunkHandler.html" title="interface in com.bigdata.bop.engine">IChunkHandler</a>&nbsp;getChunkHandler()</pre>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/ChunkedRunningQuery.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/bop/engine/BSBundle.html" title="class in com.bigdata.bop.engine"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/bop/engine/HaltOpMessage.html" title="class in com.bigdata.bop.engine"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/bop/engine/ChunkedRunningQuery.html" target="_top">Frames</a></li>
<li><a href="ChunkedRunningQuery.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.bop.engine.AbstractRunningQuery">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
