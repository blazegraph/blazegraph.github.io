<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Mon Mar 18 18:55:33 UTC 2019 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>JoinMasterTask (Blazegraph Database Platform 2.1.5 API)</title>
<meta name="date" content="2019-03-18">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="JoinMasterTask (Blazegraph Database Platform 2.1.5 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/JoinMasterTask.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html" title="interface in com.bigdata.relation.rule.eval.pipeline"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinStats.html" title="class in com.bigdata.relation.rule.eval.pipeline"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" target="_top">Frames</a></li>
<li><a href="JoinMasterTask.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.relation.rule.eval.pipeline</div>
<h2 title="Class JoinMasterTask" class="title">Class JoinMasterTask</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.relation.rule.eval.pipeline.JoinMasterTask</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../com/bigdata/relation/rule/eval/IStepTask.html" title="interface in com.bigdata.relation.rule.eval">IStepTask</a>, <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html" title="interface in com.bigdata.relation.rule.eval.pipeline">IJoinMaster</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/rmi/Remote.html?is-external=true" title="class or interface in java.rmi">Remote</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval">RuleStats</a>&gt;</dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/DistributedJoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline">DistributedJoinMasterTask</a>, <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/LocalJoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline">LocalJoinMasterTask</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">JoinMasterTask</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../../../com/bigdata/relation/rule/eval/IStepTask.html" title="interface in com.bigdata.relation.rule.eval">IStepTask</a>, <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html" title="interface in com.bigdata.relation.rule.eval.pipeline">IJoinMaster</a></pre>
<div class="block">Master providing efficient distributed evaluation of <a href="../../../../../../com/bigdata/relation/rule/IRule.html" title="interface in com.bigdata.relation.rule"><code>IRule</code></a>s. For
 query, this task should be run by the client that wishes to materialize the
 query results. For mutation, this task may be run by any client or service
 since the data does not flow through the master for mutation.
 <p>
 For the first join dimension, the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> creates a
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> per index partition that will be spanned by the
 <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> for the first <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a> in the evaluation order
 and feeds each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>(s) in the first join dimension with an
 <a href="../../../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> reading on a buffer containing single empty
 <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>.
 <p>
 Each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> consumes <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> chunks read from the
 previous join dimension. For each <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> chunk read, a new
 <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> is obtained. Elements are then read from than
 <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> in chunks. Given the <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> used to obtain
 the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a>, a new <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> is created for each
 element in each chunk read from the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a>. If the new
 <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> satisfies the constraint(s) on the <a href="../../../../../../com/bigdata/relation/rule/IRule.html" title="interface in com.bigdata.relation.rule"><code>IRule</code></a> then it
 will be output to the next join dimension. An <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> is output
 by placing it onto the <a href="../../../../../../com/bigdata/relation/accesspath/UnsynchronizedArrayBuffer.html" title="class in com.bigdata.relation.accesspath"><code>UnsynchronizedArrayBuffer</code></a> for the join
 dimension. Periodically that <a href="../../../../../../com/bigdata/relation/accesspath/UnsynchronizedArrayBuffer.html" title="class in com.bigdata.relation.accesspath"><code>UnsynchronizedArrayBuffer</code></a> will overflow,
 and a chunk of <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>s will be placed onto the
 <a href="../../../../../../com/bigdata/relation/accesspath/IBlockingBuffer.html" title="interface in com.bigdata.relation.accesspath"><code>IBlockingBuffer</code></a> from which the next join dimension will read its
 <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> chunks.
 <p>
 The last join dimension is slightly different. Its
 <a href="../../../../../../com/bigdata/relation/accesspath/UnsynchronizedArrayBuffer.html" title="class in com.bigdata.relation.accesspath"><code>UnsynchronizedArrayBuffer</code></a> writes onto the
 <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html#newQueryBuffer()"><code>IJoinNexus.newQueryBuffer()</code></a>,
 <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html#newInsertBuffer(com.bigdata.relation.IMutableRelation)"><code>IJoinNexus.newInsertBuffer(com.bigdata.relation.IMutableRelation)</code></a>, or
 <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html#newDeleteBuffer(com.bigdata.relation.IMutableRelation)"><code>IJoinNexus.newDeleteBuffer(com.bigdata.relation.IMutableRelation)</code></a>
 depending on the <a href="../../../../../../com/bigdata/relation/rule/eval/ActionEnum.html" title="enum in com.bigdata.relation.rule.eval"><code>ActionEnum</code></a>.
 <p>
 For each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>, once its source iterator(s) have been exhausted
 and the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> reading from the last source <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>
 has been exhausted, then the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> for that join dimension is done
 and it will flush its <a href="../../../../../../com/bigdata/relation/accesspath/UnsynchronizedArrayBuffer.html" title="class in com.bigdata.relation.accesspath"><code>UnsynchronizedArrayBuffer</code></a> and close its output
 <a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath"><code>IBuffer</code></a> and wait for the downstream <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s to report their
 <a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval"><code>RuleStats</code></a>. Those <a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval"><code>RuleStats</code></a> are aggregated and passed back to
 its caller in turn.
 <p>
 Each join dimension is single-threaded. Coordination of resources is achieved
 using the output buffer for each join dimension. This allows a source join
 dimension to read ahead and forces the sink join dimension to process chunks
 of <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>s at a time.
 <p>
 The <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> is responsible for the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s for the
 first join dimension. Each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> is responsible for the downstream
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s. If the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> is interrupted or cancelled,
 then it interrupts or cancels the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s for the first join
 dimension. If <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> is interrupted or cancelled then it must
 cancel any <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s which it has created for the next join
 dimension.
 
 <h2>Choosing the view</h2>
 
 Rules SHOULD be evaluated against a read-historical state.
 <p>
 This is a hard requirement when computing the fix point closure of a rule
 (set). Each round of closure MUST be evaluated against the commit time
 reported by <a href="../../../../../../com/bigdata/service/IBigdataFederation.html#getLastCommitTime()"><code>IBigdataFederation.getLastCommitTime()</code></a> and is applied for
 all rules in that round. This allows unisolated tasks to write on the
 generated solutions onto the indices. This is a strong requirement since the
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s will otherwise wind up holding an exclusive lock on the
 <a href="../../../../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a> index partitions, which would cause a deadlock when
 attempting to write the generated solutions onto the index partitions. At the
 start of the next round of closure, simply update the read-historical
 timestamp to the then current value of
 <a href="../../../../../../com/bigdata/service/IBigdataFederation.html#getLastCommitTime()"><code>IBigdataFederation.getLastCommitTime()</code></a>.
 <p>
 Queries that use <a href="../../../../../../com/bigdata/journal/ITx.html#READ_COMMITTED"><code>ITx.READ_COMMITTED</code></a> or <a href="../../../../../../com/bigdata/journal/ITx.html#UNISOLATED"><code>ITx.UNISOLATED</code></a> will
 not generate deadlocks, but they are subject to abort from the
 split/join/move of index partition(s) during query evaluation. This problem
 WILL NOT arise if you read instead from the
 <a href="../../../../../../com/bigdata/service/IBigdataFederation.html#getLastCommitTime()"><code>IBigdataFederation.getLastCommitTime()</code></a>.
 
 <h2>Key-range partitioned joins</h2>
 
 In order to scale-out efficiently, the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> must distribute
 the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s such that they run inside of the
 <a href="../../../../../../com/bigdata/journal/ConcurrencyManager.html" title="class in com.bigdata.journal"><code>ConcurrencyManager</code></a> on the various <a href="../../../../../../com/bigdata/service/DataService.html" title="class in com.bigdata.service"><code>DataService</code></a>s on which the
 index partitions reside from which the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a>s must read. This
 allows the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> to read on the local index object and reduces
 the message traffic to pulling chunks of <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>s from the source
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s.
 <p>
 For the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> and for each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>, the fan out of
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s is determined by the #of index partitions that are spanned
 by the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a>s required to evaluate the <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>s for
 the next join dimension. The <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> will not be used by the
 source join dimension to read on the index, merely to discover the index
 partitions to which the generating <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>s must be assigned. The
 index partition spanned for a given <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> is determined by
 generating an as bound <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a> for the next join dimension,
 instantiating the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> on the source join dimension that will
 be used by the target join dimension, and then using a locator scan for the
 <i>fromKey</i> and <i>toKey</i> for that <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a>. In the case
 where the <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a> is fully bound, the <a href="../../../../../../com/bigdata/relation/accesspath/IAccessPath.html" title="interface in com.bigdata.relation.accesspath"><code>IAccessPath</code></a> will be
 restricted to a single index partition, but we still need to know which index
 partition.
 <p>
 The <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> is written on an <a href="../../../../../../com/bigdata/relation/accesspath/UnsynchronizedArrayBuffer.html" title="class in com.bigdata.relation.accesspath"><code>UnsynchronizedArrayBuffer</code></a>
 corresponding to the target index partition. The
 <a href="../../../../../../com/bigdata/relation/accesspath/UnsynchronizedArrayBuffer.html" title="class in com.bigdata.relation.accesspath"><code>UnsynchronizedArrayBuffer</code></a> (together with the output <a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath"><code>IBuffer</code></a>
 for the <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> chunks and the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for the
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> for that index partition) for the target index partition
 exists in an LRU. If it falls off of the end of the LRU, then the
 <a href="../../../../../../com/bigdata/relation/accesspath/UnsynchronizedArrayBuffer.html" title="class in com.bigdata.relation.accesspath"><code>UnsynchronizedArrayBuffer</code></a> is flushed and the output <a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath"><code>IBuffer</code></a>
 is closed. The downstream <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> will eventually exhaust the
 corresponding <a href="../../../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> source.
 <p>
 When the source join dimension and the sink join dimension have the same
 <a href="../../../../../../com/bigdata/striterator/IKeyOrder.html" title="interface in com.bigdata.striterator"><code>IKeyOrder</code></a> there will be an orderly progression through the indices
 and each sink <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> can be safely closed once a <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>
 is created on the <a href="../../../../../../com/bigdata/service/DataService.html" title="class in com.bigdata.service"><code>DataService</code></a> for the next index partition. However,
 the <a href="../../../../../../com/bigdata/striterator/IKeyOrder.html" title="interface in com.bigdata.striterator"><code>IKeyOrder</code></a>s offer differ, which can lead to more scattered
 assignment of output <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>s to index partitions. The LRU helps
 to manage this fan out.
 <p>
 Fan out means that there may be N>1 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s for each join
 dimension. For this reason, a QUERY <a href="../../../../../../com/bigdata/relation/rule/ISlice.html" title="interface in com.bigdata.relation.rule"><code>ISlice</code></a> must be applied by the
 client reading on the <a href="../../../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> returned by the
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a>.
 <p>
 Fan out also implies a requirement for fan-in in order to reduce the scatter
 of <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s. Fan-in must aggregate the source <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> such
 that they target the same sink <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> instance for the same rule
 execution instance, the same orderIndex (hence the same <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a>),
 and the same index partition. This means that a factory mechanism must be
 used to either create a new <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> or return the existing
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> on the <a href="../../../../../../com/bigdata/service/DataService.html" title="class in com.bigdata.service"><code>DataService</code></a> based on those identifying
 properties. This must be done in a thread-safe manner, but contention should
 be restricted to the case where the identifying properties are the same. The
 factory must be given the <a href="../../../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> reading
 <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a> chunks from the source join dimension and the
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> must not close (unless interrupted or cancelled) until all
 of its source <a href="../../../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a>s have been exhausted.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Field Summary table, listing fields, and an explanation">
<caption><span>Fields</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Field and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#DEBUG">DEBUG</a></strong></code>
<div class="block">True iff the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#log"><code>log</code></a> level is DEBUG or less.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html" title="interface in com.bigdata.relation.rule.eval">IJoinNexus</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#joinNexus">joinNexus</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexusFactory.html" title="interface in com.bigdata.relation.rule.eval">IJoinNexusFactory</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#joinNexusFactory">joinNexusFactory</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinStats.html" title="class in com.bigdata.relation.rule.eval.pipeline">JoinStats</a>[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#joinStats">joinStats</a></strong></code>
<div class="block">Statistics on <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> behavior for each <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a> in
 the tail of the rule.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected static org.apache.log4j.Logger</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#log">log</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#masterUUID">masterUUID</a></strong></code>
<div class="block">The unique identifier for this <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> instance.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected int[]</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#order">order</a></strong></code>
<div class="block">The evaluation order.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/rule/IRule.html" title="interface in com.bigdata.relation.rule">IRule</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#rule">rule</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/rule/eval/IRuleState.html" title="interface in com.bigdata.relation.rule.eval">IRuleState</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#ruleState">ruleState</a></strong></code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval">RuleStats</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#ruleStats">ruleStats</a></strong></code>&nbsp;</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath">IBuffer</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval">ISolution</a>[]&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#solutionBuffer">solutionBuffer</a></strong></code>
<div class="block">From the ctor.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected int</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#tailCount">tailCount</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier</th>
<th class="colLast" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected </code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#JoinMasterTask(com.bigdata.relation.rule.IRule,%20com.bigdata.relation.rule.eval.IJoinNexus,%20com.bigdata.relation.accesspath.IBuffer)">JoinMasterTask</a></strong>(<a href="../../../../../../com/bigdata/relation/rule/IRule.html" title="interface in com.bigdata.relation.rule">IRule</a>&nbsp;rule,
              <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html" title="interface in com.bigdata.relation.rule.eval">IJoinNexus</a>&nbsp;joinNexus,
              <a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath">IBuffer</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval">ISolution</a>[]&gt;&nbsp;solutionBuffer)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#awaitAll(java.util.List,%20long,%20java.util.concurrent.TimeUnit)">awaitAll</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&gt;&nbsp;futures,
        long&nbsp;timeout,
        <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)</code>
<div class="block">Make sure that each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> completed successfully.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval">RuleStats</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#call()">call</a></strong>()</code>
<div class="block">Evaluate the rule.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#combineJoinStats()">combineJoinStats</a></strong>()</code>
<div class="block">Aggregates statistics each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> onto <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#ruleStats"><code>ruleStats</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath">IBuffer</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval">ISolution</a>[]&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#getSolutionBuffer()">getSolutionBuffer</a></strong>()</code>
<div class="block">Returns the buffer specified to the ctor (overridden for distributed
 joins).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#getUUID()">getUUID</a></strong>()</code>
<div class="block">Return a unique identifier for the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> instance.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="../../../../../../com/bigdata/relation/accesspath/ThickAsynchronousIterator.html" title="class in com.bigdata.relation.accesspath">ThickAsynchronousIterator</a>&lt;<a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>[]&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#newBindingSetIterator(com.bigdata.bop.IBindingSet)">newBindingSetIterator</a></strong>(<a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&nbsp;bindingSet)</code>
<div class="block">Return an <a href="../../../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> that will read a single
 <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#report(com.bigdata.relation.rule.eval.pipeline.JoinStats)">report</a></strong>(<a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinStats.html" title="class in com.bigdata.relation.rule.eval.pipeline">JoinStats</a>&nbsp;joinStats)</code>
<div class="block">Aggregates the statistics for some join dimension.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ============ FIELD DETAIL =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_detail">
<!--   -->
</a>
<h3>Field Detail</h3>
<a name="log">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>log</h4>
<pre>protected static final&nbsp;org.apache.log4j.Logger log</pre>
</li>
</ul>
<a name="DEBUG">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>DEBUG</h4>
<pre>protected static final&nbsp;boolean DEBUG</pre>
<div class="block">True iff the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#log"><code>log</code></a> level is DEBUG or less.</div>
</li>
</ul>
<a name="rule">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>rule</h4>
<pre>protected final&nbsp;<a href="../../../../../../com/bigdata/relation/rule/IRule.html" title="interface in com.bigdata.relation.rule">IRule</a> rule</pre>
</li>
</ul>
<a name="joinNexus">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinNexus</h4>
<pre>protected final&nbsp;<a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html" title="interface in com.bigdata.relation.rule.eval">IJoinNexus</a> joinNexus</pre>
</li>
</ul>
<a name="joinNexusFactory">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinNexusFactory</h4>
<pre>protected final&nbsp;<a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexusFactory.html" title="interface in com.bigdata.relation.rule.eval">IJoinNexusFactory</a> joinNexusFactory</pre>
</li>
</ul>
<a name="solutionBuffer">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>solutionBuffer</h4>
<pre>protected final&nbsp;<a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath">IBuffer</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval">ISolution</a>[]&gt; solutionBuffer</pre>
<div class="block">From the ctor. This will be the <a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath"><code>IBuffer</code></a> on which the last join
 dimension writes the computed <a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval"><code>ISolution</code></a>s.
 <p>
 Note: <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/LocalJoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>LocalJoinMasterTask</code></a> always passes this along to the last
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/LocalJoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>LocalJoinTask</code></a>.
 <p>
 Note: For a <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/DistributedJoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>DistributedJoinMasterTask</code></a> running a Query this gets
 proxied and the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/DistributedJoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>DistributedJoinTask</code></a>s all write on the proxy.
 However, the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/DistributedJoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>DistributedJoinMasterTask</code></a> DOES NOT proxy this for
 mutation in order to keep all data from flowing through the master.</div>
</li>
</ul>
<a name="tailCount">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>tailCount</h4>
<pre>protected final&nbsp;int tailCount</pre>
</li>
</ul>
<a name="ruleState">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ruleState</h4>
<pre>protected final&nbsp;<a href="../../../../../../com/bigdata/relation/rule/eval/IRuleState.html" title="interface in com.bigdata.relation.rule.eval">IRuleState</a> ruleState</pre>
</li>
</ul>
<a name="order">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>order</h4>
<pre>protected final&nbsp;int[] order</pre>
<div class="block">The evaluation order.</div>
</li>
</ul>
<a name="ruleStats">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>ruleStats</h4>
<pre>protected final&nbsp;<a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval">RuleStats</a> ruleStats</pre>
</li>
</ul>
<a name="joinStats">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>joinStats</h4>
<pre>protected final&nbsp;<a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinStats.html" title="class in com.bigdata.relation.rule.eval.pipeline">JoinStats</a>[] joinStats</pre>
<div class="block">Statistics on <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> behavior for each <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a> in
 the tail of the rule. These statistics are reported by each
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> and then aggregated for each join dimension.
 <p>
 Note: The index into this array is the evaluation order of the predicate.</div>
</li>
</ul>
<a name="masterUUID">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>masterUUID</h4>
<pre>protected final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a> masterUUID</pre>
<div class="block">The unique identifier for this <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> instance.</div>
</li>
</ul>
</li>
</ul>
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="JoinMasterTask(com.bigdata.relation.rule.IRule, com.bigdata.relation.rule.eval.IJoinNexus, com.bigdata.relation.accesspath.IBuffer)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>JoinMasterTask</h4>
<pre>protected&nbsp;JoinMasterTask(<a href="../../../../../../com/bigdata/relation/rule/IRule.html" title="interface in com.bigdata.relation.rule">IRule</a>&nbsp;rule,
              <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html" title="interface in com.bigdata.relation.rule.eval">IJoinNexus</a>&nbsp;joinNexus,
              <a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath">IBuffer</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval">ISolution</a>[]&gt;&nbsp;solutionBuffer)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>rule</code> - The rule to be executed.</dd><dd><code>joinNexus</code> - The <a href="../../../../../../com/bigdata/relation/rule/eval/IJoinNexus.html" title="interface in com.bigdata.relation.rule.eval"><code>IJoinNexus</code></a>.</dd><dd><code>solutionBuffer</code> - The <a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval"><code>ISolution</code></a> buffer.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getUUID()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getUUID</h4>
<pre>public final&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util">UUID</a>&nbsp;getUUID()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html#getUUID()">IJoinMaster</a></code></strong></div>
<div class="block">Return a unique identifier for the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> instance. This
 is used to concentrate all <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/DistributedJoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>DistributedJoinTask</code></a> that target the
 same tail predicate and index partition onto the same
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/DistributedJoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>DistributedJoinTask</code></a> sink.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html#getUUID()">getUUID</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html" title="interface in com.bigdata.relation.rule.eval.pipeline">IJoinMaster</a></code></dd>
<dt><span class="strong">Returns:</span></dt><dd>The unique identifier.</dd></dl>
</li>
</ul>
<a name="call()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>call</h4>
<pre>public&nbsp;<a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval">RuleStats</a>&nbsp;call()
               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Evaluate the rule.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/relation/rule/eval/IStepTask.html#call()">call</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/bigdata/relation/rule/eval/IStepTask.html" title="interface in com.bigdata.relation.rule.eval">IStepTask</a></code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true#call()" title="class or interface in java.util.concurrent">call</a></code>&nbsp;in interface&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/RuleStats.html" title="class in com.bigdata.relation.rule.eval">RuleStats</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="awaitAll(java.util.List, long, java.util.concurrent.TimeUnit)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitAll</h4>
<pre>protected&nbsp;void&nbsp;awaitAll(<a href="http://docs.oracle.com/javase/7/docs/api/java/util/List.html?is-external=true" title="class or interface in java.util">List</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent">Future</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Void.html?is-external=true" title="class or interface in java.lang">Void</a>&gt;&gt;&nbsp;futures,
            long&nbsp;timeout,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeUnit.html?is-external=true" title="class or interface in java.util.concurrent">TimeUnit</a>&nbsp;unit)
                 throws <a href="../../../../../../com/bigdata/util/concurrent/ExecutionExceptions.html" title="class in com.bigdata.util.concurrent">ExecutionExceptions</a>,
                        <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                        <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></pre>
<div class="block">Make sure that each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> completed successfully.
 <p>
 Note: This waits until all <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s complete, regardless of
 their outcome (or until the timeout expires), so that all
 <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> have the opportunity to report their <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinStats.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinStats</code></a>
 to the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>futures</code> - The <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> that was created
            by the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a>.</dd><dd><code>timeout</code> - The timeout for awaiting those futures.</dd><dd><code>unit</code> - The unit for that timeout.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="../../../../../../com/bigdata/util/concurrent/ExecutionExceptions.html" title="class in com.bigdata.util.concurrent">ExecutionExceptions</a></code> - if one or more <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s fail.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if the <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinMasterTask</code></a> itself was interrupted while
             awaiting its <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/TimeoutException.html?is-external=true" title="class or interface in java.util.concurrent">TimeoutException</a></code> - if the timeout expires first.</dd></dl>
</li>
</ul>
<a name="newBindingSetIterator(com.bigdata.bop.IBindingSet)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newBindingSetIterator</h4>
<pre>protected&nbsp;<a href="../../../../../../com/bigdata/relation/accesspath/ThickAsynchronousIterator.html" title="class in com.bigdata.relation.accesspath">ThickAsynchronousIterator</a>&lt;<a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>[]&gt;&nbsp;newBindingSetIterator(<a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop">IBindingSet</a>&nbsp;bindingSet)</pre>
<div class="block">Return an <a href="../../../../../../com/bigdata/relation/accesspath/IAsynchronousIterator.html" title="interface in com.bigdata.relation.accesspath"><code>IAsynchronousIterator</code></a> that will read a single
 <a href="../../../../../../com/bigdata/bop/IBindingSet.html" title="interface in com.bigdata.bop"><code>IBindingSet</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>bindingSet</code> - the binding set.</dd></dl>
</li>
</ul>
<a name="combineJoinStats()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>combineJoinStats</h4>
<pre>protected&nbsp;void&nbsp;combineJoinStats()</pre>
<div class="block">Aggregates statistics each <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a> onto <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html#ruleStats"><code>ruleStats</code></a>.
 There are N <a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinTask.html" title="class in com.bigdata.relation.rule.eval.pipeline"><code>JoinTask</code></a>s per <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a> in the tail of the
 rule, where N is the #of index partitions on which we must read to
 evaluate the <a href="../../../../../../com/bigdata/relation/rule/IRule.html" title="interface in com.bigdata.relation.rule"><code>IRule</code></a> for a given <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a> in the tail (N
 is per <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a>, not the same for each <a href="../../../../../../com/bigdata/bop/IPredicate.html" title="interface in com.bigdata.bop"><code>IPredicate</code></a>).</div>
</li>
</ul>
<a name="report(com.bigdata.relation.rule.eval.pipeline.JoinStats)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>report</h4>
<pre>public&nbsp;void&nbsp;report(<a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinStats.html" title="class in com.bigdata.relation.rule.eval.pipeline">JoinStats</a>&nbsp;joinStats)</pre>
<div class="block">Aggregates the statistics for some join dimension.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html#report(com.bigdata.relation.rule.eval.pipeline.JoinStats)">report</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html" title="interface in com.bigdata.relation.rule.eval.pipeline">IJoinMaster</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>joinStats</code> - Statistics for an index partition of some join dimension.</dd></dl>
</li>
</ul>
<a name="getSolutionBuffer()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getSolutionBuffer</h4>
<pre>public&nbsp;<a href="../../../../../../com/bigdata/relation/accesspath/IBuffer.html" title="interface in com.bigdata.relation.accesspath">IBuffer</a>&lt;<a href="../../../../../../com/bigdata/relation/rule/eval/ISolution.html" title="interface in com.bigdata.relation.rule.eval">ISolution</a>[]&gt;&nbsp;getSolutionBuffer()
                                       throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Returns the buffer specified to the ctor (overridden for distributed
 joins).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html#getSolutionBuffer()">getSolutionBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html" title="interface in com.bigdata.relation.rule.eval.pipeline">IJoinMaster</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/JoinMasterTask.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/IJoinMaster.html" title="interface in com.bigdata.relation.rule.eval.pipeline"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../../../com/bigdata/relation/rule/eval/pipeline/JoinStats.html" title="class in com.bigdata.relation.rule.eval.pipeline"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/bigdata/relation/rule/eval/pipeline/JoinMasterTask.html" target="_top">Frames</a></li>
<li><a href="JoinMasterTask.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li>Nested&nbsp;|&nbsp;</li>
<li><a href="#field_summary">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li><a href="#field_detail">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2019 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
