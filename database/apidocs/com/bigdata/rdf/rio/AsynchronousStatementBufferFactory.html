<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Tue Jan 26 05:10:53 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AsynchronousStatementBufferFactory (Blazegraph Database Platform 2.0.0 API)</title>
<meta name="date" content="2016-01-26">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AsynchronousStatementBufferFactory (Blazegraph Database Platform 2.0.0 API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsynchronousStatementBufferFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/rdf/rio/AbstractStatementBuffer.StatementBuffer2.html" title="class in com.bigdata.rdf.rio"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl.html" title="class in com.bigdata.rdf.rio"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" target="_top">Frames</a></li>
<li><a href="AsynchronousStatementBufferFactory.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rdf.rio</div>
<h2 title="Class AsynchronousStatementBufferFactory" class="title">Class AsynchronousStatementBufferFactory&lt;S extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>,R&gt;</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.rdf.rio.AsynchronousStatementBufferFactory&lt;S,R&gt;</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl><dt><span class="strong">Type Parameters:</span></dt><dd><code>S</code> - The generic type of the statement objects.</dd><dd><code>R</code> - The generic type of the resource identifier (File, URL, etc).
 
 FIXME Modify to support SIDs. We basically need to loop in the
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#workflowLatch_bufferTids"><code>workflowLatch_bufferTids</code></a> workflow state until all SIDs have been
 assigned. However, the termination conditions will be a little more complex.
 During termination, if we have the TIDs but not yet the SIDs then we need to
 flush the SID requests rather than allowing them to timeout. Since SID
 processing is cyclic, we may have to do this one or more times.
 
 <pre>
 AsynchronousStatementBufferWithSids:
 
 When SIDs are enabled, we must identify the minimum set of statements
 whose SIDs are referenced by blank nodes in the S, P, O positions of
 other statements.  Since we can not make that determination until we
 reach the end of the document, all statements which use blank nodes
 are placed into the deferredStatements container.
 
 Further, and unlike the synchronous StatementBuffer, we must defer
 writes of grounded statements until we know whether or not their SID
 appears in a blank node reference by another statement.  We MUST use
 synchronous RPC to obtain the SIDs for those statements.  This means
 that the entire document MUST be parsed into memory.  Since we must
 buffer the entire document in memory when SIDs are enabled (when using
 asynchronous writes), distinct implementations of the asynchronous
 statement buffer are used depending on whether or not SIDs are
 enabled. [Actually, we fully buffer anyway so we can use the same
 implementation class.]
 
 Once the end of the document has been reached, we iteratively divide
 the parsed statements into three collections.  This process ends once
 all three collections are empty.
 
    1. groundedStatements : These are statements which are not
       referenced by other statements using their SID and which do not
       contain references to the SIDs of other statements. The
       groundedStatements are written asynchronously since there is no
       dependency on their SIDs.
 
    2. referencedStatements : These are statements whose SID has not
       been assigned yet and which do not reference other statements
       but which are themselves referenced by other statements using a
       blank node. These statements are written using synchronous RPC
       so that we may obtain their SIDs and thereby convert one or more
       deferredStatements to either groundedStatements or
       referencedStatements.
 
    3. deferredStatements : These are statements using a blank node to
       reference another statement whose SID has not been assigned yet.
       These statements MAY also be referenced by other deferred
       statements.  However, those references MAY NOT form a cycle.
       Deferred statements are moved to either the groundedStatements
       or the referencedStatements collection once their blank node
       references have been assigned SIDs.
 
 Given:
 
 value[] - RDF Values observed in the S, P, O, and C positions.
 
 unresolvedRefs[] - RDF blank nodes observed in the C position are
            entered into this collection.  They are removed
            from the collection as they are resolved.
 
 statement[] - RDF Statements reported by the parser.
 
 Do:
 
 // remove blank nodes serving as SIDs from the value[].
 value[] := value[] - unresolvedRef[];
 
 value[] =&gt; TERM2ID (Sync RPC, assigning TIDs)
 
 value[] =&gt; ID2TERM (Async)
 
 value[] =&gt; Text (Async, iff enabled)
 
 // initially, all statements are deferred.
 deferredStatements := statements;
 
 while(!groundedStatements.isEmpty() &amp;&amp; !referencedStatements.isEmpty()
    &amp;&amp; !deferredStatements.isEmpty()) {
 
   groundedStatement[] =&gt; TERM2ID (async)
 
   groundedStatement[] := []; // empty.
 
   referencedStatement[] =&gt; TERM2ID (Sync RPC, assigning SIDs)
 
   foreach spo : referencedStatements {
 
     unresolvedRefs.remove( spo.c );
 
   }
 
   referencedStatement[] := []; // empty.
 
   foreach spo : deferredStatement[i] {
 
      if(spo.isGrounded) {
 
         // true iff S.tid, P.tid, and O.tid are bound, implying that
         // this statement does not have any unresolved references to
         // other statements.
 
     if(unresolvedReferences.contains(spo.c)) {
 
         // will be written synchronously.
         referencedStatements.add( spo );
 
     } else {
 
         // will be written asynchronously.
         groundedStatement.add( spo );
 
     }
 
      }
 
   }
 
 }
 </pre></dd></dl>
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../com/bigdata/rdf/load/IStatementBufferFactory.html" title="interface in com.bigdata.rdf.load">IStatementBufferFactory</a>&lt;S&gt;, <a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;S&gt;</dd>
</dl>
<hr>
<br>
<pre>public class <span class="strong">AsynchronousStatementBufferFactory&lt;S extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>,R&gt;</span>
extends <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a>
implements <a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;S&gt;</pre>
<div class="block">Factory object for high-volume RDF data load.
 <p>
 The asynchronous statement buffer w/o SIDs is much simpler that w/. If we
 require that the document is fully buffered in memory, then we can simplify
 this to just:
 
 <pre>
 
 Given:
 
 value[] - RDF Values observed in the S,P,O, or C positions.
 
 statement[] - RDF Statements reported by the parser.
 
 Do:
 
 value[] =&gt; TERM2ID (Sync RPC, assigning TIDs)
 value[] =&gt; BLOBS   (Sync RPC, assigning TIDs)
 
 value[] =&gt; ID2TERM (Async)
 
 value[] =&gt; Text (Async, iff enabled)
 
 statement[] =&gt; (SPO,POS,OSP) (Async)
 </pre>
 
 Note: This DOES NOT support truth maintenance. Truth maintenance requires
 that the term identifiers are resolved against the database's lexicon while
 the statements are written onto a local (and temporary) triple store. There
 is no (or at least less) reason to use asynchronous writes against a local
 store. However, TM could use this to copy the data from the temporary triple
 store to the database. This should be plugged in transparently in the
 copyStatements() API for the tripleStore.
 <p>
 Note: This DOES NOT support SIDS.</div>
<dl><dt><span class="strong">Version:</span></dt>
  <dd>$Id$</dd>
<dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl.html" title="class in com.bigdata.rdf.rio">AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl</a></strong></code>
<div class="block">Inner class provides the statement buffer.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.DeleteTask.html" title="class in com.bigdata.rdf.rio">AsynchronousStatementBufferFactory.DeleteTask</a></strong></code>
<div class="block">Task deletes a resource from the local file system.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected class&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.ParserTask.html" title="class in com.bigdata.rdf.rio">AsynchronousStatementBufferFactory.ParserTask</a></strong></code>
<div class="block">Tasks either loads a RDF resource or verifies that the told triples found
 in that resource are present in the database.</div>
</td>
</tr>
</table>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#AsynchronousStatementBufferFactory(com.bigdata.rdf.store.ScaleOutTripleStore,%20int,%20int,%20int,%20org.openrdf.rio.RDFFormat,%20java.lang.String,%20com.bigdata.rdf.rio.RDFParserOptions,%20boolean,%20int,%20int,%20int,%20int,%20int,%20long)">AsynchronousStatementBufferFactory</a></strong>(<a href="../../../../com/bigdata/rdf/store/ScaleOutTripleStore.html" title="class in com.bigdata.rdf.store">ScaleOutTripleStore</a>&nbsp;tripleStore,
                                  int&nbsp;producerChunkSize,
                                  int&nbsp;valuesInitialCapacity,
                                  int&nbsp;bnodesInitialCapacity,
                                  org.openrdf.rio.RDFFormat&nbsp;defaultFormat,
                                  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultGraph,
                                  <a href="../../../../com/bigdata/rdf/rio/RDFParserOptions.html" title="class in com.bigdata.rdf.rio">RDFParserOptions</a>&nbsp;parserOptions,
                                  boolean&nbsp;deleteAfter,
                                  int&nbsp;parserPoolSize,
                                  int&nbsp;parserQueueCapacity,
                                  int&nbsp;term2IdWriterPoolSize,
                                  int&nbsp;otherWriterPoolSize,
                                  int&nbsp;notifyPoolSize,
                                  long&nbsp;pauseParsedPoolStatementThreshold)</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#awaitAll()">awaitAll</a></strong>()</code>
<div class="block">Close buffers and then await their <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#cancelAll(boolean)">cancelAll</a></strong>(boolean&nbsp;mayInterruptIfRunning)</code>
<div class="block">Cancel all <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#close()">close</a></strong>()</code>
<div class="block">Awaits a signal that all documents which have queued writes are
 finished and then closes the remaining buffers.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#deleteResource(R)">deleteResource</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</code>
<div class="block">Delete a file whose data have been made restart safe on the database from
 the local file system (this must be overridden to handle resources which
 are not <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io"><code>File</code></a>s).</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#documentDone(R)">documentDone</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</code>
<div class="block">Invoked after a document has become restart safe.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#documentError(R,%20java.lang.Throwable)">documentError</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource,
             <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;t)</code>
<div class="block">Invoked after a document has failed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getCounters()">getCounters</a></strong>()</code>
<div class="block">Return performance counters defined by this factory.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected org.openrdf.rio.RDFFormat</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getDefaultRDFFormat()">getDefaultRDFFormat</a></strong>()</code>
<div class="block">The default RDF interchange format that will be used when the format can
 not be determined.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getDocumentDoneCount()">getDocumentDoneCount</a></strong>()</code>
<div class="block">The #of documents submitted to the factory which have been processed
 successfully.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getDocumentErrorCount()">getDocumentErrorCount</a></strong>()</code>
<div class="block">The #of documents submitted to the factory which could not be processed
 due to some error.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getElapsedMillis()">getElapsedMillis</a></strong>()</code>
<div class="block">The elapsed milliseconds, counting only the time between
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyStart()"><code>notifyStart()</code></a> and <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyEnd()"><code>notifyEnd()</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getInputStream(R)">getInputStream</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</code>
<div class="block">Open an buffered input stream reading from the resource.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>long</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getStatementCount()">getStatementCount</a></strong>()</code>
<div class="block">Return an estimate of the #of statements written on the indices.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#isAnyDone()">isAnyDone</a></strong>()</code>
<div class="block">Return <code>true</code> if the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for any of the
 asynchronous write buffers is done.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#isDeleteAfter()">isDeleteAfter</a></strong>()</code>
<div class="block">Delete files after they have been successfully loaded when
 <code>true</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newFailureTask(R,%20java.lang.Throwable)">newFailureTask</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource,
              <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;cause)</code>
<div class="block">Return the optional task to be executed for a resource for which
 processing has failed.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;?&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newParserTask(R)">newParserTask</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</code>
<div class="block">Return a task to parse the document.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="../../../../com/bigdata/rdf/rio/IStatementBuffer.html" title="interface in com.bigdata.rdf.rio">IStatementBuffer</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newStatementBuffer()">newStatementBuffer</a></strong>()</code>
<div class="block">Note: do not invoke this directly.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl.html" title="class in com.bigdata.rdf.rio">AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newStatementBuffer(R)">newStatementBuffer</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newSuccessTask(R)">newSuccessTask</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</code>
<div class="block">Return the optional task to be executed for a resource which has been
 successfully processed and whose assertions are now restart safe on the
 database.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyEnd()">notifyEnd</a></strong>()</code>
<div class="block">Notify that the factory is done running tasks (for now).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyStart()">notifyStart</a></strong>()</code>
<div class="block">Notify that the factory will begin running tasks.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>int</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#submitAll(java.io.File,%20java.io.FilenameFilter,%20long)">submitAll</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;fileOrDir,
         <a href="http://docs.oracle.com/javase/7/docs/api/java/io/FilenameFilter.html?is-external=true" title="class or interface in java.io">FilenameFilter</a>&nbsp;filter,
         long&nbsp;retryMillis)</code>
<div class="block">Submit all files in a directory for processing via
 <code>#submitOne(String)</code>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#submitOne(R)">submitOne</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</code>
<div class="block">Submit a resource for processing.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#submitOne(R,%20long)">submitOne</a></strong>(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource,
         long&nbsp;retryMillis)</code>
<div class="block">Submit a resource for processing.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#toString()">toString</a></strong>()</code>&nbsp;</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AsynchronousStatementBufferFactory(com.bigdata.rdf.store.ScaleOutTripleStore, int, int, int, org.openrdf.rio.RDFFormat, java.lang.String, com.bigdata.rdf.rio.RDFParserOptions, boolean, int, int, int, int, int, long)">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AsynchronousStatementBufferFactory</h4>
<pre>public&nbsp;AsynchronousStatementBufferFactory(<a href="../../../../com/bigdata/rdf/store/ScaleOutTripleStore.html" title="class in com.bigdata.rdf.store">ScaleOutTripleStore</a>&nbsp;tripleStore,
                                  int&nbsp;producerChunkSize,
                                  int&nbsp;valuesInitialCapacity,
                                  int&nbsp;bnodesInitialCapacity,
                                  org.openrdf.rio.RDFFormat&nbsp;defaultFormat,
                                  <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;defaultGraph,
                                  <a href="../../../../com/bigdata/rdf/rio/RDFParserOptions.html" title="class in com.bigdata.rdf.rio">RDFParserOptions</a>&nbsp;parserOptions,
                                  boolean&nbsp;deleteAfter,
                                  int&nbsp;parserPoolSize,
                                  int&nbsp;parserQueueCapacity,
                                  int&nbsp;term2IdWriterPoolSize,
                                  int&nbsp;otherWriterPoolSize,
                                  int&nbsp;notifyPoolSize,
                                  long&nbsp;pauseParsedPoolStatementThreshold)</pre>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>tripleStore</code> - </dd><dd><code>producerChunkSize</code> - The chunk size used when writing chunks onto the master for
            the asynchronous index write API. If this value is on the
            order of the #of terms or statements in the parsed documents,
            then all terms / statements will be written onto the master in
            one chunk. The master will split the chunk based on the
            separator keys for the index partitions and write splits onto
            the sink for each index partition. The master and sink
            configuration is specified via the <a href="../../../../com/bigdata/btree/IndexMetadata.html" title="class in com.bigdata.btree"><code>IndexMetadata</code></a> when
            the triple store indices are created.</dd><dd><code>valuesInitialCapacity</code> - The initial capacity of the map of the distinct RDF
            <code>Value</code>s parsed from a single document.</dd><dd><code>bnodesInitialCapacity</code> - The initial capacity of the map of the distinct RDF
            <code>BNode</code>s parsed from a single document.</dd><dd><code>defaultFormat</code> - The default <code>RDFFormat</code> which will be assumed.</dd><dd><code>defaultGraph</code> - The value that will be used for the graph/context co-ordinate when
            loading data represented in a triple format into a quad store. If
            not given, then the context will be the resource identifier for
            the resource being parsed.</dd><dd><code>parserOptions</code> - Options for the <code>RDFParser</code>.</dd><dd><code>deleteAfter</code> - <code>true</code> if the resource should be deleted once the
            statements from that resource are restart safe on the target
            database.</dd><dd><code>parserPoolSize</code> - The #of worker threads in the thread pool for parsing RDF
            documents.</dd><dd><code>parserQueueCapacity</code> - The capacity of the bounded work queue for the service running
            the parser tasks.</dd><dd><code>term2IdWriterPoolSize</code> - The #of worker threads in the thread pool for buffering
            asynchronous writes on the TERM2ID/BLOBS indices.</dd><dd><code>otherWriterPoolSize</code> - The #of worker threads in the thread pool for buffering
            asynchronous index writes on the other indices.</dd><dd><code>notifyPoolSize</code> - The #of worker threads in the thread pool for handling
            document success and document error notices.</dd><dd><code>pauseParsedPoolStatementThreshold</code> - The maximum #of statements which can be parsed but not yet
            buffered before requests for new parser tasks are paused [0:
            <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Long.html?is-external=true#MAX_VALUE" title="class or interface in java.lang"><code>Long.MAX_VALUE</code></a>]. This allows you to place a constraint
            on the RAM of the parsers. The RAM demand of the asynchronous
            index write buffers is controlled by their master and sink
            queue capacity and chunk size.</dd></dl>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="isDeleteAfter()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isDeleteAfter</h4>
<pre>protected&nbsp;boolean&nbsp;isDeleteAfter()</pre>
<div class="block">Delete files after they have been successfully loaded when
 <code>true</code>.</div>
</li>
</ul>
<a name="getDefaultRDFFormat()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultRDFFormat</h4>
<pre>protected&nbsp;org.openrdf.rio.RDFFormat&nbsp;getDefaultRDFFormat()</pre>
<div class="block">The default RDF interchange format that will be used when the format can
 not be determined.</div>
</li>
</ul>
<a name="notifyStart()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyStart</h4>
<pre>protected&nbsp;void&nbsp;notifyStart()</pre>
<div class="block">Notify that the factory will begin running tasks. This sets the
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#startTime"><code>startTime</code></a> used by <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#getElapsedMillis()"><code>getElapsedMillis()</code></a> to report the run
 time of the tasks.</div>
</li>
</ul>
<a name="notifyEnd()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>notifyEnd</h4>
<pre>protected&nbsp;void&nbsp;notifyEnd()</pre>
<div class="block">Notify that the factory is done running tasks (for now). This places a
 cap on the time reported by <code>#elapsed()</code>.</div>
</li>
</ul>
<a name="getElapsedMillis()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getElapsedMillis</h4>
<pre>public&nbsp;long&nbsp;getElapsedMillis()</pre>
<div class="block">The elapsed milliseconds, counting only the time between
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyStart()"><code>notifyStart()</code></a> and <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyEnd()"><code>notifyEnd()</code></a>.</div>
</li>
</ul>
<a name="getStatementCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getStatementCount</h4>
<pre>public&nbsp;long&nbsp;getStatementCount()</pre>
<div class="block">Return an estimate of the #of statements written on the indices.
 <p>
 This value is aggregated across any <a href="../../../../com/bigdata/rdf/rio/IStatementBuffer.html" title="interface in com.bigdata.rdf.rio"><code>IStatementBuffer</code></a> obtained
 from <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newStatementBuffer()"><code>newStatementBuffer()</code></a> for this instance.
 <p>
 This value actually reports the #of statements written on the SPO index
 for the database. Statements are written asynchronously in chunks and the
 writes MAY proceed at different rates for each of the statement indices.
 The counter value will be stable once the <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#awaitAll()"><code>awaitAll()</code></a> returns
 normally.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../com/bigdata/rdf/spo/SPOIndexWriteProc.html" title="class in com.bigdata.rdf.spo"><code>SPOIndexWriteProc</code></a></dd></dl>
</li>
</ul>
<a name="getDocumentErrorCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDocumentErrorCount</h4>
<pre>public&nbsp;long&nbsp;getDocumentErrorCount()</pre>
<div class="block">The #of documents submitted to the factory which could not be processed
 due to some error.</div>
</li>
</ul>
<a name="getDocumentDoneCount()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDocumentDoneCount</h4>
<pre>public&nbsp;long&nbsp;getDocumentDoneCount()</pre>
<div class="block">The #of documents submitted to the factory which have been processed
 successfully.</div>
</li>
</ul>
<a name="newStatementBuffer()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newStatementBuffer</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/rdf/rio/IStatementBuffer.html" title="interface in com.bigdata.rdf.rio">IStatementBuffer</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a>&gt;&nbsp;newStatementBuffer()</pre>
<div class="block">Note: do not invoke this directly. It does not know how to set the
 resource identifier on the statement buffer impl.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rdf/load/IStatementBufferFactory.html#newStatementBuffer()">newStatementBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rdf/load/IStatementBufferFactory.html" title="interface in com.bigdata.rdf.load">IStatementBufferFactory</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a> extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>&gt;</code></dd>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#newStatementBuffer()">newStatementBuffer</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a> extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="newStatementBuffer(java.lang.Object)">
<!--   -->
</a><a name="newStatementBuffer(R)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newStatementBuffer</h4>
<pre>protected&nbsp;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl.html" title="class in com.bigdata.rdf.rio">AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl</a>&nbsp;newStatementBuffer(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</pre>
</li>
</ul>
<a name="submitOne(java.lang.Object)">
<!--   -->
</a><a name="submitOne(R)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submitOne</h4>
<pre>public&nbsp;void&nbsp;submitOne(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)
               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Submit a resource for processing.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The resource (file or URL, but not a directory).</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - if there is a problem creating the parser task.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">RejectedExecutionException</a></code> - if the work queue for the parser service is full.</dd></dl>
</li>
</ul>
<a name="submitOne(java.lang.Object,long)">
<!--   -->
</a><a name="submitOne(R, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submitOne</h4>
<pre>public&nbsp;void&nbsp;submitOne(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource,
             long&nbsp;retryMillis)
               throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Submit a resource for processing.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The resource (file or URL, but not a directory).</dd><dd><code>retryMillis</code> - The number of milliseconds to wait between retries when the
            parser service work queue is full. When ZERO (0L), a
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionException.html?is-external=true" title="class or interface in java.util.concurrent"><code>RejectedExecutionException</code></a> will be thrown out instead.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code> - if there is a problem creating the parser task.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">RejectedExecutionException</a></code> - if the service is shutdown -or- the retryMillis is ZERO(0L).</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code></dd></dl>
</li>
</ul>
<a name="submitAll(java.io.File, java.io.FilenameFilter, long)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>submitAll</h4>
<pre>public&nbsp;int&nbsp;submitAll(<a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io">File</a>&nbsp;fileOrDir,
            <a href="http://docs.oracle.com/javase/7/docs/api/java/io/FilenameFilter.html?is-external=true" title="class or interface in java.io">FilenameFilter</a>&nbsp;filter,
            long&nbsp;retryMillis)
              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Submit all files in a directory for processing via
 <code>#submitOne(String)</code>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>fileOrDir</code> - The file or directory.</dd><dd><code>filter</code> - An optional filter. Only the files selected by the filter will
            be processed.</dd><dd><code>retryMillis</code> - The number of milliseconds to wait between retries when the
            parser service work queue is full. When ZERO (0L), a
            <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/RejectedExecutionException.html?is-external=true" title="class or interface in java.util.concurrent"><code>RejectedExecutionException</code></a> will be thrown out instead.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The #of files that were submitted for processing.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="getInputStream(java.lang.Object)">
<!--   -->
</a><a name="getInputStream(R)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getInputStream</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io">InputStream</a>&nbsp;getInputStream(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)
                              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Open an buffered input stream reading from the resource. If the resource
 ends with <code>.gz</code> or <code>.zip</code> then the appropriate
 decompression will be applied.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The resource identifier.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd></dl>
</li>
</ul>
<a name="newParserTask(java.lang.Object)">
<!--   -->
</a><a name="newParserTask(R)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newParserTask</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Callable.html?is-external=true" title="class or interface in java.util.concurrent">Callable</a>&lt;?&gt;&nbsp;newParserTask(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)
                             throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></pre>
<div class="block">Return a task to parse the document. The task should allocate an
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl.html" title="class in com.bigdata.rdf.rio"><code>AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl</code></a> for the document. When
 that buffer is flushed, the document will be queued for further
 processing.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The resource to be parsed.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The task to execute.</dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Exception.html?is-external=true" title="class or interface in java.lang">Exception</a></code></dd></dl>
</li>
</ul>
<a name="toString()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;toString()</pre>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#toString()" title="class or interface in java.lang">toString</a></code>&nbsp;in class&nbsp;<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></code></dd>
</dl>
</li>
</ul>
<a name="isAnyDone()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>isAnyDone</h4>
<pre>public&nbsp;boolean&nbsp;isAnyDone()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#isAnyDone()">IAsynchronousWriteStatementBufferFactory</a></code></strong></div>
<div class="block">Return <code>true</code> if the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> for any of the
 asynchronous write buffers is done.
 <p>
 Note: This method should be invoked periodically to verify that no
 errors have been encountered by the asynchronous write buffers. If
 this method returns <code>true</code>, invoke <a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#awaitAll()"><code>IAsynchronousWriteStatementBufferFactory.awaitAll()</code></a>,
 which will detect any error(s), cancel the other <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s,
 and throw an error back to you.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#isAnyDone()">isAnyDone</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a> extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="cancelAll(boolean)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>cancelAll</h4>
<pre>public&nbsp;void&nbsp;cancelAll(boolean&nbsp;mayInterruptIfRunning)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#cancelAll(boolean)">IAsynchronousWriteStatementBufferFactory</a></code></strong></div>
<div class="block">Cancel all <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s. The buffers will be automatically closed
 when their <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s are canceled.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#cancelAll(boolean)">cancelAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a> extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="close()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>close</h4>
<pre>public&nbsp;void&nbsp;close()</pre>
<div class="block">Awaits a signal that all documents which have queued writes are
 finished and then closes the remaining buffers.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#close()">close</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a> extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>&gt;</code></dd>
</dl>
</li>
</ul>
<a name="awaitAll()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>awaitAll</h4>
<pre>public&nbsp;void&nbsp;awaitAll()
              throws <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a>,
                     <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#awaitAll()">IAsynchronousWriteStatementBufferFactory</a></code></strong></div>
<div class="block">Close buffers and then await their <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s. Once closed, the
 buffers will not accept further input and the consumers will
 eventually drain the buffers and report that they are exhausted. The
 <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s will become available once the iterators are
 exhausted.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#awaitAll()">awaitAll</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a> extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>&gt;</code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/InterruptedException.html?is-external=true" title="class or interface in java.lang">InterruptedException</a></code> - if interrupted while awaiting any of the <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a>s.</dd>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/ExecutionException.html?is-external=true" title="class or interface in java.util.concurrent">ExecutionException</a></code> - if any <a href="http://docs.oracle.com/javase/7/docs/api/java/util/concurrent/Future.html?is-external=true" title="class or interface in java.util.concurrent"><code>Future</code></a> fails.</dd></dl>
</li>
</ul>
<a name="documentDone(java.lang.Object)">
<!--   -->
</a><a name="documentDone(R)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>documentDone</h4>
<pre>protected final&nbsp;void&nbsp;documentDone(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</pre>
<div class="block">Invoked after a document has become restart safe. If
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newSuccessTask(R)"><code>newSuccessTask(Object)</code></a> returns a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a> then that will
 be executed on the <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyService"><code>notifyService</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The document identifier.</dd></dl>
</li>
</ul>
<a name="documentError(java.lang.Object,java.lang.Throwable)">
<!--   -->
</a><a name="documentError(R, java.lang.Throwable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>documentError</h4>
<pre>protected final&nbsp;void&nbsp;documentError(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource,
                 <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;t)</pre>
<div class="block">Invoked after a document has failed. If
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#newFailureTask(R,%20java.lang.Throwable)"><code>newFailureTask(Object, Throwable)</code></a> returns a <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang"><code>Runnable</code></a>
 then that will be executed on the <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyService"><code>notifyService</code></a>.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The document identifier.</dd><dd><code>t</code> - The exception.</dd></dl>
</li>
</ul>
<a name="newSuccessTask(java.lang.Object)">
<!--   -->
</a><a name="newSuccessTask(R)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newSuccessTask</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;newSuccessTask(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</pre>
<div class="block">Return the optional task to be executed for a resource which has been
 successfully processed and whose assertions are now restart safe on the
 database. The task, if any, will be run on the <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyService"><code>notifyService</code></a>.
 <p>
 The default implementation runs a <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.DeleteTask.html" title="class in com.bigdata.rdf.rio"><code>AsynchronousStatementBufferFactory.DeleteTask</code></a> IFF
 <i>deleteAfter</i> was specified as <code>true</code> to the ctor and
 otherwise returns <code>null</code>. The event is logged @ INFO.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The resource.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The task to run -or- <code>null</code> if no task should be run.</dd></dl>
</li>
</ul>
<a name="newFailureTask(java.lang.Object,java.lang.Throwable)">
<!--   -->
</a><a name="newFailureTask(R, java.lang.Throwable)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>newFailureTask</h4>
<pre>protected&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Runnable.html?is-external=true" title="class or interface in java.lang">Runnable</a>&nbsp;newFailureTask(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource,
                      <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Throwable.html?is-external=true" title="class or interface in java.lang">Throwable</a>&nbsp;cause)</pre>
<div class="block">Return the optional task to be executed for a resource for which
 processing has failed. The task, if any, will be run on the
 <a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html#notifyService"><code>notifyService</code></a>.
 <p>
 The default implementation logs a message @ ERROR.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The resource.</dd><dd><code>cause</code> - The cause.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The task to run -or- <code>null</code> if no task should be
         run.</dd></dl>
</li>
</ul>
<a name="deleteResource(java.lang.Object)">
<!--   -->
</a><a name="deleteResource(R)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>deleteResource</h4>
<pre>protected&nbsp;void&nbsp;deleteResource(<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">R</a>&nbsp;resource)</pre>
<div class="block">Delete a file whose data have been made restart safe on the database from
 the local file system (this must be overridden to handle resources which
 are not <a href="http://docs.oracle.com/javase/7/docs/api/java/io/File.html?is-external=true" title="class or interface in java.io"><code>File</code></a>s).</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>resource</code> - The resource.</dd></dl>
</li>
</ul>
<a name="getCounters()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getCounters</h4>
<pre>public&nbsp;<a href="../../../../com/bigdata/counters/CounterSet.html" title="class in com.bigdata.counters">CounterSet</a>&nbsp;getCounters()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#getCounters()">IAsynchronousWriteStatementBufferFactory</a></code></strong></div>
<div class="block">Return performance counters defined by this factory.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html#getCounters()">getCounters</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../com/bigdata/rdf/rio/IAsynchronousWriteStatementBufferFactory.html" title="interface in com.bigdata.rdf.rio">IAsynchronousWriteStatementBufferFactory</a>&lt;<a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" title="type parameter in AsynchronousStatementBufferFactory">S</a> extends <a href="../../../../com/bigdata/rdf/model/BigdataStatement.html" title="interface in com.bigdata.rdf.model">BigdataStatement</a>&gt;</code></dd>
</dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AsynchronousStatementBufferFactory.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../index-all.html">Index</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li><a href="../../../../com/bigdata/rdf/rio/AbstractStatementBuffer.StatementBuffer2.html" title="class in com.bigdata.rdf.rio"><span class="strong">Prev Class</span></a></li>
<li><a href="../../../../com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.AsynchronousStatementBufferImpl.html" title="class in com.bigdata.rdf.rio"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?com/bigdata/rdf/rio/AsynchronousStatementBufferFactory.html" target="_top">Frames</a></li>
<li><a href="AsynchronousStatementBufferFactory.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
