<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (version 1.7.0_79) on Tue Jan 26 02:03:32 UTC 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<title>AbstractHostLBSPolicy (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)</title>
<meta name="date" content="2016-01-26">
<link rel="stylesheet" type="text/css" href="../../../../../../stylesheet.css" title="Style">
</head>
<body>
<script type="text/javascript"><!--
    if (location.href.indexOf('is-external=true') == -1) {
        parent.document.title="AbstractHostLBSPolicy (Blazegraph Database Platform 2.0.0-master-SNAPSHOT API)";
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar_top">
<!--   -->
</a><a href="#skip-navbar_top" title="Skip navigation links"></a><a name="navbar_top_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractHostLBSPolicy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.InitParams.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html" target="_top">Frames</a></li>
<li><a href="AbstractHostLBSPolicy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.rdf.sail.webapp.lbs.AbstractLBSPolicy">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<!-- ======== START OF CLASS DATA ======== -->
<div class="header">
<div class="subTitle">com.bigdata.rdf.sail.webapp.lbs</div>
<h2 title="Class AbstractHostLBSPolicy" class="title">Class AbstractHostLBSPolicy</h2>
</div>
<div class="contentContainer">
<ul class="inheritance">
<li><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">java.lang.Object</a></li>
<li>
<ul class="inheritance">
<li><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">com.bigdata.rdf.sail.webapp.lbs.AbstractLBSPolicy</a></li>
<li>
<ul class="inheritance">
<li>com.bigdata.rdf.sail.webapp.lbs.AbstractHostLBSPolicy</li>
</ul>
</li>
</ul>
</li>
</ul>
<div class="description">
<ul class="blockList">
<li class="blockList">
<dl>
<dt>All Implemented Interfaces:</dt>
<dd><a href="../../../../../../com/bigdata/quorum/QuorumListener.html" title="interface in com.bigdata.quorum">QuorumListener</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHALoadBalancerPolicy.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHALoadBalancerPolicy</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHAPolicyLifeCycle.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHAPolicyLifeCycle</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/io/Serializable.html?is-external=true" title="class or interface in java.io">Serializable</a></dd>
</dl>
<dl>
<dt>Direct Known Subclasses:</dt>
<dd><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/policy/counters/CountersLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs.policy.counters">CountersLBSPolicy</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/policy/ganglia/GangliaLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs.policy.ganglia">GangliaLBSPolicy</a></dd>
</dl>
<hr>
<br>
<pre>public abstract class <span class="strong">AbstractHostLBSPolicy</span>
extends <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></pre>
<div class="block">Abstract base class for an LBS policy that uses per-host load metrics.</div>
<dl><dt><span class="strong">Author:</span></dt>
  <dd><a href="mailto:thompsonbry@users.sourceforge.net">Bryan Thompson</a></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../serialized-form.html#com.bigdata.rdf.sail.webapp.lbs.AbstractHostLBSPolicy">Serialized Form</a></dd></dl>
</li>
</ul>
</div>
<div class="summary">
<ul class="blockList">
<li class="blockList">
<!-- ======== NESTED CLASS SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="nested_class_summary">
<!--   -->
</a>
<h3>Nested Class Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Nested Class Summary table, listing nested classes, and an explanation">
<caption><span>Nested Classes</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Class and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>static interface&nbsp;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.InitParams.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">AbstractHostLBSPolicy.InitParams</a></strong></code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- =========== FIELD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="field_summary">
<!--   -->
</a>
<h3>Field Summary</h3>
<ul class="blockList">
<li class="blockList"><a name="fields_inherited_from_class_com.bigdata.rdf.sail.webapp.lbs.AbstractLBSPolicy">
<!--   -->
</a>
<h3>Fields inherited from class&nbsp;com.bigdata.rdf.sail.webapp.lbs.<a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></h3>
<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#journalRef">journalRef</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#serviceIDRef">serviceIDRef</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#serviceTableRef">serviceTableRef</a></code></li>
</ul>
</li>
</ul>
<!-- ======== CONSTRUCTOR SUMMARY ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_summary">
<!--   -->
</a>
<h3>Constructor Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Constructor Summary table, listing constructors, and an explanation">
<caption><span>Constructors</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colOne" scope="col">Constructor and Description</th>
</tr>
<tr class="altColor">
<td class="colOne"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#AbstractHostLBSPolicy()">AbstractHostLBSPolicy</a></strong>()</code>&nbsp;</td>
</tr>
</table>
</li>
</ul>
<!-- ========== METHOD SUMMARY =========== -->
<ul class="blockList">
<li class="blockList"><a name="method_summary">
<!--   -->
</a>
<h3>Method Summary</h3>
<table class="overviewSummary" border="0" cellpadding="3" cellspacing="0" summary="Method Summary table, listing methods, and an explanation">
<caption><span>Methods</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Modifier and Type</th>
<th class="colLast" scope="col">Method and Description</th>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected boolean</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#conditionallyForwardReadRequest(com.bigdata.rdf.sail.webapp.HALoadBalancerServlet,%20javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse)">conditionallyForwardReadRequest</a></strong>(<a href="../../../../../../com/bigdata/rdf/sail/webapp/HALoadBalancerServlet.html" title="class in com.bigdata.rdf.sail.webapp">HALoadBalancerServlet</a>&nbsp;servlet,
                               javax.servlet.http.HttpServletRequest&nbsp;request,
                               javax.servlet.http.HttpServletResponse&nbsp;response)</code>
<div class="block">Hook provides the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHALoadBalancerPolicy.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><code>IHALoadBalancerPolicy</code></a> with an opportunity to
 forward a read-request to the local service rather than proxying the
 request to a service selected by the load balancer (a local forward has
 less overhead than proxying to either the local host or a remote service,
 which makes it more efficient under some circumstances to handle the
 read-request on the service where it was originally received).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#conditionallyUpdateServiceTable()">conditionallyUpdateServiceTable</a></strong>()</code>
<div class="block">Extended to conditionally update the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#hostTableRef"><code>hostTableRef</code></a> iff it does
 not exist or is empty.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#destroy()">destroy</a></strong>()</code>
<div class="block">Destroy the policy (stop any asynchronous processing, release any
 resources).</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#getDefaultScoringRule()">getDefaultScoringRule</a></strong>()</code>
<div class="block">Return the name of the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostScoringRule.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><code>IHostScoringRule</code></a> that provides default
 value for the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.InitParams.html#HOST_SCORING_RULE"><code>AbstractHostLBSPolicy.InitParams.HOST_SCORING_RULE</code></a> configuration
 parameter.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected long</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#getHostDiscoveryDelay()">getHostDiscoveryDelay</a></strong>()</code>
<div class="block">The delay between discovery cycles that updates our local knowledge of
 the load on each host.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected abstract <a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostMetrics.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHostMetrics</a>&gt;</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#getHostReportForKnownServices(com.bigdata.rdf.sail.webapp.lbs.IHostScoringRule,%20com.bigdata.rdf.sail.webapp.lbs.ServiceScore[])">getHostReportForKnownServices</a></strong>(<a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostScoringRule.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHostScoringRule</a>&nbsp;scoringRule,
                             <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/ServiceScore.html" title="class in com.bigdata.rdf.sail.webapp.lbs">ServiceScore</a>[]&nbsp;serviceScores)</code>
<div class="block">Return a map from the known canonical hostnames (as self-reported by the
 services) of the joined services to the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostMetrics.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><code>IHostMetrics</code></a>s for those
 hosts.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a></code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#getReaderURI(javax.servlet.http.HttpServletRequest)">getReaderURI</a></strong>(javax.servlet.http.HttpServletRequest&nbsp;req)</code>
<div class="block">Return the Request-URL to which a <strong>read-only</strong> request will
 be proxied.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#init(javax.servlet.ServletConfig,%20com.bigdata.journal.IIndexManager)">init</a></strong>(javax.servlet.ServletConfig&nbsp;servletConfig,
    <a href="../../../../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal">IIndexManager</a>&nbsp;indexManager)</code>
<div class="block">Initialize the policy.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#setLocalForwardThreshold(double)">setLocalForwardThreshold</a></strong>(double&nbsp;newValue)</code>&nbsp;</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#toString(java.lang.StringBuilder)">toString</a></strong>(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;sb)</code>
<div class="block">Extension hook for <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#toString()"><code>AbstractLBSPolicy.toString()</code></a> - implementation MUST NOT block.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#updateHostTable()">updateHostTable</a></strong>()</code>
<div class="block">Update the per-host scoring table.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><code>protected void</code></td>
<td class="colLast"><code><strong><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#updateServiceTable()">updateServiceTable</a></strong>()</code>
<div class="block">Overridden to also update the hosts table in case we add/remove a service
 and the set of hosts that cover the member services is changed as a
 result.</div>
</td>
</tr>
</table>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_com.bigdata.rdf.sail.webapp.lbs.AbstractLBSPolicy">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;com.bigdata.rdf.sail.webapp.lbs.<a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></h3>
<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#getJournal()">getJournal</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#getLeaderURI(javax.servlet.http.HttpServletRequest)">getLeaderURI</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#getLocalServiceScore()">getLocalServiceScore</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#getServiceScoreForHostname(java.lang.String)">getServiceScoreForHostname</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#notify(com.bigdata.quorum.QuorumEvent)">notify</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#service(boolean,%20com.bigdata.rdf.sail.webapp.HALoadBalancerServlet,%20javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse)">service</a>, <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#toString()">toString</a></code></li>
</ul>
<ul class="blockList">
<li class="blockList"><a name="methods_inherited_from_class_java.lang.Object">
<!--   -->
</a>
<h3>Methods inherited from class&nbsp;java.lang.<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true" title="class or interface in java.lang">Object</a></h3>
<code><a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#clone()" title="class or interface in java.lang">clone</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#equals(java.lang.Object)" title="class or interface in java.lang">equals</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#finalize()" title="class or interface in java.lang">finalize</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#getClass()" title="class or interface in java.lang">getClass</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#hashCode()" title="class or interface in java.lang">hashCode</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notify()" title="class or interface in java.lang">notify</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#notifyAll()" title="class or interface in java.lang">notifyAll</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait()" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long)" title="class or interface in java.lang">wait</a>, <a href="http://docs.oracle.com/javase/7/docs/api/java/lang/Object.html?is-external=true#wait(long,%20int)" title="class or interface in java.lang">wait</a></code></li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
<div class="details">
<ul class="blockList">
<li class="blockList">
<!-- ========= CONSTRUCTOR DETAIL ======== -->
<ul class="blockList">
<li class="blockList"><a name="constructor_detail">
<!--   -->
</a>
<h3>Constructor Detail</h3>
<a name="AbstractHostLBSPolicy()">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>AbstractHostLBSPolicy</h4>
<pre>public&nbsp;AbstractHostLBSPolicy()</pre>
</li>
</ul>
</li>
</ul>
<!-- ============ METHOD DETAIL ========== -->
<ul class="blockList">
<li class="blockList"><a name="method_detail">
<!--   -->
</a>
<h3>Method Detail</h3>
<a name="getDefaultScoringRule()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getDefaultScoringRule</h4>
<pre>protected abstract&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getDefaultScoringRule()</pre>
<div class="block">Return the name of the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostScoringRule.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><code>IHostScoringRule</code></a> that provides default
 value for the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.InitParams.html#HOST_SCORING_RULE"><code>AbstractHostLBSPolicy.InitParams.HOST_SCORING_RULE</code></a> configuration
 parameter.
 <p>
 Note: The policy needs to be specific to the LBS implementation since the
 names of the host metrics depend on the system that is being used to
 collect and report them.</div>
</li>
</ul>
<a name="getHostDiscoveryDelay()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getHostDiscoveryDelay</h4>
<pre>protected&nbsp;long&nbsp;getHostDiscoveryDelay()</pre>
<div class="block">The delay between discovery cycles that updates our local knowledge of
 the load on each host.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.InitParams.html#HOST_DISCOVERY_DELAY"><code>AbstractHostLBSPolicy.InitParams.HOST_DISCOVERY_DELAY</code></a></dd></dl>
</li>
</ul>
<a name="toString(java.lang.StringBuilder)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>toString</h4>
<pre>protected&nbsp;void&nbsp;toString(<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/StringBuilder.html?is-external=true" title="class or interface in java.lang">StringBuilder</a>&nbsp;sb)</pre>
<div class="block"><strong>Description copied from class:&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#toString(java.lang.StringBuilder)">AbstractLBSPolicy</a></code></strong></div>
<div class="block">Extension hook for <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#toString()"><code>AbstractLBSPolicy.toString()</code></a> - implementation MUST NOT block.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#toString(java.lang.StringBuilder)">toString</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></code></dd>
<dt><span class="strong">Parameters:</span></dt><dd><code>sb</code> - Buffer where you can write additional state.</dd></dl>
</li>
</ul>
<a name="init(javax.servlet.ServletConfig, com.bigdata.journal.IIndexManager)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>init</h4>
<pre>public&nbsp;void&nbsp;init(javax.servlet.ServletConfig&nbsp;servletConfig,
        <a href="../../../../../../com/bigdata/journal/IIndexManager.html" title="interface in com.bigdata.journal">IIndexManager</a>&nbsp;indexManager)
          throws javax.servlet.ServletException</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHAPolicyLifeCycle.html#init(javax.servlet.ServletConfig,%20com.bigdata.journal.IIndexManager)">IHAPolicyLifeCycle</a></code></strong></div>
<div class="block">Initialize the policy.</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHAPolicyLifeCycle.html#init(javax.servlet.ServletConfig,%20com.bigdata.journal.IIndexManager)">init</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHAPolicyLifeCycle.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHAPolicyLifeCycle</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#init(javax.servlet.ServletConfig,%20com.bigdata.journal.IIndexManager)">init</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code>javax.servlet.ServletException</code></dd></dl>
</li>
</ul>
<a name="destroy()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>destroy</h4>
<pre>public&nbsp;void&nbsp;destroy()</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHAPolicyLifeCycle.html#destroy()">IHAPolicyLifeCycle</a></code></strong></div>
<div class="block">Destroy the policy (stop any asynchronous processing, release any
 resources).</div>
<dl>
<dt><strong>Specified by:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHAPolicyLifeCycle.html#destroy()">destroy</a></code>&nbsp;in interface&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHAPolicyLifeCycle.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHAPolicyLifeCycle</a></code></dd>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#destroy()">destroy</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></code></dd>
</dl>
</li>
</ul>
<a name="setLocalForwardThreshold(double)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>setLocalForwardThreshold</h4>
<pre>public&nbsp;void&nbsp;setLocalForwardThreshold(double&nbsp;newValue)</pre>
</li>
</ul>
<a name="conditionallyUpdateServiceTable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conditionallyUpdateServiceTable</h4>
<pre>protected&nbsp;void&nbsp;conditionallyUpdateServiceTable()</pre>
<div class="block">Extended to conditionally update the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#hostTableRef"><code>hostTableRef</code></a> iff it does
 not exist or is empty.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#conditionallyUpdateServiceTable()">conditionallyUpdateServiceTable</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></code></dd>
</dl>
</li>
</ul>
<a name="updateServiceTable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateServiceTable</h4>
<pre>protected&nbsp;void&nbsp;updateServiceTable()</pre>
<div class="block">Overridden to also update the hosts table in case we add/remove a service
 and the set of hosts that cover the member services is changed as a
 result.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#updateServiceTable()">updateServiceTable</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></code></dd>
<dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#serviceTableRef"><code>AbstractLBSPolicy.serviceTableRef</code></a></dd></dl>
</li>
</ul>
<a name="updateHostTable()">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>updateHostTable</h4>
<pre>protected&nbsp;void&nbsp;updateHostTable()</pre>
<div class="block">Update the per-host scoring table. The host table will only contain
 entries for hosts associated with at least one service that is joined
 with the met quorum.</div>
<dl><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html#hostTableRef"><code>hostTableRef</code></a></dd></dl>
</li>
</ul>
<a name="getReaderURI(javax.servlet.http.HttpServletRequest)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>getReaderURI</h4>
<pre>public&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>&nbsp;getReaderURI(javax.servlet.http.HttpServletRequest&nbsp;req)</pre>
<div class="block"><strong>Description copied from interface:&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHALoadBalancerPolicy.html#getReaderURI(javax.servlet.http.HttpServletRequest)">IHALoadBalancerPolicy</a></code></strong></div>
<div class="block">Return the Request-URL to which a <strong>read-only</strong> request will
 be proxied. The returned URL must include the protocol, hostname and port
 (if a non-default port will be used) as well as the target request path.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>req</code> - The request.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The proxyTo Request-URI -or- <code>null</code> if we could not
         find a service to which we could proxy this request.</dd></dl>
</li>
</ul>
<a name="conditionallyForwardReadRequest(com.bigdata.rdf.sail.webapp.HALoadBalancerServlet, javax.servlet.http.HttpServletRequest, javax.servlet.http.HttpServletResponse)">
<!--   -->
</a>
<ul class="blockList">
<li class="blockList">
<h4>conditionallyForwardReadRequest</h4>
<pre>protected&nbsp;boolean&nbsp;conditionallyForwardReadRequest(<a href="../../../../../../com/bigdata/rdf/sail/webapp/HALoadBalancerServlet.html" title="class in com.bigdata.rdf.sail.webapp">HALoadBalancerServlet</a>&nbsp;servlet,
                                      javax.servlet.http.HttpServletRequest&nbsp;request,
                                      javax.servlet.http.HttpServletResponse&nbsp;response)
                                           throws <a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></pre>
<div class="block">Hook provides the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHALoadBalancerPolicy.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><code>IHALoadBalancerPolicy</code></a> with an opportunity to
 forward a read-request to the local service rather than proxying the
 request to a service selected by the load balancer (a local forward has
 less overhead than proxying to either the local host or a remote service,
 which makes it more efficient under some circumstances to handle the
 read-request on the service where it was originally received).
 <p>
 If the normalized availability for this host is over a configured
 threshold, then we forward the request to the local service. This help to
 reduce the latency of the request since it is not being proxied.</div>
<dl>
<dt><strong>Overrides:</strong></dt>
<dd><code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html#conditionallyForwardReadRequest(com.bigdata.rdf.sail.webapp.HALoadBalancerServlet,%20javax.servlet.http.HttpServletRequest,%20javax.servlet.http.HttpServletResponse)">conditionallyForwardReadRequest</a></code>&nbsp;in class&nbsp;<code><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractLBSPolicy.html" title="class in com.bigdata.rdf.sail.webapp.lbs">AbstractLBSPolicy</a></code></dd>
<dt><span class="strong">Throws:</span></dt>
<dd><code><a href="http://docs.oracle.com/javase/7/docs/api/java/io/IOException.html?is-external=true" title="class or interface in java.io">IOException</a></code></dd><dt><span class="strong">See Also:</span></dt><dd><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.InitParams.html#LOCAL_FORWARD_THRESHOLD"><code>AbstractHostLBSPolicy.InitParams.LOCAL_FORWARD_THRESHOLD</code></a></dd></dl>
</li>
</ul>
<a name="getHostReportForKnownServices(com.bigdata.rdf.sail.webapp.lbs.IHostScoringRule, com.bigdata.rdf.sail.webapp.lbs.ServiceScore[])">
<!--   -->
</a>
<ul class="blockListLast">
<li class="blockList">
<h4>getHostReportForKnownServices</h4>
<pre>protected abstract&nbsp;<a href="http://docs.oracle.com/javase/7/docs/api/java/util/Map.html?is-external=true" title="class or interface in java.util">Map</a>&lt;<a href="http://docs.oracle.com/javase/7/docs/api/java/lang/String.html?is-external=true" title="class or interface in java.lang">String</a>,<a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostMetrics.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHostMetrics</a>&gt;&nbsp;getHostReportForKnownServices(<a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostScoringRule.html" title="interface in com.bigdata.rdf.sail.webapp.lbs">IHostScoringRule</a>&nbsp;scoringRule,
                                                     <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/ServiceScore.html" title="class in com.bigdata.rdf.sail.webapp.lbs">ServiceScore</a>[]&nbsp;serviceScores)</pre>
<div class="block">Return a map from the known canonical hostnames (as self-reported by the
 services) of the joined services to the <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostMetrics.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><code>IHostMetrics</code></a>s for those
 hosts.</div>
<dl><dt><span class="strong">Parameters:</span></dt><dd><code>scoringRule</code> - The <a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/IHostScoringRule.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><code>IHostScoringRule</code></a> to be applied.</dd><dd><code>serviceScores</code> - The set of known services.</dd>
<dt><span class="strong">Returns:</span></dt><dd>The map.
 
         TODO If there is more than one service on the same host, then we
         will have one record per host, not per service. This means that
         we can not support JVM specific metrics, such as GC time. This
         could be fixed if the map was indexed by Service <a href="http://docs.oracle.com/javase/7/docs/api/java/util/UUID.html?is-external=true" title="class or interface in java.util"><code>UUID</code></a> and
         the host metrics were combined into the map once for each
         service.</dd></dl>
</li>
</ul>
</li>
</ul>
</li>
</ul>
</div>
</div>
<!-- ========= END OF CLASS DATA ========= -->
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar_bottom">
<!--   -->
</a><a href="#skip-navbar_bottom" title="Skip navigation links"></a><a name="navbar_bottom_firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../../../overview-summary.html">Overview</a></li>
<li><a href="package-summary.html">Package</a></li>
<li class="navBarCell1Rev">Class</li>
<li><a href="class-use/AbstractHostLBSPolicy.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../../../index-all.html">Index</a></li>
<li><a href="../../../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev Class</li>
<li><a href="../../../../../../com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.InitParams.html" title="interface in com.bigdata.rdf.sail.webapp.lbs"><span class="strong">Next Class</span></a></li>
</ul>
<ul class="navList">
<li><a href="../../../../../../index.html?com/bigdata/rdf/sail/webapp/lbs/AbstractHostLBSPolicy.html" target="_top">Frames</a></li>
<li><a href="AbstractHostLBSPolicy.html" target="_top">No Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../../../allclasses-noframe.html">All Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<div>
<ul class="subNavList">
<li>Summary:&nbsp;</li>
<li><a href="#nested_class_summary">Nested</a>&nbsp;|&nbsp;</li>
<li><a href="#fields_inherited_from_class_com.bigdata.rdf.sail.webapp.lbs.AbstractLBSPolicy">Field</a>&nbsp;|&nbsp;</li>
<li><a href="#constructor_summary">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_summary">Method</a></li>
</ul>
<ul class="subNavList">
<li>Detail:&nbsp;</li>
<li>Field&nbsp;|&nbsp;</li>
<li><a href="#constructor_detail">Constr</a>&nbsp;|&nbsp;</li>
<li><a href="#method_detail">Method</a></li>
</ul>
</div>
<a name="skip-navbar_bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>Copyright &#169; 2006&#x2013;2016 <a href="https://www.blazegraph.com/">SYSTAP, LLC DBA Blazegraph</a>. All rights reserved.</small></p>
</body>
</html>
